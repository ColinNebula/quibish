/*! For license information please see main.2bc51456.js.LICENSE.txt */
(()=>{var e={2:function(e,t,n){!function(){var t;e.exports=(t=n(488),function(){var e=t,n=e.lib,a=n.WordArray,s=n.Hasher,r=e.algo,o=[],i=r.SHA1=s.extend({_doReset:function(){this._hash=new a.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var n=this._hash.words,a=n[0],s=n[1],r=n[2],i=n[3],l=n[4],c=0;c<80;c++){if(c<16)o[c]=0|e[t+c];else{var u=o[c-3]^o[c-8]^o[c-14]^o[c-16];o[c]=u<<1|u>>>31}var d=(a<<5|a>>>27)+l+o[c];d+=c<20?1518500249+(s&r|~s&i):c<40?1859775393+(s^r^i):c<60?(s&r|s&i|r&i)-1894007588:(s^r^i)-899497514,l=i,i=r,r=s<<30|s>>>2,s=a,a=d}n[0]=n[0]+a|0,n[1]=n[1]+s|0,n[2]=n[2]+r|0,n[3]=n[3]+i|0,n[4]=n[4]+l|0},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,a=8*e.sigBytes;return t[a>>>5]|=128<<24-a%32,t[14+(a+64>>>9<<4)]=Math.floor(n/4294967296),t[15+(a+64>>>9<<4)]=n,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=s.clone.call(this);return e._hash=this._hash.clone(),e}});e.SHA1=s._createHelper(i),e.HmacSHA1=s._createHmacHelper(i)}(),t.SHA1)}()},4:(e,t,n)=>{"use strict";var a=n(853),s=n(43),r=n(950);function o(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function l(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function c(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function u(e){if(l(e)!==e)throw Error(o(188))}function d(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=d(e)))return t;e=e.sibling}return null}var h=Object.assign,m=Symbol.for("react.element"),p=Symbol.for("react.transitional.element"),f=Symbol.for("react.portal"),g=Symbol.for("react.fragment"),v=Symbol.for("react.strict_mode"),y=Symbol.for("react.profiler"),b=Symbol.for("react.provider"),x=Symbol.for("react.consumer"),w=Symbol.for("react.context"),S=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),j=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),C=Symbol.for("react.lazy");Symbol.for("react.scope");var E=Symbol.for("react.activity");Symbol.for("react.legacy_hidden"),Symbol.for("react.tracing_marker");var T=Symbol.for("react.memo_cache_sentinel");Symbol.for("react.view_transition");var A=Symbol.iterator;function _(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=A&&e[A]||e["@@iterator"])?e:null}var I=Symbol.for("react.client.reference");function P(e){if(null==e)return null;if("function"===typeof e)return e.$$typeof===I?null:e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case g:return"Fragment";case y:return"Profiler";case v:return"StrictMode";case k:return"Suspense";case j:return"SuspenseList";case E:return"Activity"}if("object"===typeof e)switch(e.$$typeof){case f:return"Portal";case w:return(e.displayName||"Context")+".Provider";case x:return(e._context.displayName||"Context")+".Consumer";case S:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case N:return null!==(t=e.displayName||null)?t:P(e.type)||"Memo";case C:t=e._payload,e=e._init;try{return P(e(t))}catch(n){}}return null}var D=Array.isArray,M=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,z=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,R={pending:!1,data:null,method:null,action:null},L=[],F=-1;function O(e){return{current:e}}function U(e){0>F||(e.current=L[F],L[F]=null,F--)}function B(e,t){F++,L[F]=e.current,e.current=t}var H=O(null),q=O(null),W=O(null),V=O(null);function K(e,t){switch(B(W,t),B(q,e),B(H,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?sd(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)e=rd(t=sd(t),e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}U(H),B(H,e)}function G(){U(H),U(q),U(W)}function $(e){null!==e.memoizedState&&B(V,e);var t=H.current,n=rd(t,e.type);t!==n&&(B(q,e),B(H,n))}function Y(e){q.current===e&&(U(H),U(q)),V.current===e&&(U(V),$d._currentValue=R)}var Q=Object.prototype.hasOwnProperty,J=a.unstable_scheduleCallback,X=a.unstable_cancelCallback,Z=a.unstable_shouldYield,ee=a.unstable_requestPaint,te=a.unstable_now,ne=a.unstable_getCurrentPriorityLevel,ae=a.unstable_ImmediatePriority,se=a.unstable_UserBlockingPriority,re=a.unstable_NormalPriority,oe=a.unstable_LowPriority,ie=a.unstable_IdlePriority,le=a.log,ce=a.unstable_setDisableYieldValue,ue=null,de=null;function he(e){if("function"===typeof le&&ce(e),de&&"function"===typeof de.setStrictMode)try{de.setStrictMode(ue,e)}catch(t){}}var me=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(pe(e)/fe|0)|0},pe=Math.log,fe=Math.LN2;var ge=256,ve=4194304;function ye(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194048&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function be(e,t,n){var a=e.pendingLanes;if(0===a)return 0;var s=0,r=e.suspendedLanes,o=e.pingedLanes;e=e.warmLanes;var i=134217727&a;return 0!==i?0!==(a=i&~r)?s=ye(a):0!==(o&=i)?s=ye(o):n||0!==(n=i&~e)&&(s=ye(n)):0!==(i=a&~r)?s=ye(i):0!==o?s=ye(o):n||0!==(n=a&~e)&&(s=ye(n)),0===s?0:0!==t&&t!==s&&0===(t&r)&&((r=s&-s)>=(n=t&-t)||32===r&&0!==(4194048&n))?t:s}function xe(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function we(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function Se(){var e=ge;return 0===(4194048&(ge<<=1))&&(ge=256),e}function ke(){var e=ve;return 0===(62914560&(ve<<=1))&&(ve=4194304),e}function je(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Ne(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Ce(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var a=31-me(t);e.entangledLanes|=t,e.entanglements[a]=1073741824|e.entanglements[a]|4194090&n}function Ee(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var a=31-me(n),s=1<<a;s&t|e[a]&t&&(e[a]|=t),n&=~s}}function Te(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Ae(e){return 2<(e&=-e)?8<e?0!==(134217727&e)?32:268435456:8:2}function _e(){var e=z.p;return 0!==e?e:void 0===(e=window.event)?32:ch(e.type)}var Ie=Math.random().toString(36).slice(2),Pe="__reactFiber$"+Ie,De="__reactProps$"+Ie,Me="__reactContainer$"+Ie,ze="__reactEvents$"+Ie,Re="__reactListeners$"+Ie,Le="__reactHandles$"+Ie,Fe="__reactResources$"+Ie,Oe="__reactMarker$"+Ie;function Ue(e){delete e[Pe],delete e[De],delete e[ze],delete e[Re],delete e[Le]}function Be(e){var t=e[Pe];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Me]||n[Pe]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=bd(e);null!==e;){if(n=e[Pe])return n;e=bd(e)}return t}n=(e=n).parentNode}return null}function He(e){if(e=e[Pe]||e[Me]){var t=e.tag;if(5===t||6===t||13===t||26===t||27===t||3===t)return e}return null}function qe(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(o(33))}function We(e){var t=e[Fe];return t||(t=e[Fe]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Ve(e){e[Oe]=!0}var Ke=new Set,Ge={};function $e(e,t){Ye(e,t),Ye(e+"Capture",t)}function Ye(e,t){for(Ge[e]=t,e=0;e<t.length;e++)Ke.add(t[e])}var Qe,Je,Xe=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ze={},et={};function tt(e,t,n){if(s=t,Q.call(et,s)||!Q.call(Ze,s)&&(Xe.test(s)?et[s]=!0:(Ze[s]=!0,0)))if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":return void e.removeAttribute(t);case"boolean":var a=t.toLowerCase().slice(0,5);if("data-"!==a&&"aria-"!==a)return void e.removeAttribute(t)}e.setAttribute(t,""+n)}var s}function nt(e,t,n){if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(t)}e.setAttribute(t,""+n)}}function at(e,t,n,a){if(null===a)e.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(n)}e.setAttributeNS(t,n,""+a)}}function st(e){if(void 0===Qe)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Qe=t&&t[1]||"",Je=-1<n.stack.indexOf("\n    at")?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+Qe+e+Je}var rt=!1;function ot(e,t){if(!e||rt)return"";rt=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var a={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(s){var a=s}Reflect.construct(e,[],n)}else{try{n.call()}catch(r){a=r}e.call(n.prototype)}}else{try{throw Error()}catch(o){a=o}(n=e())&&"function"===typeof n.catch&&n.catch(function(){})}}catch(i){if(i&&a&&"string"===typeof i.stack)return[i.stack,a.stack]}return[null,null]}};a.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var s=Object.getOwnPropertyDescriptor(a.DetermineComponentFrameRoot,"name");s&&s.configurable&&Object.defineProperty(a.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var r=a.DetermineComponentFrameRoot(),o=r[0],i=r[1];if(o&&i){var l=o.split("\n"),c=i.split("\n");for(s=a=0;a<l.length&&!l[a].includes("DetermineComponentFrameRoot");)a++;for(;s<c.length&&!c[s].includes("DetermineComponentFrameRoot");)s++;if(a===l.length||s===c.length)for(a=l.length-1,s=c.length-1;1<=a&&0<=s&&l[a]!==c[s];)s--;for(;1<=a&&0<=s;a--,s--)if(l[a]!==c[s]){if(1!==a||1!==s)do{if(a--,0>--s||l[a]!==c[s]){var u="\n"+l[a].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=a&&0<=s);break}}}finally{rt=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?st(n):""}function it(e){switch(e.tag){case 26:case 27:case 5:return st(e.type);case 16:return st("Lazy");case 13:return st("Suspense");case 19:return st("SuspenseList");case 0:case 15:return ot(e.type,!1);case 11:return ot(e.type.render,!1);case 1:return ot(e.type,!0);case 31:return st("Activity");default:return""}}function lt(e){try{var t="";do{t+=it(e),e=e.return}while(e);return t}catch(n){return"\nError generating stack: "+n.message+"\n"+n.stack}}function ct(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function ut(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function dt(e){e._valueTracker||(e._valueTracker=function(e){var t=ut(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),a=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var s=n.get,r=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(e){a=""+e,r.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return a},setValue:function(e){a=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function ht(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),a="";return e&&(a=ut(e)?e.checked?"true":"false":e.value),(e=a)!==n&&(t.setValue(e),!0)}function mt(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}var pt=/[\n"\\]/g;function ft(e){return e.replace(pt,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function gt(e,t,n,a,s,r,o,i){e.name="",null!=o&&"function"!==typeof o&&"symbol"!==typeof o&&"boolean"!==typeof o?e.type=o:e.removeAttribute("type"),null!=t?"number"===o?(0===t&&""===e.value||e.value!=t)&&(e.value=""+ct(t)):e.value!==""+ct(t)&&(e.value=""+ct(t)):"submit"!==o&&"reset"!==o||e.removeAttribute("value"),null!=t?yt(e,o,ct(t)):null!=n?yt(e,o,ct(n)):null!=a&&e.removeAttribute("value"),null==s&&null!=r&&(e.defaultChecked=!!r),null!=s&&(e.checked=s&&"function"!==typeof s&&"symbol"!==typeof s),null!=i&&"function"!==typeof i&&"symbol"!==typeof i&&"boolean"!==typeof i?e.name=""+ct(i):e.removeAttribute("name")}function vt(e,t,n,a,s,r,o,i){if(null!=r&&"function"!==typeof r&&"symbol"!==typeof r&&"boolean"!==typeof r&&(e.type=r),null!=t||null!=n){if(!("submit"!==r&&"reset"!==r||void 0!==t&&null!==t))return;n=null!=n?""+ct(n):"",t=null!=t?""+ct(t):n,i||t===e.value||(e.value=t),e.defaultValue=t}a="function"!==typeof(a=null!=a?a:s)&&"symbol"!==typeof a&&!!a,e.checked=i?e.checked:!!a,e.defaultChecked=!!a,null!=o&&"function"!==typeof o&&"symbol"!==typeof o&&"boolean"!==typeof o&&(e.name=o)}function yt(e,t,n){"number"===t&&mt(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function bt(e,t,n,a){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&a&&(e[n].defaultSelected=!0)}else{for(n=""+ct(n),t=null,s=0;s<e.length;s++){if(e[s].value===n)return e[s].selected=!0,void(a&&(e[s].defaultSelected=!0));null!==t||e[s].disabled||(t=e[s])}null!==t&&(t.selected=!0)}}function xt(e,t,n){null==t||((t=""+ct(t))!==e.value&&(e.value=t),null!=n)?e.defaultValue=null!=n?""+ct(n):"":e.defaultValue!==t&&(e.defaultValue=t)}function wt(e,t,n,a){if(null==t){if(null!=a){if(null!=n)throw Error(o(92));if(D(a)){if(1<a.length)throw Error(o(93));a=a[0]}n=a}null==n&&(n=""),t=n}n=ct(t),e.defaultValue=n,(a=e.textContent)===n&&""!==a&&null!==a&&(e.value=a)}function St(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var kt=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function jt(e,t,n){var a=0===t.indexOf("--");null==n||"boolean"===typeof n||""===n?a?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":a?e.setProperty(t,n):"number"!==typeof n||0===n||kt.has(t)?"float"===t?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function Nt(e,t,n){if(null!=t&&"object"!==typeof t)throw Error(o(62));if(e=e.style,null!=n){for(var a in n)!n.hasOwnProperty(a)||null!=t&&t.hasOwnProperty(a)||(0===a.indexOf("--")?e.setProperty(a,""):"float"===a?e.cssFloat="":e[a]="");for(var s in t)a=t[s],t.hasOwnProperty(s)&&n[s]!==a&&jt(e,s,a)}else for(var r in t)t.hasOwnProperty(r)&&jt(e,r,t[r])}function Ct(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Et=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Tt=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function At(e){return Tt.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var _t=null;function It(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Pt=null,Dt=null;function Mt(e){var t=He(e);if(t&&(e=t.stateNode)){var n=e[De]||null;e:switch(e=t.stateNode,t.type){case"input":if(gt(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+ft(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var a=n[t];if(a!==e&&a.form===e.form){var s=a[De]||null;if(!s)throw Error(o(90));gt(a,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name)}}for(t=0;t<n.length;t++)(a=n[t]).form===e.form&&ht(a)}break e;case"textarea":xt(e,n.value,n.defaultValue);break e;case"select":null!=(t=n.value)&&bt(e,!!n.multiple,t,!1)}}}var zt=!1;function Rt(e,t,n){if(zt)return e(t,n);zt=!0;try{return e(t)}finally{if(zt=!1,(null!==Pt||null!==Dt)&&(Bc(),Pt&&(t=Pt,e=Dt,Dt=Pt=null,Mt(t),e)))for(t=0;t<e.length;t++)Mt(e[t])}}function Lt(e,t){var n=e.stateNode;if(null===n)return null;var a=n[De]||null;if(null===a)return null;n=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(a=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!a;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var Ft=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),Ot=!1;if(Ft)try{var Ut={};Object.defineProperty(Ut,"passive",{get:function(){Ot=!0}}),window.addEventListener("test",Ut,Ut),window.removeEventListener("test",Ut,Ut)}catch(Dh){Ot=!1}var Bt=null,Ht=null,qt=null;function Wt(){if(qt)return qt;var e,t,n=Ht,a=n.length,s="value"in Bt?Bt.value:Bt.textContent,r=s.length;for(e=0;e<a&&n[e]===s[e];e++);var o=a-e;for(t=1;t<=o&&n[a-t]===s[r-t];t++);return qt=s.slice(e,1<t?1-t:void 0)}function Vt(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Kt(){return!0}function Gt(){return!1}function $t(e){function t(t,n,a,s,r){for(var o in this._reactName=t,this._targetInst=a,this.type=n,this.nativeEvent=s,this.target=r,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(s):s[o]);return this.isDefaultPrevented=(null!=s.defaultPrevented?s.defaultPrevented:!1===s.returnValue)?Kt:Gt,this.isPropagationStopped=Gt,this}return h(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Kt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Kt)},persist:function(){},isPersistent:Kt}),t}var Yt,Qt,Jt,Xt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Zt=$t(Xt),en=h({},Xt,{view:0,detail:0}),tn=$t(en),nn=h({},en,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:pn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Jt&&(Jt&&"mousemove"===e.type?(Yt=e.screenX-Jt.screenX,Qt=e.screenY-Jt.screenY):Qt=Yt=0,Jt=e),Yt)},movementY:function(e){return"movementY"in e?e.movementY:Qt}}),an=$t(nn),sn=$t(h({},nn,{dataTransfer:0})),rn=$t(h({},en,{relatedTarget:0})),on=$t(h({},Xt,{animationName:0,elapsedTime:0,pseudoElement:0})),ln=$t(h({},Xt,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),cn=$t(h({},Xt,{data:0})),un={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},dn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function mn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=hn[e])&&!!t[e]}function pn(){return mn}var fn=$t(h({},en,{key:function(e){if(e.key){var t=un[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Vt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?dn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:pn,charCode:function(e){return"keypress"===e.type?Vt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Vt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),gn=$t(h({},nn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),vn=$t(h({},en,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:pn})),yn=$t(h({},Xt,{propertyName:0,elapsedTime:0,pseudoElement:0})),bn=$t(h({},nn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),xn=$t(h({},Xt,{newState:0,oldState:0})),wn=[9,13,27,32],Sn=Ft&&"CompositionEvent"in window,kn=null;Ft&&"documentMode"in document&&(kn=document.documentMode);var jn=Ft&&"TextEvent"in window&&!kn,Nn=Ft&&(!Sn||kn&&8<kn&&11>=kn),Cn=String.fromCharCode(32),En=!1;function Tn(e,t){switch(e){case"keyup":return-1!==wn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function An(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var _n=!1;var In={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Pn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!In[e.type]:"textarea"===t}function Dn(e,t,n,a){Pt?Dt?Dt.push(a):Dt=[a]:Pt=a,0<(t=Wu(t,"onChange")).length&&(n=new Zt("onChange","change",null,n,a),e.push({event:n,listeners:t}))}var Mn=null,zn=null;function Rn(e){Ru(e,0)}function Ln(e){if(ht(qe(e)))return e}function Fn(e,t){if("change"===e)return t}var On=!1;if(Ft){var Un;if(Ft){var Bn="oninput"in document;if(!Bn){var Hn=document.createElement("div");Hn.setAttribute("oninput","return;"),Bn="function"===typeof Hn.oninput}Un=Bn}else Un=!1;On=Un&&(!document.documentMode||9<document.documentMode)}function qn(){Mn&&(Mn.detachEvent("onpropertychange",Wn),zn=Mn=null)}function Wn(e){if("value"===e.propertyName&&Ln(zn)){var t=[];Dn(t,zn,e,It(e)),Rt(Rn,t)}}function Vn(e,t,n){"focusin"===e?(qn(),zn=n,(Mn=t).attachEvent("onpropertychange",Wn)):"focusout"===e&&qn()}function Kn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Ln(zn)}function Gn(e,t){if("click"===e)return Ln(t)}function $n(e,t){if("input"===e||"change"===e)return Ln(t)}var Yn="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function Qn(e,t){if(Yn(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),a=Object.keys(t);if(n.length!==a.length)return!1;for(a=0;a<n.length;a++){var s=n[a];if(!Q.call(t,s)||!Yn(e[s],t[s]))return!1}return!0}function Jn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Xn(e,t){var n,a=Jn(e);for(e=0;a;){if(3===a.nodeType){if(n=e+a.textContent.length,e<=t&&n>=t)return{node:a,offset:t-e};e=n}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Jn(a)}}function Zn(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?Zn(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function ea(e){for(var t=mt((e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window).document);t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(a){n=!1}if(!n)break;t=mt((e=t.contentWindow).document)}return t}function ta(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var na=Ft&&"documentMode"in document&&11>=document.documentMode,aa=null,sa=null,ra=null,oa=!1;function ia(e,t,n){var a=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;oa||null==aa||aa!==mt(a)||("selectionStart"in(a=aa)&&ta(a)?a={start:a.selectionStart,end:a.selectionEnd}:a={anchorNode:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset},ra&&Qn(ra,a)||(ra=a,0<(a=Wu(sa,"onSelect")).length&&(t=new Zt("onSelect","select",null,t,n),e.push({event:t,listeners:a}),t.target=aa)))}function la(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var ca={animationend:la("Animation","AnimationEnd"),animationiteration:la("Animation","AnimationIteration"),animationstart:la("Animation","AnimationStart"),transitionrun:la("Transition","TransitionRun"),transitionstart:la("Transition","TransitionStart"),transitioncancel:la("Transition","TransitionCancel"),transitionend:la("Transition","TransitionEnd")},ua={},da={};function ha(e){if(ua[e])return ua[e];if(!ca[e])return e;var t,n=ca[e];for(t in n)if(n.hasOwnProperty(t)&&t in da)return ua[e]=n[t];return e}Ft&&(da=document.createElement("div").style,"AnimationEvent"in window||(delete ca.animationend.animation,delete ca.animationiteration.animation,delete ca.animationstart.animation),"TransitionEvent"in window||delete ca.transitionend.transition);var ma=ha("animationend"),pa=ha("animationiteration"),fa=ha("animationstart"),ga=ha("transitionrun"),va=ha("transitionstart"),ya=ha("transitioncancel"),ba=ha("transitionend"),xa=new Map,wa="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Sa(e,t){xa.set(e,t),$e(t,[e])}wa.push("scrollEnd");var ka=new WeakMap;function ja(e,t){if("object"===typeof e&&null!==e){var n=ka.get(e);return void 0!==n?n:(t={value:e,source:t,stack:lt(t)},ka.set(e,t),t)}return{value:e,source:t,stack:lt(t)}}var Na=[],Ca=0,Ea=0;function Ta(){for(var e=Ca,t=Ea=Ca=0;t<e;){var n=Na[t];Na[t++]=null;var a=Na[t];Na[t++]=null;var s=Na[t];Na[t++]=null;var r=Na[t];if(Na[t++]=null,null!==a&&null!==s){var o=a.pending;null===o?s.next=s:(s.next=o.next,o.next=s),a.pending=s}0!==r&&Pa(n,s,r)}}function Aa(e,t,n,a){Na[Ca++]=e,Na[Ca++]=t,Na[Ca++]=n,Na[Ca++]=a,Ea|=a,e.lanes|=a,null!==(e=e.alternate)&&(e.lanes|=a)}function _a(e,t,n,a){return Aa(e,t,n,a),Da(e)}function Ia(e,t){return Aa(e,null,null,t),Da(e)}function Pa(e,t,n){e.lanes|=n;var a=e.alternate;null!==a&&(a.lanes|=n);for(var s=!1,r=e.return;null!==r;)r.childLanes|=n,null!==(a=r.alternate)&&(a.childLanes|=n),22===r.tag&&(null===(e=r.stateNode)||1&e._visibility||(s=!0)),e=r,r=r.return;return 3===e.tag?(r=e.stateNode,s&&null!==t&&(s=31-me(n),null===(a=(e=r.hiddenUpdates)[s])?e[s]=[t]:a.push(t),t.lane=536870912|n),r):null}function Da(e){if(50<Pc)throw Pc=0,Dc=null,Error(o(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var Ma={};function za(e,t,n,a){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ra(e,t,n,a){return new za(e,t,n,a)}function La(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Fa(e,t){var n=e.alternate;return null===n?((n=Ra(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=65011712&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function Oa(e,t){e.flags&=65011714;var n=e.alternate;return null===n?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Ua(e,t,n,a,s,r){var i=0;if(a=e,"function"===typeof e)La(e)&&(i=1);else if("string"===typeof e)i=function(e,t,n){if(1===n||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!==typeof t.precedence||"string"!==typeof t.href||""===t.href)break;return!0;case"link":if("string"!==typeof t.rel||"string"!==typeof t.href||""===t.href||t.onLoad||t.onError)break;return"stylesheet"!==t.rel||(e=t.disabled,"string"===typeof t.precedence&&null==e);case"script":if(t.async&&"function"!==typeof t.async&&"symbol"!==typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"===typeof t.src)return!0}return!1}(e,n,H.current)?26:"html"===e||"head"===e||"body"===e?27:5;else e:switch(e){case E:return(e=Ra(31,n,t,s)).elementType=E,e.lanes=r,e;case g:return Ba(n.children,s,r,t);case v:i=8,s|=24;break;case y:return(e=Ra(12,n,t,2|s)).elementType=y,e.lanes=r,e;case k:return(e=Ra(13,n,t,s)).elementType=k,e.lanes=r,e;case j:return(e=Ra(19,n,t,s)).elementType=j,e.lanes=r,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case b:case w:i=10;break e;case x:i=9;break e;case S:i=11;break e;case N:i=14;break e;case C:i=16,a=null;break e}i=29,n=Error(o(130,null===e?"null":typeof e,"")),a=null}return(t=Ra(i,n,t,s)).elementType=e,t.type=a,t.lanes=r,t}function Ba(e,t,n,a){return(e=Ra(7,e,a,t)).lanes=n,e}function Ha(e,t,n){return(e=Ra(6,e,null,t)).lanes=n,e}function qa(e,t,n){return(t=Ra(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Wa=[],Va=0,Ka=null,Ga=0,$a=[],Ya=0,Qa=null,Ja=1,Xa="";function Za(e,t){Wa[Va++]=Ga,Wa[Va++]=Ka,Ka=e,Ga=t}function es(e,t,n){$a[Ya++]=Ja,$a[Ya++]=Xa,$a[Ya++]=Qa,Qa=e;var a=Ja;e=Xa;var s=32-me(a)-1;a&=~(1<<s),n+=1;var r=32-me(t)+s;if(30<r){var o=s-s%5;r=(a&(1<<o)-1).toString(32),a>>=o,s-=o,Ja=1<<32-me(t)+s|n<<s|a,Xa=r+e}else Ja=1<<r|n<<s|a,Xa=e}function ts(e){null!==e.return&&(Za(e,1),es(e,1,0))}function ns(e){for(;e===Ka;)Ka=Wa[--Va],Wa[Va]=null,Ga=Wa[--Va],Wa[Va]=null;for(;e===Qa;)Qa=$a[--Ya],$a[Ya]=null,Xa=$a[--Ya],$a[Ya]=null,Ja=$a[--Ya],$a[Ya]=null}var as=null,ss=null,rs=!1,os=null,is=!1,ls=Error(o(519));function cs(e){throw fs(ja(Error(o(418,"")),e)),ls}function us(e){var t=e.stateNode,n=e.type,a=e.memoizedProps;switch(t[Pe]=e,t[De]=a,n){case"dialog":Lu("cancel",t),Lu("close",t);break;case"iframe":case"object":case"embed":Lu("load",t);break;case"video":case"audio":for(n=0;n<Mu.length;n++)Lu(Mu[n],t);break;case"source":Lu("error",t);break;case"img":case"image":case"link":Lu("error",t),Lu("load",t);break;case"details":Lu("toggle",t);break;case"input":Lu("invalid",t),vt(t,a.value,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name,!0),dt(t);break;case"select":Lu("invalid",t);break;case"textarea":Lu("invalid",t),wt(t,a.value,a.defaultValue,a.children),dt(t)}"string"!==typeof(n=a.children)&&"number"!==typeof n&&"bigint"!==typeof n||t.textContent===""+n||!0===a.suppressHydrationWarning||Qu(t.textContent,n)?(null!=a.popover&&(Lu("beforetoggle",t),Lu("toggle",t)),null!=a.onScroll&&Lu("scroll",t),null!=a.onScrollEnd&&Lu("scrollend",t),null!=a.onClick&&(t.onclick=Ju),t=!0):t=!1,t||cs(e)}function ds(e){for(as=e.return;as;)switch(as.tag){case 5:case 13:return void(is=!1);case 27:case 3:return void(is=!0);default:as=as.return}}function hs(e){if(e!==as)return!1;if(!rs)return ds(e),rs=!0,!1;var t,n=e.tag;if((t=3!==n&&27!==n)&&((t=5===n)&&(t=!("form"!==(t=e.type)&&"button"!==t)||od(e.type,e.memoizedProps)),t=!t),t&&ss&&cs(e),ds(e),13===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,n=0;e;){if(8===e.nodeType)if("/$"===(t=e.data)){if(0===n){ss=vd(e.nextSibling);break e}n--}else"$"!==t&&"$!"!==t&&"$?"!==t||n++;e=e.nextSibling}ss=null}}else 27===n?(n=ss,md(e.type)?(e=yd,yd=null,ss=e):ss=n):ss=as?vd(e.stateNode.nextSibling):null;return!0}function ms(){ss=as=null,rs=!1}function ps(){var e=os;return null!==e&&(null===bc?bc=e:bc.push.apply(bc,e),os=null),e}function fs(e){null===os?os=[e]:os.push(e)}var gs=O(null),vs=null,ys=null;function bs(e,t,n){B(gs,t._currentValue),t._currentValue=n}function xs(e){e._currentValue=gs.current,U(gs)}function ws(e,t,n){for(;null!==e;){var a=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==a&&(a.childLanes|=t)):null!==a&&(a.childLanes&t)!==t&&(a.childLanes|=t),e===n)break;e=e.return}}function Ss(e,t,n,a){var s=e.child;for(null!==s&&(s.return=e);null!==s;){var r=s.dependencies;if(null!==r){var i=s.child;r=r.firstContext;e:for(;null!==r;){var l=r;r=s;for(var c=0;c<t.length;c++)if(l.context===t[c]){r.lanes|=n,null!==(l=r.alternate)&&(l.lanes|=n),ws(r.return,n,e),a||(i=null);break e}r=l.next}}else if(18===s.tag){if(null===(i=s.return))throw Error(o(341));i.lanes|=n,null!==(r=i.alternate)&&(r.lanes|=n),ws(i,n,e),i=null}else i=s.child;if(null!==i)i.return=s;else for(i=s;null!==i;){if(i===e){i=null;break}if(null!==(s=i.sibling)){s.return=i.return,i=s;break}i=i.return}s=i}}function ks(e,t,n,a){e=null;for(var s=t,r=!1;null!==s;){if(!r)if(0!==(524288&s.flags))r=!0;else if(0!==(262144&s.flags))break;if(10===s.tag){var i=s.alternate;if(null===i)throw Error(o(387));if(null!==(i=i.memoizedProps)){var l=s.type;Yn(s.pendingProps.value,i.value)||(null!==e?e.push(l):e=[l])}}else if(s===V.current){if(null===(i=s.alternate))throw Error(o(387));i.memoizedState.memoizedState!==s.memoizedState.memoizedState&&(null!==e?e.push($d):e=[$d])}s=s.return}null!==e&&Ss(t,e,n,a),t.flags|=262144}function js(e){for(e=e.firstContext;null!==e;){if(!Yn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Ns(e){vs=e,ys=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function Cs(e){return Ts(vs,e)}function Es(e,t){return null===vs&&Ns(e),Ts(e,t)}function Ts(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},null===ys){if(null===e)throw Error(o(308));ys=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else ys=ys.next=t;return n}var As="undefined"!==typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},_s=a.unstable_scheduleCallback,Is=a.unstable_NormalPriority,Ps={$$typeof:w,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ds(){return{controller:new As,data:new Map,refCount:0}}function Ms(e){e.refCount--,0===e.refCount&&_s(Is,function(){e.controller.abort()})}var zs=null,Rs=0,Ls=0,Fs=null;function Os(){if(0===--Rs&&null!==zs){null!==Fs&&(Fs.status="fulfilled");var e=zs;zs=null,Ls=0,Fs=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var Us=M.S;M.S=function(e,t){"object"===typeof t&&null!==t&&"function"===typeof t.then&&function(e,t){if(null===zs){var n=zs=[];Rs=0,Ls=Au(),Fs={status:"pending",value:void 0,then:function(e){n.push(e)}}}Rs++,t.then(Os,Os)}(0,t),null!==Us&&Us(e,t)};var Bs=O(null);function Hs(){var e=Bs.current;return null!==e?e:ac.pooledCache}function qs(e,t){B(Bs,null===t?Bs.current:t.pool)}function Ws(){var e=Hs();return null===e?null:{parent:Ps._currentValue,pool:e}}var Vs=Error(o(460)),Ks=Error(o(474)),Gs=Error(o(542)),$s={then:function(){}};function Ys(e){return"fulfilled"===(e=e.status)||"rejected"===e}function Qs(){}function Js(e,t,n){switch(void 0===(n=e[n])?e.push(t):n!==t&&(t.then(Qs,Qs),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw er(e=t.reason),e;default:if("string"===typeof t.status)t.then(Qs,Qs);else{if(null!==(e=ac)&&100<e.shellSuspendCounter)throw Error(o(482));(e=t).status="pending",e.then(function(e){if("pending"===t.status){var n=t;n.status="fulfilled",n.value=e}},function(e){if("pending"===t.status){var n=t;n.status="rejected",n.reason=e}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw er(e=t.reason),e}throw Xs=t,Vs}}var Xs=null;function Zs(){if(null===Xs)throw Error(o(459));var e=Xs;return Xs=null,e}function er(e){if(e===Vs||e===Gs)throw Error(o(483))}var tr=!1;function nr(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ar(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function sr(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function rr(e,t,n){var a=e.updateQueue;if(null===a)return null;if(a=a.shared,0!==(2&nc)){var s=a.pending;return null===s?t.next=t:(t.next=s.next,s.next=t),a.pending=t,t=Da(e),Pa(e,null,n),t}return Aa(e,a,t,n),Da(e)}function or(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194048&n))){var a=t.lanes;n|=a&=e.pendingLanes,t.lanes=n,Ee(e,n)}}function ir(e,t){var n=e.updateQueue,a=e.alternate;if(null!==a&&n===(a=a.updateQueue)){var s=null,r=null;if(null!==(n=n.firstBaseUpdate)){do{var o={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};null===r?s=r=o:r=r.next=o,n=n.next}while(null!==n);null===r?s=r=t:r=r.next=t}else s=r=t;return n={baseState:a.baseState,firstBaseUpdate:s,lastBaseUpdate:r,shared:a.shared,callbacks:a.callbacks},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var lr=!1;function cr(){if(lr){if(null!==Fs)throw Fs}}function ur(e,t,n,a){lr=!1;var s=e.updateQueue;tr=!1;var r=s.firstBaseUpdate,o=s.lastBaseUpdate,i=s.shared.pending;if(null!==i){s.shared.pending=null;var l=i,c=l.next;l.next=null,null===o?r=c:o.next=c,o=l;var u=e.alternate;null!==u&&((i=(u=u.updateQueue).lastBaseUpdate)!==o&&(null===i?u.firstBaseUpdate=c:i.next=c,u.lastBaseUpdate=l))}if(null!==r){var d=s.baseState;for(o=0,u=c=l=null,i=r;;){var m=-536870913&i.lane,p=m!==i.lane;if(p?(rc&m)===m:(a&m)===m){0!==m&&m===Ls&&(lr=!0),null!==u&&(u=u.next={lane:0,tag:i.tag,payload:i.payload,callback:null,next:null});e:{var f=e,g=i;m=t;var v=n;switch(g.tag){case 1:if("function"===typeof(f=g.payload)){d=f.call(v,d,m);break e}d=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null===(m="function"===typeof(f=g.payload)?f.call(v,d,m):f)||void 0===m)break e;d=h({},d,m);break e;case 2:tr=!0}}null!==(m=i.callback)&&(e.flags|=64,p&&(e.flags|=8192),null===(p=s.callbacks)?s.callbacks=[m]:p.push(m))}else p={lane:m,tag:i.tag,payload:i.payload,callback:i.callback,next:null},null===u?(c=u=p,l=d):u=u.next=p,o|=m;if(null===(i=i.next)){if(null===(i=s.shared.pending))break;i=(p=i).next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}null===u&&(l=d),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=u,null===r&&(s.shared.lanes=0),mc|=o,e.lanes=o,e.memoizedState=d}}function dr(e,t){if("function"!==typeof e)throw Error(o(191,e));e.call(t)}function hr(e,t){var n=e.callbacks;if(null!==n)for(e.callbacks=null,e=0;e<n.length;e++)dr(n[e],t)}var mr=O(null),pr=O(0);function fr(e,t){B(pr,e=dc),B(mr,t),dc=e|t.baseLanes}function gr(){B(pr,dc),B(mr,mr.current)}function vr(){dc=pr.current,U(mr),U(pr)}var yr=0,br=null,xr=null,wr=null,Sr=!1,kr=!1,jr=!1,Nr=0,Cr=0,Er=null,Tr=0;function Ar(){throw Error(o(321))}function _r(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Yn(e[n],t[n]))return!1;return!0}function Ir(e,t,n,a,s,r){return yr=r,br=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,M.H=null===e||null===e.memoizedState?Ko:Go,jr=!1,r=n(a,s),jr=!1,kr&&(r=Dr(t,n,a,s)),Pr(e),r}function Pr(e){M.H=Vo;var t=null!==xr&&null!==xr.next;if(yr=0,wr=xr=br=null,Sr=!1,Cr=0,Er=null,t)throw Error(o(300));null===e||Ei||null!==(e=e.dependencies)&&js(e)&&(Ei=!0)}function Dr(e,t,n,a){br=e;var s=0;do{if(kr&&(Er=null),Cr=0,kr=!1,25<=s)throw Error(o(301));if(s+=1,wr=xr=null,null!=e.updateQueue){var r=e.updateQueue;r.lastEffect=null,r.events=null,r.stores=null,null!=r.memoCache&&(r.memoCache.index=0)}M.H=$o,r=t(n,a)}while(kr);return r}function Mr(){var e=M.H,t=e.useState()[0];return t="function"===typeof t.then?Ur(t):t,e=e.useState()[0],(null!==xr?xr.memoizedState:null)!==e&&(br.flags|=1024),t}function zr(){var e=0!==Nr;return Nr=0,e}function Rr(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function Lr(e){if(Sr){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}Sr=!1}yr=0,wr=xr=br=null,kr=!1,Cr=Nr=0,Er=null}function Fr(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===wr?br.memoizedState=wr=e:wr=wr.next=e,wr}function Or(){if(null===xr){var e=br.alternate;e=null!==e?e.memoizedState:null}else e=xr.next;var t=null===wr?br.memoizedState:wr.next;if(null!==t)wr=t,xr=e;else{if(null===e){if(null===br.alternate)throw Error(o(467));throw Error(o(310))}e={memoizedState:(xr=e).memoizedState,baseState:xr.baseState,baseQueue:xr.baseQueue,queue:xr.queue,next:null},null===wr?br.memoizedState=wr=e:wr=wr.next=e}return wr}function Ur(e){var t=Cr;return Cr+=1,null===Er&&(Er=[]),e=Js(Er,e,t),t=br,null===(null===wr?t.memoizedState:wr.next)&&(t=t.alternate,M.H=null===t||null===t.memoizedState?Ko:Go),e}function Br(e){if(null!==e&&"object"===typeof e){if("function"===typeof e.then)return Ur(e);if(e.$$typeof===w)return Cs(e)}throw Error(o(438,String(e)))}function Hr(e){var t=null,n=br.updateQueue;if(null!==n&&(t=n.memoCache),null==t){var a=br.alternate;null!==a&&(null!==(a=a.updateQueue)&&(null!=(a=a.memoCache)&&(t={data:a.data.map(function(e){return e.slice()}),index:0})))}if(null==t&&(t={data:[],index:0}),null===n&&(n={lastEffect:null,events:null,stores:null,memoCache:null},br.updateQueue=n),n.memoCache=t,void 0===(n=t.data[t.index]))for(n=t.data[t.index]=Array(e),a=0;a<e;a++)n[a]=T;return t.index++,n}function qr(e,t){return"function"===typeof t?t(e):t}function Wr(e){return Vr(Or(),xr,e)}function Vr(e,t,n){var a=e.queue;if(null===a)throw Error(o(311));a.lastRenderedReducer=n;var s=e.baseQueue,r=a.pending;if(null!==r){if(null!==s){var i=s.next;s.next=r.next,r.next=i}t.baseQueue=s=r,a.pending=null}if(r=e.baseState,null===s)e.memoizedState=r;else{var l=i=null,c=null,u=t=s.next,d=!1;do{var h=-536870913&u.lane;if(h!==u.lane?(rc&h)===h:(yr&h)===h){var m=u.revertLane;if(0===m)null!==c&&(c=c.next={lane:0,revertLane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),h===Ls&&(d=!0);else{if((yr&m)===m){u=u.next,m===Ls&&(d=!0);continue}h={lane:0,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=h,i=r):c=c.next=h,br.lanes|=m,mc|=m}h=u.action,jr&&n(r,h),r=u.hasEagerState?u.eagerState:n(r,h)}else m={lane:h,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=m,i=r):c=c.next=m,br.lanes|=h,mc|=h;u=u.next}while(null!==u&&u!==t);if(null===c?i=r:c.next=l,!Yn(r,e.memoizedState)&&(Ei=!0,d&&null!==(n=Fs)))throw n;e.memoizedState=r,e.baseState=i,e.baseQueue=c,a.lastRenderedState=r}return null===s&&(a.lanes=0),[e.memoizedState,a.dispatch]}function Kr(e){var t=Or(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var a=n.dispatch,s=n.pending,r=t.memoizedState;if(null!==s){n.pending=null;var i=s=s.next;do{r=e(r,i.action),i=i.next}while(i!==s);Yn(r,t.memoizedState)||(Ei=!0),t.memoizedState=r,null===t.baseQueue&&(t.baseState=r),n.lastRenderedState=r}return[r,a]}function Gr(e,t,n){var a=br,s=Or(),r=rs;if(r){if(void 0===n)throw Error(o(407));n=n()}else n=t();var i=!Yn((xr||s).memoizedState,n);if(i&&(s.memoizedState=n,Ei=!0),s=s.queue,vo(2048,8,Qr.bind(null,a,s,e),[e]),s.getSnapshot!==t||i||null!==wr&&1&wr.memoizedState.tag){if(a.flags|=2048,po(9,{destroy:void 0,resource:void 0},Yr.bind(null,a,s,n,t),null),null===ac)throw Error(o(349));r||0!==(124&yr)||$r(a,t,n)}return n}function $r(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=br.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},br.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Yr(e,t,n,a){t.value=n,t.getSnapshot=a,Jr(t)&&Xr(e)}function Qr(e,t,n){return n(function(){Jr(t)&&Xr(e)})}function Jr(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Yn(e,n)}catch(a){return!0}}function Xr(e){var t=Ia(e,2);null!==t&&Rc(t,e,2)}function Zr(e){var t=Fr();if("function"===typeof e){var n=e;if(e=n(),jr){he(!0);try{n()}finally{he(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:qr,lastRenderedState:e},t}function eo(e,t,n,a){return e.baseState=n,Vr(e,xr,"function"===typeof a?a:qr)}function to(e,t,n,a,s){if(Ho(e))throw Error(o(485));if(null!==(e=t.action)){var r={payload:s,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){r.listeners.push(e)}};null!==M.T?n(!0):r.isTransition=!1,a(r),null===(n=t.pending)?(r.next=t.pending=r,no(t,r)):(r.next=n.next,t.pending=n.next=r)}}function no(e,t){var n=t.action,a=t.payload,s=e.state;if(t.isTransition){var r=M.T,o={};M.T=o;try{var i=n(s,a),l=M.S;null!==l&&l(o,i),ao(e,t,i)}catch(c){ro(e,t,c)}finally{M.T=r}}else try{ao(e,t,r=n(s,a))}catch(u){ro(e,t,u)}}function ao(e,t,n){null!==n&&"object"===typeof n&&"function"===typeof n.then?n.then(function(n){so(e,t,n)},function(n){return ro(e,t,n)}):so(e,t,n)}function so(e,t,n){t.status="fulfilled",t.value=n,oo(t),e.state=n,null!==(t=e.pending)&&((n=t.next)===t?e.pending=null:(n=n.next,t.next=n,no(e,n)))}function ro(e,t,n){var a=e.pending;if(e.pending=null,null!==a){a=a.next;do{t.status="rejected",t.reason=n,oo(t),t=t.next}while(t!==a)}e.action=null}function oo(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function io(e,t){return t}function lo(e,t){if(rs){var n=ac.formState;if(null!==n){e:{var a=br;if(rs){if(ss){t:{for(var s=ss,r=is;8!==s.nodeType;){if(!r){s=null;break t}if(null===(s=vd(s.nextSibling))){s=null;break t}}s="F!"===(r=s.data)||"F"===r?s:null}if(s){ss=vd(s.nextSibling),a="F!"===s.data;break e}}cs(a)}a=!1}a&&(t=n[0])}}return(n=Fr()).memoizedState=n.baseState=t,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:io,lastRenderedState:t},n.queue=a,n=Oo.bind(null,br,a),a.dispatch=n,a=Zr(!1),r=Bo.bind(null,br,!1,a.queue),s={state:t,dispatch:null,action:e,pending:null},(a=Fr()).queue=s,n=to.bind(null,br,s,r,n),s.dispatch=n,a.memoizedState=e,[t,n,!1]}function co(e){return uo(Or(),xr,e)}function uo(e,t,n){if(t=Vr(e,t,io)[0],e=Wr(qr)[0],"object"===typeof t&&null!==t&&"function"===typeof t.then)try{var a=Ur(t)}catch(o){if(o===Vs)throw Gs;throw o}else a=t;var s=(t=Or()).queue,r=s.dispatch;return n!==t.memoizedState&&(br.flags|=2048,po(9,{destroy:void 0,resource:void 0},ho.bind(null,s,n),null)),[a,r,e]}function ho(e,t){e.action=t}function mo(e){var t=Or(),n=xr;if(null!==n)return uo(t,n,e);Or(),t=t.memoizedState;var a=(n=Or()).queue.dispatch;return n.memoizedState=e,[t,a,!1]}function po(e,t,n,a){return e={tag:e,create:n,deps:a,inst:t,next:null},null===(t=br.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},br.updateQueue=t),null===(n=t.lastEffect)?t.lastEffect=e.next=e:(a=n.next,n.next=e,e.next=a,t.lastEffect=e),e}function fo(){return Or().memoizedState}function go(e,t,n,a){var s=Fr();a=void 0===a?null:a,br.flags|=e,s.memoizedState=po(1|t,{destroy:void 0,resource:void 0},n,a)}function vo(e,t,n,a){var s=Or();a=void 0===a?null:a;var r=s.memoizedState.inst;null!==xr&&null!==a&&_r(a,xr.memoizedState.deps)?s.memoizedState=po(t,r,n,a):(br.flags|=e,s.memoizedState=po(1|t,r,n,a))}function yo(e,t){go(8390656,8,e,t)}function bo(e,t){vo(2048,8,e,t)}function xo(e,t){return vo(4,2,e,t)}function wo(e,t){return vo(4,4,e,t)}function So(e,t){if("function"===typeof t){e=e();var n=t(e);return function(){"function"===typeof n?n():t(null)}}if(null!==t&&void 0!==t)return e=e(),t.current=e,function(){t.current=null}}function ko(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,vo(4,4,So.bind(null,t,e),n)}function jo(){}function No(e,t){var n=Or();t=void 0===t?null:t;var a=n.memoizedState;return null!==t&&_r(t,a[1])?a[0]:(n.memoizedState=[e,t],e)}function Co(e,t){var n=Or();t=void 0===t?null:t;var a=n.memoizedState;if(null!==t&&_r(t,a[1]))return a[0];if(a=e(),jr){he(!0);try{e()}finally{he(!1)}}return n.memoizedState=[a,t],a}function Eo(e,t,n){return void 0===n||0!==(1073741824&yr)?e.memoizedState=t:(e.memoizedState=n,e=zc(),br.lanes|=e,mc|=e,n)}function To(e,t,n,a){return Yn(n,t)?n:null!==mr.current?(e=Eo(e,n,a),Yn(e,t)||(Ei=!0),e):0===(42&yr)?(Ei=!0,e.memoizedState=n):(e=zc(),br.lanes|=e,mc|=e,t)}function Ao(e,t,n,a,s){var r=z.p;z.p=0!==r&&8>r?r:8;var o=M.T,i={};M.T=i,Bo(e,!1,t,n);try{var l=s(),c=M.S;if(null!==c&&c(i,l),null!==l&&"object"===typeof l&&"function"===typeof l.then)Uo(e,t,function(e,t){var n=[],a={status:"pending",value:null,reason:null,then:function(e){n.push(e)}};return e.then(function(){a.status="fulfilled",a.value=t;for(var e=0;e<n.length;e++)(0,n[e])(t)},function(e){for(a.status="rejected",a.reason=e,e=0;e<n.length;e++)(0,n[e])(void 0)}),a}(l,a),Mc());else Uo(e,t,a,Mc())}catch(u){Uo(e,t,{then:function(){},status:"rejected",reason:u},Mc())}finally{z.p=r,M.T=o}}function _o(){}function Io(e,t,n,a){if(5!==e.tag)throw Error(o(476));var s=Po(e).queue;Ao(e,s,t,R,null===n?_o:function(){return Do(e),n(a)})}function Po(e){var t=e.memoizedState;if(null!==t)return t;var n={};return(t={memoizedState:R,baseState:R,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:qr,lastRenderedState:R},next:null}).next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:qr,lastRenderedState:n},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function Do(e){Uo(e,Po(e).next.queue,{},Mc())}function Mo(){return Cs($d)}function zo(){return Or().memoizedState}function Ro(){return Or().memoizedState}function Lo(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var n=Mc(),a=rr(t,e=sr(n),n);return null!==a&&(Rc(a,t,n),or(a,t,n)),t={cache:Ds()},void(e.payload=t)}t=t.return}}function Fo(e,t,n){var a=Mc();n={lane:a,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},Ho(e)?qo(t,n):null!==(n=_a(e,t,n,a))&&(Rc(n,e,a),Wo(n,t,a))}function Oo(e,t,n){Uo(e,t,n,Mc())}function Uo(e,t,n,a){var s={lane:a,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ho(e))qo(t,s);else{var r=e.alternate;if(0===e.lanes&&(null===r||0===r.lanes)&&null!==(r=t.lastRenderedReducer))try{var o=t.lastRenderedState,i=r(o,n);if(s.hasEagerState=!0,s.eagerState=i,Yn(i,o))return Aa(e,t,s,0),null===ac&&Ta(),!1}catch(l){}if(null!==(n=_a(e,t,s,a)))return Rc(n,e,a),Wo(n,t,a),!0}return!1}function Bo(e,t,n,a){if(a={lane:2,revertLane:Au(),action:a,hasEagerState:!1,eagerState:null,next:null},Ho(e)){if(t)throw Error(o(479))}else null!==(t=_a(e,n,a,2))&&Rc(t,e,2)}function Ho(e){var t=e.alternate;return e===br||null!==t&&t===br}function qo(e,t){kr=Sr=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Wo(e,t,n){if(0!==(4194048&n)){var a=t.lanes;n|=a&=e.pendingLanes,t.lanes=n,Ee(e,n)}}var Vo={readContext:Cs,use:Br,useCallback:Ar,useContext:Ar,useEffect:Ar,useImperativeHandle:Ar,useLayoutEffect:Ar,useInsertionEffect:Ar,useMemo:Ar,useReducer:Ar,useRef:Ar,useState:Ar,useDebugValue:Ar,useDeferredValue:Ar,useTransition:Ar,useSyncExternalStore:Ar,useId:Ar,useHostTransitionStatus:Ar,useFormState:Ar,useActionState:Ar,useOptimistic:Ar,useMemoCache:Ar,useCacheRefresh:Ar},Ko={readContext:Cs,use:Br,useCallback:function(e,t){return Fr().memoizedState=[e,void 0===t?null:t],e},useContext:Cs,useEffect:yo,useImperativeHandle:function(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,go(4194308,4,So.bind(null,t,e),n)},useLayoutEffect:function(e,t){return go(4194308,4,e,t)},useInsertionEffect:function(e,t){go(4,2,e,t)},useMemo:function(e,t){var n=Fr();t=void 0===t?null:t;var a=e();if(jr){he(!0);try{e()}finally{he(!1)}}return n.memoizedState=[a,t],a},useReducer:function(e,t,n){var a=Fr();if(void 0!==n){var s=n(t);if(jr){he(!0);try{n(t)}finally{he(!1)}}}else s=t;return a.memoizedState=a.baseState=s,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:s},a.queue=e,e=e.dispatch=Fo.bind(null,br,e),[a.memoizedState,e]},useRef:function(e){return e={current:e},Fr().memoizedState=e},useState:function(e){var t=(e=Zr(e)).queue,n=Oo.bind(null,br,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:jo,useDeferredValue:function(e,t){return Eo(Fr(),e,t)},useTransition:function(){var e=Zr(!1);return e=Ao.bind(null,br,e.queue,!0,!1),Fr().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var a=br,s=Fr();if(rs){if(void 0===n)throw Error(o(407));n=n()}else{if(n=t(),null===ac)throw Error(o(349));0!==(124&rc)||$r(a,t,n)}s.memoizedState=n;var r={value:n,getSnapshot:t};return s.queue=r,yo(Qr.bind(null,a,r,e),[e]),a.flags|=2048,po(9,{destroy:void 0,resource:void 0},Yr.bind(null,a,r,n,t),null),n},useId:function(){var e=Fr(),t=ac.identifierPrefix;if(rs){var n=Xa;t="\xab"+t+"R"+(n=(Ja&~(1<<32-me(Ja)-1)).toString(32)+n),0<(n=Nr++)&&(t+="H"+n.toString(32)),t+="\xbb"}else t="\xab"+t+"r"+(n=Tr++).toString(32)+"\xbb";return e.memoizedState=t},useHostTransitionStatus:Mo,useFormState:lo,useActionState:lo,useOptimistic:function(e){var t=Fr();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=Bo.bind(null,br,!0,n),n.dispatch=t,[e,t]},useMemoCache:Hr,useCacheRefresh:function(){return Fr().memoizedState=Lo.bind(null,br)}},Go={readContext:Cs,use:Br,useCallback:No,useContext:Cs,useEffect:bo,useImperativeHandle:ko,useInsertionEffect:xo,useLayoutEffect:wo,useMemo:Co,useReducer:Wr,useRef:fo,useState:function(){return Wr(qr)},useDebugValue:jo,useDeferredValue:function(e,t){return To(Or(),xr.memoizedState,e,t)},useTransition:function(){var e=Wr(qr)[0],t=Or().memoizedState;return["boolean"===typeof e?e:Ur(e),t]},useSyncExternalStore:Gr,useId:zo,useHostTransitionStatus:Mo,useFormState:co,useActionState:co,useOptimistic:function(e,t){return eo(Or(),0,e,t)},useMemoCache:Hr,useCacheRefresh:Ro},$o={readContext:Cs,use:Br,useCallback:No,useContext:Cs,useEffect:bo,useImperativeHandle:ko,useInsertionEffect:xo,useLayoutEffect:wo,useMemo:Co,useReducer:Kr,useRef:fo,useState:function(){return Kr(qr)},useDebugValue:jo,useDeferredValue:function(e,t){var n=Or();return null===xr?Eo(n,e,t):To(n,xr.memoizedState,e,t)},useTransition:function(){var e=Kr(qr)[0],t=Or().memoizedState;return["boolean"===typeof e?e:Ur(e),t]},useSyncExternalStore:Gr,useId:zo,useHostTransitionStatus:Mo,useFormState:mo,useActionState:mo,useOptimistic:function(e,t){var n=Or();return null!==xr?eo(n,0,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:Hr,useCacheRefresh:Ro},Yo=null,Qo=0;function Jo(e){var t=Qo;return Qo+=1,null===Yo&&(Yo=[]),Js(Yo,e,t)}function Xo(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function Zo(e,t){if(t.$$typeof===m)throw Error(o(525));throw e=Object.prototype.toString.call(t),Error(o(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ei(e){return(0,e._init)(e._payload)}function ti(e){function t(t,n){if(e){var a=t.deletions;null===a?(t.deletions=[n],t.flags|=16):a.push(n)}}function n(n,a){if(!e)return null;for(;null!==a;)t(n,a),a=a.sibling;return null}function a(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function s(e,t){return(e=Fa(e,t)).index=0,e.sibling=null,e}function r(t,n,a){return t.index=a,e?null!==(a=t.alternate)?(a=a.index)<n?(t.flags|=67108866,n):a:(t.flags|=67108866,n):(t.flags|=1048576,n)}function i(t){return e&&null===t.alternate&&(t.flags|=67108866),t}function l(e,t,n,a){return null===t||6!==t.tag?((t=Ha(n,e.mode,a)).return=e,t):((t=s(t,n)).return=e,t)}function c(e,t,n,a){var r=n.type;return r===g?d(e,t,n.props.children,a,n.key):null!==t&&(t.elementType===r||"object"===typeof r&&null!==r&&r.$$typeof===C&&ei(r)===t.type)?(Xo(t=s(t,n.props),n),t.return=e,t):(Xo(t=Ua(n.type,n.key,n.props,null,e.mode,a),n),t.return=e,t)}function u(e,t,n,a){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=qa(n,e.mode,a)).return=e,t):((t=s(t,n.children||[])).return=e,t)}function d(e,t,n,a,r){return null===t||7!==t.tag?((t=Ba(n,e.mode,a,r)).return=e,t):((t=s(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t||"bigint"===typeof t)return(t=Ha(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case p:return Xo(n=Ua(t.type,t.key,t.props,null,e.mode,n),t),n.return=e,n;case f:return(t=qa(t,e.mode,n)).return=e,t;case C:return h(e,t=(0,t._init)(t._payload),n)}if(D(t)||_(t))return(t=Ba(t,e.mode,n,null)).return=e,t;if("function"===typeof t.then)return h(e,Jo(t),n);if(t.$$typeof===w)return h(e,Es(e,t),n);Zo(e,t)}return null}function m(e,t,n,a){var s=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n||"bigint"===typeof n)return null!==s?null:l(e,t,""+n,a);if("object"===typeof n&&null!==n){switch(n.$$typeof){case p:return n.key===s?c(e,t,n,a):null;case f:return n.key===s?u(e,t,n,a):null;case C:return m(e,t,n=(s=n._init)(n._payload),a)}if(D(n)||_(n))return null!==s?null:d(e,t,n,a,null);if("function"===typeof n.then)return m(e,t,Jo(n),a);if(n.$$typeof===w)return m(e,t,Es(e,n),a);Zo(e,n)}return null}function v(e,t,n,a,s){if("string"===typeof a&&""!==a||"number"===typeof a||"bigint"===typeof a)return l(t,e=e.get(n)||null,""+a,s);if("object"===typeof a&&null!==a){switch(a.$$typeof){case p:return c(t,e=e.get(null===a.key?n:a.key)||null,a,s);case f:return u(t,e=e.get(null===a.key?n:a.key)||null,a,s);case C:return v(e,t,n,a=(0,a._init)(a._payload),s)}if(D(a)||_(a))return d(t,e=e.get(n)||null,a,s,null);if("function"===typeof a.then)return v(e,t,n,Jo(a),s);if(a.$$typeof===w)return v(e,t,n,Es(t,a),s);Zo(t,a)}return null}function y(l,c,u,d){if("object"===typeof u&&null!==u&&u.type===g&&null===u.key&&(u=u.props.children),"object"===typeof u&&null!==u){switch(u.$$typeof){case p:e:{for(var b=u.key;null!==c;){if(c.key===b){if((b=u.type)===g){if(7===c.tag){n(l,c.sibling),(d=s(c,u.props.children)).return=l,l=d;break e}}else if(c.elementType===b||"object"===typeof b&&null!==b&&b.$$typeof===C&&ei(b)===c.type){n(l,c.sibling),Xo(d=s(c,u.props),u),d.return=l,l=d;break e}n(l,c);break}t(l,c),c=c.sibling}u.type===g?((d=Ba(u.props.children,l.mode,d,u.key)).return=l,l=d):(Xo(d=Ua(u.type,u.key,u.props,null,l.mode,d),u),d.return=l,l=d)}return i(l);case f:e:{for(b=u.key;null!==c;){if(c.key===b){if(4===c.tag&&c.stateNode.containerInfo===u.containerInfo&&c.stateNode.implementation===u.implementation){n(l,c.sibling),(d=s(c,u.children||[])).return=l,l=d;break e}n(l,c);break}t(l,c),c=c.sibling}(d=qa(u,l.mode,d)).return=l,l=d}return i(l);case C:return y(l,c,u=(b=u._init)(u._payload),d)}if(D(u))return function(s,o,i,l){for(var c=null,u=null,d=o,p=o=0,f=null;null!==d&&p<i.length;p++){d.index>p?(f=d,d=null):f=d.sibling;var g=m(s,d,i[p],l);if(null===g){null===d&&(d=f);break}e&&d&&null===g.alternate&&t(s,d),o=r(g,o,p),null===u?c=g:u.sibling=g,u=g,d=f}if(p===i.length)return n(s,d),rs&&Za(s,p),c;if(null===d){for(;p<i.length;p++)null!==(d=h(s,i[p],l))&&(o=r(d,o,p),null===u?c=d:u.sibling=d,u=d);return rs&&Za(s,p),c}for(d=a(d);p<i.length;p++)null!==(f=v(d,s,p,i[p],l))&&(e&&null!==f.alternate&&d.delete(null===f.key?p:f.key),o=r(f,o,p),null===u?c=f:u.sibling=f,u=f);return e&&d.forEach(function(e){return t(s,e)}),rs&&Za(s,p),c}(l,c,u,d);if(_(u)){if("function"!==typeof(b=_(u)))throw Error(o(150));return function(s,i,l,c){if(null==l)throw Error(o(151));for(var u=null,d=null,p=i,f=i=0,g=null,y=l.next();null!==p&&!y.done;f++,y=l.next()){p.index>f?(g=p,p=null):g=p.sibling;var b=m(s,p,y.value,c);if(null===b){null===p&&(p=g);break}e&&p&&null===b.alternate&&t(s,p),i=r(b,i,f),null===d?u=b:d.sibling=b,d=b,p=g}if(y.done)return n(s,p),rs&&Za(s,f),u;if(null===p){for(;!y.done;f++,y=l.next())null!==(y=h(s,y.value,c))&&(i=r(y,i,f),null===d?u=y:d.sibling=y,d=y);return rs&&Za(s,f),u}for(p=a(p);!y.done;f++,y=l.next())null!==(y=v(p,s,f,y.value,c))&&(e&&null!==y.alternate&&p.delete(null===y.key?f:y.key),i=r(y,i,f),null===d?u=y:d.sibling=y,d=y);return e&&p.forEach(function(e){return t(s,e)}),rs&&Za(s,f),u}(l,c,u=b.call(u),d)}if("function"===typeof u.then)return y(l,c,Jo(u),d);if(u.$$typeof===w)return y(l,c,Es(l,u),d);Zo(l,u)}return"string"===typeof u&&""!==u||"number"===typeof u||"bigint"===typeof u?(u=""+u,null!==c&&6===c.tag?(n(l,c.sibling),(d=s(c,u)).return=l,l=d):(n(l,c),(d=Ha(u,l.mode,d)).return=l,l=d),i(l)):n(l,c)}return function(e,t,n,a){try{Qo=0;var s=y(e,t,n,a);return Yo=null,s}catch(o){if(o===Vs||o===Gs)throw o;var r=Ra(29,o,null,e.mode);return r.lanes=a,r.return=e,r}}}var ni=ti(!0),ai=ti(!1),si=O(null),ri=null;function oi(e){var t=e.alternate;B(ui,1&ui.current),B(si,e),null===ri&&(null===t||null!==mr.current||null!==t.memoizedState)&&(ri=e)}function ii(e){if(22===e.tag){if(B(ui,ui.current),B(si,e),null===ri){var t=e.alternate;null!==t&&null!==t.memoizedState&&(ri=e)}}else li()}function li(){B(ui,ui.current),B(si,si.current)}function ci(e){U(si),ri===e&&(ri=null),U(ui)}var ui=O(0);function di(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||gd(n)))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function hi(e,t,n,a){n=null===(n=n(a,t=e.memoizedState))||void 0===n?t:h({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var mi={enqueueSetState:function(e,t,n){e=e._reactInternals;var a=Mc(),s=sr(a);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=rr(e,s,a))&&(Rc(t,e,a),or(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var a=Mc(),s=sr(a);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=rr(e,s,a))&&(Rc(t,e,a),or(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Mc(),a=sr(n);a.tag=2,void 0!==t&&null!==t&&(a.callback=t),null!==(t=rr(e,a,n))&&(Rc(t,e,n),or(t,e,n))}};function pi(e,t,n,a,s,r,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(a,r,o):!t.prototype||!t.prototype.isPureReactComponent||(!Qn(n,a)||!Qn(s,r))}function fi(e,t,n,a){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,a),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,a),t.state!==e&&mi.enqueueReplaceState(t,t.state,null)}function gi(e,t){var n=t;if("ref"in t)for(var a in n={},t)"ref"!==a&&(n[a]=t[a]);if(e=e.defaultProps)for(var s in n===t&&(n=h({},n)),e)void 0===n[s]&&(n[s]=e[s]);return n}var vi="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function yi(e){vi(e)}function bi(e){console.error(e)}function xi(e){vi(e)}function wi(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(n){setTimeout(function(){throw n})}}function Si(e,t,n){try{(0,e.onCaughtError)(n.value,{componentStack:n.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(a){setTimeout(function(){throw a})}}function ki(e,t,n){return(n=sr(n)).tag=3,n.payload={element:null},n.callback=function(){wi(e,t)},n}function ji(e){return(e=sr(e)).tag=3,e}function Ni(e,t,n,a){var s=n.type.getDerivedStateFromError;if("function"===typeof s){var r=a.value;e.payload=function(){return s(r)},e.callback=function(){Si(t,n,a)}}var o=n.stateNode;null!==o&&"function"===typeof o.componentDidCatch&&(e.callback=function(){Si(t,n,a),"function"!==typeof s&&(null===jc?jc=new Set([this]):jc.add(this));var e=a.stack;this.componentDidCatch(a.value,{componentStack:null!==e?e:""})})}var Ci=Error(o(461)),Ei=!1;function Ti(e,t,n,a){t.child=null===e?ai(t,null,n,a):ni(t,e.child,n,a)}function Ai(e,t,n,a,s){n=n.render;var r=t.ref;if("ref"in a){var o={};for(var i in a)"ref"!==i&&(o[i]=a[i])}else o=a;return Ns(t),a=Ir(e,t,n,o,r,s),i=zr(),null===e||Ei?(rs&&i&&ts(t),t.flags|=1,Ti(e,t,a,s),t.child):(Rr(e,t,s),Yi(e,t,s))}function _i(e,t,n,a,s){if(null===e){var r=n.type;return"function"!==typeof r||La(r)||void 0!==r.defaultProps||null!==n.compare?((e=Ua(n.type,null,a,t,t.mode,s)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=r,Ii(e,t,r,a,s))}if(r=e.child,!Qi(e,s)){var o=r.memoizedProps;if((n=null!==(n=n.compare)?n:Qn)(o,a)&&e.ref===t.ref)return Yi(e,t,s)}return t.flags|=1,(e=Fa(r,a)).ref=t.ref,e.return=t,t.child=e}function Ii(e,t,n,a,s){if(null!==e){var r=e.memoizedProps;if(Qn(r,a)&&e.ref===t.ref){if(Ei=!1,t.pendingProps=a=r,!Qi(e,s))return t.lanes=e.lanes,Yi(e,t,s);0!==(131072&e.flags)&&(Ei=!0)}}return zi(e,t,n,a,s)}function Pi(e,t,n){var a=t.pendingProps,s=a.children,r=null!==e?e.memoizedState:null;if("hidden"===a.mode){if(0!==(128&t.flags)){if(a=null!==r?r.baseLanes|n:n,null!==e){for(s=t.child=e.child,r=0;null!==s;)r=r|s.lanes|s.childLanes,s=s.sibling;t.childLanes=r&~a}else t.childLanes=0,t.child=null;return Di(e,t,a,n)}if(0===(536870912&n))return t.lanes=t.childLanes=536870912,Di(e,t,null!==r?r.baseLanes|n:n,n);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&qs(0,null!==r?r.cachePool:null),null!==r?fr(t,r):gr(),ii(t)}else null!==r?(qs(0,r.cachePool),fr(t,r),li(),t.memoizedState=null):(null!==e&&qs(0,null),gr(),li());return Ti(e,t,s,n),t.child}function Di(e,t,n,a){var s=Hs();return s=null===s?null:{parent:Ps._currentValue,pool:s},t.memoizedState={baseLanes:n,cachePool:s},null!==e&&qs(0,null),gr(),ii(t),null!==e&&ks(e,t,a,!0),null}function Mi(e,t){var n=t.ref;if(null===n)null!==e&&null!==e.ref&&(t.flags|=4194816);else{if("function"!==typeof n&&"object"!==typeof n)throw Error(o(284));null!==e&&e.ref===n||(t.flags|=4194816)}}function zi(e,t,n,a,s){return Ns(t),n=Ir(e,t,n,a,void 0,s),a=zr(),null===e||Ei?(rs&&a&&ts(t),t.flags|=1,Ti(e,t,n,s),t.child):(Rr(e,t,s),Yi(e,t,s))}function Ri(e,t,n,a,s,r){return Ns(t),t.updateQueue=null,n=Dr(t,a,n,s),Pr(e),a=zr(),null===e||Ei?(rs&&a&&ts(t),t.flags|=1,Ti(e,t,n,r),t.child):(Rr(e,t,r),Yi(e,t,r))}function Li(e,t,n,a,s){if(Ns(t),null===t.stateNode){var r=Ma,o=n.contextType;"object"===typeof o&&null!==o&&(r=Cs(o)),r=new n(a,r),t.memoizedState=null!==r.state&&void 0!==r.state?r.state:null,r.updater=mi,t.stateNode=r,r._reactInternals=t,(r=t.stateNode).props=a,r.state=t.memoizedState,r.refs={},nr(t),o=n.contextType,r.context="object"===typeof o&&null!==o?Cs(o):Ma,r.state=t.memoizedState,"function"===typeof(o=n.getDerivedStateFromProps)&&(hi(t,n,o,a),r.state=t.memoizedState),"function"===typeof n.getDerivedStateFromProps||"function"===typeof r.getSnapshotBeforeUpdate||"function"!==typeof r.UNSAFE_componentWillMount&&"function"!==typeof r.componentWillMount||(o=r.state,"function"===typeof r.componentWillMount&&r.componentWillMount(),"function"===typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount(),o!==r.state&&mi.enqueueReplaceState(r,r.state,null),ur(t,a,r,s),cr(),r.state=t.memoizedState),"function"===typeof r.componentDidMount&&(t.flags|=4194308),a=!0}else if(null===e){r=t.stateNode;var i=t.memoizedProps,l=gi(n,i);r.props=l;var c=r.context,u=n.contextType;o=Ma,"object"===typeof u&&null!==u&&(o=Cs(u));var d=n.getDerivedStateFromProps;u="function"===typeof d||"function"===typeof r.getSnapshotBeforeUpdate,i=t.pendingProps!==i,u||"function"!==typeof r.UNSAFE_componentWillReceiveProps&&"function"!==typeof r.componentWillReceiveProps||(i||c!==o)&&fi(t,r,a,o),tr=!1;var h=t.memoizedState;r.state=h,ur(t,a,r,s),cr(),c=t.memoizedState,i||h!==c||tr?("function"===typeof d&&(hi(t,n,d,a),c=t.memoizedState),(l=tr||pi(t,n,l,a,h,c,o))?(u||"function"!==typeof r.UNSAFE_componentWillMount&&"function"!==typeof r.componentWillMount||("function"===typeof r.componentWillMount&&r.componentWillMount(),"function"===typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount()),"function"===typeof r.componentDidMount&&(t.flags|=4194308)):("function"===typeof r.componentDidMount&&(t.flags|=4194308),t.memoizedProps=a,t.memoizedState=c),r.props=a,r.state=c,r.context=o,a=l):("function"===typeof r.componentDidMount&&(t.flags|=4194308),a=!1)}else{r=t.stateNode,ar(e,t),u=gi(n,o=t.memoizedProps),r.props=u,d=t.pendingProps,h=r.context,c=n.contextType,l=Ma,"object"===typeof c&&null!==c&&(l=Cs(c)),(c="function"===typeof(i=n.getDerivedStateFromProps)||"function"===typeof r.getSnapshotBeforeUpdate)||"function"!==typeof r.UNSAFE_componentWillReceiveProps&&"function"!==typeof r.componentWillReceiveProps||(o!==d||h!==l)&&fi(t,r,a,l),tr=!1,h=t.memoizedState,r.state=h,ur(t,a,r,s),cr();var m=t.memoizedState;o!==d||h!==m||tr||null!==e&&null!==e.dependencies&&js(e.dependencies)?("function"===typeof i&&(hi(t,n,i,a),m=t.memoizedState),(u=tr||pi(t,n,u,a,h,m,l)||null!==e&&null!==e.dependencies&&js(e.dependencies))?(c||"function"!==typeof r.UNSAFE_componentWillUpdate&&"function"!==typeof r.componentWillUpdate||("function"===typeof r.componentWillUpdate&&r.componentWillUpdate(a,m,l),"function"===typeof r.UNSAFE_componentWillUpdate&&r.UNSAFE_componentWillUpdate(a,m,l)),"function"===typeof r.componentDidUpdate&&(t.flags|=4),"function"===typeof r.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof r.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof r.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=a,t.memoizedState=m),r.props=a,r.state=m,r.context=l,a=u):("function"!==typeof r.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof r.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),a=!1)}return r=a,Mi(e,t),a=0!==(128&t.flags),r||a?(r=t.stateNode,n=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render(),t.flags|=1,null!==e&&a?(t.child=ni(t,e.child,null,s),t.child=ni(t,null,n,s)):Ti(e,t,n,s),t.memoizedState=r.state,e=t.child):e=Yi(e,t,s),e}function Fi(e,t,n,a){return ms(),t.flags|=256,Ti(e,t,n,a),t.child}var Oi={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ui(e){return{baseLanes:e,cachePool:Ws()}}function Bi(e,t,n){return e=null!==e?e.childLanes&~n:0,t&&(e|=gc),e}function Hi(e,t,n){var a,s=t.pendingProps,r=!1,i=0!==(128&t.flags);if((a=i)||(a=(null===e||null!==e.memoizedState)&&0!==(2&ui.current)),a&&(r=!0,t.flags&=-129),a=0!==(32&t.flags),t.flags&=-33,null===e){if(rs){if(r?oi(t):li(),rs){var l,c=ss;if(l=c){e:{for(l=c,c=is;8!==l.nodeType;){if(!c){c=null;break e}if(null===(l=vd(l.nextSibling))){c=null;break e}}c=l}null!==c?(t.memoizedState={dehydrated:c,treeContext:null!==Qa?{id:Ja,overflow:Xa}:null,retryLane:536870912,hydrationErrors:null},(l=Ra(18,null,null,0)).stateNode=c,l.return=t,t.child=l,as=t,ss=null,l=!0):l=!1}l||cs(t)}if(null!==(c=t.memoizedState)&&null!==(c=c.dehydrated))return gd(c)?t.lanes=32:t.lanes=536870912,null;ci(t)}return c=s.children,s=s.fallback,r?(li(),c=Wi({mode:"hidden",children:c},r=t.mode),s=Ba(s,r,n,null),c.return=t,s.return=t,c.sibling=s,t.child=c,(r=t.child).memoizedState=Ui(n),r.childLanes=Bi(e,a,n),t.memoizedState=Oi,s):(oi(t),qi(t,c))}if(null!==(l=e.memoizedState)&&null!==(c=l.dehydrated)){if(i)256&t.flags?(oi(t),t.flags&=-257,t=Vi(e,t,n)):null!==t.memoizedState?(li(),t.child=e.child,t.flags|=128,t=null):(li(),r=s.fallback,c=t.mode,s=Wi({mode:"visible",children:s.children},c),(r=Ba(r,c,n,null)).flags|=2,s.return=t,r.return=t,s.sibling=r,t.child=s,ni(t,e.child,null,n),(s=t.child).memoizedState=Ui(n),s.childLanes=Bi(e,a,n),t.memoizedState=Oi,t=r);else if(oi(t),gd(c)){if(a=c.nextSibling&&c.nextSibling.dataset)var u=a.dgst;a=u,(s=Error(o(419))).stack="",s.digest=a,fs({value:s,source:null,stack:null}),t=Vi(e,t,n)}else if(Ei||ks(e,t,n,!1),a=0!==(n&e.childLanes),Ei||a){if(null!==(a=ac)&&(0!==(s=0!==((s=0!==(42&(s=n&-n))?1:Te(s))&(a.suspendedLanes|n))?0:s)&&s!==l.retryLane))throw l.retryLane=s,Ia(e,s),Rc(a,e,s),Ci;"$?"===c.data||Gc(),t=Vi(e,t,n)}else"$?"===c.data?(t.flags|=192,t.child=e.child,t=null):(e=l.treeContext,ss=vd(c.nextSibling),as=t,rs=!0,os=null,is=!1,null!==e&&($a[Ya++]=Ja,$a[Ya++]=Xa,$a[Ya++]=Qa,Ja=e.id,Xa=e.overflow,Qa=t),(t=qi(t,s.children)).flags|=4096);return t}return r?(li(),r=s.fallback,c=t.mode,u=(l=e.child).sibling,(s=Fa(l,{mode:"hidden",children:s.children})).subtreeFlags=65011712&l.subtreeFlags,null!==u?r=Fa(u,r):(r=Ba(r,c,n,null)).flags|=2,r.return=t,s.return=t,s.sibling=r,t.child=s,s=r,r=t.child,null===(c=e.child.memoizedState)?c=Ui(n):(null!==(l=c.cachePool)?(u=Ps._currentValue,l=l.parent!==u?{parent:u,pool:u}:l):l=Ws(),c={baseLanes:c.baseLanes|n,cachePool:l}),r.memoizedState=c,r.childLanes=Bi(e,a,n),t.memoizedState=Oi,s):(oi(t),e=(n=e.child).sibling,(n=Fa(n,{mode:"visible",children:s.children})).return=t,n.sibling=null,null!==e&&(null===(a=t.deletions)?(t.deletions=[e],t.flags|=16):a.push(e)),t.child=n,t.memoizedState=null,n)}function qi(e,t){return(t=Wi({mode:"visible",children:t},e.mode)).return=e,e.child=t}function Wi(e,t){return(e=Ra(22,e,null,t)).lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function Vi(e,t,n){return ni(t,e.child,null,n),(e=qi(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Ki(e,t,n){e.lanes|=t;var a=e.alternate;null!==a&&(a.lanes|=t),ws(e.return,t,n)}function Gi(e,t,n,a,s){var r=e.memoizedState;null===r?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:a,tail:n,tailMode:s}:(r.isBackwards=t,r.rendering=null,r.renderingStartTime=0,r.last=a,r.tail=n,r.tailMode=s)}function $i(e,t,n){var a=t.pendingProps,s=a.revealOrder,r=a.tail;if(Ti(e,t,a.children,n),0!==(2&(a=ui.current)))a=1&a|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Ki(e,n,t);else if(19===e.tag)Ki(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}a&=1}switch(B(ui,a),s){case"forwards":for(n=t.child,s=null;null!==n;)null!==(e=n.alternate)&&null===di(e)&&(s=n),n=n.sibling;null===(n=s)?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),Gi(t,!1,s,n,r);break;case"backwards":for(n=null,s=t.child,t.child=null;null!==s;){if(null!==(e=s.alternate)&&null===di(e)){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}Gi(t,!0,n,null,r);break;case"together":Gi(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Yi(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),mc|=t.lanes,0===(n&t.childLanes)){if(null===e)return null;if(ks(e,t,n,!1),0===(n&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Fa(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Fa(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Qi(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!js(e))}function Ji(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps)Ei=!0;else{if(!Qi(e,n)&&0===(128&t.flags))return Ei=!1,function(e,t,n){switch(t.tag){case 3:K(t,t.stateNode.containerInfo),bs(0,Ps,e.memoizedState.cache),ms();break;case 27:case 5:$(t);break;case 4:K(t,t.stateNode.containerInfo);break;case 10:bs(0,t.type,t.memoizedProps.value);break;case 13:var a=t.memoizedState;if(null!==a)return null!==a.dehydrated?(oi(t),t.flags|=128,null):0!==(n&t.child.childLanes)?Hi(e,t,n):(oi(t),null!==(e=Yi(e,t,n))?e.sibling:null);oi(t);break;case 19:var s=0!==(128&e.flags);if((a=0!==(n&t.childLanes))||(ks(e,t,n,!1),a=0!==(n&t.childLanes)),s){if(a)return $i(e,t,n);t.flags|=128}if(null!==(s=t.memoizedState)&&(s.rendering=null,s.tail=null,s.lastEffect=null),B(ui,ui.current),a)break;return null;case 22:case 23:return t.lanes=0,Pi(e,t,n);case 24:bs(0,Ps,e.memoizedState.cache)}return Yi(e,t,n)}(e,t,n);Ei=0!==(131072&e.flags)}else Ei=!1,rs&&0!==(1048576&t.flags)&&es(t,Ga,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var a=t.elementType,s=a._init;if(a=s(a._payload),t.type=a,"function"!==typeof a){if(void 0!==a&&null!==a){if((s=a.$$typeof)===S){t.tag=11,t=Ai(null,t,a,e,n);break e}if(s===N){t.tag=14,t=_i(null,t,a,e,n);break e}}throw t=P(a)||a,Error(o(306,t,""))}La(a)?(e=gi(a,e),t.tag=1,t=Li(null,t,a,e,n)):(t.tag=0,t=zi(null,t,a,e,n))}return t;case 0:return zi(e,t,t.type,t.pendingProps,n);case 1:return Li(e,t,a=t.type,s=gi(a,t.pendingProps),n);case 3:e:{if(K(t,t.stateNode.containerInfo),null===e)throw Error(o(387));a=t.pendingProps;var r=t.memoizedState;s=r.element,ar(e,t),ur(t,a,null,n);var i=t.memoizedState;if(a=i.cache,bs(0,Ps,a),a!==r.cache&&Ss(t,[Ps],n,!0),cr(),a=i.element,r.isDehydrated){if(r={element:a,isDehydrated:!1,cache:i.cache},t.updateQueue.baseState=r,t.memoizedState=r,256&t.flags){t=Fi(e,t,a,n);break e}if(a!==s){fs(s=ja(Error(o(424)),t)),t=Fi(e,t,a,n);break e}if(9===(e=t.stateNode.containerInfo).nodeType)e=e.body;else e="HTML"===e.nodeName?e.ownerDocument.body:e;for(ss=vd(e.firstChild),as=t,rs=!0,os=null,is=!0,n=ai(t,null,a,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(ms(),a===s){t=Yi(e,t,n);break e}Ti(e,t,a,n)}t=t.child}return t;case 26:return Mi(e,t),null===e?(n=Td(t.type,null,t.pendingProps,null))?t.memoizedState=n:rs||(n=t.type,e=t.pendingProps,(a=ad(W.current).createElement(n))[Pe]=t,a[De]=e,ed(a,n,e),Ve(a),t.stateNode=a):t.memoizedState=Td(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return $(t),null===e&&rs&&(a=t.stateNode=xd(t.type,t.pendingProps,W.current),as=t,is=!0,s=ss,md(t.type)?(yd=s,ss=vd(a.firstChild)):ss=s),Ti(e,t,t.pendingProps.children,n),Mi(e,t),null===e&&(t.flags|=4194304),t.child;case 5:return null===e&&rs&&((s=a=ss)&&(null!==(a=function(e,t,n,a){for(;1===e.nodeType;){var s=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!a&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(a){if(!e[Oe])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(r=e.getAttribute("rel"))&&e.hasAttribute("data-precedence"))break;if(r!==s.rel||e.getAttribute("href")!==(null==s.href||""===s.href?null:s.href)||e.getAttribute("crossorigin")!==(null==s.crossOrigin?null:s.crossOrigin)||e.getAttribute("title")!==(null==s.title?null:s.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((r=e.getAttribute("src"))!==(null==s.src?null:s.src)||e.getAttribute("type")!==(null==s.type?null:s.type)||e.getAttribute("crossorigin")!==(null==s.crossOrigin?null:s.crossOrigin))&&r&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var r=null==s.name?null:""+s.name;if("hidden"===s.type&&e.getAttribute("name")===r)return e}if(null===(e=vd(e.nextSibling)))break}return null}(a,t.type,t.pendingProps,is))?(t.stateNode=a,as=t,ss=vd(a.firstChild),is=!1,s=!0):s=!1),s||cs(t)),$(t),s=t.type,r=t.pendingProps,i=null!==e?e.memoizedProps:null,a=r.children,od(s,r)?a=null:null!==i&&od(s,i)&&(t.flags|=32),null!==t.memoizedState&&(s=Ir(e,t,Mr,null,null,n),$d._currentValue=s),Mi(e,t),Ti(e,t,a,n),t.child;case 6:return null===e&&rs&&((e=n=ss)&&(null!==(n=function(e,t,n){if(""===t)return null;for(;3!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!n)return null;if(null===(e=vd(e.nextSibling)))return null}return e}(n,t.pendingProps,is))?(t.stateNode=n,as=t,ss=null,e=!0):e=!1),e||cs(t)),null;case 13:return Hi(e,t,n);case 4:return K(t,t.stateNode.containerInfo),a=t.pendingProps,null===e?t.child=ni(t,null,a,n):Ti(e,t,a,n),t.child;case 11:return Ai(e,t,t.type,t.pendingProps,n);case 7:return Ti(e,t,t.pendingProps,n),t.child;case 8:case 12:return Ti(e,t,t.pendingProps.children,n),t.child;case 10:return a=t.pendingProps,bs(0,t.type,a.value),Ti(e,t,a.children,n),t.child;case 9:return s=t.type._context,a=t.pendingProps.children,Ns(t),a=a(s=Cs(s)),t.flags|=1,Ti(e,t,a,n),t.child;case 14:return _i(e,t,t.type,t.pendingProps,n);case 15:return Ii(e,t,t.type,t.pendingProps,n);case 19:return $i(e,t,n);case 31:return a=t.pendingProps,n=t.mode,a={mode:a.mode,children:a.children},null===e?((n=Wi(a,n)).ref=t.ref,t.child=n,n.return=t,t=n):((n=Fa(e.child,a)).ref=t.ref,t.child=n,n.return=t,t=n),t;case 22:return Pi(e,t,n);case 24:return Ns(t),a=Cs(Ps),null===e?(null===(s=Hs())&&(s=ac,r=Ds(),s.pooledCache=r,r.refCount++,null!==r&&(s.pooledCacheLanes|=n),s=r),t.memoizedState={parent:a,cache:s},nr(t),bs(0,Ps,s)):(0!==(e.lanes&n)&&(ar(e,t),ur(t,null,null,n),cr()),s=e.memoizedState,r=t.memoizedState,s.parent!==a?(s={parent:a,cache:a},t.memoizedState=s,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=s),bs(0,Ps,a)):(a=r.cache,bs(0,Ps,a),a!==s.cache&&Ss(t,[Ps],n,!0))),Ti(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(o(156,t.tag))}function Xi(e){e.flags|=4}function Zi(e,t){if("stylesheet"!==t.type||0!==(4&t.state.loading))e.flags&=-16777217;else if(e.flags|=16777216,!Bd(t)){if(null!==(t=si.current)&&((4194048&rc)===rc?null!==ri:(62914560&rc)!==rc&&0===(536870912&rc)||t!==ri))throw Xs=$s,Ks;e.flags|=8192}}function el(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?ke():536870912,e.lanes|=t,vc|=t)}function tl(e,t){if(!rs)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var a=null;null!==n;)null!==n.alternate&&(a=n),n=n.sibling;null===a?t||null===e.tail?e.tail=null:e.tail.sibling=null:a.sibling=null}}function nl(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,a=0;if(t)for(var s=e.child;null!==s;)n|=s.lanes|s.childLanes,a|=65011712&s.subtreeFlags,a|=65011712&s.flags,s.return=e,s=s.sibling;else for(s=e.child;null!==s;)n|=s.lanes|s.childLanes,a|=s.subtreeFlags,a|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=a,e.childLanes=n,t}function al(e,t,n){var a=t.pendingProps;switch(ns(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return nl(t),null;case 3:return n=t.stateNode,a=null,null!==e&&(a=e.memoizedState.cache),t.memoizedState.cache!==a&&(t.flags|=2048),xs(Ps),G(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(hs(t)?Xi(t):null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,ps())),nl(t),null;case 26:return n=t.memoizedState,null===e?(Xi(t),null!==n?(nl(t),Zi(t,n)):(nl(t),t.flags&=-16777217)):n?n!==e.memoizedState?(Xi(t),nl(t),Zi(t,n)):(nl(t),t.flags&=-16777217):(e.memoizedProps!==a&&Xi(t),nl(t),t.flags&=-16777217),null;case 27:Y(t),n=W.current;var s=t.type;if(null!==e&&null!=t.stateNode)e.memoizedProps!==a&&Xi(t);else{if(!a){if(null===t.stateNode)throw Error(o(166));return nl(t),null}e=H.current,hs(t)?us(t):(e=xd(s,a,n),t.stateNode=e,Xi(t))}return nl(t),null;case 5:if(Y(t),n=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==a&&Xi(t);else{if(!a){if(null===t.stateNode)throw Error(o(166));return nl(t),null}if(e=H.current,hs(t))us(t);else{switch(s=ad(W.current),e){case 1:e=s.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:e=s.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":e=s.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":e=s.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":(e=s.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e="string"===typeof a.is?s.createElement("select",{is:a.is}):s.createElement("select"),a.multiple?e.multiple=!0:a.size&&(e.size=a.size);break;default:e="string"===typeof a.is?s.createElement(n,{is:a.is}):s.createElement(n)}}e[Pe]=t,e[De]=a;e:for(s=t.child;null!==s;){if(5===s.tag||6===s.tag)e.appendChild(s.stateNode);else if(4!==s.tag&&27!==s.tag&&null!==s.child){s.child.return=s,s=s.child;continue}if(s===t)break e;for(;null===s.sibling;){if(null===s.return||s.return===t)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}t.stateNode=e;e:switch(ed(e,n,a),n){case"button":case"input":case"select":case"textarea":e=!!a.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&Xi(t)}}return nl(t),t.flags&=-16777217,null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==a&&Xi(t);else{if("string"!==typeof a&&null===t.stateNode)throw Error(o(166));if(e=W.current,hs(t)){if(e=t.stateNode,n=t.memoizedProps,a=null,null!==(s=as))switch(s.tag){case 27:case 5:a=s.memoizedProps}e[Pe]=t,(e=!!(e.nodeValue===n||null!==a&&!0===a.suppressHydrationWarning||Qu(e.nodeValue,n)))||cs(t)}else(e=ad(e).createTextNode(a))[Pe]=t,t.stateNode=e}return nl(t),null;case 13:if(a=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(s=hs(t),null!==a&&null!==a.dehydrated){if(null===e){if(!s)throw Error(o(318));if(!(s=null!==(s=t.memoizedState)?s.dehydrated:null))throw Error(o(317));s[Pe]=t}else ms(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;nl(t),s=!1}else s=ps(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=s),s=!0;if(!s)return 256&t.flags?(ci(t),t):(ci(t),null)}if(ci(t),0!==(128&t.flags))return t.lanes=n,t;if(n=null!==a,e=null!==e&&null!==e.memoizedState,n){s=null,null!==(a=t.child).alternate&&null!==a.alternate.memoizedState&&null!==a.alternate.memoizedState.cachePool&&(s=a.alternate.memoizedState.cachePool.pool);var r=null;null!==a.memoizedState&&null!==a.memoizedState.cachePool&&(r=a.memoizedState.cachePool.pool),r!==s&&(a.flags|=2048)}return n!==e&&n&&(t.child.flags|=8192),el(t,t.updateQueue),nl(t),null;case 4:return G(),null===e&&Uu(t.stateNode.containerInfo),nl(t),null;case 10:return xs(t.type),nl(t),null;case 19:if(U(ui),null===(s=t.memoizedState))return nl(t),null;if(a=0!==(128&t.flags),null===(r=s.rendering))if(a)tl(s,!1);else{if(0!==hc||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(r=di(e))){for(t.flags|=128,tl(s,!1),e=r.updateQueue,t.updateQueue=e,el(t,e),t.subtreeFlags=0,e=n,n=t.child;null!==n;)Oa(n,e),n=n.sibling;return B(ui,1&ui.current|2),t.child}e=e.sibling}null!==s.tail&&te()>Sc&&(t.flags|=128,a=!0,tl(s,!1),t.lanes=4194304)}else{if(!a)if(null!==(e=di(r))){if(t.flags|=128,a=!0,e=e.updateQueue,t.updateQueue=e,el(t,e),tl(s,!0),null===s.tail&&"hidden"===s.tailMode&&!r.alternate&&!rs)return nl(t),null}else 2*te()-s.renderingStartTime>Sc&&536870912!==n&&(t.flags|=128,a=!0,tl(s,!1),t.lanes=4194304);s.isBackwards?(r.sibling=t.child,t.child=r):(null!==(e=s.last)?e.sibling=r:t.child=r,s.last=r)}return null!==s.tail?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=te(),t.sibling=null,e=ui.current,B(ui,a?1&e|2:1&e),t):(nl(t),null);case 22:case 23:return ci(t),vr(),a=null!==t.memoizedState,null!==e?null!==e.memoizedState!==a&&(t.flags|=8192):a&&(t.flags|=8192),a?0!==(536870912&n)&&0===(128&t.flags)&&(nl(t),6&t.subtreeFlags&&(t.flags|=8192)):nl(t),null!==(n=t.updateQueue)&&el(t,n.retryQueue),n=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),a=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(a=t.memoizedState.cachePool.pool),a!==n&&(t.flags|=2048),null!==e&&U(Bs),null;case 24:return n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),xs(Ps),nl(t),null;case 25:case 30:return null}throw Error(o(156,t.tag))}function sl(e,t){switch(ns(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return xs(Ps),G(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return Y(t),null;case 13:if(ci(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(o(340));ms()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return U(ui),null;case 4:return G(),null;case 10:return xs(t.type),null;case 22:case 23:return ci(t),vr(),null!==e&&U(Bs),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return xs(Ps),null;default:return null}}function rl(e,t){switch(ns(t),t.tag){case 3:xs(Ps),G();break;case 26:case 27:case 5:Y(t);break;case 4:G();break;case 13:ci(t);break;case 19:U(ui);break;case 10:xs(t.type);break;case 22:case 23:ci(t),vr(),null!==e&&U(Bs);break;case 24:xs(Ps)}}function ol(e,t){try{var n=t.updateQueue,a=null!==n?n.lastEffect:null;if(null!==a){var s=a.next;n=s;do{if((n.tag&e)===e){a=void 0;var r=n.create,o=n.inst;a=r(),o.destroy=a}n=n.next}while(n!==s)}}catch(i){uu(t,t.return,i)}}function il(e,t,n){try{var a=t.updateQueue,s=null!==a?a.lastEffect:null;if(null!==s){var r=s.next;a=r;do{if((a.tag&e)===e){var o=a.inst,i=o.destroy;if(void 0!==i){o.destroy=void 0,s=t;var l=n,c=i;try{c()}catch(u){uu(s,l,u)}}}a=a.next}while(a!==r)}}catch(u){uu(t,t.return,u)}}function ll(e){var t=e.updateQueue;if(null!==t){var n=e.stateNode;try{hr(t,n)}catch(a){uu(e,e.return,a)}}}function cl(e,t,n){n.props=gi(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(a){uu(e,t,a)}}function ul(e,t){try{var n=e.ref;if(null!==n){switch(e.tag){case 26:case 27:case 5:var a=e.stateNode;break;default:a=e.stateNode}"function"===typeof n?e.refCleanup=n(a):n.current=a}}catch(s){uu(e,t,s)}}function dl(e,t){var n=e.ref,a=e.refCleanup;if(null!==n)if("function"===typeof a)try{a()}catch(s){uu(e,t,s)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"===typeof n)try{n(null)}catch(r){uu(e,t,r)}else n.current=null}function hl(e){var t=e.type,n=e.memoizedProps,a=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&a.focus();break e;case"img":n.src?a.src=n.src:n.srcSet&&(a.srcset=n.srcSet)}}catch(s){uu(e,e.return,s)}}function ml(e,t,n){try{var a=e.stateNode;!function(e,t,n,a){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var s=null,r=null,i=null,l=null,c=null,u=null,d=null;for(p in n){var h=n[p];if(n.hasOwnProperty(p)&&null!=h)switch(p){case"checked":case"value":break;case"defaultValue":c=h;default:a.hasOwnProperty(p)||Xu(e,t,p,null,a,h)}}for(var m in a){var p=a[m];if(h=n[m],a.hasOwnProperty(m)&&(null!=p||null!=h))switch(m){case"type":r=p;break;case"name":s=p;break;case"checked":u=p;break;case"defaultChecked":d=p;break;case"value":i=p;break;case"defaultValue":l=p;break;case"children":case"dangerouslySetInnerHTML":if(null!=p)throw Error(o(137,t));break;default:p!==h&&Xu(e,t,m,p,a,h)}}return void gt(e,i,l,c,u,d,r,s);case"select":for(r in p=i=l=m=null,n)if(c=n[r],n.hasOwnProperty(r)&&null!=c)switch(r){case"value":break;case"multiple":p=c;default:a.hasOwnProperty(r)||Xu(e,t,r,null,a,c)}for(s in a)if(r=a[s],c=n[s],a.hasOwnProperty(s)&&(null!=r||null!=c))switch(s){case"value":m=r;break;case"defaultValue":l=r;break;case"multiple":i=r;default:r!==c&&Xu(e,t,s,r,a,c)}return t=l,n=i,a=p,void(null!=m?bt(e,!!n,m,!1):!!a!==!!n&&(null!=t?bt(e,!!n,t,!0):bt(e,!!n,n?[]:"",!1)));case"textarea":for(l in p=m=null,n)if(s=n[l],n.hasOwnProperty(l)&&null!=s&&!a.hasOwnProperty(l))switch(l){case"value":case"children":break;default:Xu(e,t,l,null,a,s)}for(i in a)if(s=a[i],r=n[i],a.hasOwnProperty(i)&&(null!=s||null!=r))switch(i){case"value":m=s;break;case"defaultValue":p=s;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=s)throw Error(o(91));break;default:s!==r&&Xu(e,t,i,s,a,r)}return void xt(e,m,p);case"option":for(var f in n)if(m=n[f],n.hasOwnProperty(f)&&null!=m&&!a.hasOwnProperty(f))if("selected"===f)e.selected=!1;else Xu(e,t,f,null,a,m);for(c in a)if(m=a[c],p=n[c],a.hasOwnProperty(c)&&m!==p&&(null!=m||null!=p))if("selected"===c)e.selected=m&&"function"!==typeof m&&"symbol"!==typeof m;else Xu(e,t,c,m,a,p);return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var g in n)m=n[g],n.hasOwnProperty(g)&&null!=m&&!a.hasOwnProperty(g)&&Xu(e,t,g,null,a,m);for(u in a)if(m=a[u],p=n[u],a.hasOwnProperty(u)&&m!==p&&(null!=m||null!=p))switch(u){case"children":case"dangerouslySetInnerHTML":if(null!=m)throw Error(o(137,t));break;default:Xu(e,t,u,m,a,p)}return;default:if(Ct(t)){for(var v in n)m=n[v],n.hasOwnProperty(v)&&void 0!==m&&!a.hasOwnProperty(v)&&Zu(e,t,v,void 0,a,m);for(d in a)m=a[d],p=n[d],!a.hasOwnProperty(d)||m===p||void 0===m&&void 0===p||Zu(e,t,d,m,a,p);return}}for(var y in n)m=n[y],n.hasOwnProperty(y)&&null!=m&&!a.hasOwnProperty(y)&&Xu(e,t,y,null,a,m);for(h in a)m=a[h],p=n[h],!a.hasOwnProperty(h)||m===p||null==m&&null==p||Xu(e,t,h,m,a,p)}(a,e.type,n,t),a[De]=t}catch(s){uu(e,e.return,s)}}function pl(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag&&md(e.type)||4===e.tag}function fl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||pl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(27===e.tag&&md(e.type))continue e;if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function gl(e,t,n){var a=e.tag;if(5===a||6===a)e=e.stateNode,t?(9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).insertBefore(e,t):((t=9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Ju));else if(4!==a&&(27===a&&md(e.type)&&(n=e.stateNode,t=null),null!==(e=e.child)))for(gl(e,t,n),e=e.sibling;null!==e;)gl(e,t,n),e=e.sibling}function vl(e,t,n){var a=e.tag;if(5===a||6===a)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==a&&(27===a&&md(e.type)&&(n=e.stateNode),null!==(e=e.child)))for(vl(e,t,n),e=e.sibling;null!==e;)vl(e,t,n),e=e.sibling}function yl(e){var t=e.stateNode,n=e.memoizedProps;try{for(var a=e.type,s=t.attributes;s.length;)t.removeAttributeNode(s[0]);ed(t,a,n),t[Pe]=e,t[De]=n}catch(r){uu(e,e.return,r)}}var bl=!1,xl=!1,wl=!1,Sl="function"===typeof WeakSet?WeakSet:Set,kl=null;function jl(e,t,n){var a=n.flags;switch(n.tag){case 0:case 11:case 15:Ll(e,n),4&a&&ol(5,n);break;case 1:if(Ll(e,n),4&a)if(e=n.stateNode,null===t)try{e.componentDidMount()}catch(o){uu(n,n.return,o)}else{var s=gi(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(s,t,e.__reactInternalSnapshotBeforeUpdate)}catch(i){uu(n,n.return,i)}}64&a&&ll(n),512&a&&ul(n,n.return);break;case 3:if(Ll(e,n),64&a&&null!==(e=n.updateQueue)){if(t=null,null!==n.child)switch(n.child.tag){case 27:case 5:case 1:t=n.child.stateNode}try{hr(e,t)}catch(o){uu(n,n.return,o)}}break;case 27:null===t&&4&a&&yl(n);case 26:case 5:Ll(e,n),null===t&&4&a&&hl(n),512&a&&ul(n,n.return);break;case 12:Ll(e,n);break;case 13:Ll(e,n),4&a&&_l(e,n),64&a&&(null!==(e=n.memoizedState)&&(null!==(e=e.dehydrated)&&function(e,t){var n=e.ownerDocument;if("$?"!==e.data||"complete"===n.readyState)t();else{var a=function(){t(),n.removeEventListener("DOMContentLoaded",a)};n.addEventListener("DOMContentLoaded",a),e._reactRetry=a}}(e,n=pu.bind(null,n))));break;case 22:if(!(a=null!==n.memoizedState||bl)){t=null!==t&&null!==t.memoizedState||xl,s=bl;var r=xl;bl=a,(xl=t)&&!r?Ol(e,n,0!==(8772&n.subtreeFlags)):Ll(e,n),bl=s,xl=r}break;case 30:break;default:Ll(e,n)}}function Nl(e){var t=e.alternate;null!==t&&(e.alternate=null,Nl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&Ue(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Cl=null,El=!1;function Tl(e,t,n){for(n=n.child;null!==n;)Al(e,t,n),n=n.sibling}function Al(e,t,n){if(de&&"function"===typeof de.onCommitFiberUnmount)try{de.onCommitFiberUnmount(ue,n)}catch(r){}switch(n.tag){case 26:xl||dl(n,t),Tl(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode).parentNode.removeChild(n);break;case 27:xl||dl(n,t);var a=Cl,s=El;md(n.type)&&(Cl=n.stateNode,El=!1),Tl(e,t,n),wd(n.stateNode),Cl=a,El=s;break;case 5:xl||dl(n,t);case 6:if(a=Cl,s=El,Cl=null,Tl(e,t,n),El=s,null!==(Cl=a))if(El)try{(9===Cl.nodeType?Cl.body:"HTML"===Cl.nodeName?Cl.ownerDocument.body:Cl).removeChild(n.stateNode)}catch(o){uu(n,t,o)}else try{Cl.removeChild(n.stateNode)}catch(o){uu(n,t,o)}break;case 18:null!==Cl&&(El?(pd(9===(e=Cl).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e,n.stateNode),Eh(e)):pd(Cl,n.stateNode));break;case 4:a=Cl,s=El,Cl=n.stateNode.containerInfo,El=!0,Tl(e,t,n),Cl=a,El=s;break;case 0:case 11:case 14:case 15:xl||il(2,n,t),xl||il(4,n,t),Tl(e,t,n);break;case 1:xl||(dl(n,t),"function"===typeof(a=n.stateNode).componentWillUnmount&&cl(n,t,a)),Tl(e,t,n);break;case 21:Tl(e,t,n);break;case 22:xl=(a=xl)||null!==n.memoizedState,Tl(e,t,n),xl=a;break;default:Tl(e,t,n)}}function _l(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&(null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))))try{Eh(e)}catch(n){uu(t,t.return,n)}}function Il(e,t){var n=function(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new Sl),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new Sl),t;default:throw Error(o(435,e.tag))}}(e);t.forEach(function(t){var a=fu.bind(null,e,t);n.has(t)||(n.add(t),t.then(a,a))})}function Pl(e,t){var n=t.deletions;if(null!==n)for(var a=0;a<n.length;a++){var s=n[a],r=e,i=t,l=i;e:for(;null!==l;){switch(l.tag){case 27:if(md(l.type)){Cl=l.stateNode,El=!1;break e}break;case 5:Cl=l.stateNode,El=!1;break e;case 3:case 4:Cl=l.stateNode.containerInfo,El=!0;break e}l=l.return}if(null===Cl)throw Error(o(160));Al(r,i,s),Cl=null,El=!1,null!==(r=s.alternate)&&(r.return=null),s.return=null}if(13878&t.subtreeFlags)for(t=t.child;null!==t;)Ml(t,e),t=t.sibling}var Dl=null;function Ml(e,t){var n=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Pl(t,e),zl(e),4&a&&(il(3,e,e.return),ol(3,e),il(5,e,e.return));break;case 1:Pl(t,e),zl(e),512&a&&(xl||null===n||dl(n,n.return)),64&a&&bl&&(null!==(e=e.updateQueue)&&(null!==(a=e.callbacks)&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===n?a:n.concat(a))));break;case 26:var s=Dl;if(Pl(t,e),zl(e),512&a&&(xl||null===n||dl(n,n.return)),4&a){var r=null!==n?n.memoizedState:null;if(a=e.memoizedState,null===n)if(null===a)if(null===e.stateNode){e:{a=e.type,n=e.memoizedProps,s=s.ownerDocument||s;t:switch(a){case"title":(!(r=s.getElementsByTagName("title")[0])||r[Oe]||r[Pe]||"http://www.w3.org/2000/svg"===r.namespaceURI||r.hasAttribute("itemprop"))&&(r=s.createElement(a),s.head.insertBefore(r,s.querySelector("head > title"))),ed(r,a,n),r[Pe]=e,Ve(r),a=r;break e;case"link":var i=Od("link","href",s).get(a+(n.href||""));if(i)for(var l=0;l<i.length;l++)if((r=i[l]).getAttribute("href")===(null==n.href||""===n.href?null:n.href)&&r.getAttribute("rel")===(null==n.rel?null:n.rel)&&r.getAttribute("title")===(null==n.title?null:n.title)&&r.getAttribute("crossorigin")===(null==n.crossOrigin?null:n.crossOrigin)){i.splice(l,1);break t}ed(r=s.createElement(a),a,n),s.head.appendChild(r);break;case"meta":if(i=Od("meta","content",s).get(a+(n.content||"")))for(l=0;l<i.length;l++)if((r=i[l]).getAttribute("content")===(null==n.content?null:""+n.content)&&r.getAttribute("name")===(null==n.name?null:n.name)&&r.getAttribute("property")===(null==n.property?null:n.property)&&r.getAttribute("http-equiv")===(null==n.httpEquiv?null:n.httpEquiv)&&r.getAttribute("charset")===(null==n.charSet?null:n.charSet)){i.splice(l,1);break t}ed(r=s.createElement(a),a,n),s.head.appendChild(r);break;default:throw Error(o(468,a))}r[Pe]=e,Ve(r),a=r}e.stateNode=a}else Ud(s,e.type,e.stateNode);else e.stateNode=Md(s,a,e.memoizedProps);else r!==a?(null===r?null!==n.stateNode&&(n=n.stateNode).parentNode.removeChild(n):r.count--,null===a?Ud(s,e.type,e.stateNode):Md(s,a,e.memoizedProps)):null===a&&null!==e.stateNode&&ml(e,e.memoizedProps,n.memoizedProps)}break;case 27:Pl(t,e),zl(e),512&a&&(xl||null===n||dl(n,n.return)),null!==n&&4&a&&ml(e,e.memoizedProps,n.memoizedProps);break;case 5:if(Pl(t,e),zl(e),512&a&&(xl||null===n||dl(n,n.return)),32&e.flags){s=e.stateNode;try{St(s,"")}catch(p){uu(e,e.return,p)}}4&a&&null!=e.stateNode&&ml(e,s=e.memoizedProps,null!==n?n.memoizedProps:s),1024&a&&(wl=!0);break;case 6:if(Pl(t,e),zl(e),4&a){if(null===e.stateNode)throw Error(o(162));a=e.memoizedProps,n=e.stateNode;try{n.nodeValue=a}catch(p){uu(e,e.return,p)}}break;case 3:if(Fd=null,s=Dl,Dl=jd(t.containerInfo),Pl(t,e),Dl=s,zl(e),4&a&&null!==n&&n.memoizedState.isDehydrated)try{Eh(t.containerInfo)}catch(p){uu(e,e.return,p)}wl&&(wl=!1,Rl(e));break;case 4:a=Dl,Dl=jd(e.stateNode.containerInfo),Pl(t,e),zl(e),Dl=a;break;case 12:default:Pl(t,e),zl(e);break;case 13:Pl(t,e),zl(e),8192&e.child.flags&&null!==e.memoizedState!==(null!==n&&null!==n.memoizedState)&&(wc=te()),4&a&&(null!==(a=e.updateQueue)&&(e.updateQueue=null,Il(e,a)));break;case 22:s=null!==e.memoizedState;var c=null!==n&&null!==n.memoizedState,u=bl,d=xl;if(bl=u||s,xl=d||c,Pl(t,e),xl=d,bl=u,zl(e),8192&a)e:for(t=e.stateNode,t._visibility=s?-2&t._visibility:1|t._visibility,s&&(null===n||c||bl||xl||Fl(e)),n=null,t=e;;){if(5===t.tag||26===t.tag){if(null===n){c=n=t;try{if(r=c.stateNode,s)"function"===typeof(i=r.style).setProperty?i.setProperty("display","none","important"):i.display="none";else{l=c.stateNode;var h=c.memoizedProps.style,m=void 0!==h&&null!==h&&h.hasOwnProperty("display")?h.display:null;l.style.display=null==m||"boolean"===typeof m?"":(""+m).trim()}}catch(p){uu(c,c.return,p)}}}else if(6===t.tag){if(null===n){c=t;try{c.stateNode.nodeValue=s?"":c.memoizedProps}catch(p){uu(c,c.return,p)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}4&a&&(null!==(a=e.updateQueue)&&(null!==(n=a.retryQueue)&&(a.retryQueue=null,Il(e,n))));break;case 19:Pl(t,e),zl(e),4&a&&(null!==(a=e.updateQueue)&&(e.updateQueue=null,Il(e,a)));case 30:case 21:}}function zl(e){var t=e.flags;if(2&t){try{for(var n,a=e.return;null!==a;){if(pl(a)){n=a;break}a=a.return}if(null==n)throw Error(o(160));switch(n.tag){case 27:var s=n.stateNode;vl(e,fl(e),s);break;case 5:var r=n.stateNode;32&n.flags&&(St(r,""),n.flags&=-33),vl(e,fl(e),r);break;case 3:case 4:var i=n.stateNode.containerInfo;gl(e,fl(e),i);break;default:throw Error(o(161))}}catch(l){uu(e,e.return,l)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function Rl(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;Rl(t),5===t.tag&&1024&t.flags&&t.stateNode.reset(),e=e.sibling}}function Ll(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)jl(e,t.alternate,t),t=t.sibling}function Fl(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:il(4,t,t.return),Fl(t);break;case 1:dl(t,t.return);var n=t.stateNode;"function"===typeof n.componentWillUnmount&&cl(t,t.return,n),Fl(t);break;case 27:wd(t.stateNode);case 26:case 5:dl(t,t.return),Fl(t);break;case 22:null===t.memoizedState&&Fl(t);break;default:Fl(t)}e=e.sibling}}function Ol(e,t,n){for(n=n&&0!==(8772&t.subtreeFlags),t=t.child;null!==t;){var a=t.alternate,s=e,r=t,o=r.flags;switch(r.tag){case 0:case 11:case 15:Ol(s,r,n),ol(4,r);break;case 1:if(Ol(s,r,n),"function"===typeof(s=(a=r).stateNode).componentDidMount)try{s.componentDidMount()}catch(c){uu(a,a.return,c)}if(null!==(s=(a=r).updateQueue)){var i=a.stateNode;try{var l=s.shared.hiddenCallbacks;if(null!==l)for(s.shared.hiddenCallbacks=null,s=0;s<l.length;s++)dr(l[s],i)}catch(c){uu(a,a.return,c)}}n&&64&o&&ll(r),ul(r,r.return);break;case 27:yl(r);case 26:case 5:Ol(s,r,n),n&&null===a&&4&o&&hl(r),ul(r,r.return);break;case 12:Ol(s,r,n);break;case 13:Ol(s,r,n),n&&4&o&&_l(s,r);break;case 22:null===r.memoizedState&&Ol(s,r,n),ul(r,r.return);break;case 30:break;default:Ol(s,r,n)}t=t.sibling}}function Ul(e,t){var n=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==n&&(null!=e&&e.refCount++,null!=n&&Ms(n))}function Bl(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Ms(e))}function Hl(e,t,n,a){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)ql(e,t,n,a),t=t.sibling}function ql(e,t,n,a){var s=t.flags;switch(t.tag){case 0:case 11:case 15:Hl(e,t,n,a),2048&s&&ol(9,t);break;case 1:case 13:default:Hl(e,t,n,a);break;case 3:Hl(e,t,n,a),2048&s&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Ms(e)));break;case 12:if(2048&s){Hl(e,t,n,a),e=t.stateNode;try{var r=t.memoizedProps,o=r.id,i=r.onPostCommit;"function"===typeof i&&i(o,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(l){uu(t,t.return,l)}}else Hl(e,t,n,a);break;case 23:break;case 22:r=t.stateNode,o=t.alternate,null!==t.memoizedState?2&r._visibility?Hl(e,t,n,a):Vl(e,t):2&r._visibility?Hl(e,t,n,a):(r._visibility|=2,Wl(e,t,n,a,0!==(10256&t.subtreeFlags))),2048&s&&Ul(o,t);break;case 24:Hl(e,t,n,a),2048&s&&Bl(t.alternate,t)}}function Wl(e,t,n,a,s){for(s=s&&0!==(10256&t.subtreeFlags),t=t.child;null!==t;){var r=e,o=t,i=n,l=a,c=o.flags;switch(o.tag){case 0:case 11:case 15:Wl(r,o,i,l,s),ol(8,o);break;case 23:break;case 22:var u=o.stateNode;null!==o.memoizedState?2&u._visibility?Wl(r,o,i,l,s):Vl(r,o):(u._visibility|=2,Wl(r,o,i,l,s)),s&&2048&c&&Ul(o.alternate,o);break;case 24:Wl(r,o,i,l,s),s&&2048&c&&Bl(o.alternate,o);break;default:Wl(r,o,i,l,s)}t=t.sibling}}function Vl(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var n=e,a=t,s=a.flags;switch(a.tag){case 22:Vl(n,a),2048&s&&Ul(a.alternate,a);break;case 24:Vl(n,a),2048&s&&Bl(a.alternate,a);break;default:Vl(n,a)}t=t.sibling}}var Kl=8192;function Gl(e){if(e.subtreeFlags&Kl)for(e=e.child;null!==e;)$l(e),e=e.sibling}function $l(e){switch(e.tag){case 26:Gl(e),e.flags&Kl&&null!==e.memoizedState&&function(e,t,n){if(null===Hd)throw Error(o(475));var a=Hd;if("stylesheet"===t.type&&("string"!==typeof n.media||!1!==matchMedia(n.media).matches)&&0===(4&t.state.loading)){if(null===t.instance){var s=Ad(n.href),r=e.querySelector(_d(s));if(r)return null!==(e=r._p)&&"object"===typeof e&&"function"===typeof e.then&&(a.count++,a=Wd.bind(a),e.then(a,a)),t.state.loading|=4,t.instance=r,void Ve(r);r=e.ownerDocument||e,n=Id(n),(s=Sd.get(s))&&Rd(n,s),Ve(r=r.createElement("link"));var i=r;i._p=new Promise(function(e,t){i.onload=e,i.onerror=t}),ed(r,"link",n),t.instance=r}null===a.stylesheets&&(a.stylesheets=new Map),a.stylesheets.set(t,e),(e=t.state.preload)&&0===(3&t.state.loading)&&(a.count++,t=Wd.bind(a),e.addEventListener("load",t),e.addEventListener("error",t))}}(Dl,e.memoizedState,e.memoizedProps);break;case 5:default:Gl(e);break;case 3:case 4:var t=Dl;Dl=jd(e.stateNode.containerInfo),Gl(e),Dl=t;break;case 22:null===e.memoizedState&&(null!==(t=e.alternate)&&null!==t.memoizedState?(t=Kl,Kl=16777216,Gl(e),Kl=t):Gl(e))}}function Yl(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function Ql(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var a=t[n];kl=a,Zl(a,e)}Yl(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)Jl(e),e=e.sibling}function Jl(e){switch(e.tag){case 0:case 11:case 15:Ql(e),2048&e.flags&&il(9,e,e.return);break;case 3:case 12:default:Ql(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&2&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-3,Xl(e)):Ql(e)}}function Xl(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var a=t[n];kl=a,Zl(a,e)}Yl(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:il(8,t,t.return),Xl(t);break;case 22:2&(n=t.stateNode)._visibility&&(n._visibility&=-3,Xl(t));break;default:Xl(t)}e=e.sibling}}function Zl(e,t){for(;null!==kl;){var n=kl;switch(n.tag){case 0:case 11:case 15:il(8,n,t);break;case 23:case 22:if(null!==n.memoizedState&&null!==n.memoizedState.cachePool){var a=n.memoizedState.cachePool.pool;null!=a&&a.refCount++}break;case 24:Ms(n.memoizedState.cache)}if(null!==(a=n.child))a.return=n,kl=a;else e:for(n=e;null!==kl;){var s=(a=kl).sibling,r=a.return;if(Nl(a),a===n){kl=null;break e}if(null!==s){s.return=r,kl=s;break e}kl=r}}}var ec={getCacheForType:function(e){var t=Cs(Ps),n=t.data.get(e);return void 0===n&&(n=e(),t.data.set(e,n)),n}},tc="function"===typeof WeakMap?WeakMap:Map,nc=0,ac=null,sc=null,rc=0,oc=0,ic=null,lc=!1,cc=!1,uc=!1,dc=0,hc=0,mc=0,pc=0,fc=0,gc=0,vc=0,yc=null,bc=null,xc=!1,wc=0,Sc=1/0,kc=null,jc=null,Nc=0,Cc=null,Ec=null,Tc=0,Ac=0,_c=null,Ic=null,Pc=0,Dc=null;function Mc(){if(0!==(2&nc)&&0!==rc)return rc&-rc;if(null!==M.T){return 0!==Ls?Ls:Au()}return _e()}function zc(){0===gc&&(gc=0===(536870912&rc)||rs?Se():536870912);var e=si.current;return null!==e&&(e.flags|=32),gc}function Rc(e,t,n){(e!==ac||2!==oc&&9!==oc)&&null===e.cancelPendingCommit||(qc(e,0),Uc(e,rc,gc,!1)),Ne(e,n),0!==(2&nc)&&e===ac||(e===ac&&(0===(2&nc)&&(pc|=n),4===hc&&Uc(e,rc,gc,!1)),Su(e))}function Lc(e,t,n){if(0!==(6&nc))throw Error(o(327));for(var a=!n&&0===(124&t)&&0===(t&e.expiredLanes)||xe(e,t),s=a?function(e,t){var n=nc;nc|=2;var a=Vc(),s=Kc();ac!==e||rc!==t?(kc=null,Sc=te()+500,qc(e,t)):cc=xe(e,t);e:for(;;)try{if(0!==oc&&null!==sc){t=sc;var r=ic;t:switch(oc){case 1:oc=0,ic=null,Zc(e,t,r,1);break;case 2:case 9:if(Ys(r)){oc=0,ic=null,Xc(t);break}t=function(){2!==oc&&9!==oc||ac!==e||(oc=7),Su(e)},r.then(t,t);break e;case 3:oc=7;break e;case 4:oc=5;break e;case 7:Ys(r)?(oc=0,ic=null,Xc(t)):(oc=0,ic=null,Zc(e,t,r,7));break;case 5:var i=null;switch(sc.tag){case 26:i=sc.memoizedState;case 5:case 27:var l=sc;if(!i||Bd(i)){oc=0,ic=null;var c=l.sibling;if(null!==c)sc=c;else{var u=l.return;null!==u?(sc=u,eu(u)):sc=null}break t}}oc=0,ic=null,Zc(e,t,r,5);break;case 6:oc=0,ic=null,Zc(e,t,r,6);break;case 8:Hc(),hc=6;break e;default:throw Error(o(462))}}Qc();break}catch(d){Wc(e,d)}return ys=vs=null,M.H=a,M.A=s,nc=n,null!==sc?0:(ac=null,rc=0,Ta(),hc)}(e,t):$c(e,t,!0),r=a;;){if(0===s){cc&&!a&&Uc(e,t,0,!1);break}if(n=e.current.alternate,!r||Oc(n)){if(2===s){if(r=t,e.errorRecoveryDisabledLanes&r)var i=0;else i=0!==(i=-536870913&e.pendingLanes)?i:536870912&i?536870912:0;if(0!==i){t=i;e:{var l=e;s=yc;var c=l.current.memoizedState.isDehydrated;if(c&&(qc(l,i).flags|=256),2!==(i=$c(l,i,!1))){if(uc&&!c){l.errorRecoveryDisabledLanes|=r,pc|=r,s=4;break e}r=bc,bc=s,null!==r&&(null===bc?bc=r:bc.push.apply(bc,r))}s=i}if(r=!1,2!==s)continue}}if(1===s){qc(e,0),Uc(e,t,0,!0);break}e:{switch(a=e,r=s){case 0:case 1:throw Error(o(345));case 4:if((4194048&t)!==t)break;case 6:Uc(a,t,gc,!lc);break e;case 2:bc=null;break;case 3:case 5:break;default:throw Error(o(329))}if((62914560&t)===t&&10<(s=wc+300-te())){if(Uc(a,t,gc,!lc),0!==be(a,0,!0))break e;a.timeoutHandle=ld(Fc.bind(null,a,n,bc,kc,xc,t,gc,pc,vc,lc,r,2,-0,0),s)}else Fc(a,n,bc,kc,xc,t,gc,pc,vc,lc,r,0,-0,0)}break}s=$c(e,t,!1),r=!1}Su(e)}function Fc(e,t,n,a,s,r,i,l,c,u,d,h,m,p){if(e.timeoutHandle=-1,(8192&(h=t.subtreeFlags)||16785408===(16785408&h))&&(Hd={stylesheets:null,count:0,unsuspend:qd},$l(t),null!==(h=function(){if(null===Hd)throw Error(o(475));var e=Hd;return e.stylesheets&&0===e.count&&Kd(e,e.stylesheets),0<e.count?function(t){var n=setTimeout(function(){if(e.stylesheets&&Kd(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(n)}}:null}())))return e.cancelPendingCommit=h(nu.bind(null,e,t,r,n,a,s,i,l,c,d,1,m,p)),void Uc(e,r,i,!u);nu(e,t,r,n,a,s,i,l,c)}function Oc(e){for(var t=e;;){var n=t.tag;if((0===n||11===n||15===n)&&16384&t.flags&&(null!==(n=t.updateQueue)&&null!==(n=n.stores)))for(var a=0;a<n.length;a++){var s=n[a],r=s.getSnapshot;s=s.value;try{if(!Yn(r(),s))return!1}catch(o){return!1}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Uc(e,t,n,a){t&=~fc,t&=~pc,e.suspendedLanes|=t,e.pingedLanes&=~t,a&&(e.warmLanes|=t),a=e.expirationTimes;for(var s=t;0<s;){var r=31-me(s),o=1<<r;a[r]=-1,s&=~o}0!==n&&Ce(e,n,t)}function Bc(){return 0!==(6&nc)||(ku(0,!1),!1)}function Hc(){if(null!==sc){if(0===oc)var e=sc.return;else ys=vs=null,Lr(e=sc),Yo=null,Qo=0,e=sc;for(;null!==e;)rl(e.alternate,e),e=e.return;sc=null}}function qc(e,t){var n=e.timeoutHandle;-1!==n&&(e.timeoutHandle=-1,cd(n)),null!==(n=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,n()),Hc(),ac=e,sc=n=Fa(e.current,null),rc=t,oc=0,ic=null,lc=!1,cc=xe(e,t),uc=!1,vc=gc=fc=pc=mc=hc=0,bc=yc=null,xc=!1,0!==(8&t)&&(t|=32&t);var a=e.entangledLanes;if(0!==a)for(e=e.entanglements,a&=t;0<a;){var s=31-me(a),r=1<<s;t|=e[s],a&=~r}return dc=t,Ta(),n}function Wc(e,t){br=null,M.H=Vo,t===Vs||t===Gs?(t=Zs(),oc=3):t===Ks?(t=Zs(),oc=4):oc=t===Ci?8:null!==t&&"object"===typeof t&&"function"===typeof t.then?6:1,ic=t,null===sc&&(hc=1,wi(e,ja(t,e.current)))}function Vc(){var e=M.H;return M.H=Vo,null===e?Vo:e}function Kc(){var e=M.A;return M.A=ec,e}function Gc(){hc=4,lc||(4194048&rc)!==rc&&null!==si.current||(cc=!0),0===(134217727&mc)&&0===(134217727&pc)||null===ac||Uc(ac,rc,gc,!1)}function $c(e,t,n){var a=nc;nc|=2;var s=Vc(),r=Kc();ac===e&&rc===t||(kc=null,qc(e,t)),t=!1;var o=hc;e:for(;;)try{if(0!==oc&&null!==sc){var i=sc,l=ic;switch(oc){case 8:Hc(),o=6;break e;case 3:case 2:case 9:case 6:null===si.current&&(t=!0);var c=oc;if(oc=0,ic=null,Zc(e,i,l,c),n&&cc){o=0;break e}break;default:c=oc,oc=0,ic=null,Zc(e,i,l,c)}}Yc(),o=hc;break}catch(u){Wc(e,u)}return t&&e.shellSuspendCounter++,ys=vs=null,nc=a,M.H=s,M.A=r,null===sc&&(ac=null,rc=0,Ta()),o}function Yc(){for(;null!==sc;)Jc(sc)}function Qc(){for(;null!==sc&&!Z();)Jc(sc)}function Jc(e){var t=Ji(e.alternate,e,dc);e.memoizedProps=e.pendingProps,null===t?eu(e):sc=t}function Xc(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Ri(n,t,t.pendingProps,t.type,void 0,rc);break;case 11:t=Ri(n,t,t.pendingProps,t.type.render,t.ref,rc);break;case 5:Lr(t);default:rl(n,t),t=Ji(n,t=sc=Oa(t,dc),dc)}e.memoizedProps=e.pendingProps,null===t?eu(e):sc=t}function Zc(e,t,n,a){ys=vs=null,Lr(t),Yo=null,Qo=0;var s=t.return;try{if(function(e,t,n,a,s){if(n.flags|=32768,null!==a&&"object"===typeof a&&"function"===typeof a.then){if(null!==(t=n.alternate)&&ks(t,n,s,!0),null!==(n=si.current)){switch(n.tag){case 13:return null===ri?Gc():null===n.alternate&&0===hc&&(hc=3),n.flags&=-257,n.flags|=65536,n.lanes=s,a===$s?n.flags|=16384:(null===(t=n.updateQueue)?n.updateQueue=new Set([a]):t.add(a),du(e,a,s)),!1;case 22:return n.flags|=65536,a===$s?n.flags|=16384:(null===(t=n.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([a])},n.updateQueue=t):null===(n=t.retryQueue)?t.retryQueue=new Set([a]):n.add(a),du(e,a,s)),!1}throw Error(o(435,n.tag))}return du(e,a,s),Gc(),!1}if(rs)return null!==(t=si.current)?(0===(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=s,a!==ls&&fs(ja(e=Error(o(422),{cause:a}),n))):(a!==ls&&fs(ja(t=Error(o(423),{cause:a}),n)),(e=e.current.alternate).flags|=65536,s&=-s,e.lanes|=s,a=ja(a,n),ir(e,s=ki(e.stateNode,a,s)),4!==hc&&(hc=2)),!1;var r=Error(o(520),{cause:a});if(r=ja(r,n),null===yc?yc=[r]:yc.push(r),4!==hc&&(hc=2),null===t)return!0;a=ja(a,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=s&-s,n.lanes|=e,ir(n,e=ki(n.stateNode,a,e)),!1;case 1:if(t=n.type,r=n.stateNode,0===(128&n.flags)&&("function"===typeof t.getDerivedStateFromError||null!==r&&"function"===typeof r.componentDidCatch&&(null===jc||!jc.has(r))))return n.flags|=65536,s&=-s,n.lanes|=s,Ni(s=ji(s),e,n,a),ir(n,s),!1}n=n.return}while(null!==n);return!1}(e,s,t,n,rc))return hc=1,wi(e,ja(n,e.current)),void(sc=null)}catch(r){if(null!==s)throw sc=s,r;return hc=1,wi(e,ja(n,e.current)),void(sc=null)}32768&t.flags?(rs||1===a?e=!0:cc||0!==(536870912&rc)?e=!1:(lc=e=!0,(2===a||9===a||3===a||6===a)&&(null!==(a=si.current)&&13===a.tag&&(a.flags|=16384))),tu(t,e)):eu(t)}function eu(e){var t=e;do{if(0!==(32768&t.flags))return void tu(t,lc);e=t.return;var n=al(t.alternate,t,dc);if(null!==n)return void(sc=n);if(null!==(t=t.sibling))return void(sc=t);sc=t=e}while(null!==t);0===hc&&(hc=5)}function tu(e,t){do{var n=sl(e.alternate,e);if(null!==n)return n.flags&=32767,void(sc=n);if(null!==(n=e.return)&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&null!==(e=e.sibling))return void(sc=e);sc=e=n}while(null!==e);hc=6,sc=null}function nu(e,t,n,a,s,r,i,l,c){e.cancelPendingCommit=null;do{iu()}while(0!==Nc);if(0!==(6&nc))throw Error(o(327));if(null!==t){if(t===e.current)throw Error(o(177));if(r=t.lanes|t.childLanes,function(e,t,n,a,s,r){var o=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var i=e.entanglements,l=e.expirationTimes,c=e.hiddenUpdates;for(n=o&~n;0<n;){var u=31-me(n),d=1<<u;i[u]=0,l[u]=-1;var h=c[u];if(null!==h)for(c[u]=null,u=0;u<h.length;u++){var m=h[u];null!==m&&(m.lane&=-536870913)}n&=~d}0!==a&&Ce(e,a,0),0!==r&&0===s&&0!==e.tag&&(e.suspendedLanes|=r&~(o&~t))}(e,n,r|=Ea,i,l,c),e===ac&&(sc=ac=null,rc=0),Ec=t,Cc=e,Tc=n,Ac=r,_c=s,Ic=a,0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?(e.callbackNode=null,e.callbackPriority=0,J(re,function(){return lu(),null})):(e.callbackNode=null,e.callbackPriority=0),a=0!==(13878&t.flags),0!==(13878&t.subtreeFlags)||a){a=M.T,M.T=null,s=z.p,z.p=2,i=nc,nc|=4;try{!function(e,t){if(e=e.containerInfo,td=nh,ta(e=ea(e))){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var a=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(a&&0!==a.rangeCount){n=a.anchorNode;var s=a.anchorOffset,r=a.focusNode;a=a.focusOffset;try{n.nodeType,r.nodeType}catch(g){n=null;break e}var i=0,l=-1,c=-1,u=0,d=0,h=e,m=null;t:for(;;){for(var p;h!==n||0!==s&&3!==h.nodeType||(l=i+s),h!==r||0!==a&&3!==h.nodeType||(c=i+a),3===h.nodeType&&(i+=h.nodeValue.length),null!==(p=h.firstChild);)m=h,h=p;for(;;){if(h===e)break t;if(m===n&&++u===s&&(l=i),m===r&&++d===a&&(c=i),null!==(p=h.nextSibling))break;m=(h=m).parentNode}h=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(nd={focusedElem:e,selectionRange:n},nh=!1,kl=t;null!==kl;)if(e=(t=kl).child,0!==(1024&t.subtreeFlags)&&null!==e)e.return=t,kl=e;else for(;null!==kl;){switch(r=(t=kl).alternate,e=t.flags,t.tag){case 0:case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(0!==(1024&e)&&null!==r){e=void 0,n=t,s=r.memoizedProps,r=r.memoizedState,a=n.stateNode;try{var f=gi(n.type,s,(n.elementType,n.type));e=a.getSnapshotBeforeUpdate(f,r),a.__reactInternalSnapshotBeforeUpdate=e}catch(v){uu(n,n.return,v)}}break;case 3:if(0!==(1024&e))if(9===(n=(e=t.stateNode.containerInfo).nodeType))fd(e);else if(1===n)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":fd(e);break;default:e.textContent=""}break;default:if(0!==(1024&e))throw Error(o(163))}if(null!==(e=t.sibling)){e.return=t.return,kl=e;break}kl=t.return}}(e,t)}finally{nc=i,z.p=s,M.T=a}}Nc=1,au(),su(),ru()}}function au(){if(1===Nc){Nc=0;var e=Cc,t=Ec,n=0!==(13878&t.flags);if(0!==(13878&t.subtreeFlags)||n){n=M.T,M.T=null;var a=z.p;z.p=2;var s=nc;nc|=4;try{Ml(t,e);var r=nd,o=ea(e.containerInfo),i=r.focusedElem,l=r.selectionRange;if(o!==i&&i&&i.ownerDocument&&Zn(i.ownerDocument.documentElement,i)){if(null!==l&&ta(i)){var c=l.start,u=l.end;if(void 0===u&&(u=c),"selectionStart"in i)i.selectionStart=c,i.selectionEnd=Math.min(u,i.value.length);else{var d=i.ownerDocument||document,h=d&&d.defaultView||window;if(h.getSelection){var m=h.getSelection(),p=i.textContent.length,f=Math.min(l.start,p),g=void 0===l.end?f:Math.min(l.end,p);!m.extend&&f>g&&(o=g,g=f,f=o);var v=Xn(i,f),y=Xn(i,g);if(v&&y&&(1!==m.rangeCount||m.anchorNode!==v.node||m.anchorOffset!==v.offset||m.focusNode!==y.node||m.focusOffset!==y.offset)){var b=d.createRange();b.setStart(v.node,v.offset),m.removeAllRanges(),f>g?(m.addRange(b),m.extend(y.node,y.offset)):(b.setEnd(y.node,y.offset),m.addRange(b))}}}}for(d=[],m=i;m=m.parentNode;)1===m.nodeType&&d.push({element:m,left:m.scrollLeft,top:m.scrollTop});for("function"===typeof i.focus&&i.focus(),i=0;i<d.length;i++){var x=d[i];x.element.scrollLeft=x.left,x.element.scrollTop=x.top}}nh=!!td,nd=td=null}finally{nc=s,z.p=a,M.T=n}}e.current=t,Nc=2}}function su(){if(2===Nc){Nc=0;var e=Cc,t=Ec,n=0!==(8772&t.flags);if(0!==(8772&t.subtreeFlags)||n){n=M.T,M.T=null;var a=z.p;z.p=2;var s=nc;nc|=4;try{jl(e,t.alternate,t)}finally{nc=s,z.p=a,M.T=n}}Nc=3}}function ru(){if(4===Nc||3===Nc){Nc=0,ee();var e=Cc,t=Ec,n=Tc,a=Ic;0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?Nc=5:(Nc=0,Ec=Cc=null,ou(e,e.pendingLanes));var s=e.pendingLanes;if(0===s&&(jc=null),Ae(n),t=t.stateNode,de&&"function"===typeof de.onCommitFiberRoot)try{de.onCommitFiberRoot(ue,t,void 0,128===(128&t.current.flags))}catch(l){}if(null!==a){t=M.T,s=z.p,z.p=2,M.T=null;try{for(var r=e.onRecoverableError,o=0;o<a.length;o++){var i=a[o];r(i.value,{componentStack:i.stack})}}finally{M.T=t,z.p=s}}0!==(3&Tc)&&iu(),Su(e),s=e.pendingLanes,0!==(4194090&n)&&0!==(42&s)?e===Dc?Pc++:(Pc=0,Dc=e):Pc=0,ku(0,!1)}}function ou(e,t){0===(e.pooledCacheLanes&=t)&&(null!=(t=e.pooledCache)&&(e.pooledCache=null,Ms(t)))}function iu(e){return au(),su(),ru(),lu()}function lu(){if(5!==Nc)return!1;var e=Cc,t=Ac;Ac=0;var n=Ae(Tc),a=M.T,s=z.p;try{z.p=32>n?32:n,M.T=null,n=_c,_c=null;var r=Cc,i=Tc;if(Nc=0,Ec=Cc=null,Tc=0,0!==(6&nc))throw Error(o(331));var l=nc;if(nc|=4,Jl(r.current),ql(r,r.current,i,n),nc=l,ku(0,!1),de&&"function"===typeof de.onPostCommitFiberRoot)try{de.onPostCommitFiberRoot(ue,r)}catch(c){}return!0}finally{z.p=s,M.T=a,ou(e,t)}}function cu(e,t,n){t=ja(n,t),null!==(e=rr(e,t=ki(e.stateNode,t,2),2))&&(Ne(e,2),Su(e))}function uu(e,t,n){if(3===e.tag)cu(e,e,n);else for(;null!==t;){if(3===t.tag){cu(t,e,n);break}if(1===t.tag){var a=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof a.componentDidCatch&&(null===jc||!jc.has(a))){e=ja(n,e),null!==(a=rr(t,n=ji(2),2))&&(Ni(n,a,t,e),Ne(a,2),Su(a));break}}t=t.return}}function du(e,t,n){var a=e.pingCache;if(null===a){a=e.pingCache=new tc;var s=new Set;a.set(t,s)}else void 0===(s=a.get(t))&&(s=new Set,a.set(t,s));s.has(n)||(uc=!0,s.add(n),e=hu.bind(null,e,t,n),t.then(e,e))}function hu(e,t,n){var a=e.pingCache;null!==a&&a.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,ac===e&&(rc&n)===n&&(4===hc||3===hc&&(62914560&rc)===rc&&300>te()-wc?0===(2&nc)&&qc(e,0):fc|=n,vc===rc&&(vc=0)),Su(e)}function mu(e,t){0===t&&(t=ke()),null!==(e=Ia(e,t))&&(Ne(e,t),Su(e))}function pu(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),mu(e,n)}function fu(e,t){var n=0;switch(e.tag){case 13:var a=e.stateNode,s=e.memoizedState;null!==s&&(n=s.retryLane);break;case 19:a=e.stateNode;break;case 22:a=e.stateNode._retryCache;break;default:throw Error(o(314))}null!==a&&a.delete(t),mu(e,n)}var gu=null,vu=null,yu=!1,bu=!1,xu=!1,wu=0;function Su(e){e!==vu&&null===e.next&&(null===vu?gu=vu=e:vu=vu.next=e),bu=!0,yu||(yu=!0,dd(function(){0!==(6&nc)?J(ae,ju):Nu()}))}function ku(e,t){if(!xu&&bu){xu=!0;do{for(var n=!1,a=gu;null!==a;){if(!t)if(0!==e){var s=a.pendingLanes;if(0===s)var r=0;else{var o=a.suspendedLanes,i=a.pingedLanes;r=(1<<31-me(42|e)+1)-1,r=201326741&(r&=s&~(o&~i))?201326741&r|1:r?2|r:0}0!==r&&(n=!0,Tu(a,r))}else r=rc,0===(3&(r=be(a,a===ac?r:0,null!==a.cancelPendingCommit||-1!==a.timeoutHandle)))||xe(a,r)||(n=!0,Tu(a,r));a=a.next}}while(n);xu=!1}}function ju(){Nu()}function Nu(){bu=yu=!1;var e=0;0!==wu&&(function(){var e=window.event;if(e&&"popstate"===e.type)return e!==id&&(id=e,!0);return id=null,!1}()&&(e=wu),wu=0);for(var t=te(),n=null,a=gu;null!==a;){var s=a.next,r=Cu(a,t);0===r?(a.next=null,null===n?gu=s:n.next=s,null===s&&(vu=n)):(n=a,(0!==e||0!==(3&r))&&(bu=!0)),a=s}ku(e,!1)}function Cu(e,t){for(var n=e.suspendedLanes,a=e.pingedLanes,s=e.expirationTimes,r=-62914561&e.pendingLanes;0<r;){var o=31-me(r),i=1<<o,l=s[o];-1===l?0!==(i&n)&&0===(i&a)||(s[o]=we(i,t)):l<=t&&(e.expiredLanes|=i),r&=~i}if(n=rc,n=be(e,e===(t=ac)?n:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle),a=e.callbackNode,0===n||e===t&&(2===oc||9===oc)||null!==e.cancelPendingCommit)return null!==a&&null!==a&&X(a),e.callbackNode=null,e.callbackPriority=0;if(0===(3&n)||xe(e,n)){if((t=n&-n)===e.callbackPriority)return t;switch(null!==a&&X(a),Ae(n)){case 2:case 8:n=se;break;case 32:default:n=re;break;case 268435456:n=ie}return a=Eu.bind(null,e),n=J(n,a),e.callbackPriority=t,e.callbackNode=n,t}return null!==a&&null!==a&&X(a),e.callbackPriority=2,e.callbackNode=null,2}function Eu(e,t){if(0!==Nc&&5!==Nc)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(iu()&&e.callbackNode!==n)return null;var a=rc;return 0===(a=be(e,e===ac?a:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle))?null:(Lc(e,a,t),Cu(e,te()),null!=e.callbackNode&&e.callbackNode===n?Eu.bind(null,e):null)}function Tu(e,t){if(iu())return null;Lc(e,t,!0)}function Au(){return 0===wu&&(wu=Se()),wu}function _u(e){return null==e||"symbol"===typeof e||"boolean"===typeof e?null:"function"===typeof e?e:At(""+e)}function Iu(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}for(var Pu=0;Pu<wa.length;Pu++){var Du=wa[Pu];Sa(Du.toLowerCase(),"on"+(Du[0].toUpperCase()+Du.slice(1)))}Sa(ma,"onAnimationEnd"),Sa(pa,"onAnimationIteration"),Sa(fa,"onAnimationStart"),Sa("dblclick","onDoubleClick"),Sa("focusin","onFocus"),Sa("focusout","onBlur"),Sa(ga,"onTransitionRun"),Sa(va,"onTransitionStart"),Sa(ya,"onTransitionCancel"),Sa(ba,"onTransitionEnd"),Ye("onMouseEnter",["mouseout","mouseover"]),Ye("onMouseLeave",["mouseout","mouseover"]),Ye("onPointerEnter",["pointerout","pointerover"]),Ye("onPointerLeave",["pointerout","pointerover"]),$e("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),$e("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),$e("onBeforeInput",["compositionend","keypress","textInput","paste"]),$e("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),$e("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),$e("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Mu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),zu=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Mu));function Ru(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var a=e[n],s=a.event;a=a.listeners;e:{var r=void 0;if(t)for(var o=a.length-1;0<=o;o--){var i=a[o],l=i.instance,c=i.currentTarget;if(i=i.listener,l!==r&&s.isPropagationStopped())break e;r=i,s.currentTarget=c;try{r(s)}catch(u){vi(u)}s.currentTarget=null,r=l}else for(o=0;o<a.length;o++){if(l=(i=a[o]).instance,c=i.currentTarget,i=i.listener,l!==r&&s.isPropagationStopped())break e;r=i,s.currentTarget=c;try{r(s)}catch(u){vi(u)}s.currentTarget=null,r=l}}}}function Lu(e,t){var n=t[ze];void 0===n&&(n=t[ze]=new Set);var a=e+"__bubble";n.has(a)||(Bu(t,e,2,!1),n.add(a))}function Fu(e,t,n){var a=0;t&&(a|=4),Bu(n,e,a,t)}var Ou="_reactListening"+Math.random().toString(36).slice(2);function Uu(e){if(!e[Ou]){e[Ou]=!0,Ke.forEach(function(t){"selectionchange"!==t&&(zu.has(t)||Fu(t,!1,e),Fu(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Ou]||(t[Ou]=!0,Fu("selectionchange",!1,t))}}function Bu(e,t,n,a){switch(ch(t)){case 2:var s=ah;break;case 8:s=sh;break;default:s=rh}n=s.bind(null,t,n,e),s=void 0,!Ot||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(s=!0),a?void 0!==s?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):void 0!==s?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function Hu(e,t,n,a,s){var r=a;if(0===(1&t)&&0===(2&t)&&null!==a)e:for(;;){if(null===a)return;var o=a.tag;if(3===o||4===o){var i=a.stateNode.containerInfo;if(i===s)break;if(4===o)for(o=a.return;null!==o;){var c=o.tag;if((3===c||4===c)&&o.stateNode.containerInfo===s)return;o=o.return}for(;null!==i;){if(null===(o=Be(i)))return;if(5===(c=o.tag)||6===c||26===c||27===c){a=r=o;continue e}i=i.parentNode}}a=a.return}Rt(function(){var a=r,s=It(n),o=[];e:{var i=xa.get(e);if(void 0!==i){var c=Zt,u=e;switch(e){case"keypress":if(0===Vt(n))break e;case"keydown":case"keyup":c=fn;break;case"focusin":u="focus",c=rn;break;case"focusout":u="blur",c=rn;break;case"beforeblur":case"afterblur":c=rn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=an;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=sn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=vn;break;case ma:case pa:case fa:c=on;break;case ba:c=yn;break;case"scroll":case"scrollend":c=tn;break;case"wheel":c=bn;break;case"copy":case"cut":case"paste":c=ln;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=gn;break;case"toggle":case"beforetoggle":c=xn}var d=0!==(4&t),h=!d&&("scroll"===e||"scrollend"===e),m=d?null!==i?i+"Capture":null:i;d=[];for(var p,f=a;null!==f;){var g=f;if(p=g.stateNode,5!==(g=g.tag)&&26!==g&&27!==g||null===p||null===m||null!=(g=Lt(f,m))&&d.push(qu(f,g,p)),h)break;f=f.return}0<d.length&&(i=new c(i,u,null,n,s),o.push({event:i,listeners:d}))}}if(0===(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(i="mouseover"===e||"pointerover"===e)||n===_t||!(u=n.relatedTarget||n.fromElement)||!Be(u)&&!u[Me])&&(c||i)&&(i=s.window===s?s:(i=s.ownerDocument)?i.defaultView||i.parentWindow:window,c?(c=a,null!==(u=(u=n.relatedTarget||n.toElement)?Be(u):null)&&(h=l(u),d=u.tag,u!==h||5!==d&&27!==d&&6!==d)&&(u=null)):(c=null,u=a),c!==u)){if(d=an,g="onMouseLeave",m="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(d=gn,g="onPointerLeave",m="onPointerEnter",f="pointer"),h=null==c?i:qe(c),p=null==u?i:qe(u),(i=new d(g,f+"leave",c,n,s)).target=h,i.relatedTarget=p,g=null,Be(s)===a&&((d=new d(m,f+"enter",u,n,s)).target=p,d.relatedTarget=h,g=d),h=g,c&&u)e:{for(m=u,f=0,p=d=c;p;p=Vu(p))f++;for(p=0,g=m;g;g=Vu(g))p++;for(;0<f-p;)d=Vu(d),f--;for(;0<p-f;)m=Vu(m),p--;for(;f--;){if(d===m||null!==m&&d===m.alternate)break e;d=Vu(d),m=Vu(m)}d=null}else d=null;null!==c&&Ku(o,i,c,d,!1),null!==u&&null!==h&&Ku(o,h,u,d,!0)}if("select"===(c=(i=a?qe(a):window).nodeName&&i.nodeName.toLowerCase())||"input"===c&&"file"===i.type)var v=Fn;else if(Pn(i))if(On)v=$n;else{v=Kn;var y=Vn}else!(c=i.nodeName)||"input"!==c.toLowerCase()||"checkbox"!==i.type&&"radio"!==i.type?a&&Ct(a.elementType)&&(v=Fn):v=Gn;switch(v&&(v=v(e,a))?Dn(o,v,n,s):(y&&y(e,i,a),"focusout"===e&&a&&"number"===i.type&&null!=a.memoizedProps.value&&yt(i,"number",i.value)),y=a?qe(a):window,e){case"focusin":(Pn(y)||"true"===y.contentEditable)&&(aa=y,sa=a,ra=null);break;case"focusout":ra=sa=aa=null;break;case"mousedown":oa=!0;break;case"contextmenu":case"mouseup":case"dragend":oa=!1,ia(o,n,s);break;case"selectionchange":if(na)break;case"keydown":case"keyup":ia(o,n,s)}var b;if(Sn)e:{switch(e){case"compositionstart":var x="onCompositionStart";break e;case"compositionend":x="onCompositionEnd";break e;case"compositionupdate":x="onCompositionUpdate";break e}x=void 0}else _n?Tn(e,n)&&(x="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(x="onCompositionStart");x&&(Nn&&"ko"!==n.locale&&(_n||"onCompositionStart"!==x?"onCompositionEnd"===x&&_n&&(b=Wt()):(Ht="value"in(Bt=s)?Bt.value:Bt.textContent,_n=!0)),0<(y=Wu(a,x)).length&&(x=new cn(x,e,null,n,s),o.push({event:x,listeners:y}),b?x.data=b:null!==(b=An(n))&&(x.data=b))),(b=jn?function(e,t){switch(e){case"compositionend":return An(t);case"keypress":return 32!==t.which?null:(En=!0,Cn);case"textInput":return(e=t.data)===Cn&&En?null:e;default:return null}}(e,n):function(e,t){if(_n)return"compositionend"===e||!Sn&&Tn(e,t)?(e=Wt(),qt=Ht=Bt=null,_n=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Nn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(x=Wu(a,"onBeforeInput")).length&&(y=new cn("onBeforeInput","beforeinput",null,n,s),o.push({event:y,listeners:x}),y.data=b)),function(e,t,n,a,s){if("submit"===t&&n&&n.stateNode===s){var r=_u((s[De]||null).action),o=a.submitter;o&&null!==(t=(t=o[De]||null)?_u(t.formAction):o.getAttribute("formAction"))&&(r=t,o=null);var i=new Zt("action","action",null,a,s);e.push({event:i,listeners:[{instance:null,listener:function(){if(a.defaultPrevented){if(0!==wu){var e=o?Iu(s,o):new FormData(s);Io(n,{pending:!0,data:e,method:s.method,action:r},null,e)}}else"function"===typeof r&&(i.preventDefault(),e=o?Iu(s,o):new FormData(s),Io(n,{pending:!0,data:e,method:s.method,action:r},r,e))},currentTarget:s}]})}}(o,e,a,n,s)}Ru(o,t)})}function qu(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Wu(e,t){for(var n=t+"Capture",a=[];null!==e;){var s=e,r=s.stateNode;if(5!==(s=s.tag)&&26!==s&&27!==s||null===r||(null!=(s=Lt(e,n))&&a.unshift(qu(e,s,r)),null!=(s=Lt(e,t))&&a.push(qu(e,s,r))),3===e.tag)return a;e=e.return}return[]}function Vu(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag&&27!==e.tag);return e||null}function Ku(e,t,n,a,s){for(var r=t._reactName,o=[];null!==n&&n!==a;){var i=n,l=i.alternate,c=i.stateNode;if(i=i.tag,null!==l&&l===a)break;5!==i&&26!==i&&27!==i||null===c||(l=c,s?null!=(c=Lt(n,r))&&o.unshift(qu(n,c,l)):s||null!=(c=Lt(n,r))&&o.push(qu(n,c,l))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Gu=/\r\n?/g,$u=/\u0000|\uFFFD/g;function Yu(e){return("string"===typeof e?e:""+e).replace(Gu,"\n").replace($u,"")}function Qu(e,t){return t=Yu(t),Yu(e)===t}function Ju(){}function Xu(e,t,n,a,s,r){switch(n){case"children":"string"===typeof a?"body"===t||"textarea"===t&&""===a||St(e,a):("number"===typeof a||"bigint"===typeof a)&&"body"!==t&&St(e,""+a);break;case"className":nt(e,"class",a);break;case"tabIndex":nt(e,"tabindex",a);break;case"dir":case"role":case"viewBox":case"width":case"height":nt(e,n,a);break;case"style":Nt(e,a,r);break;case"data":if("object"!==t){nt(e,"data",a);break}case"src":case"href":if(""===a&&("a"!==t||"href"!==n)){e.removeAttribute(n);break}if(null==a||"function"===typeof a||"symbol"===typeof a||"boolean"===typeof a){e.removeAttribute(n);break}a=At(""+a),e.setAttribute(n,a);break;case"action":case"formAction":if("function"===typeof a){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"===typeof r&&("formAction"===n?("input"!==t&&Xu(e,t,"name",s.name,s,null),Xu(e,t,"formEncType",s.formEncType,s,null),Xu(e,t,"formMethod",s.formMethod,s,null),Xu(e,t,"formTarget",s.formTarget,s,null)):(Xu(e,t,"encType",s.encType,s,null),Xu(e,t,"method",s.method,s,null),Xu(e,t,"target",s.target,s,null))),null==a||"symbol"===typeof a||"boolean"===typeof a){e.removeAttribute(n);break}a=At(""+a),e.setAttribute(n,a);break;case"onClick":null!=a&&(e.onclick=Ju);break;case"onScroll":null!=a&&Lu("scroll",e);break;case"onScrollEnd":null!=a&&Lu("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=a){if("object"!==typeof a||!("__html"in a))throw Error(o(61));if(null!=(n=a.__html)){if(null!=s.children)throw Error(o(60));e.innerHTML=n}}break;case"multiple":e.multiple=a&&"function"!==typeof a&&"symbol"!==typeof a;break;case"muted":e.muted=a&&"function"!==typeof a&&"symbol"!==typeof a;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==a||"function"===typeof a||"boolean"===typeof a||"symbol"===typeof a){e.removeAttribute("xlink:href");break}n=At(""+a),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=a&&"function"!==typeof a&&"symbol"!==typeof a?e.setAttribute(n,""+a):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":a&&"function"!==typeof a&&"symbol"!==typeof a?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":!0===a?e.setAttribute(n,""):!1!==a&&null!=a&&"function"!==typeof a&&"symbol"!==typeof a?e.setAttribute(n,a):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":null!=a&&"function"!==typeof a&&"symbol"!==typeof a&&!isNaN(a)&&1<=a?e.setAttribute(n,a):e.removeAttribute(n);break;case"rowSpan":case"start":null==a||"function"===typeof a||"symbol"===typeof a||isNaN(a)?e.removeAttribute(n):e.setAttribute(n,a);break;case"popover":Lu("beforetoggle",e),Lu("toggle",e),tt(e,"popover",a);break;case"xlinkActuate":at(e,"http://www.w3.org/1999/xlink","xlink:actuate",a);break;case"xlinkArcrole":at(e,"http://www.w3.org/1999/xlink","xlink:arcrole",a);break;case"xlinkRole":at(e,"http://www.w3.org/1999/xlink","xlink:role",a);break;case"xlinkShow":at(e,"http://www.w3.org/1999/xlink","xlink:show",a);break;case"xlinkTitle":at(e,"http://www.w3.org/1999/xlink","xlink:title",a);break;case"xlinkType":at(e,"http://www.w3.org/1999/xlink","xlink:type",a);break;case"xmlBase":at(e,"http://www.w3.org/XML/1998/namespace","xml:base",a);break;case"xmlLang":at(e,"http://www.w3.org/XML/1998/namespace","xml:lang",a);break;case"xmlSpace":at(e,"http://www.w3.org/XML/1998/namespace","xml:space",a);break;case"is":tt(e,"is",a);break;case"innerText":case"textContent":break;default:(!(2<n.length)||"o"!==n[0]&&"O"!==n[0]||"n"!==n[1]&&"N"!==n[1])&&tt(e,n=Et.get(n)||n,a)}}function Zu(e,t,n,a,s,r){switch(n){case"style":Nt(e,a,r);break;case"dangerouslySetInnerHTML":if(null!=a){if("object"!==typeof a||!("__html"in a))throw Error(o(61));if(null!=(n=a.__html)){if(null!=s.children)throw Error(o(60));e.innerHTML=n}}break;case"children":"string"===typeof a?St(e,a):("number"===typeof a||"bigint"===typeof a)&&St(e,""+a);break;case"onScroll":null!=a&&Lu("scroll",e);break;case"onScrollEnd":null!=a&&Lu("scrollend",e);break;case"onClick":null!=a&&(e.onclick=Ju);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:Ge.hasOwnProperty(n)||("o"!==n[0]||"n"!==n[1]||(s=n.endsWith("Capture"),t=n.slice(2,s?n.length-7:void 0),"function"===typeof(r=null!=(r=e[De]||null)?r[n]:null)&&e.removeEventListener(t,r,s),"function"!==typeof a)?n in e?e[n]=a:!0===a?e.setAttribute(n,""):tt(e,n,a):("function"!==typeof r&&null!==r&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,a,s)))}}function ed(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Lu("error",e),Lu("load",e);var a,s=!1,r=!1;for(a in n)if(n.hasOwnProperty(a)){var i=n[a];if(null!=i)switch(a){case"src":s=!0;break;case"srcSet":r=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:Xu(e,t,a,i,n,null)}}return r&&Xu(e,t,"srcSet",n.srcSet,n,null),void(s&&Xu(e,t,"src",n.src,n,null));case"input":Lu("invalid",e);var l=a=i=r=null,c=null,u=null;for(s in n)if(n.hasOwnProperty(s)){var d=n[s];if(null!=d)switch(s){case"name":r=d;break;case"type":i=d;break;case"checked":c=d;break;case"defaultChecked":u=d;break;case"value":a=d;break;case"defaultValue":l=d;break;case"children":case"dangerouslySetInnerHTML":if(null!=d)throw Error(o(137,t));break;default:Xu(e,t,s,d,n,null)}}return vt(e,a,l,c,u,i,r,!1),void dt(e);case"select":for(r in Lu("invalid",e),s=i=a=null,n)if(n.hasOwnProperty(r)&&null!=(l=n[r]))switch(r){case"value":a=l;break;case"defaultValue":i=l;break;case"multiple":s=l;default:Xu(e,t,r,l,n,null)}return t=a,n=i,e.multiple=!!s,void(null!=t?bt(e,!!s,t,!1):null!=n&&bt(e,!!s,n,!0));case"textarea":for(i in Lu("invalid",e),a=r=s=null,n)if(n.hasOwnProperty(i)&&null!=(l=n[i]))switch(i){case"value":s=l;break;case"defaultValue":r=l;break;case"children":a=l;break;case"dangerouslySetInnerHTML":if(null!=l)throw Error(o(91));break;default:Xu(e,t,i,l,n,null)}return wt(e,s,r,a),void dt(e);case"option":for(c in n)if(n.hasOwnProperty(c)&&null!=(s=n[c]))if("selected"===c)e.selected=s&&"function"!==typeof s&&"symbol"!==typeof s;else Xu(e,t,c,s,n,null);return;case"dialog":Lu("beforetoggle",e),Lu("toggle",e),Lu("cancel",e),Lu("close",e);break;case"iframe":case"object":Lu("load",e);break;case"video":case"audio":for(s=0;s<Mu.length;s++)Lu(Mu[s],e);break;case"image":Lu("error",e),Lu("load",e);break;case"details":Lu("toggle",e);break;case"embed":case"source":case"link":Lu("error",e),Lu("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(u in n)if(n.hasOwnProperty(u)&&null!=(s=n[u]))switch(u){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:Xu(e,t,u,s,n,null)}return;default:if(Ct(t)){for(d in n)n.hasOwnProperty(d)&&(void 0!==(s=n[d])&&Zu(e,t,d,s,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(null!=(s=n[l])&&Xu(e,t,l,s,n,null))}var td=null,nd=null;function ad(e){return 9===e.nodeType?e:e.ownerDocument}function sd(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function rd(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function od(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"bigint"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var id=null;var ld="function"===typeof setTimeout?setTimeout:void 0,cd="function"===typeof clearTimeout?clearTimeout:void 0,ud="function"===typeof Promise?Promise:void 0,dd="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ud?function(e){return ud.resolve(null).then(e).catch(hd)}:ld;function hd(e){setTimeout(function(){throw e})}function md(e){return"head"===e}function pd(e,t){var n=t,a=0,s=0;do{var r=n.nextSibling;if(e.removeChild(n),r&&8===r.nodeType)if("/$"===(n=r.data)){if(0<a&&8>a){n=a;var o=e.ownerDocument;if(1&n&&wd(o.documentElement),2&n&&wd(o.body),4&n)for(wd(n=o.head),o=n.firstChild;o;){var i=o.nextSibling,l=o.nodeName;o[Oe]||"SCRIPT"===l||"STYLE"===l||"LINK"===l&&"stylesheet"===o.rel.toLowerCase()||n.removeChild(o),o=i}}if(0===s)return e.removeChild(r),void Eh(t);s--}else"$"===n||"$?"===n||"$!"===n?s++:a=n.charCodeAt(0)-48;else a=0;n=r}while(n);Eh(t)}function fd(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":fd(n),Ue(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===n.rel.toLowerCase())continue}e.removeChild(n)}}function gd(e){return"$!"===e.data||"$?"===e.data&&"complete"===e.ownerDocument.readyState}function vd(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"F!"===t||"F"===t)break;if("/$"===t)return null}}return e}var yd=null;function bd(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}function xd(e,t,n){switch(t=ad(n),e){case"html":if(!(e=t.documentElement))throw Error(o(452));return e;case"head":if(!(e=t.head))throw Error(o(453));return e;case"body":if(!(e=t.body))throw Error(o(454));return e;default:throw Error(o(451))}}function wd(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Ue(e)}var Sd=new Map,kd=new Set;function jd(e){return"function"===typeof e.getRootNode?e.getRootNode():9===e.nodeType?e:e.ownerDocument}var Nd=z.d;z.d={f:function(){var e=Nd.f(),t=Bc();return e||t},r:function(e){var t=He(e);null!==t&&5===t.tag&&"form"===t.type?Do(t):Nd.r(e)},D:function(e){Nd.D(e),Ed("dns-prefetch",e,null)},C:function(e,t){Nd.C(e,t),Ed("preconnect",e,t)},L:function(e,t,n){Nd.L(e,t,n);var a=Cd;if(a&&e&&t){var s='link[rel="preload"][as="'+ft(t)+'"]';"image"===t&&n&&n.imageSrcSet?(s+='[imagesrcset="'+ft(n.imageSrcSet)+'"]',"string"===typeof n.imageSizes&&(s+='[imagesizes="'+ft(n.imageSizes)+'"]')):s+='[href="'+ft(e)+'"]';var r=s;switch(t){case"style":r=Ad(e);break;case"script":r=Pd(e)}Sd.has(r)||(e=h({rel:"preload",href:"image"===t&&n&&n.imageSrcSet?void 0:e,as:t},n),Sd.set(r,e),null!==a.querySelector(s)||"style"===t&&a.querySelector(_d(r))||"script"===t&&a.querySelector(Dd(r))||(ed(t=a.createElement("link"),"link",e),Ve(t),a.head.appendChild(t)))}},m:function(e,t){Nd.m(e,t);var n=Cd;if(n&&e){var a=t&&"string"===typeof t.as?t.as:"script",s='link[rel="modulepreload"][as="'+ft(a)+'"][href="'+ft(e)+'"]',r=s;switch(a){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":r=Pd(e)}if(!Sd.has(r)&&(e=h({rel:"modulepreload",href:e},t),Sd.set(r,e),null===n.querySelector(s))){switch(a){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Dd(r)))return}ed(a=n.createElement("link"),"link",e),Ve(a),n.head.appendChild(a)}}},X:function(e,t){Nd.X(e,t);var n=Cd;if(n&&e){var a=We(n).hoistableScripts,s=Pd(e),r=a.get(s);r||((r=n.querySelector(Dd(s)))||(e=h({src:e,async:!0},t),(t=Sd.get(s))&&Ld(e,t),Ve(r=n.createElement("script")),ed(r,"link",e),n.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},a.set(s,r))}},S:function(e,t,n){Nd.S(e,t,n);var a=Cd;if(a&&e){var s=We(a).hoistableStyles,r=Ad(e);t=t||"default";var o=s.get(r);if(!o){var i={loading:0,preload:null};if(o=a.querySelector(_d(r)))i.loading=5;else{e=h({rel:"stylesheet",href:e,"data-precedence":t},n),(n=Sd.get(r))&&Rd(e,n);var l=o=a.createElement("link");Ve(l),ed(l,"link",e),l._p=new Promise(function(e,t){l.onload=e,l.onerror=t}),l.addEventListener("load",function(){i.loading|=1}),l.addEventListener("error",function(){i.loading|=2}),i.loading|=4,zd(o,t,a)}o={type:"stylesheet",instance:o,count:1,state:i},s.set(r,o)}}},M:function(e,t){Nd.M(e,t);var n=Cd;if(n&&e){var a=We(n).hoistableScripts,s=Pd(e),r=a.get(s);r||((r=n.querySelector(Dd(s)))||(e=h({src:e,async:!0,type:"module"},t),(t=Sd.get(s))&&Ld(e,t),Ve(r=n.createElement("script")),ed(r,"link",e),n.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},a.set(s,r))}}};var Cd="undefined"===typeof document?null:document;function Ed(e,t,n){var a=Cd;if(a&&"string"===typeof t&&t){var s=ft(t);s='link[rel="'+e+'"][href="'+s+'"]',"string"===typeof n&&(s+='[crossorigin="'+n+'"]'),kd.has(s)||(kd.add(s),e={rel:e,crossOrigin:n,href:t},null===a.querySelector(s)&&(ed(t=a.createElement("link"),"link",e),Ve(t),a.head.appendChild(t)))}}function Td(e,t,n,a){var s,r,i,l,c=(c=W.current)?jd(c):null;if(!c)throw Error(o(446));switch(e){case"meta":case"title":return null;case"style":return"string"===typeof n.precedence&&"string"===typeof n.href?(t=Ad(n.href),(a=(n=We(c).hoistableStyles).get(t))||(a={type:"style",instance:null,count:0,state:null},n.set(t,a)),a):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===n.rel&&"string"===typeof n.href&&"string"===typeof n.precedence){e=Ad(n.href);var u=We(c).hoistableStyles,d=u.get(e);if(d||(c=c.ownerDocument||c,d={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},u.set(e,d),(u=c.querySelector(_d(e)))&&!u._p&&(d.instance=u,d.state.loading=5),Sd.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},Sd.set(e,n),u||(s=c,r=e,i=n,l=d.state,s.querySelector('link[rel="preload"][as="style"]['+r+"]")?l.loading=1:(r=s.createElement("link"),l.preload=r,r.addEventListener("load",function(){return l.loading|=1}),r.addEventListener("error",function(){return l.loading|=2}),ed(r,"link",i),Ve(r),s.head.appendChild(r))))),t&&null===a)throw Error(o(528,""));return d}if(t&&null!==a)throw Error(o(529,""));return null;case"script":return t=n.async,"string"===typeof(n=n.src)&&t&&"function"!==typeof t&&"symbol"!==typeof t?(t=Pd(n),(a=(n=We(c).hoistableScripts).get(t))||(a={type:"script",instance:null,count:0,state:null},n.set(t,a)),a):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,e))}}function Ad(e){return'href="'+ft(e)+'"'}function _d(e){return'link[rel="stylesheet"]['+e+"]"}function Id(e){return h({},e,{"data-precedence":e.precedence,precedence:null})}function Pd(e){return'[src="'+ft(e)+'"]'}function Dd(e){return"script[async]"+e}function Md(e,t,n){if(t.count++,null===t.instance)switch(t.type){case"style":var a=e.querySelector('style[data-href~="'+ft(n.href)+'"]');if(a)return t.instance=a,Ve(a),a;var s=h({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return Ve(a=(e.ownerDocument||e).createElement("style")),ed(a,"style",s),zd(a,n.precedence,e),t.instance=a;case"stylesheet":s=Ad(n.href);var r=e.querySelector(_d(s));if(r)return t.state.loading|=4,t.instance=r,Ve(r),r;a=Id(n),(s=Sd.get(s))&&Rd(a,s),Ve(r=(e.ownerDocument||e).createElement("link"));var i=r;return i._p=new Promise(function(e,t){i.onload=e,i.onerror=t}),ed(r,"link",a),t.state.loading|=4,zd(r,n.precedence,e),t.instance=r;case"script":return r=Pd(n.src),(s=e.querySelector(Dd(r)))?(t.instance=s,Ve(s),s):(a=n,(s=Sd.get(r))&&Ld(a=h({},n),s),Ve(s=(e=e.ownerDocument||e).createElement("script")),ed(s,"link",a),e.head.appendChild(s),t.instance=s);case"void":return null;default:throw Error(o(443,t.type))}else"stylesheet"===t.type&&0===(4&t.state.loading)&&(a=t.instance,t.state.loading|=4,zd(a,n.precedence,e));return t.instance}function zd(e,t,n){for(var a=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),s=a.length?a[a.length-1]:null,r=s,o=0;o<a.length;o++){var i=a[o];if(i.dataset.precedence===t)r=i;else if(r!==s)break}r?r.parentNode.insertBefore(e,r.nextSibling):(t=9===n.nodeType?n.head:n).insertBefore(e,t.firstChild)}function Rd(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function Ld(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var Fd=null;function Od(e,t,n){if(null===Fd){var a=new Map,s=Fd=new Map;s.set(n,a)}else(a=(s=Fd).get(n))||(a=new Map,s.set(n,a));if(a.has(e))return a;for(a.set(e,null),n=n.getElementsByTagName(e),s=0;s<n.length;s++){var r=n[s];if(!(r[Oe]||r[Pe]||"link"===e&&"stylesheet"===r.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==r.namespaceURI){var o=r.getAttribute(t)||"";o=e+o;var i=a.get(o);i?i.push(r):a.set(o,[r])}}return a}function Ud(e,t,n){(e=e.ownerDocument||e).head.insertBefore(n,"title"===t?e.querySelector("head > title"):null)}function Bd(e){return"stylesheet"!==e.type||0!==(3&e.state.loading)}var Hd=null;function qd(){}function Wd(){if(this.count--,0===this.count)if(this.stylesheets)Kd(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}var Vd=null;function Kd(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,Vd=new Map,t.forEach(Gd,e),Vd=null,Wd.call(e))}function Gd(e,t){if(!(4&t.state.loading)){var n=Vd.get(e);if(n)var a=n.get(null);else{n=new Map,Vd.set(e,n);for(var s=e.querySelectorAll("link[data-precedence],style[data-precedence]"),r=0;r<s.length;r++){var o=s[r];"LINK"!==o.nodeName&&"not all"===o.getAttribute("media")||(n.set(o.dataset.precedence,o),a=o)}a&&n.set(null,a)}o=(s=t.instance).getAttribute("data-precedence"),(r=n.get(o)||a)===a&&n.set(null,s),n.set(o,s),this.count++,a=Wd.bind(this),s.addEventListener("load",a),s.addEventListener("error",a),r?r.parentNode.insertBefore(s,r.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(s,e.firstChild),t.state.loading|=4}}var $d={$$typeof:w,Provider:null,Consumer:null,_currentValue:R,_currentValue2:R,_threadCount:0};function Yd(e,t,n,a,s,r,o,i){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=je(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=je(0),this.hiddenUpdates=je(null),this.identifierPrefix=a,this.onUncaughtError=s,this.onCaughtError=r,this.onRecoverableError=o,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=i,this.incompleteTransitions=new Map}function Qd(e,t,n,a,s,r,o,i,l,c,u,d){return e=new Yd(e,t,n,o,i,l,c,d),t=1,!0===r&&(t|=24),r=Ra(3,null,null,t),e.current=r,r.stateNode=e,(t=Ds()).refCount++,e.pooledCache=t,t.refCount++,r.memoizedState={element:a,isDehydrated:n,cache:t},nr(r),e}function Jd(e){return e?e=Ma:Ma}function Xd(e,t,n,a,s,r){s=Jd(s),null===a.context?a.context=s:a.pendingContext=s,(a=sr(t)).payload={element:n},null!==(r=void 0===r?null:r)&&(a.callback=r),null!==(n=rr(e,a,t))&&(Rc(n,0,t),or(n,e,t))}function Zd(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function eh(e,t){Zd(e,t),(e=e.alternate)&&Zd(e,t)}function th(e){if(13===e.tag){var t=Ia(e,67108864);null!==t&&Rc(t,0,67108864),eh(e,67108864)}}var nh=!0;function ah(e,t,n,a){var s=M.T;M.T=null;var r=z.p;try{z.p=2,rh(e,t,n,a)}finally{z.p=r,M.T=s}}function sh(e,t,n,a){var s=M.T;M.T=null;var r=z.p;try{z.p=8,rh(e,t,n,a)}finally{z.p=r,M.T=s}}function rh(e,t,n,a){if(nh){var s=oh(a);if(null===s)Hu(e,t,a,ih,n),yh(e,a);else if(function(e,t,n,a,s){switch(t){case"focusin":return dh=bh(dh,e,t,n,a,s),!0;case"dragenter":return hh=bh(hh,e,t,n,a,s),!0;case"mouseover":return mh=bh(mh,e,t,n,a,s),!0;case"pointerover":var r=s.pointerId;return ph.set(r,bh(ph.get(r)||null,e,t,n,a,s)),!0;case"gotpointercapture":return r=s.pointerId,fh.set(r,bh(fh.get(r)||null,e,t,n,a,s)),!0}return!1}(s,e,t,n,a))a.stopPropagation();else if(yh(e,a),4&t&&-1<vh.indexOf(e)){for(;null!==s;){var r=He(s);if(null!==r)switch(r.tag){case 3:if((r=r.stateNode).current.memoizedState.isDehydrated){var o=ye(r.pendingLanes);if(0!==o){var i=r;for(i.pendingLanes|=2,i.entangledLanes|=2;o;){var l=1<<31-me(o);i.entanglements[1]|=l,o&=~l}Su(r),0===(6&nc)&&(Sc=te()+500,ku(0,!1))}}break;case 13:null!==(i=Ia(r,2))&&Rc(i,0,2),Bc(),eh(r,2)}if(null===(r=oh(a))&&Hu(e,t,a,ih,n),r===s)break;s=r}null!==s&&a.stopPropagation()}else Hu(e,t,a,null,n)}}function oh(e){return lh(e=It(e))}var ih=null;function lh(e){if(ih=null,null!==(e=Be(e))){var t=l(e);if(null===t)e=null;else{var n=t.tag;if(13===n){if(null!==(e=c(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return ih=e,null}function ch(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ne()){case ae:return 2;case se:return 8;case re:case oe:return 32;case ie:return 268435456;default:return 32}default:return 32}}var uh=!1,dh=null,hh=null,mh=null,ph=new Map,fh=new Map,gh=[],vh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function yh(e,t){switch(e){case"focusin":case"focusout":dh=null;break;case"dragenter":case"dragleave":hh=null;break;case"mouseover":case"mouseout":mh=null;break;case"pointerover":case"pointerout":ph.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":fh.delete(t.pointerId)}}function bh(e,t,n,a,s,r){return null===e||e.nativeEvent!==r?(e={blockedOn:t,domEventName:n,eventSystemFlags:a,nativeEvent:r,targetContainers:[s]},null!==t&&(null!==(t=He(t))&&th(t)),e):(e.eventSystemFlags|=a,t=e.targetContainers,null!==s&&-1===t.indexOf(s)&&t.push(s),e)}function xh(e){var t=Be(e.target);if(null!==t){var n=l(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=c(n)))return e.blockedOn=t,void function(e,t){var n=z.p;try{return z.p=e,t()}finally{z.p=n}}(e.priority,function(){if(13===n.tag){var e=Mc();e=Te(e);var t=Ia(n,e);null!==t&&Rc(t,0,e),eh(n,e)}})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function wh(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=oh(e.nativeEvent);if(null!==n)return null!==(t=He(n))&&th(t),e.blockedOn=n,!1;var a=new(n=e.nativeEvent).constructor(n.type,n);_t=a,n.target.dispatchEvent(a),_t=null,t.shift()}return!0}function Sh(e,t,n){wh(e)&&n.delete(t)}function kh(){uh=!1,null!==dh&&wh(dh)&&(dh=null),null!==hh&&wh(hh)&&(hh=null),null!==mh&&wh(mh)&&(mh=null),ph.forEach(Sh),fh.forEach(Sh)}function jh(e,t){e.blockedOn===t&&(e.blockedOn=null,uh||(uh=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,kh)))}var Nh=null;function Ch(e){Nh!==e&&(Nh=e,a.unstable_scheduleCallback(a.unstable_NormalPriority,function(){Nh===e&&(Nh=null);for(var t=0;t<e.length;t+=3){var n=e[t],a=e[t+1],s=e[t+2];if("function"!==typeof a){if(null===lh(a||n))continue;break}var r=He(n);null!==r&&(e.splice(t,3),t-=3,Io(r,{pending:!0,data:s,method:n.method,action:a},a,s))}}))}function Eh(e){function t(t){return jh(t,e)}null!==dh&&jh(dh,e),null!==hh&&jh(hh,e),null!==mh&&jh(mh,e),ph.forEach(t),fh.forEach(t);for(var n=0;n<gh.length;n++){var a=gh[n];a.blockedOn===e&&(a.blockedOn=null)}for(;0<gh.length&&null===(n=gh[0]).blockedOn;)xh(n),null===n.blockedOn&&gh.shift();if(null!=(n=(e.ownerDocument||e).$$reactFormReplay))for(a=0;a<n.length;a+=3){var s=n[a],r=n[a+1],o=s[De]||null;if("function"===typeof r)o||Ch(n);else if(o){var i=null;if(r&&r.hasAttribute("formAction")){if(s=r,o=r[De]||null)i=o.formAction;else if(null!==lh(s))continue}else i=o.action;"function"===typeof i?n[a+1]=i:(n.splice(a,3),a-=3),Ch(n)}}}function Th(e){this._internalRoot=e}function Ah(e){this._internalRoot=e}Ah.prototype.render=Th.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(o(409));Xd(t.current,Mc(),e,t,null,null)},Ah.prototype.unmount=Th.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;Xd(e.current,2,null,e,null,null),Bc(),t[Me]=null}},Ah.prototype.unstable_scheduleHydration=function(e){if(e){var t=_e();e={blockedOn:null,target:e,priority:t};for(var n=0;n<gh.length&&0!==t&&t<gh[n].priority;n++);gh.splice(n,0,e),0===n&&xh(e)}};var _h=s.version;if("19.1.1"!==_h)throw Error(o(527,_h,"19.1.1"));z.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw e=Object.keys(e).join(","),Error(o(268,e))}return e=function(e){var t=e.alternate;if(!t){if(null===(t=l(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,a=t;;){var s=n.return;if(null===s)break;var r=s.alternate;if(null===r){if(null!==(a=s.return)){n=a;continue}break}if(s.child===r.child){for(r=s.child;r;){if(r===n)return u(s),e;if(r===a)return u(s),t;r=r.sibling}throw Error(o(188))}if(n.return!==a.return)n=s,a=r;else{for(var i=!1,c=s.child;c;){if(c===n){i=!0,n=s,a=r;break}if(c===a){i=!0,a=s,n=r;break}c=c.sibling}if(!i){for(c=r.child;c;){if(c===n){i=!0,n=r,a=s;break}if(c===a){i=!0,a=r,n=s;break}c=c.sibling}if(!i)throw Error(o(189))}}if(n.alternate!==a)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(t),e=null===(e=null!==e?d(e):null)?null:e.stateNode};var Ih={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:M,reconcilerVersion:"19.1.1"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Ph=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ph.isDisabled&&Ph.supportsFiber)try{ue=Ph.inject(Ih),de=Ph}catch(Mh){}}t.createRoot=function(e,t){if(!i(e))throw Error(o(299));var n=!1,a="",s=yi,r=bi,l=xi;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(a=t.identifierPrefix),void 0!==t.onUncaughtError&&(s=t.onUncaughtError),void 0!==t.onCaughtError&&(r=t.onCaughtError),void 0!==t.onRecoverableError&&(l=t.onRecoverableError),void 0!==t.unstable_transitionCallbacks&&t.unstable_transitionCallbacks),t=Qd(e,1,!1,null,0,n,a,s,r,l,0,null),e[Me]=t.current,Uu(e),new Th(t)},t.hydrateRoot=function(e,t,n){if(!i(e))throw Error(o(299));var a=!1,s="",r=yi,l=bi,c=xi,u=null;return null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(a=!0),void 0!==n.identifierPrefix&&(s=n.identifierPrefix),void 0!==n.onUncaughtError&&(r=n.onUncaughtError),void 0!==n.onCaughtError&&(l=n.onCaughtError),void 0!==n.onRecoverableError&&(c=n.onRecoverableError),void 0!==n.unstable_transitionCallbacks&&n.unstable_transitionCallbacks,void 0!==n.formState&&(u=n.formState)),(t=Qd(e,1,!0,t,0,a,s,r,l,c,0,u)).context=Jd(null),n=t.current,(s=sr(a=Te(a=Mc()))).callback=null,rr(n,s,a),n=a,t.current.lanes=n,Ne(t,n),Su(t),e[Me]=t.current,Uu(e),new Ah(t)},t.version="19.1.1"},43:(e,t,n)=>{"use strict";e.exports=n(288)},49:function(e,t,n){!function(){var t;e.exports=(t=n(488),n(238),t.mode.CTRGladman=function(){var e=t.lib.BlockCipherMode.extend();function n(e){if(255===(e>>24&255)){var t=e>>16&255,n=e>>8&255,a=255&e;255===t?(t=0,255===n?(n=0,255===a?a=0:++a):++n):++t,e=0,e+=t<<16,e+=n<<8,e+=a}else e+=1<<24;return e}function a(e){return 0===(e[0]=n(e[0]))&&(e[1]=n(e[1])),e}var s=e.Encryptor=e.extend({processBlock:function(e,t){var n=this._cipher,s=n.blockSize,r=this._iv,o=this._counter;r&&(o=this._counter=r.slice(0),this._iv=void 0),a(o);var i=o.slice(0);n.encryptBlock(i,0);for(var l=0;l<s;l++)e[t+l]^=i[l]}});return e.Decryptor=s,e}(),t.mode.CTRGladman)}()},61:function(e,t,n){!function(){var t;e.exports=(t=n(488),n(749),function(){var e=t,n=e.lib.Hasher,a=e.x64,s=a.Word,r=a.WordArray,o=e.algo;function i(){return s.create.apply(s,arguments)}var l=[i(1116352408,3609767458),i(1899447441,602891725),i(3049323471,3964484399),i(3921009573,2173295548),i(961987163,4081628472),i(1508970993,3053834265),i(2453635748,2937671579),i(2870763221,3664609560),i(3624381080,2734883394),i(310598401,1164996542),i(607225278,1323610764),i(1426881987,3590304994),i(1925078388,4068182383),i(2162078206,991336113),i(2614888103,633803317),i(3248222580,3479774868),i(3835390401,2666613458),i(4022224774,944711139),i(264347078,2341262773),i(604807628,2007800933),i(770255983,1495990901),i(1249150122,1856431235),i(1555081692,3175218132),i(1996064986,2198950837),i(2554220882,3999719339),i(2821834349,766784016),i(2952996808,2566594879),i(3210313671,3203337956),i(3336571891,1034457026),i(3584528711,2466948901),i(113926993,3758326383),i(338241895,168717936),i(666307205,1188179964),i(773529912,1546045734),i(1294757372,1522805485),i(1396182291,2643833823),i(1695183700,2343527390),i(1986661051,1014477480),i(2177026350,1206759142),i(2456956037,344077627),i(2730485921,1290863460),i(2820302411,3158454273),i(3259730800,3505952657),i(3345764771,106217008),i(3516065817,3606008344),i(3600352804,1432725776),i(4094571909,1467031594),i(275423344,851169720),i(430227734,3100823752),i(506948616,1363258195),i(659060556,3750685593),i(883997877,3785050280),i(958139571,3318307427),i(1322822218,3812723403),i(1537002063,2003034995),i(1747873779,3602036899),i(1955562222,1575990012),i(2024104815,1125592928),i(2227730452,2716904306),i(2361852424,442776044),i(2428436474,593698344),i(2756734187,3733110249),i(3204031479,2999351573),i(3329325298,3815920427),i(3391569614,3928383900),i(3515267271,566280711),i(3940187606,3454069534),i(4118630271,4000239992),i(116418474,1914138554),i(174292421,2731055270),i(289380356,3203993006),i(460393269,320620315),i(685471733,587496836),i(852142971,1086792851),i(1017036298,365543100),i(1126000580,2618297676),i(1288033470,3409855158),i(1501505948,4234509866),i(1607167915,987167468),i(1816402316,1246189591)],c=[];!function(){for(var e=0;e<80;e++)c[e]=i()}();var u=o.SHA512=n.extend({_doReset:function(){this._hash=new r.init([new s.init(1779033703,4089235720),new s.init(3144134277,2227873595),new s.init(1013904242,4271175723),new s.init(2773480762,1595750129),new s.init(1359893119,2917565137),new s.init(2600822924,725511199),new s.init(528734635,4215389547),new s.init(1541459225,327033209)])},_doProcessBlock:function(e,t){for(var n=this._hash.words,a=n[0],s=n[1],r=n[2],o=n[3],i=n[4],u=n[5],d=n[6],h=n[7],m=a.high,p=a.low,f=s.high,g=s.low,v=r.high,y=r.low,b=o.high,x=o.low,w=i.high,S=i.low,k=u.high,j=u.low,N=d.high,C=d.low,E=h.high,T=h.low,A=m,_=p,I=f,P=g,D=v,M=y,z=b,R=x,L=w,F=S,O=k,U=j,B=N,H=C,q=E,W=T,V=0;V<80;V++){var K,G,$=c[V];if(V<16)G=$.high=0|e[t+2*V],K=$.low=0|e[t+2*V+1];else{var Y=c[V-15],Q=Y.high,J=Y.low,X=(Q>>>1|J<<31)^(Q>>>8|J<<24)^Q>>>7,Z=(J>>>1|Q<<31)^(J>>>8|Q<<24)^(J>>>7|Q<<25),ee=c[V-2],te=ee.high,ne=ee.low,ae=(te>>>19|ne<<13)^(te<<3|ne>>>29)^te>>>6,se=(ne>>>19|te<<13)^(ne<<3|te>>>29)^(ne>>>6|te<<26),re=c[V-7],oe=re.high,ie=re.low,le=c[V-16],ce=le.high,ue=le.low;G=(G=(G=X+oe+((K=Z+ie)>>>0<Z>>>0?1:0))+ae+((K+=se)>>>0<se>>>0?1:0))+ce+((K+=ue)>>>0<ue>>>0?1:0),$.high=G,$.low=K}var de,he=L&O^~L&B,me=F&U^~F&H,pe=A&I^A&D^I&D,fe=_&P^_&M^P&M,ge=(A>>>28|_<<4)^(A<<30|_>>>2)^(A<<25|_>>>7),ve=(_>>>28|A<<4)^(_<<30|A>>>2)^(_<<25|A>>>7),ye=(L>>>14|F<<18)^(L>>>18|F<<14)^(L<<23|F>>>9),be=(F>>>14|L<<18)^(F>>>18|L<<14)^(F<<23|L>>>9),xe=l[V],we=xe.high,Se=xe.low,ke=q+ye+((de=W+be)>>>0<W>>>0?1:0),je=ve+fe;q=B,W=H,B=O,H=U,O=L,U=F,L=z+(ke=(ke=(ke=ke+he+((de+=me)>>>0<me>>>0?1:0))+we+((de+=Se)>>>0<Se>>>0?1:0))+G+((de+=K)>>>0<K>>>0?1:0))+((F=R+de|0)>>>0<R>>>0?1:0)|0,z=D,R=M,D=I,M=P,I=A,P=_,A=ke+(ge+pe+(je>>>0<ve>>>0?1:0))+((_=de+je|0)>>>0<de>>>0?1:0)|0}p=a.low=p+_,a.high=m+A+(p>>>0<_>>>0?1:0),g=s.low=g+P,s.high=f+I+(g>>>0<P>>>0?1:0),y=r.low=y+M,r.high=v+D+(y>>>0<M>>>0?1:0),x=o.low=x+R,o.high=b+z+(x>>>0<R>>>0?1:0),S=i.low=S+F,i.high=w+L+(S>>>0<F>>>0?1:0),j=u.low=j+U,u.high=k+O+(j>>>0<U>>>0?1:0),C=d.low=C+H,d.high=N+B+(C>>>0<H>>>0?1:0),T=h.low=T+W,h.high=E+q+(T>>>0<W>>>0?1:0)},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,a=8*e.sigBytes;return t[a>>>5]|=128<<24-a%32,t[30+(a+128>>>10<<5)]=Math.floor(n/4294967296),t[31+(a+128>>>10<<5)]=n,e.sigBytes=4*t.length,this._process(),this._hash.toX32()},clone:function(){var e=n.clone.call(this);return e._hash=this._hash.clone(),e},blockSize:32});e.SHA512=n._createHelper(u),e.HmacSHA512=n._createHmacHelper(u)}(),t.SHA512)}()},87:function(e,t,n){!function(){var t;e.exports=(t=n(488),n(238),t.pad.NoPadding={pad:function(){},unpad:function(){}},t.pad.NoPadding)}()},92:function(e,t,n){!function(){var t;e.exports=(t=n(488),n(749),n(61),function(){var e=t,n=e.x64,a=n.Word,s=n.WordArray,r=e.algo,o=r.SHA512,i=r.SHA384=o.extend({_doReset:function(){this._hash=new s.init([new a.init(3418070365,3238371032),new a.init(1654270250,914150663),new a.init(2438529370,812702999),new a.init(355462360,4144912697),new a.init(1731405415,4290775857),new a.init(2394180231,1750603025),new a.init(3675008525,1694076839),new a.init(1203062813,3204075428)])},_doFinalize:function(){var e=o._doFinalize.call(this);return e.sigBytes-=16,e}});e.SHA384=o._createHelper(i),e.HmacSHA384=o._createHmacHelper(i)}(),t.SHA384)}()},99:function(e,t,n){!function(){var t;e.exports=(t=n(488),n(238),t.mode.ECB=function(){var e=t.lib.BlockCipherMode.extend();return e.Encryptor=e.extend({processBlock:function(e,t){this._cipher.encryptBlock(e,t)}}),e.Decryptor=e.extend({processBlock:function(e,t){this._cipher.decryptBlock(e,t)}}),e}(),t.mode.ECB)}()},111:function(e,t,n){!function(){var t;e.exports=(t=n(488),n(749),n(503),n(168),n(523),n(646),n(199),n(2),n(368),n(641),n(61),n(92),n(600),n(423),n(220),n(930),n(211),n(238),n(112),n(962),n(49),n(380),n(99),n(884),n(132),n(804),n(548),n(87),n(708),n(780),n(475),n(638),n(875),n(659),n(501),t)}()},112:function(e,t,n){!function(){var t;e.exports=(t=n(488),n(238),t.mode.CFB=function(){var e=t.lib.BlockCipherMode.extend();function n(e,t,n,a){var s,r=this._iv;r?(s=r.slice(0),this._iv=void 0):s=this._prevBlock,a.encryptBlock(s,0);for(var o=0;o<n;o++)e[t+o]^=s[o]}return e.Encryptor=e.extend({processBlock:function(e,t){var a=this._cipher,s=a.blockSize;n.call(this,e,t,s,a),this._prevBlock=e.slice(t,t+s)}}),e.Decryptor=e.extend({processBlock:function(e,t){var a=this._cipher,s=a.blockSize,r=e.slice(t,t+s);n.call(this,e,t,s,a),this._prevBlock=r}}),e}(),t.mode.CFB)}()},132:function(e,t,n){!function(){var t;e.exports=(t=n(488),n(238),t.pad.Iso10126={pad:function(e,n){var a=4*n,s=a-e.sigBytes%a;e.concat(t.lib.WordArray.random(s-1)).concat(t.lib.WordArray.create([s<<24],1))},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},t.pad.Iso10126)}()},168:function(e,t,n){!function(){var t;e.exports=(t=n(488),function(){var e=t,n=e.lib.WordArray,a=e.enc;function s(e){return e<<8&4278255360|e>>>8&16711935}a.Utf16=a.Utf16BE={stringify:function(e){for(var t=e.words,n=e.sigBytes,a=[],s=0;s<n;s+=2){var r=t[s>>>2]>>>16-s%4*8&65535;a.push(String.fromCharCode(r))}return a.join("")},parse:function(e){for(var t=e.length,a=[],s=0;s<t;s++)a[s>>>1]|=e.charCodeAt(s)<<16-s%2*16;return n.create(a,2*t)}},a.Utf16LE={stringify:function(e){for(var t=e.words,n=e.sigBytes,a=[],r=0;r<n;r+=2){var o=s(t[r>>>2]>>>16-r%4*8&65535);a.push(String.fromCharCode(o))}return a.join("")},parse:function(e){for(var t=e.length,a=[],r=0;r<t;r++)a[r>>>1]|=s(e.charCodeAt(r)<<16-r%2*16);return n.create(a,2*t)}}}(),t.enc.Utf16)}()},199:function(e,t,n){!function(){var t;e.exports=(t=n(488),function(e){var n=t,a=n.lib,s=a.WordArray,r=a.Hasher,o=n.algo,i=[];!function(){for(var t=0;t<64;t++)i[t]=4294967296*e.abs(e.sin(t+1))|0}();var l=o.MD5=r.extend({_doReset:function(){this._hash=new s.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var n=0;n<16;n++){var a=t+n,s=e[a];e[a]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8)}var r=this._hash.words,o=e[t+0],l=e[t+1],m=e[t+2],p=e[t+3],f=e[t+4],g=e[t+5],v=e[t+6],y=e[t+7],b=e[t+8],x=e[t+9],w=e[t+10],S=e[t+11],k=e[t+12],j=e[t+13],N=e[t+14],C=e[t+15],E=r[0],T=r[1],A=r[2],_=r[3];E=c(E,T,A,_,o,7,i[0]),_=c(_,E,T,A,l,12,i[1]),A=c(A,_,E,T,m,17,i[2]),T=c(T,A,_,E,p,22,i[3]),E=c(E,T,A,_,f,7,i[4]),_=c(_,E,T,A,g,12,i[5]),A=c(A,_,E,T,v,17,i[6]),T=c(T,A,_,E,y,22,i[7]),E=c(E,T,A,_,b,7,i[8]),_=c(_,E,T,A,x,12,i[9]),A=c(A,_,E,T,w,17,i[10]),T=c(T,A,_,E,S,22,i[11]),E=c(E,T,A,_,k,7,i[12]),_=c(_,E,T,A,j,12,i[13]),A=c(A,_,E,T,N,17,i[14]),E=u(E,T=c(T,A,_,E,C,22,i[15]),A,_,l,5,i[16]),_=u(_,E,T,A,v,9,i[17]),A=u(A,_,E,T,S,14,i[18]),T=u(T,A,_,E,o,20,i[19]),E=u(E,T,A,_,g,5,i[20]),_=u(_,E,T,A,w,9,i[21]),A=u(A,_,E,T,C,14,i[22]),T=u(T,A,_,E,f,20,i[23]),E=u(E,T,A,_,x,5,i[24]),_=u(_,E,T,A,N,9,i[25]),A=u(A,_,E,T,p,14,i[26]),T=u(T,A,_,E,b,20,i[27]),E=u(E,T,A,_,j,5,i[28]),_=u(_,E,T,A,m,9,i[29]),A=u(A,_,E,T,y,14,i[30]),E=d(E,T=u(T,A,_,E,k,20,i[31]),A,_,g,4,i[32]),_=d(_,E,T,A,b,11,i[33]),A=d(A,_,E,T,S,16,i[34]),T=d(T,A,_,E,N,23,i[35]),E=d(E,T,A,_,l,4,i[36]),_=d(_,E,T,A,f,11,i[37]),A=d(A,_,E,T,y,16,i[38]),T=d(T,A,_,E,w,23,i[39]),E=d(E,T,A,_,j,4,i[40]),_=d(_,E,T,A,o,11,i[41]),A=d(A,_,E,T,p,16,i[42]),T=d(T,A,_,E,v,23,i[43]),E=d(E,T,A,_,x,4,i[44]),_=d(_,E,T,A,k,11,i[45]),A=d(A,_,E,T,C,16,i[46]),E=h(E,T=d(T,A,_,E,m,23,i[47]),A,_,o,6,i[48]),_=h(_,E,T,A,y,10,i[49]),A=h(A,_,E,T,N,15,i[50]),T=h(T,A,_,E,g,21,i[51]),E=h(E,T,A,_,k,6,i[52]),_=h(_,E,T,A,p,10,i[53]),A=h(A,_,E,T,w,15,i[54]),T=h(T,A,_,E,l,21,i[55]),E=h(E,T,A,_,b,6,i[56]),_=h(_,E,T,A,C,10,i[57]),A=h(A,_,E,T,v,15,i[58]),T=h(T,A,_,E,j,21,i[59]),E=h(E,T,A,_,f,6,i[60]),_=h(_,E,T,A,S,10,i[61]),A=h(A,_,E,T,m,15,i[62]),T=h(T,A,_,E,x,21,i[63]),r[0]=r[0]+E|0,r[1]=r[1]+T|0,r[2]=r[2]+A|0,r[3]=r[3]+_|0},_doFinalize:function(){var t=this._data,n=t.words,a=8*this._nDataBytes,s=8*t.sigBytes;n[s>>>5]|=128<<24-s%32;var r=e.floor(a/4294967296),o=a;n[15+(s+64>>>9<<4)]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),n[14+(s+64>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),t.sigBytes=4*(n.length+1),this._process();for(var i=this._hash,l=i.words,c=0;c<4;c++){var u=l[c];l[c]=16711935&(u<<8|u>>>24)|4278255360&(u<<24|u>>>8)}return i},clone:function(){var e=r.clone.call(this);return e._hash=this._hash.clone(),e}});function c(e,t,n,a,s,r,o){var i=e+(t&n|~t&a)+s+o;return(i<<r|i>>>32-r)+t}function u(e,t,n,a,s,r,o){var i=e+(t&a|n&~a)+s+o;return(i<<r|i>>>32-r)+t}function d(e,t,n,a,s,r,o){var i=e+(t^n^a)+s+o;return(i<<r|i>>>32-r)+t}function h(e,t,n,a,s,r,o){var i=e+(n^(t|~a))+s+o;return(i<<r|i>>>32-r)+t}n.MD5=r._createHelper(l),n.HmacMD5=r._createHmacHelper(l)}(Math),t.MD5)}()},211:function(e,t,n){!function(){var t;e.exports=(t=n(488),n(2),n(220),function(){var e=t,n=e.lib,a=n.Base,s=n.WordArray,r=e.algo,o=r.MD5,i=r.EvpKDF=a.extend({cfg:a.extend({keySize:4,hasher:o,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var n,a=this.cfg,r=a.hasher.create(),o=s.create(),i=o.words,l=a.keySize,c=a.iterations;i.length<l;){n&&r.update(n),n=r.update(e).finalize(t),r.reset();for(var u=1;u<c;u++)n=r.finalize(n),r.reset();o.concat(n)}return o.sigBytes=4*l,o}});e.EvpKDF=function(e,t,n){return i.create(n).compute(e,t)}}(),t.EvpKDF)}()},220:function(e,t,n){!function(){var t;e.exports=(t=n(488),void function(){var e=t,n=e.lib.Base,a=e.enc.Utf8;e.algo.HMAC=n.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=a.parse(t));var n=e.blockSize,s=4*n;t.sigBytes>s&&(t=e.finalize(t)),t.clamp();for(var r=this._oKey=t.clone(),o=this._iKey=t.clone(),i=r.words,l=o.words,c=0;c<n;c++)i[c]^=1549556828,l[c]^=909522486;r.sigBytes=o.sigBytes=s,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher,n=t.finalize(e);return t.reset(),t.finalize(this._oKey.clone().concat(n))}})}())}()},238:function(e,t,n){!function(){var t;e.exports=(t=n(488),n(211),void(t.lib.Cipher||function(e){var n=t,a=n.lib,s=a.Base,r=a.WordArray,o=a.BufferedBlockAlgorithm,i=n.enc,l=(i.Utf8,i.Base64),c=n.algo.EvpKDF,u=a.Cipher=o.extend({cfg:s.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,n){this.cfg=this.cfg.extend(n),this._xformMode=e,this._key=t,this.reset()},reset:function(){o.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function e(e){return"string"==typeof e?b:v}return function(t){return{encrypt:function(n,a,s){return e(a).encrypt(t,n,a,s)},decrypt:function(n,a,s){return e(a).decrypt(t,n,a,s)}}}}()}),d=(a.StreamCipher=u.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),n.mode={}),h=a.BlockCipherMode=s.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}}),m=d.CBC=function(){var t=h.extend();function n(t,n,a){var s,r=this._iv;r?(s=r,this._iv=e):s=this._prevBlock;for(var o=0;o<a;o++)t[n+o]^=s[o]}return t.Encryptor=t.extend({processBlock:function(e,t){var a=this._cipher,s=a.blockSize;n.call(this,e,t,s),a.encryptBlock(e,t),this._prevBlock=e.slice(t,t+s)}}),t.Decryptor=t.extend({processBlock:function(e,t){var a=this._cipher,s=a.blockSize,r=e.slice(t,t+s);a.decryptBlock(e,t),n.call(this,e,t,s),this._prevBlock=r}}),t}(),p=(n.pad={}).Pkcs7={pad:function(e,t){for(var n=4*t,a=n-e.sigBytes%n,s=a<<24|a<<16|a<<8|a,o=[],i=0;i<a;i+=4)o.push(s);var l=r.create(o,a);e.concat(l)},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},f=(a.BlockCipher=u.extend({cfg:u.cfg.extend({mode:m,padding:p}),reset:function(){var e;u.reset.call(this);var t=this.cfg,n=t.iv,a=t.mode;this._xformMode==this._ENC_XFORM_MODE?e=a.createEncryptor:(e=a.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==e?this._mode.init(this,n&&n.words):(this._mode=e.call(a,this,n&&n.words),this._mode.__creator=e)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e,t=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(t.pad(this._data,this.blockSize),e=this._process(!0)):(e=this._process(!0),t.unpad(e)),e},blockSize:4}),a.CipherParams=s.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}})),g=(n.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext,n=e.salt;return(n?r.create([1398893684,1701076831]).concat(n).concat(t):t).toString(l)},parse:function(e){var t,n=l.parse(e),a=n.words;return 1398893684==a[0]&&1701076831==a[1]&&(t=r.create(a.slice(2,4)),a.splice(0,4),n.sigBytes-=16),f.create({ciphertext:n,salt:t})}},v=a.SerializableCipher=s.extend({cfg:s.extend({format:g}),encrypt:function(e,t,n,a){a=this.cfg.extend(a);var s=e.createEncryptor(n,a),r=s.finalize(t),o=s.cfg;return f.create({ciphertext:r,key:n,iv:o.iv,algorithm:e,mode:o.mode,padding:o.padding,blockSize:e.blockSize,formatter:a.format})},decrypt:function(e,t,n,a){return a=this.cfg.extend(a),t=this._parse(t,a.format),e.createDecryptor(n,a).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}}),y=(n.kdf={}).OpenSSL={execute:function(e,t,n,a,s){if(a||(a=r.random(8)),s)o=c.create({keySize:t+n,hasher:s}).compute(e,a);else var o=c.create({keySize:t+n}).compute(e,a);var i=r.create(o.words.slice(t),4*n);return o.sigBytes=4*t,f.create({key:o,iv:i,salt:a})}},b=a.PasswordBasedCipher=v.extend({cfg:v.cfg.extend({kdf:y}),encrypt:function(e,t,n,a){var s=(a=this.cfg.extend(a)).kdf.execute(n,e.keySize,e.ivSize,a.salt,a.hasher);a.iv=s.iv;var r=v.encrypt.call(this,e,t,s.key,a);return r.mixIn(s),r},decrypt:function(e,t,n,a){a=this.cfg.extend(a),t=this._parse(t,a.format);var s=a.kdf.execute(n,e.keySize,e.ivSize,t.salt,a.hasher);return a.iv=s.iv,v.decrypt.call(this,e,t,s.key,a)}})}()))}()},288:(e,t)=>{"use strict";var n=Symbol.for("react.transitional.element"),a=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),m=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},f=Object.assign,g={};function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function y(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var x=b.prototype=new y;x.constructor=b,f(x,v.prototype),x.isPureReactComponent=!0;var w=Array.isArray,S={H:null,A:null,T:null,S:null,V:null},k=Object.prototype.hasOwnProperty;function j(e,t,a,s,r,o){return a=o.ref,{$$typeof:n,type:e,key:t,ref:void 0!==a?a:null,props:o}}function N(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var C=/\/+/g;function E(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function T(){}function A(e,t,s,r,o){var i=typeof e;"undefined"!==i&&"boolean"!==i||(e=null);var l,c,u=!1;if(null===e)u=!0;else switch(i){case"bigint":case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case n:case a:u=!0;break;case h:return A((u=e._init)(e._payload),t,s,r,o)}}if(u)return o=o(e),u=""===r?"."+E(e,0):r,w(o)?(s="",null!=u&&(s=u.replace(C,"$&/")+"/"),A(o,t,s,"",function(e){return e})):null!=o&&(N(o)&&(l=o,c=s+(null==o.key||e&&e.key===o.key?"":(""+o.key).replace(C,"$&/")+"/")+u,o=j(l.type,c,void 0,0,0,l.props)),t.push(o)),1;u=0;var d,p=""===r?".":r+":";if(w(e))for(var f=0;f<e.length;f++)u+=A(r=e[f],t,s,i=p+E(r,f),o);else if("function"===typeof(f=null===(d=e)||"object"!==typeof d?null:"function"===typeof(d=m&&d[m]||d["@@iterator"])?d:null))for(e=f.call(e),f=0;!(r=e.next()).done;)u+=A(r=r.value,t,s,i=p+E(r,f++),o);else if("object"===i){if("function"===typeof e.then)return A(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"===typeof e.status?e.then(T,T):(e.status="pending",e.then(function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)},function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(e),t,s,r,o);throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return u}function _(e,t,n){if(null==e)return e;var a=[],s=0;return A(e,a,"","",function(e){return t.call(n,e,s++)}),a}function I(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var P="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function D(){}t.Children={map:_,forEach:function(e,t,n){_(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return _(e,function(){t++}),t},toArray:function(e){return _(e,function(e){return e})||[]},only:function(e){if(!N(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=s,t.Profiler=o,t.PureComponent=b,t.StrictMode=r,t.Suspense=u,t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=S,t.__COMPILER_RUNTIME={__proto__:null,c:function(e){return S.H.useMemoCache(e)}},t.cache=function(e){return function(){return e.apply(null,arguments)}},t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error("The argument must be a React element, but you passed "+e+".");var a=f({},e.props),s=e.key;if(null!=t)for(r in void 0!==t.ref&&void 0,void 0!==t.key&&(s=""+t.key),t)!k.call(t,r)||"key"===r||"__self"===r||"__source"===r||"ref"===r&&void 0===t.ref||(a[r]=t[r]);var r=arguments.length-2;if(1===r)a.children=n;else if(1<r){for(var o=Array(r),i=0;i<r;i++)o[i]=arguments[i+2];a.children=o}return j(e.type,s,void 0,0,0,a)},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider=e,e.Consumer={$$typeof:i,_context:e},e},t.createElement=function(e,t,n){var a,s={},r=null;if(null!=t)for(a in void 0!==t.key&&(r=""+t.key),t)k.call(t,a)&&"key"!==a&&"__self"!==a&&"__source"!==a&&(s[a]=t[a]);var o=arguments.length-2;if(1===o)s.children=n;else if(1<o){for(var i=Array(o),l=0;l<o;l++)i[l]=arguments[l+2];s.children=i}if(e&&e.defaultProps)for(a in o=e.defaultProps)void 0===s[a]&&(s[a]=o[a]);return j(e,r,void 0,0,0,s)},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=N,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:I}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=S.T,n={};S.T=n;try{var a=e(),s=S.S;null!==s&&s(n,a),"object"===typeof a&&null!==a&&"function"===typeof a.then&&a.then(D,P)}catch(r){P(r)}finally{S.T=t}},t.unstable_useCacheRefresh=function(){return S.H.useCacheRefresh()},t.use=function(e){return S.H.use(e)},t.useActionState=function(e,t,n){return S.H.useActionState(e,t,n)},t.useCallback=function(e,t){return S.H.useCallback(e,t)},t.useContext=function(e){return S.H.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e,t){return S.H.useDeferredValue(e,t)},t.useEffect=function(e,t,n){var a=S.H;if("function"===typeof n)throw Error("useEffect CRUD overload is not enabled in this build of React.");return a.useEffect(e,t)},t.useId=function(){return S.H.useId()},t.useImperativeHandle=function(e,t,n){return S.H.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return S.H.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return S.H.useLayoutEffect(e,t)},t.useMemo=function(e,t){return S.H.useMemo(e,t)},t.useOptimistic=function(e,t){return S.H.useOptimistic(e,t)},t.useReducer=function(e,t,n){return S.H.useReducer(e,t,n)},t.useRef=function(e){return S.H.useRef(e)},t.useState=function(e){return S.H.useState(e)},t.useSyncExternalStore=function(e,t,n){return S.H.useSyncExternalStore(e,t,n)},t.useTransition=function(){return S.H.useTransition()},t.version="19.1.1"},368:function(e,t,n){!function(){var t;e.exports=(t=n(488),function(e){var n=t,a=n.lib,s=a.WordArray,r=a.Hasher,o=n.algo,i=[],l=[];!function(){function t(t){for(var n=e.sqrt(t),a=2;a<=n;a++)if(!(t%a))return!1;return!0}function n(e){return 4294967296*(e-(0|e))|0}for(var a=2,s=0;s<64;)t(a)&&(s<8&&(i[s]=n(e.pow(a,.5))),l[s]=n(e.pow(a,1/3)),s++),a++}();var c=[],u=o.SHA256=r.extend({_doReset:function(){this._hash=new s.init(i.slice(0))},_doProcessBlock:function(e,t){for(var n=this._hash.words,a=n[0],s=n[1],r=n[2],o=n[3],i=n[4],u=n[5],d=n[6],h=n[7],m=0;m<64;m++){if(m<16)c[m]=0|e[t+m];else{var p=c[m-15],f=(p<<25|p>>>7)^(p<<14|p>>>18)^p>>>3,g=c[m-2],v=(g<<15|g>>>17)^(g<<13|g>>>19)^g>>>10;c[m]=f+c[m-7]+v+c[m-16]}var y=a&s^a&r^s&r,b=(a<<30|a>>>2)^(a<<19|a>>>13)^(a<<10|a>>>22),x=h+((i<<26|i>>>6)^(i<<21|i>>>11)^(i<<7|i>>>25))+(i&u^~i&d)+l[m]+c[m];h=d,d=u,u=i,i=o+x|0,o=r,r=s,s=a,a=x+(b+y)|0}n[0]=n[0]+a|0,n[1]=n[1]+s|0,n[2]=n[2]+r|0,n[3]=n[3]+o|0,n[4]=n[4]+i|0,n[5]=n[5]+u|0,n[6]=n[6]+d|0,n[7]=n[7]+h|0},_doFinalize:function(){var t=this._data,n=t.words,a=8*this._nDataBytes,s=8*t.sigBytes;return n[s>>>5]|=128<<24-s%32,n[14+(s+64>>>9<<4)]=e.floor(a/4294967296),n[15+(s+64>>>9<<4)]=a,t.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var e=r.clone.call(this);return e._hash=this._hash.clone(),e}});n.SHA256=r._createHelper(u),n.HmacSHA256=r._createHmacHelper(u)}(Math),t.SHA256)}()},380:function(e,t,n){!function(){var t;e.exports=(t=n(488),n(238),t.mode.OFB=function(){var e=t.lib.BlockCipherMode.extend(),n=e.Encryptor=e.extend({processBlock:function(e,t){var n=this._cipher,a=n.blockSize,s=this._iv,r=this._keystream;s&&(r=this._keystream=s.slice(0),this._iv=void 0),n.encryptBlock(r,0);for(var o=0;o<a;o++)e[t+o]^=r[o]}});return e.Decryptor=n,e}(),t.mode.OFB)}()},391:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(4)},423:function(e,t,n){!function(){var t;e.exports=(t=n(488),function(){var e=t,n=e.lib,a=n.WordArray,s=n.Hasher,r=e.algo,o=a.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),i=a.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),l=a.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),c=a.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),u=a.create([0,1518500249,1859775393,2400959708,2840853838]),d=a.create([1352829926,1548603684,1836072691,2053994217,0]),h=r.RIPEMD160=s.extend({_doReset:function(){this._hash=a.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var n=0;n<16;n++){var a=t+n,s=e[a];e[a]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8)}var r,h,b,x,w,S,k,j,N,C,E,T=this._hash.words,A=u.words,_=d.words,I=o.words,P=i.words,D=l.words,M=c.words;for(S=r=T[0],k=h=T[1],j=b=T[2],N=x=T[3],C=w=T[4],n=0;n<80;n+=1)E=r+e[t+I[n]]|0,E+=n<16?m(h,b,x)+A[0]:n<32?p(h,b,x)+A[1]:n<48?f(h,b,x)+A[2]:n<64?g(h,b,x)+A[3]:v(h,b,x)+A[4],E=(E=y(E|=0,D[n]))+w|0,r=w,w=x,x=y(b,10),b=h,h=E,E=S+e[t+P[n]]|0,E+=n<16?v(k,j,N)+_[0]:n<32?g(k,j,N)+_[1]:n<48?f(k,j,N)+_[2]:n<64?p(k,j,N)+_[3]:m(k,j,N)+_[4],E=(E=y(E|=0,M[n]))+C|0,S=C,C=N,N=y(j,10),j=k,k=E;E=T[1]+b+N|0,T[1]=T[2]+x+C|0,T[2]=T[3]+w+S|0,T[3]=T[4]+r+k|0,T[4]=T[0]+h+j|0,T[0]=E},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,a=8*e.sigBytes;t[a>>>5]|=128<<24-a%32,t[14+(a+64>>>9<<4)]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),e.sigBytes=4*(t.length+1),this._process();for(var s=this._hash,r=s.words,o=0;o<5;o++){var i=r[o];r[o]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8)}return s},clone:function(){var e=s.clone.call(this);return e._hash=this._hash.clone(),e}});function m(e,t,n){return e^t^n}function p(e,t,n){return e&t|~e&n}function f(e,t,n){return(e|~t)^n}function g(e,t,n){return e&n|t&~n}function v(e,t,n){return e^(t|~n)}function y(e,t){return e<<t|e>>>32-t}e.RIPEMD160=s._createHelper(h),e.HmacRIPEMD160=s._createHmacHelper(h)}(Math),t.RIPEMD160)}()},475:function(e,t,n){!function(){var t;e.exports=(t=n(488),n(523),n(199),n(211),n(238),function(){var e=t,n=e.lib,a=n.WordArray,s=n.BlockCipher,r=e.algo,o=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],i=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],l=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],c=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],u=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],d=r.DES=s.extend({_doReset:function(){for(var e=this._key.words,t=[],n=0;n<56;n++){var a=o[n]-1;t[n]=e[a>>>5]>>>31-a%32&1}for(var s=this._subKeys=[],r=0;r<16;r++){var c=s[r]=[],u=l[r];for(n=0;n<24;n++)c[n/6|0]|=t[(i[n]-1+u)%28]<<31-n%6,c[4+(n/6|0)]|=t[28+(i[n+24]-1+u)%28]<<31-n%6;for(c[0]=c[0]<<1|c[0]>>>31,n=1;n<7;n++)c[n]=c[n]>>>4*(n-1)+3;c[7]=c[7]<<5|c[7]>>>27}var d=this._invSubKeys=[];for(n=0;n<16;n++)d[n]=s[15-n]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._subKeys)},decryptBlock:function(e,t){this._doCryptBlock(e,t,this._invSubKeys)},_doCryptBlock:function(e,t,n){this._lBlock=e[t],this._rBlock=e[t+1],h.call(this,4,252645135),h.call(this,16,65535),m.call(this,2,858993459),m.call(this,8,16711935),h.call(this,1,1431655765);for(var a=0;a<16;a++){for(var s=n[a],r=this._lBlock,o=this._rBlock,i=0,l=0;l<8;l++)i|=c[l][((o^s[l])&u[l])>>>0];this._lBlock=o,this._rBlock=r^i}var d=this._lBlock;this._lBlock=this._rBlock,this._rBlock=d,h.call(this,1,1431655765),m.call(this,8,16711935),m.call(this,2,858993459),h.call(this,16,65535),h.call(this,4,252645135),e[t]=this._lBlock,e[t+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});function h(e,t){var n=(this._lBlock>>>e^this._rBlock)&t;this._rBlock^=n,this._lBlock^=n<<e}function m(e,t){var n=(this._rBlock>>>e^this._lBlock)&t;this._lBlock^=n,this._rBlock^=n<<e}e.DES=s._createHelper(d);var p=r.TripleDES=s.extend({_doReset:function(){var e=this._key.words;if(2!==e.length&&4!==e.length&&e.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var t=e.slice(0,2),n=e.length<4?e.slice(0,2):e.slice(2,4),s=e.length<6?e.slice(0,2):e.slice(4,6);this._des1=d.createEncryptor(a.create(t)),this._des2=d.createEncryptor(a.create(n)),this._des3=d.createEncryptor(a.create(s))},encryptBlock:function(e,t){this._des1.encryptBlock(e,t),this._des2.decryptBlock(e,t),this._des3.encryptBlock(e,t)},decryptBlock:function(e,t){this._des3.decryptBlock(e,t),this._des2.encryptBlock(e,t),this._des1.decryptBlock(e,t)},keySize:6,ivSize:2,blockSize:2});e.TripleDES=s._createHelper(p)}(),t.TripleDES)}()},477:()=>{},488:function(e,t,n){e.exports=function(){var e=e||function(e,t){var a;if("undefined"!==typeof window&&window.crypto&&(a=window.crypto),"undefined"!==typeof self&&self.crypto&&(a=self.crypto),"undefined"!==typeof globalThis&&globalThis.crypto&&(a=globalThis.crypto),!a&&"undefined"!==typeof window&&window.msCrypto&&(a=window.msCrypto),!a&&"undefined"!==typeof n.g&&n.g.crypto&&(a=n.g.crypto),!a)try{a=n(477)}catch(g){}var s=function(){if(a){if("function"===typeof a.getRandomValues)try{return a.getRandomValues(new Uint32Array(1))[0]}catch(g){}if("function"===typeof a.randomBytes)try{return a.randomBytes(4).readInt32LE()}catch(g){}}throw new Error("Native crypto module could not be used to get secure random number.")},r=Object.create||function(){function e(){}return function(t){var n;return e.prototype=t,n=new e,e.prototype=null,n}}(),o={},i=o.lib={},l=i.Base={extend:function(e){var t=r(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},c=i.WordArray=l.extend({init:function(e,n){e=this.words=e||[],this.sigBytes=n!=t?n:4*e.length},toString:function(e){return(e||d).stringify(this)},concat:function(e){var t=this.words,n=e.words,a=this.sigBytes,s=e.sigBytes;if(this.clamp(),a%4)for(var r=0;r<s;r++){var o=n[r>>>2]>>>24-r%4*8&255;t[a+r>>>2]|=o<<24-(a+r)%4*8}else for(var i=0;i<s;i+=4)t[a+i>>>2]=n[i>>>2];return this.sigBytes+=s,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var e=l.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t=[],n=0;n<e;n+=4)t.push(s());return new c.init(t,e)}}),u=o.enc={},d=u.Hex={stringify:function(e){for(var t=e.words,n=e.sigBytes,a=[],s=0;s<n;s++){var r=t[s>>>2]>>>24-s%4*8&255;a.push((r>>>4).toString(16)),a.push((15&r).toString(16))}return a.join("")},parse:function(e){for(var t=e.length,n=[],a=0;a<t;a+=2)n[a>>>3]|=parseInt(e.substr(a,2),16)<<24-a%8*4;return new c.init(n,t/2)}},h=u.Latin1={stringify:function(e){for(var t=e.words,n=e.sigBytes,a=[],s=0;s<n;s++){var r=t[s>>>2]>>>24-s%4*8&255;a.push(String.fromCharCode(r))}return a.join("")},parse:function(e){for(var t=e.length,n=[],a=0;a<t;a++)n[a>>>2]|=(255&e.charCodeAt(a))<<24-a%4*8;return new c.init(n,t)}},m=u.Utf8={stringify:function(e){try{return decodeURIComponent(escape(h.stringify(e)))}catch(t){throw new Error("Malformed UTF-8 data")}},parse:function(e){return h.parse(unescape(encodeURIComponent(e)))}},p=i.BufferedBlockAlgorithm=l.extend({reset:function(){this._data=new c.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=m.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n,a=this._data,s=a.words,r=a.sigBytes,o=this.blockSize,i=r/(4*o),l=(i=t?e.ceil(i):e.max((0|i)-this._minBufferSize,0))*o,u=e.min(4*l,r);if(l){for(var d=0;d<l;d+=o)this._doProcessBlock(s,d);n=s.splice(0,l),a.sigBytes-=u}return new c.init(n,u)},clone:function(){var e=l.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),f=(i.Hasher=p.extend({cfg:l.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){p.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new f.HMAC.init(e,n).finalize(t)}}}),o.algo={});return o}(Math);return e}()},501:function(e,t,n){!function(){var t;e.exports=(t=n(488),n(523),n(199),n(211),n(238),function(){var e=t,n=e.lib.BlockCipher,a=e.algo;const s=16,r=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],o=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var i={pbox:[],sbox:[]};function l(e,t){let n=t>>24&255,a=t>>16&255,s=t>>8&255,r=255&t,o=e.sbox[0][n]+e.sbox[1][a];return o^=e.sbox[2][s],o+=e.sbox[3][r],o}function c(e,t,n){let a,r=t,o=n;for(let i=0;i<s;++i)r^=e.pbox[i],o=l(e,r)^o,a=r,r=o,o=a;return a=r,r=o,o=a,o^=e.pbox[s],r^=e.pbox[s+1],{left:r,right:o}}function u(e,t,n){let a,r=t,o=n;for(let i=s+1;i>1;--i)r^=e.pbox[i],o=l(e,r)^o,a=r,r=o,o=a;return a=r,r=o,o=a,o^=e.pbox[1],r^=e.pbox[0],{left:r,right:o}}function d(e,t,n){for(let s=0;s<4;s++){e.sbox[s]=[];for(let t=0;t<256;t++)e.sbox[s][t]=o[s][t]}let a=0;for(let o=0;o<s+2;o++)e.pbox[o]=r[o]^t[a],a++,a>=n&&(a=0);let i=0,l=0,u=0;for(let r=0;r<s+2;r+=2)u=c(e,i,l),i=u.left,l=u.right,e.pbox[r]=i,e.pbox[r+1]=l;for(let s=0;s<4;s++)for(let t=0;t<256;t+=2)u=c(e,i,l),i=u.left,l=u.right,e.sbox[s][t]=i,e.sbox[s][t+1]=l;return!0}var h=a.Blowfish=n.extend({_doReset:function(){if(this._keyPriorReset!==this._key){var e=this._keyPriorReset=this._key,t=e.words,n=e.sigBytes/4;d(i,t,n)}},encryptBlock:function(e,t){var n=c(i,e[t],e[t+1]);e[t]=n.left,e[t+1]=n.right},decryptBlock:function(e,t){var n=u(i,e[t],e[t+1]);e[t]=n.left,e[t+1]=n.right},blockSize:2,keySize:4,ivSize:2});e.Blowfish=n._createHelper(h)}(),t.Blowfish)}()},503:function(e,t,n){!function(){var t;e.exports=(t=n(488),function(){if("function"==typeof ArrayBuffer){var e=t.lib.WordArray,n=e.init,a=e.init=function(e){if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),(e instanceof Int8Array||"undefined"!==typeof Uint8ClampedArray&&e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array)&&(e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength)),e instanceof Uint8Array){for(var t=e.byteLength,a=[],s=0;s<t;s++)a[s>>>2]|=e[s]<<24-s%4*8;n.call(this,a,t)}else n.apply(this,arguments)};a.prototype=e}}(),t.lib.WordArray)}()},523:function(e,t,n){!function(){var t;e.exports=(t=n(488),function(){var e=t,n=e.lib.WordArray;function a(e,t,a){for(var s=[],r=0,o=0;o<t;o++)if(o%4){var i=a[e.charCodeAt(o-1)]<<o%4*2|a[e.charCodeAt(o)]>>>6-o%4*2;s[r>>>2]|=i<<24-r%4*8,r++}return n.create(s,r)}e.enc.Base64={stringify:function(e){var t=e.words,n=e.sigBytes,a=this._map;e.clamp();for(var s=[],r=0;r<n;r+=3)for(var o=(t[r>>>2]>>>24-r%4*8&255)<<16|(t[r+1>>>2]>>>24-(r+1)%4*8&255)<<8|t[r+2>>>2]>>>24-(r+2)%4*8&255,i=0;i<4&&r+.75*i<n;i++)s.push(a.charAt(o>>>6*(3-i)&63));var l=a.charAt(64);if(l)for(;s.length%4;)s.push(l);return s.join("")},parse:function(e){var t=e.length,n=this._map,s=this._reverseMap;if(!s){s=this._reverseMap=[];for(var r=0;r<n.length;r++)s[n.charCodeAt(r)]=r}var o=n.charAt(64);if(o){var i=e.indexOf(o);-1!==i&&(t=i)}return a(e,t,s)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),t.enc.Base64)}()},548:function(e,t,n){!function(){var t;e.exports=(t=n(488),n(238),t.pad.ZeroPadding={pad:function(e,t){var n=4*t;e.clamp(),e.sigBytes+=n-(e.sigBytes%n||n)},unpad:function(e){var t=e.words,n=e.sigBytes-1;for(n=e.sigBytes-1;n>=0;n--)if(t[n>>>2]>>>24-n%4*8&255){e.sigBytes=n+1;break}}},t.pad.ZeroPadding)}()},579:(e,t,n)=>{"use strict";e.exports=n(799)},600:function(e,t,n){!function(){var t;e.exports=(t=n(488),n(749),function(e){var n=t,a=n.lib,s=a.WordArray,r=a.Hasher,o=n.x64.Word,i=n.algo,l=[],c=[],u=[];!function(){for(var e=1,t=0,n=0;n<24;n++){l[e+5*t]=(n+1)*(n+2)/2%64;var a=(2*e+3*t)%5;e=t%5,t=a}for(e=0;e<5;e++)for(t=0;t<5;t++)c[e+5*t]=t+(2*e+3*t)%5*5;for(var s=1,r=0;r<24;r++){for(var i=0,d=0,h=0;h<7;h++){if(1&s){var m=(1<<h)-1;m<32?d^=1<<m:i^=1<<m-32}128&s?s=s<<1^113:s<<=1}u[r]=o.create(i,d)}}();var d=[];!function(){for(var e=0;e<25;e++)d[e]=o.create()}();var h=i.SHA3=r.extend({cfg:r.cfg.extend({outputLength:512}),_doReset:function(){for(var e=this._state=[],t=0;t<25;t++)e[t]=new o.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(e,t){for(var n=this._state,a=this.blockSize/2,s=0;s<a;s++){var r=e[t+2*s],o=e[t+2*s+1];r=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),o=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),(T=n[s]).high^=o,T.low^=r}for(var i=0;i<24;i++){for(var h=0;h<5;h++){for(var m=0,p=0,f=0;f<5;f++)m^=(T=n[h+5*f]).high,p^=T.low;var g=d[h];g.high=m,g.low=p}for(h=0;h<5;h++){var v=d[(h+4)%5],y=d[(h+1)%5],b=y.high,x=y.low;for(m=v.high^(b<<1|x>>>31),p=v.low^(x<<1|b>>>31),f=0;f<5;f++)(T=n[h+5*f]).high^=m,T.low^=p}for(var w=1;w<25;w++){var S=(T=n[w]).high,k=T.low,j=l[w];j<32?(m=S<<j|k>>>32-j,p=k<<j|S>>>32-j):(m=k<<j-32|S>>>64-j,p=S<<j-32|k>>>64-j);var N=d[c[w]];N.high=m,N.low=p}var C=d[0],E=n[0];for(C.high=E.high,C.low=E.low,h=0;h<5;h++)for(f=0;f<5;f++){var T=n[w=h+5*f],A=d[w],_=d[(h+1)%5+5*f],I=d[(h+2)%5+5*f];T.high=A.high^~_.high&I.high,T.low=A.low^~_.low&I.low}T=n[0];var P=u[i];T.high^=P.high,T.low^=P.low}},_doFinalize:function(){var t=this._data,n=t.words,a=(this._nDataBytes,8*t.sigBytes),r=32*this.blockSize;n[a>>>5]|=1<<24-a%32,n[(e.ceil((a+1)/r)*r>>>5)-1]|=128,t.sigBytes=4*n.length,this._process();for(var o=this._state,i=this.cfg.outputLength/8,l=i/8,c=[],u=0;u<l;u++){var d=o[u],h=d.high,m=d.low;h=16711935&(h<<8|h>>>24)|4278255360&(h<<24|h>>>8),m=16711935&(m<<8|m>>>24)|4278255360&(m<<24|m>>>8),c.push(m),c.push(h)}return new s.init(c,i)},clone:function(){for(var e=r.clone.call(this),t=e._state=this._state.slice(0),n=0;n<25;n++)t[n]=t[n].clone();return e}});n.SHA3=r._createHelper(h),n.HmacSHA3=r._createHmacHelper(h)}(Math),t.SHA3)}()},638:function(e,t,n){!function(){var t;e.exports=(t=n(488),n(523),n(199),n(211),n(238),function(){var e=t,n=e.lib.StreamCipher,a=e.algo,s=a.RC4=n.extend({_doReset:function(){for(var e=this._key,t=e.words,n=e.sigBytes,a=this._S=[],s=0;s<256;s++)a[s]=s;s=0;for(var r=0;s<256;s++){var o=s%n,i=t[o>>>2]>>>24-o%4*8&255;r=(r+a[s]+i)%256;var l=a[s];a[s]=a[r],a[r]=l}this._i=this._j=0},_doProcessBlock:function(e,t){e[t]^=r.call(this)},keySize:8,ivSize:0});function r(){for(var e=this._S,t=this._i,n=this._j,a=0,s=0;s<4;s++){n=(n+e[t=(t+1)%256])%256;var r=e[t];e[t]=e[n],e[n]=r,a|=e[(e[t]+e[n])%256]<<24-8*s}return this._i=t,this._j=n,a}e.RC4=n._createHelper(s);var o=a.RC4Drop=s.extend({cfg:s.cfg.extend({drop:192}),_doReset:function(){s._doReset.call(this);for(var e=this.cfg.drop;e>0;e--)r.call(this)}});e.RC4Drop=n._createHelper(o)}(),t.RC4)}()},641:function(e,t,n){!function(){var t;e.exports=(t=n(488),n(368),function(){var e=t,n=e.lib.WordArray,a=e.algo,s=a.SHA256,r=a.SHA224=s.extend({_doReset:function(){this._hash=new n.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var e=s._doFinalize.call(this);return e.sigBytes-=4,e}});e.SHA224=s._createHelper(r),e.HmacSHA224=s._createHmacHelper(r)}(),t.SHA224)}()},646:function(e,t,n){!function(){var t;e.exports=(t=n(488),function(){var e=t,n=e.lib.WordArray;function a(e,t,a){for(var s=[],r=0,o=0;o<t;o++)if(o%4){var i=a[e.charCodeAt(o-1)]<<o%4*2|a[e.charCodeAt(o)]>>>6-o%4*2;s[r>>>2]|=i<<24-r%4*8,r++}return n.create(s,r)}e.enc.Base64url={stringify:function(e,t){void 0===t&&(t=!0);var n=e.words,a=e.sigBytes,s=t?this._safe_map:this._map;e.clamp();for(var r=[],o=0;o<a;o+=3)for(var i=(n[o>>>2]>>>24-o%4*8&255)<<16|(n[o+1>>>2]>>>24-(o+1)%4*8&255)<<8|n[o+2>>>2]>>>24-(o+2)%4*8&255,l=0;l<4&&o+.75*l<a;l++)r.push(s.charAt(i>>>6*(3-l)&63));var c=s.charAt(64);if(c)for(;r.length%4;)r.push(c);return r.join("")},parse:function(e,t){void 0===t&&(t=!0);var n=e.length,s=t?this._safe_map:this._map,r=this._reverseMap;if(!r){r=this._reverseMap=[];for(var o=0;o<s.length;o++)r[s.charCodeAt(o)]=o}var i=s.charAt(64);if(i){var l=e.indexOf(i);-1!==l&&(n=l)}return a(e,n,r)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"}}(),t.enc.Base64url)}()},659:function(e,t,n){!function(){var t;e.exports=(t=n(488),n(523),n(199),n(211),n(238),function(){var e=t,n=e.lib.StreamCipher,a=e.algo,s=[],r=[],o=[],i=a.RabbitLegacy=n.extend({_doReset:function(){var e=this._key.words,t=this.cfg.iv,n=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],a=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]];this._b=0;for(var s=0;s<4;s++)l.call(this);for(s=0;s<8;s++)a[s]^=n[s+4&7];if(t){var r=t.words,o=r[0],i=r[1],c=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),u=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),d=c>>>16|4294901760&u,h=u<<16|65535&c;for(a[0]^=c,a[1]^=d,a[2]^=u,a[3]^=h,a[4]^=c,a[5]^=d,a[6]^=u,a[7]^=h,s=0;s<4;s++)l.call(this)}},_doProcessBlock:function(e,t){var n=this._X;l.call(this),s[0]=n[0]^n[5]>>>16^n[3]<<16,s[1]=n[2]^n[7]>>>16^n[5]<<16,s[2]=n[4]^n[1]>>>16^n[7]<<16,s[3]=n[6]^n[3]>>>16^n[1]<<16;for(var a=0;a<4;a++)s[a]=16711935&(s[a]<<8|s[a]>>>24)|4278255360&(s[a]<<24|s[a]>>>8),e[t+a]^=s[a]},blockSize:4,ivSize:2});function l(){for(var e=this._X,t=this._C,n=0;n<8;n++)r[n]=t[n];for(t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<r[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<r[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<r[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<r[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<r[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<r[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<r[6]>>>0?1:0)|0,this._b=t[7]>>>0<r[7]>>>0?1:0,n=0;n<8;n++){var a=e[n]+t[n],s=65535&a,i=a>>>16,l=((s*s>>>17)+s*i>>>15)+i*i,c=((4294901760&a)*a|0)+((65535&a)*a|0);o[n]=l^c}e[0]=o[0]+(o[7]<<16|o[7]>>>16)+(o[6]<<16|o[6]>>>16)|0,e[1]=o[1]+(o[0]<<8|o[0]>>>24)+o[7]|0,e[2]=o[2]+(o[1]<<16|o[1]>>>16)+(o[0]<<16|o[0]>>>16)|0,e[3]=o[3]+(o[2]<<8|o[2]>>>24)+o[1]|0,e[4]=o[4]+(o[3]<<16|o[3]>>>16)+(o[2]<<16|o[2]>>>16)|0,e[5]=o[5]+(o[4]<<8|o[4]>>>24)+o[3]|0,e[6]=o[6]+(o[5]<<16|o[5]>>>16)+(o[4]<<16|o[4]>>>16)|0,e[7]=o[7]+(o[6]<<8|o[6]>>>24)+o[5]|0}e.RabbitLegacy=n._createHelper(i)}(),t.RabbitLegacy)}()},672:(e,t,n)=>{"use strict";var a=n(43);function s(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var o={d:{f:r,r:function(){throw Error(s(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},i=Symbol.for("react.portal");var l=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(e,t){return"font"===e?"":"string"===typeof t?"use-credentials"===t?t:"":void 0}t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)throw Error(s(299));return function(e,t,n){var a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:i,key:null==a?null:""+a,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.flushSync=function(e){var t=l.T,n=o.p;try{if(l.T=null,o.p=2,e)return e()}finally{l.T=t,o.p=n,o.d.f()}},t.preconnect=function(e,t){"string"===typeof e&&(t?t="string"===typeof(t=t.crossOrigin)?"use-credentials"===t?t:"":void 0:t=null,o.d.C(e,t))},t.prefetchDNS=function(e){"string"===typeof e&&o.d.D(e)},t.preinit=function(e,t){if("string"===typeof e&&t&&"string"===typeof t.as){var n=t.as,a=c(n,t.crossOrigin),s="string"===typeof t.integrity?t.integrity:void 0,r="string"===typeof t.fetchPriority?t.fetchPriority:void 0;"style"===n?o.d.S(e,"string"===typeof t.precedence?t.precedence:void 0,{crossOrigin:a,integrity:s,fetchPriority:r}):"script"===n&&o.d.X(e,{crossOrigin:a,integrity:s,fetchPriority:r,nonce:"string"===typeof t.nonce?t.nonce:void 0})}},t.preinitModule=function(e,t){if("string"===typeof e)if("object"===typeof t&&null!==t){if(null==t.as||"script"===t.as){var n=c(t.as,t.crossOrigin);o.d.M(e,{crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0})}}else null==t&&o.d.M(e)},t.preload=function(e,t){if("string"===typeof e&&"object"===typeof t&&null!==t&&"string"===typeof t.as){var n=t.as,a=c(n,t.crossOrigin);o.d.L(e,n,{crossOrigin:a,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0,type:"string"===typeof t.type?t.type:void 0,fetchPriority:"string"===typeof t.fetchPriority?t.fetchPriority:void 0,referrerPolicy:"string"===typeof t.referrerPolicy?t.referrerPolicy:void 0,imageSrcSet:"string"===typeof t.imageSrcSet?t.imageSrcSet:void 0,imageSizes:"string"===typeof t.imageSizes?t.imageSizes:void 0,media:"string"===typeof t.media?t.media:void 0})}},t.preloadModule=function(e,t){if("string"===typeof e)if(t){var n=c(t.as,t.crossOrigin);o.d.m(e,{as:"string"===typeof t.as&&"script"!==t.as?t.as:void 0,crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0})}else o.d.m(e)},t.requestFormReset=function(e){o.d.r(e)},t.unstable_batchedUpdates=function(e,t){return e(t)},t.useFormState=function(e,t,n){return l.H.useFormState(e,t,n)},t.useFormStatus=function(){return l.H.useHostTransitionStatus()},t.version="19.1.1"},708:function(e,t,n){!function(){var t;e.exports=(t=n(488),n(238),function(){var e=t,n=e.lib.CipherParams,a=e.enc.Hex;e.format.Hex={stringify:function(e){return e.ciphertext.toString(a)},parse:function(e){var t=a.parse(e);return n.create({ciphertext:t})}}}(),t.format.Hex)}()},749:function(e,t,n){!function(){var t;e.exports=(t=n(488),function(e){var n=t,a=n.lib,s=a.Base,r=a.WordArray,o=n.x64={};o.Word=s.extend({init:function(e,t){this.high=e,this.low=t}}),o.WordArray=s.extend({init:function(t,n){t=this.words=t||[],this.sigBytes=n!=e?n:8*t.length},toX32:function(){for(var e=this.words,t=e.length,n=[],a=0;a<t;a++){var s=e[a];n.push(s.high),n.push(s.low)}return r.create(n,this.sigBytes)},clone:function(){for(var e=s.clone.call(this),t=e.words=this.words.slice(0),n=t.length,a=0;a<n;a++)t[a]=t[a].clone();return e}})}(),t)}()},780:function(e,t,n){!function(){var t;e.exports=(t=n(488),n(523),n(199),n(211),n(238),function(){var e=t,n=e.lib.BlockCipher,a=e.algo,s=[],r=[],o=[],i=[],l=[],c=[],u=[],d=[],h=[],m=[];!function(){for(var e=[],t=0;t<256;t++)e[t]=t<128?t<<1:t<<1^283;var n=0,a=0;for(t=0;t<256;t++){var p=a^a<<1^a<<2^a<<3^a<<4;p=p>>>8^255&p^99,s[n]=p,r[p]=n;var f=e[n],g=e[f],v=e[g],y=257*e[p]^16843008*p;o[n]=y<<24|y>>>8,i[n]=y<<16|y>>>16,l[n]=y<<8|y>>>24,c[n]=y,y=16843009*v^65537*g^257*f^16843008*n,u[p]=y<<24|y>>>8,d[p]=y<<16|y>>>16,h[p]=y<<8|y>>>24,m[p]=y,n?(n=f^e[e[e[v^f]]],a^=e[e[a]]):n=a=1}}();var p=[0,1,2,4,8,16,32,64,128,27,54],f=a.AES=n.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var e=this._keyPriorReset=this._key,t=e.words,n=e.sigBytes/4,a=4*((this._nRounds=n+6)+1),r=this._keySchedule=[],o=0;o<a;o++)o<n?r[o]=t[o]:(c=r[o-1],o%n?n>6&&o%n==4&&(c=s[c>>>24]<<24|s[c>>>16&255]<<16|s[c>>>8&255]<<8|s[255&c]):(c=s[(c=c<<8|c>>>24)>>>24]<<24|s[c>>>16&255]<<16|s[c>>>8&255]<<8|s[255&c],c^=p[o/n|0]<<24),r[o]=r[o-n]^c);for(var i=this._invKeySchedule=[],l=0;l<a;l++){if(o=a-l,l%4)var c=r[o];else c=r[o-4];i[l]=l<4||o<=4?c:u[s[c>>>24]]^d[s[c>>>16&255]]^h[s[c>>>8&255]]^m[s[255&c]]}}},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,o,i,l,c,s)},decryptBlock:function(e,t){var n=e[t+1];e[t+1]=e[t+3],e[t+3]=n,this._doCryptBlock(e,t,this._invKeySchedule,u,d,h,m,r),n=e[t+1],e[t+1]=e[t+3],e[t+3]=n},_doCryptBlock:function(e,t,n,a,s,r,o,i){for(var l=this._nRounds,c=e[t]^n[0],u=e[t+1]^n[1],d=e[t+2]^n[2],h=e[t+3]^n[3],m=4,p=1;p<l;p++){var f=a[c>>>24]^s[u>>>16&255]^r[d>>>8&255]^o[255&h]^n[m++],g=a[u>>>24]^s[d>>>16&255]^r[h>>>8&255]^o[255&c]^n[m++],v=a[d>>>24]^s[h>>>16&255]^r[c>>>8&255]^o[255&u]^n[m++],y=a[h>>>24]^s[c>>>16&255]^r[u>>>8&255]^o[255&d]^n[m++];c=f,u=g,d=v,h=y}f=(i[c>>>24]<<24|i[u>>>16&255]<<16|i[d>>>8&255]<<8|i[255&h])^n[m++],g=(i[u>>>24]<<24|i[d>>>16&255]<<16|i[h>>>8&255]<<8|i[255&c])^n[m++],v=(i[d>>>24]<<24|i[h>>>16&255]<<16|i[c>>>8&255]<<8|i[255&u])^n[m++],y=(i[h>>>24]<<24|i[c>>>16&255]<<16|i[u>>>8&255]<<8|i[255&d])^n[m++],e[t]=f,e[t+1]=g,e[t+2]=v,e[t+3]=y},keySize:8});e.AES=n._createHelper(f)}(),t.AES)}()},799:(e,t)=>{"use strict";var n=Symbol.for("react.transitional.element"),a=Symbol.for("react.fragment");function s(e,t,a){var s=null;if(void 0!==a&&(s=""+a),void 0!==t.key&&(s=""+t.key),"key"in t)for(var r in a={},t)"key"!==r&&(a[r]=t[r]);else a=t;return t=a.ref,{$$typeof:n,type:e,key:s,ref:void 0!==t?t:null,props:a}}t.Fragment=a,t.jsx=s,t.jsxs=s},804:function(e,t,n){!function(){var t;e.exports=(t=n(488),n(238),t.pad.Iso97971={pad:function(e,n){e.concat(t.lib.WordArray.create([2147483648],1)),t.pad.ZeroPadding.pad(e,n)},unpad:function(e){t.pad.ZeroPadding.unpad(e),e.sigBytes--}},t.pad.Iso97971)}()},853:(e,t,n)=>{"use strict";e.exports=n(896)},875:function(e,t,n){!function(){var t;e.exports=(t=n(488),n(523),n(199),n(211),n(238),function(){var e=t,n=e.lib.StreamCipher,a=e.algo,s=[],r=[],o=[],i=a.Rabbit=n.extend({_doReset:function(){for(var e=this._key.words,t=this.cfg.iv,n=0;n<4;n++)e[n]=16711935&(e[n]<<8|e[n]>>>24)|4278255360&(e[n]<<24|e[n]>>>8);var a=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],s=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]];for(this._b=0,n=0;n<4;n++)l.call(this);for(n=0;n<8;n++)s[n]^=a[n+4&7];if(t){var r=t.words,o=r[0],i=r[1],c=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),u=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),d=c>>>16|4294901760&u,h=u<<16|65535&c;for(s[0]^=c,s[1]^=d,s[2]^=u,s[3]^=h,s[4]^=c,s[5]^=d,s[6]^=u,s[7]^=h,n=0;n<4;n++)l.call(this)}},_doProcessBlock:function(e,t){var n=this._X;l.call(this),s[0]=n[0]^n[5]>>>16^n[3]<<16,s[1]=n[2]^n[7]>>>16^n[5]<<16,s[2]=n[4]^n[1]>>>16^n[7]<<16,s[3]=n[6]^n[3]>>>16^n[1]<<16;for(var a=0;a<4;a++)s[a]=16711935&(s[a]<<8|s[a]>>>24)|4278255360&(s[a]<<24|s[a]>>>8),e[t+a]^=s[a]},blockSize:4,ivSize:2});function l(){for(var e=this._X,t=this._C,n=0;n<8;n++)r[n]=t[n];for(t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<r[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<r[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<r[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<r[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<r[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<r[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<r[6]>>>0?1:0)|0,this._b=t[7]>>>0<r[7]>>>0?1:0,n=0;n<8;n++){var a=e[n]+t[n],s=65535&a,i=a>>>16,l=((s*s>>>17)+s*i>>>15)+i*i,c=((4294901760&a)*a|0)+((65535&a)*a|0);o[n]=l^c}e[0]=o[0]+(o[7]<<16|o[7]>>>16)+(o[6]<<16|o[6]>>>16)|0,e[1]=o[1]+(o[0]<<8|o[0]>>>24)+o[7]|0,e[2]=o[2]+(o[1]<<16|o[1]>>>16)+(o[0]<<16|o[0]>>>16)|0,e[3]=o[3]+(o[2]<<8|o[2]>>>24)+o[1]|0,e[4]=o[4]+(o[3]<<16|o[3]>>>16)+(o[2]<<16|o[2]>>>16)|0,e[5]=o[5]+(o[4]<<8|o[4]>>>24)+o[3]|0,e[6]=o[6]+(o[5]<<16|o[5]>>>16)+(o[4]<<16|o[4]>>>16)|0,e[7]=o[7]+(o[6]<<8|o[6]>>>24)+o[5]|0}e.Rabbit=n._createHelper(i)}(),t.Rabbit)}()},884:function(e,t,n){!function(){var t;e.exports=(t=n(488),n(238),t.pad.AnsiX923={pad:function(e,t){var n=e.sigBytes,a=4*t,s=a-n%a,r=n+s-1;e.clamp(),e.words[r>>>2]|=s<<24-r%4*8,e.sigBytes+=s},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},t.pad.Ansix923)}()},896:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var a=n-1>>>1,s=e[a];if(!(0<r(s,t)))break e;e[a]=t,e[n]=s,n=a}}function a(e){return 0===e.length?null:e[0]}function s(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var a=0,s=e.length,o=s>>>1;a<o;){var i=2*(a+1)-1,l=e[i],c=i+1,u=e[c];if(0>r(l,n))c<s&&0>r(u,l)?(e[a]=u,e[c]=n,a=c):(e[a]=l,e[i]=n,a=i);else{if(!(c<s&&0>r(u,n)))break e;e[a]=u,e[c]=n,a=c}}}return t}function r(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if(t.unstable_now=void 0,"object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var i=Date,l=i.now();t.unstable_now=function(){return i.now()-l}}var c=[],u=[],d=1,h=null,m=3,p=!1,f=!1,g=!1,v=!1,y="function"===typeof setTimeout?setTimeout:null,b="function"===typeof clearTimeout?clearTimeout:null,x="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=a(u);null!==t;){if(null===t.callback)s(u);else{if(!(t.startTime<=e))break;s(u),t.sortIndex=t.expirationTime,n(c,t)}t=a(u)}}function S(e){if(g=!1,w(e),!f)if(null!==a(c))f=!0,j||(j=!0,k());else{var t=a(u);null!==t&&P(S,t.startTime-e)}}var k,j=!1,N=-1,C=5,E=-1;function T(){return!!v||!(t.unstable_now()-E<C)}function A(){if(v=!1,j){var e=t.unstable_now();E=e;var n=!0;try{e:{f=!1,g&&(g=!1,b(N),N=-1),p=!0;var r=m;try{t:{for(w(e),h=a(c);null!==h&&!(h.expirationTime>e&&T());){var o=h.callback;if("function"===typeof o){h.callback=null,m=h.priorityLevel;var i=o(h.expirationTime<=e);if(e=t.unstable_now(),"function"===typeof i){h.callback=i,w(e),n=!0;break t}h===a(c)&&s(c),w(e)}else s(c);h=a(c)}if(null!==h)n=!0;else{var l=a(u);null!==l&&P(S,l.startTime-e),n=!1}}break e}finally{h=null,m=r,p=!1}n=void 0}}finally{n?k():j=!1}}}if("function"===typeof x)k=function(){x(A)};else if("undefined"!==typeof MessageChannel){var _=new MessageChannel,I=_.port2;_.port1.onmessage=A,k=function(){I.postMessage(null)}}else k=function(){y(A,0)};function P(e,n){N=y(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_next=function(e){switch(m){case 1:case 2:case 3:var t=3;break;default:t=m}var n=m;m=t;try{return e()}finally{m=n}},t.unstable_requestPaint=function(){v=!0},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=m;m=e;try{return t()}finally{m=n}},t.unstable_scheduleCallback=function(e,s,r){var o=t.unstable_now();switch("object"===typeof r&&null!==r?r="number"===typeof(r=r.delay)&&0<r?o+r:o:r=o,e){case 1:var i=-1;break;case 2:i=250;break;case 5:i=1073741823;break;case 4:i=1e4;break;default:i=5e3}return e={id:d++,callback:s,priorityLevel:e,startTime:r,expirationTime:i=r+i,sortIndex:-1},r>o?(e.sortIndex=r,n(u,e),null===a(c)&&e===a(u)&&(g?(b(N),N=-1):g=!0,P(S,r-o))):(e.sortIndex=i,n(c,e),f||p||(f=!0,j||(j=!0,k()))),e},t.unstable_shouldYield=T,t.unstable_wrapCallback=function(e){var t=m;return function(){var n=m;m=t;try{return e.apply(this,arguments)}finally{m=n}}}},930:function(e,t,n){!function(){var t;e.exports=(t=n(488),n(368),n(220),function(){var e=t,n=e.lib,a=n.Base,s=n.WordArray,r=e.algo,o=r.SHA256,i=r.HMAC,l=r.PBKDF2=a.extend({cfg:a.extend({keySize:4,hasher:o,iterations:25e4}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var n=this.cfg,a=i.create(n.hasher,e),r=s.create(),o=s.create([1]),l=r.words,c=o.words,u=n.keySize,d=n.iterations;l.length<u;){var h=a.update(t).finalize(o);a.reset();for(var m=h.words,p=m.length,f=h,g=1;g<d;g++){f=a.finalize(f),a.reset();for(var v=f.words,y=0;y<p;y++)m[y]^=v[y]}r.concat(h),c[0]++}return r.sigBytes=4*u,r}});e.PBKDF2=function(e,t,n){return l.create(n).compute(e,t)}}(),t.PBKDF2)}()},950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(672)},962:function(e,t,n){!function(){var t;e.exports=(t=n(488),n(238),t.mode.CTR=function(){var e=t.lib.BlockCipherMode.extend(),n=e.Encryptor=e.extend({processBlock:function(e,t){var n=this._cipher,a=n.blockSize,s=this._iv,r=this._counter;s&&(r=this._counter=s.slice(0),this._iv=void 0);var o=r.slice(0);n.encryptBlock(o,0),r[a-1]=r[a-1]+1|0;for(var i=0;i<a;i++)e[t+i]^=o[i]}});return e.Decryptor=n,e}(),t.mode.CTR)}()}},t={};function n(a){var s=t[a];if(void 0!==s)return s.exports;var r=t[a]={exports:{}};return e[a].call(r.exports,r,r.exports,n),r.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";var e=n(43),t=n(391);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function s(e){var t=function(e,t){if("object"!=a(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var s=n.call(e,t||"default");if("object"!=a(s))return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==a(t)?t:t+""}function r(e,t,n){return(t=s(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach(function(t){r(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}const l=new class{constructor(){this.tokenKey="auth_token",this.refreshKey="refresh_token",this.encryptionKey=null,this.initializeEncryption()}initializeEncryption(){if(!sessionStorage.getItem("session_enc_key")){const e=this.generateSecureKey();sessionStorage.setItem("session_enc_key",e)}this.encryptionKey=sessionStorage.getItem("session_enc_key")}generateSecureKey(){const e=new Uint8Array(32);return crypto.getRandomValues(e),Array.from(e,e=>e.toString(16).padStart(2,"0")).join("")}async encryptData(e){try{const t=(new TextEncoder).encode(e),n=crypto.getRandomValues(new Uint8Array(12)),a=await crypto.subtle.importKey("raw",new Uint8Array(this.encryptionKey.match(/.{2}/g).map(e=>parseInt(e,16))),{name:"AES-GCM"},!1,["encrypt"]),s=await crypto.subtle.encrypt({name:"AES-GCM",iv:n},a,t),r=new Uint8Array(n.length+s.byteLength);return r.set(n),r.set(new Uint8Array(s),n.length),btoa(String.fromCharCode(...r))}catch(t){throw console.error("Encryption failed:",t),new Error("Failed to encrypt token")}}async decryptData(e){try{const t=new Uint8Array(atob(e).split("").map(e=>e.charCodeAt(0))),n=t.slice(0,12),a=t.slice(12),s=await crypto.subtle.importKey("raw",new Uint8Array(this.encryptionKey.match(/.{2}/g).map(e=>parseInt(e,16))),{name:"AES-GCM"},!1,["decrypt"]),r=await crypto.subtle.decrypt({name:"AES-GCM",iv:n},s,a);return(new TextDecoder).decode(r)}catch(t){throw console.error("Decryption failed:",t),new Error("Failed to decrypt token")}}async setToken(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{this.clearInsecureStorage();const n=await this.encryptData(e);if(sessionStorage.setItem(this.tokenKey,n),t){const e=await this.encryptData(t);sessionStorage.setItem(this.refreshKey,e)}return this.setTokenExpiration(),console.log("\ud83d\udd10 Token stored securely"),!0}catch(n){return console.error("Failed to store token securely:",n),!1}}async getToken(){try{const e=sessionStorage.getItem(this.tokenKey);return e?await this.decryptData(e):null}catch(e){return console.error("Failed to retrieve token:",e),this.clearTokens(),null}}async getRefreshToken(){try{const e=sessionStorage.getItem(this.refreshKey);return e?await this.decryptData(e):null}catch(e){return console.error("Failed to retrieve refresh token:",e),null}}clearTokens(){sessionStorage.removeItem(this.tokenKey),sessionStorage.removeItem(this.refreshKey),sessionStorage.removeItem("session_enc_key"),this.clearInsecureStorage(),console.log("\ud83e\uddf9 All tokens cleared")}clearInsecureStorage(){localStorage.removeItem("token"),localStorage.removeItem("authToken"),localStorage.removeItem("user_token"),localStorage.removeItem("jwt_token");const e=[];for(let t=0;t<localStorage.length;t++){const n=localStorage.key(t);n&&(n.includes("token")||n.includes("auth"))&&e.push(n)}e.forEach(e=>{localStorage.removeItem(e),console.warn("\ud83e\uddf9 Removed insecure storage: ".concat(e))})}setTokenExpiration(){this.expirationTimer&&clearTimeout(this.expirationTimer),this.expirationTimer=setTimeout(()=>{console.warn("\u23f0 Token expiring soon, clearing tokens"),this.clearTokens(),window.dispatchEvent(new CustomEvent("tokenExpiring"))},828e5)}async hasValidToken(){try{return!!await this.getToken()}catch(e){return!1}}async migrateFromLocalStorage(){const e=localStorage.getItem("token");return!!e&&(console.log("\ud83d\udd04 Migrating token from insecure localStorage"),await this.setToken(e),localStorage.removeItem("token"),console.log("\u2705 Token migration completed"),!0)}async getTokenForRequest(){let e=await this.getToken();if(e||(await this.migrateFromLocalStorage(),e=await this.getToken()),!e){const t=await this.getRefreshToken();t&&(e=await this.refreshAccessToken(t))}return e}async refreshAccessToken(e){try{const t=await fetch("/api/auth/refresh",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refreshToken:e})});if(t.ok){const e=await t.json();return await this.setToken(e.token,e.refreshToken),e.token}return this.clearTokens(),null}catch(t){return console.error("Token refresh failed:",t),this.clearTokens(),null}}async verifyTokenIntegrity(){try{const t=await this.getToken();if(!t)return!1;const n=t.split(".");if(3!==n.length)return console.warn("\ud83d\udea8 Token structure invalid"),this.clearTokens(),!1;try{const e=JSON.parse(atob(n[1])),t=Math.floor(Date.now()/1e3);if(e.exp&&e.exp<t)return console.warn("\u23f0 Token expired"),this.clearTokens(),!1}catch(e){return console.warn("\ud83d\udea8 Token payload invalid"),this.clearTokens(),!1}return!0}catch(t){return console.error("Token integrity check failed:",t),this.clearTokens(),!1}}async initialize(){await this.migrateFromLocalStorage(),await this.verifyTokenIntegrity(),setInterval(()=>{this.verifyTokenIntegrity()},3e5),console.log("\ud83d\udd10 Secure token manager initialized")}},c="login",u="logout",d="page_view",h="feature_used",m="error_occurred",p="user_activity_log",f="user_session_data",g="user_analytics_data";const v=new class{constructor(){this.sessionStartTime=Date.now(),this.sessionId=this.generateSessionId(),this.lastActivityTime=Date.now(),this.isTrackingEnabled=!0,this.initializeSession(),this.setupCleanupInterval()}generateSessionId(){return"session_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9))}initializeSession(){try{const e={sessionId:this.sessionId,startTime:this.sessionStartTime,userAgent:navigator.userAgent,platform:navigator.platform,language:navigator.language,timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,screenResolution:"".concat(window.screen.width,"x").concat(window.screen.height),viewportSize:"".concat(window.innerWidth,"x").concat(window.innerHeight)};localStorage.setItem(f,JSON.stringify(e)),this.logActivity(c,{sessionId:this.sessionId,timestamp:this.sessionStartTime})}catch(e){console.error("Failed to initialize session:",e)}}logActivity(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.isTrackingEnabled)try{const n={id:this.generateActivityId(),type:e,timestamp:Date.now(),sessionId:this.sessionId,data:i(i({},t),{},{url:window.location.href,referrer:document.referrer,viewportSize:"".concat(window.innerWidth,"x").concat(window.innerHeight)})};this.lastActivityTime=n.timestamp;const a=this.getActivityLog();a.push(n),a.length>1e3&&a.splice(0,a.length-1e3),localStorage.setItem(p,JSON.stringify(a)),this.updateAnalytics(n),window.dispatchEvent(new CustomEvent("userActivity",{detail:n}))}catch(n){console.error("Failed to log activity:",n)}}generateActivityId(){return"activity_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9))}getActivityLog(){try{const e=localStorage.getItem(p);return e?JSON.parse(e):[]}catch(e){return console.error("Failed to get activity log:",e),[]}}clearActivityLog(){try{return localStorage.removeItem(p),localStorage.removeItem(g),!0}catch(e){return console.error("Failed to clear activity log:",e),!1}}getActivityStats(){try{var e,t,n;const a=this.getActivityLog(),s=Date.now(),r=(new Date).setHours(0,0,0,0),o=s-6048e5,i=s-2592e6,l={total:a.length,today:a.filter(e=>e.timestamp>=r).length,thisWeek:a.filter(e=>e.timestamp>=o).length,thisMonth:a.filter(e=>e.timestamp>=i).length,byType:{},byHour:new Array(24).fill(0),byDay:{},sessionDuration:s-this.sessionStartTime,lastActivity:this.lastActivityTime,mostActiveHour:0,mostActiveDay:"",topActivities:[]};a.forEach(e=>{const t=e.type;l.byType[t]=(l.byType[t]||0)+1;const n=new Date(e.timestamp).getHours();l.byHour[n]++;const a=new Date(e.timestamp).toDateString();l.byDay[a]=(l.byDay[a]||0)+1});const c=Math.max(...l.byHour||[]);l.mostActiveHour=null!==(e=null===(t=l.byHour)||void 0===t||null===(n=t.indexOf)||void 0===n?void 0:n.call(t,c))&&void 0!==e?e:-1;const u=Object.keys(l.byDay).reduce((e,t)=>l.byDay[e]>l.byDay[t]?e:t,"");return l.mostActiveDay=u,l.topActivities=Object.entries(l.byType).sort((e,t)=>{let[,n]=e,[,a]=t;return a-n}).slice(0,5).map(e=>{let[t,n]=e;return{type:t,count:n}}),l}catch(a){return console.error("Failed to get activity stats:",a),{total:0,today:0,thisWeek:0,thisMonth:0,byType:{},byHour:new Array(24).fill(0),byDay:{},sessionDuration:0,lastActivity:Date.now(),mostActiveHour:0,mostActiveDay:"",topActivities:[]}}}updateAnalytics(e){try{const t=this.getAnalyticsData(),n=(new Date).toDateString();t.daily[n]||(t.daily[n]={activities:0,types:{},firstActivity:e.timestamp,lastActivity:e.timestamp});const a=t.daily[n];a.activities++,a.types[e.type]=(a.types[e.type]||0)+1,a.lastActivity=e.timestamp,t.global.totalActivities++,t.global.types[e.type]=(t.global.types[e.type]||0)+1,t.global.lastUpdated=e.timestamp,localStorage.setItem(g,JSON.stringify(t))}catch(t){console.error("Failed to update analytics:",t)}}getAnalyticsData(){try{const e=localStorage.getItem(g);if(e)return JSON.parse(e)}catch(e){console.error("Failed to get analytics data:",e)}return{global:{totalActivities:0,types:{},firstActivity:Date.now(),lastUpdated:Date.now()},daily:{},weekly:{},monthly:{}}}setTrackingEnabled(e){this.isTrackingEnabled=e,localStorage.setItem("activity_tracking_enabled",e)}isTrackingEnabledCheck(){return this.isTrackingEnabled}trackPageView(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.logActivity(d,i({page:e},t))}trackFeatureUsage(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.logActivity(h,i({feature:e},t))}trackError(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.logActivity(m,{error:{message:e.message,stack:e.stack,name:e.name},context:t})}setupCleanupInterval(){setInterval(()=>{this.cleanupOldActivities()},36e5)}cleanupOldActivities(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:30;try{const t=this.getActivityLog(),n=Date.now()-24*e*60*60*1e3,a=t.filter(e=>e.timestamp>=n);localStorage.setItem(p,JSON.stringify(a)),console.log("Cleaned up ".concat(t.length-a.length," old activities"))}catch(t){console.error("Failed to cleanup old activities:",t)}}exportActivityData(){try{return{activities:this.getActivityLog(),analytics:this.getAnalyticsData(),session:JSON.parse(localStorage.getItem(f)||"{}"),exportedAt:Date.now()}}catch(e){return console.error("Failed to export activity data:",e),null}}importActivityData(e){try{return e.activities&&localStorage.setItem(p,JSON.stringify(e.activities)),e.analytics&&localStorage.setItem(g,JSON.stringify(e.analytics)),!0}catch(t){return console.error("Failed to import activity data:",t),!1}}getSessionInfo(){try{const e=localStorage.getItem(f);return e?JSON.parse(e):null}catch(e){return console.error("Failed to get session info:",e),null}}},y=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};v.logActivity(e,t)};const b=new class{constructor(){this.STORAGE_KEYS={USER_DATA:"quibish_user_data",USER_PROFILE:"quibish_user_profile",MESSAGES:"quibish_messages",CONVERSATIONS:"quibish_conversations",SETTINGS:"quibish_settings",AUTH_TOKEN:"quibish_auth_token",SESSION_DATA:"quibish_session_data",REMEMBER_ME:"quibish_remember_me"},this.listeners={},this.initializeStorage()}initializeStorage(){try{this.isStorageAvailable("localStorage")?this.primaryStorage=localStorage:(console.warn("\u26a0\ufe0f localStorage not available, using sessionStorage"),this.primaryStorage=sessionStorage),this.migrateOldData(),console.log("\u2705 Persistent storage initialized")}catch(e){console.error("\u274c Failed to initialize storage:",e)}}isStorageAvailable(e){try{const t=window[e],n="__storage_test__";return t.setItem(n,"test"),t.removeItem(n),!0}catch(t){return!1}}migrateOldData(){try{const e=localStorage.getItem("user")||sessionStorage.getItem("user");if(e&&!this.getUserData()){const t=JSON.parse(e);this.setUserData(t),console.log("\ud83d\udce6 Migrated user data to persistent storage")}const t=localStorage.getItem("quibish_messages");if(t&&!this.getMessages().length){const e=JSON.parse(t);this.setMessages(e),console.log("\ud83d\udce6 Migrated messages to persistent storage")}const n=localStorage.getItem("authToken")||sessionStorage.getItem("authToken");n&&!this.getAuthToken()&&(this.setAuthToken(n),console.log("\ud83d\udce6 Migrated auth token to persistent storage"))}catch(e){console.warn("\u26a0\ufe0f Error during data migration:",e)}}setItem(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];try{const a="string"===typeof t?t:JSON.stringify(t);return n&&this.getRememberMe()?(localStorage.setItem(e,a),console.log("\ud83d\udcbe Stored ".concat(e," persistently"))):(sessionStorage.setItem(e,a),console.log("\ud83d\udcf1 Stored ".concat(e," for session"))),this.isCriticalData(e)&&localStorage.setItem(e,a),this.notifyListeners(e,t),!0}catch(a){return console.error("\u274c Failed to store ".concat(e,":"),a),!1}}getItem(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];try{let n=localStorage.getItem(e);return n||(n=sessionStorage.getItem(e)),n?t?JSON.parse(n):n:null}catch(n){return console.error("\u274c Failed to retrieve ".concat(e,":"),n),null}}removeItem(e){try{return localStorage.removeItem(e),sessionStorage.removeItem(e),this.notifyListeners(e,null),console.log("\ud83d\uddd1\ufe0f Removed ".concat(e," from all storage")),!0}catch(t){return console.error("\u274c Failed to remove ".concat(e,":"),t),!1}}isCriticalData(e){return[this.STORAGE_KEYS.USER_DATA,this.STORAGE_KEYS.USER_PROFILE,this.STORAGE_KEYS.MESSAGES,this.STORAGE_KEYS.AUTH_TOKEN].includes(e)}setUserData(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;null===t&&(t=this.getRememberMe());const n=this.setItem(this.STORAGE_KEYS.USER_DATA,e,t);return n&&this.setUserProfile(e,t),n}getUserData(){return this.getItem(this.STORAGE_KEYS.USER_DATA)}updateUserData(e){const t=i(i(i({},this.getUserData()||{}),e),{},{updatedAt:(new Date).toISOString()});return this.setUserData(t)}setUserProfile(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return null===t&&(t=this.getRememberMe()),this.setItem(this.STORAGE_KEYS.USER_PROFILE,e,t)}getUserProfile(){return this.getItem(this.STORAGE_KEYS.USER_PROFILE)}updateUserProfile(e){const t=i(i(i({},this.getUserProfile()||{}),e),{},{updatedAt:(new Date).toISOString()});return this.setUserProfile(t),this.updateUserData(e),t}setMessages(e){return this.setItem(this.STORAGE_KEYS.MESSAGES,e,!0)}getMessages(){return this.getItem(this.STORAGE_KEYS.MESSAGES)||[]}addMessage(e){const t=this.getMessages();return t.push(i(i({},e),{},{id:e.id||Date.now().toString(),timestamp:e.timestamp||(new Date).toISOString()})),t.length>1e3&&t.splice(0,t.length-1e3),this.setMessages(t)}updateMessage(e,t){const n=this.getMessages(),a=n.findIndex(t=>t.id===e);return-1!==a&&(n[a]=i(i(i({},n[a]),t),{},{updatedAt:(new Date).toISOString()}),this.setMessages(n))}deleteMessage(e){const t=this.getMessages().filter(t=>t.id!==e);return this.setMessages(t)}setAuthToken(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return null===t&&(t=this.getRememberMe()),this.setItem(this.STORAGE_KEYS.AUTH_TOKEN,e,t)}getAuthToken(){return this.getItem(this.STORAGE_KEYS.AUTH_TOKEN,!1)}setRememberMe(e){return localStorage.setItem(this.STORAGE_KEYS.REMEMBER_ME,e.toString()),e}getRememberMe(){return"true"===localStorage.getItem(this.STORAGE_KEYS.REMEMBER_ME)}setSettings(e){return this.setItem(this.STORAGE_KEYS.SETTINGS,e,!0)}getSettings(){return this.getItem(this.STORAGE_KEYS.SETTINGS)||{}}updateSettings(e){const t=i(i(i({},this.getSettings()),e),{},{updatedAt:(new Date).toISOString()});return this.setSettings(t)}setConversations(e){return this.setItem(this.STORAGE_KEYS.CONVERSATIONS,e,!0)}getConversations(){return this.getItem(this.STORAGE_KEYS.CONVERSATIONS)||[]}addConversation(e){const t=this.getConversations();return t.push(i(i({},e),{},{id:e.id||Date.now().toString(),createdAt:e.createdAt||(new Date).toISOString()})),this.setConversations(t)}setSessionData(e){return this.setItem(this.STORAGE_KEYS.SESSION_DATA,e,!1)}getSessionData(){return this.getItem(this.STORAGE_KEYS.SESSION_DATA)}clearAllData(){Object.values(this.STORAGE_KEYS).forEach(e=>{this.removeItem(e)});["user","authToken","token","quibish_messages"].forEach(e=>{localStorage.removeItem(e),sessionStorage.removeItem(e)}),console.log("\ud83e\uddf9 Cleared all persistent data")}clearSessionData(){sessionStorage.clear(),this.removeItem(this.STORAGE_KEYS.SESSION_DATA),console.log("\ud83e\uddf9 Cleared session data")}exportAllData(){const e={};return Object.entries(this.STORAGE_KEYS).forEach(t=>{let[n,a]=t;const s=this.getItem(a);s&&(e[n]=s)}),i(i({},e),{},{exportDate:(new Date).toISOString(),version:"1.0"})}importAllData(e){try{return Object.entries(e).forEach(e=>{let[t,n]=e;this.STORAGE_KEYS[t]&&this.setItem(this.STORAGE_KEYS[t],n,!0)}),console.log("\u2705 Data imported successfully"),!0}catch(t){return console.error("\u274c Failed to import data:",t),!1}}getStorageStats(){const e={localStorage:{},sessionStorage:{},total:{localStorage:0,sessionStorage:0}};return Object.entries(this.STORAGE_KEYS).forEach(t=>{let[n,a]=t;const s=localStorage.getItem(a),r=sessionStorage.getItem(a);if(s){const t=new Blob([s]).size;e.localStorage[n]=t,e.total.localStorage+=t}if(r){const t=new Blob([r]).size;e.sessionStorage[n]=t,e.total.sessionStorage+=t}}),e}on(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)}off(e,t){this.listeners[e]&&(this.listeners[e]=this.listeners[e].filter(e=>e!==t))}notifyListeners(e,t){this.listeners[e]&&this.listeners[e].forEach(e=>{try{e(t)}catch(n){console.error("\u274c Error in storage listener:",n)}})}healthCheck(){try{const e="__health_check__",t="test";localStorage.setItem(e,t);const n=localStorage.getItem(e);localStorage.removeItem(e),sessionStorage.setItem(e,t);const a=sessionStorage.getItem(e);return sessionStorage.removeItem(e),{healthy:!0,localStorage:n===t,sessionStorage:a===t,timestamp:(new Date).toISOString()}}catch(e){return{healthy:!1,error:e.message,timestamp:(new Date).toISOString()}}}};var x=n(579);const w=(0,e.createContext)(),S=t=>{let{children:n}=t;const[a,s]=(0,e.useState)(null),[r,o]=(0,e.useState)(null),[d,h]=(0,e.useState)(!0),[m,p]=(0,e.useState)(!1);(0,e.useEffect)(()=>{(async()=>{console.log("\ud83d\udd04 Initializing authentication...");const e=b.getUserData(),t=b.getAuthToken(),n=b.getRememberMe();if(console.log("\ud83d\udce6 Storage check:",{hasUser:!!e,hasToken:!!t,remembered:n}),t&&e)try{o(t),p(n);const i="true"==={NODE_ENV:"production",PUBLIC_URL:"/quibish",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_BASE_URL:"http://localhost:5000/api",REACT_APP_ENV:"dev",REACT_APP_WEBSOCKET_URL:"ws://localhost:5000"}.REACT_APP_OFFLINE_MODE;let l=!i;if(!1&&!i)try{const e=new AbortController,t=setTimeout(()=>e.abort(),500),n=await fetch("http://localhost:5001/api/health",{method:"HEAD",signal:e.signal});clearTimeout(t),l=n.ok}catch(a){l=!1,console.log("\ud83d\udce1 Backend server not available - using offline mode")}if(l)try{const a=new AbortController,r=setTimeout(()=>a.abort(),2e3),o=await fetch("http://localhost:5001/api/users/profile",{headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"},signal:a.signal});if(clearTimeout(r),!o.ok)throw new Error("Invalid token");{const t=await o.json();if(t.success&&t.user){const e=t.user;s(e),b.setUserData(e,n),console.log("\u2705 Restored session with fresh profile data:",{remembered:n,user:e.username,theme:e.theme,language:e.language})}else s(e),console.log("\ud83d\udcf1 Used stored session data (profile fetch failed):",{remembered:n,user:e.username})}}catch(r){"AbortError"===r.name?console.log("\ud83d\udd04 Backend connection timeout - working in offline mode"):r.message.includes("Failed to fetch")||r.message.includes("ERR_CONNECTION_REFUSED")?console.log("\ud83d\udce1 Backend server not available - working in offline mode"):console.warn("\u26a0\ufe0f Could not fetch fresh profile, using stored data:",r.message),s(e),console.log("\ud83d\udcbe Using stored session data (offline mode):",{remembered:n,user:e.username})}else s(e),console.log("\ud83d\udcbe Using stored session data (offline mode - backend unavailable):",{remembered:n,user:e.username})}catch(i){console.error("\u274c Error initializing auth with stored data:",i),b.clearAllData()}else console.log("\ud83d\udd0d No valid session found");h(!1)})()},[]);return(0,x.jsx)(w.Provider,{value:{isAuthenticated:!!r,user:a,token:r,loading:d,rememberMe:m,login:async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];s(e),o(t),p(n);try{b.setRememberMe(n),b.setAuthToken(t,n),b.setUserData(e,n),console.log("\ud83d\udd10 User session saved persistently (".concat(n?"remembered":"temporary",")"));try{await l.setToken(t),await l.clearInsecureStorage()}catch(a){console.warn("\u26a0\ufe0f Secure token storage failed, using persistent storage fallback")}y(c,{userId:e.id||"anonymous",method:"manual",remembered:n,secure:!0})}catch(a){console.error("\u274c Error storing session data:",a);const s=n?localStorage:sessionStorage;s.setItem("authToken",t),s.setItem("user",JSON.stringify(e))}},logout:async()=>{a&&y(u,{userId:a.id||"anonymous"}),s(null),o(null),p(!1),b.clearAllData();try{await l.clearTokens()}catch(e){console.warn("\u26a0\ufe0f Error clearing secure tokens:",e)}console.log("\ud83d\udd10 User session cleared from all storage")},refreshUser:async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(a&&r){try{if(e){const e=await fetch("http://localhost:5001/api/users/profile",{headers:{Authorization:"Bearer ".concat(r),"Content-Type":"application/json"}});if(e.ok){const t=await e.json();if(t.success&&t.user){const e=t.user;return s(e),b.updateUserData(e),console.log("\u2705 User data refreshed from backend"),e}}}const t=b.getUserData();if(t)return s(t),console.log("\ud83d\udcf1 User data refreshed from storage"),t}catch(t){console.error("\u274c Error refreshing user data:",t)}return a}},updateUser:e=>{if(!a)return;const t=i(i(i({},a),e),{},{updatedAt:(new Date).toISOString()});return s(t),b.updateUserData(t),console.log("\ud83d\udc64 User data updated:",Object.keys(e)),t}},children:n})},k=()=>{const t=(0,e.useContext)(w);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},j=t=>{let{isOpen:n,onClose:a,user:s,onUpdateProfile:r}=t;console.log("\ud83d\ude80 UserProfileModal rendered with props:",{isOpen:n,user:s,hasOnClose:!!a,hasOnUpdateProfile:!!r});const[o,l]=(0,e.useState)({name:"",email:"",phone:"",bio:"",avatar:null,status:"online",theme:"light",notifications:!0,privacy:"friends"}),[c,u]=(0,e.useState)(!1),[d,h]=(0,e.useState)(!1),[m,p]=(0,e.useState)(null),[f,g]=(0,e.useState)("profile");(0,e.useEffect)(()=>{s&&(l({name:s.name||"",email:s.email||"",phone:s.phone||"",bio:s.bio||"",avatar:s.avatar||null,status:s.status||"online",theme:s.theme||"light",notifications:!1!==s.notifications,privacy:s.privacy||"friends"}),p(s.avatar))},[s]);const v=(e,t)=>{l(n=>i(i({},n),{},{[e]:t}))};return n?(0,x.jsx)("div",{className:"profile-modal-overlay",onClick:e=>{e.target===e.currentTarget&&a()},children:(0,x.jsxs)("div",{className:"profile-modal",children:[(0,x.jsxs)("div",{className:"profile-modal-header",children:[(0,x.jsx)("h3",{children:"Profile Settings"}),(0,x.jsx)("button",{className:"close-btn",onClick:a,children:"\xd7"})]}),(0,x.jsxs)("div",{className:"profile-modal-tabs",children:[(0,x.jsx)("button",{className:"tab-btn ".concat("profile"===f?"active":""),onClick:()=>g("profile"),children:"Profile"}),(0,x.jsx)("button",{className:"tab-btn ".concat("preferences"===f?"active":""),onClick:()=>g("preferences"),children:"Preferences"}),(0,x.jsx)("button",{className:"tab-btn ".concat("privacy"===f?"active":""),onClick:()=>g("privacy"),children:"Privacy"})]}),(0,x.jsxs)("div",{className:"profile-modal-content",children:["profile"===f&&(0,x.jsxs)("div",{className:"profile-tab",children:[(0,x.jsx)("div",{className:"avatar-section",children:(0,x.jsxs)("div",{className:"avatar-container",children:[(0,x.jsxs)("div",{className:"profile-avatar ".concat(d?"loading":""),children:[d?(0,x.jsxs)("div",{className:"avatar-loading",children:[(0,x.jsx)("div",{className:"loading-spinner"}),(0,x.jsx)("span",{children:"Processing..."})]}):m?(0,x.jsx)("img",{src:m,alt:"Profile",onError:e=>{e.target.style.display="none",e.target.nextSibling.style.display="flex"}}):(0,x.jsx)("div",{className:"avatar-placeholder",children:o.name.charAt(0).toUpperCase()||"U"}),(0,x.jsx)("div",{className:"status-indicator","data-status":o.status})]}),c&&(0,x.jsxs)("div",{className:"avatar-upload",children:[(0,x.jsx)("input",{type:"file",id:"avatar-upload",accept:"image/*",onChange:e=>{const t=e.target.files[0];if(!t)return;if(!["image/jpeg","image/jpg","image/png","image/gif","image/webp"].includes(t.type))return void alert("Please select a valid image file (JPEG, PNG, GIF, or WebP)");if(t.size>5242880)return void alert("File size must be less than 5MB");h(!0);const n=new FileReader;n.onload=e=>{try{const t=e.target.result;p(t),l(e=>i(i({},e),{},{avatar:t})),h(!1)}catch(t){console.error("Error reading file:",t),alert("Error processing image file"),h(!1)}},n.onerror=()=>{alert("Error reading file"),h(!1)},n.readAsDataURL(t)},style:{display:"none"},disabled:d}),(0,x.jsx)("label",{htmlFor:"avatar-upload",className:"upload-btn ".concat(d?"disabled":""),children:d?"Processing...":"Change Photo"})]})]})}),(0,x.jsxs)("form",{onSubmit:async e=>{e.preventDefault();const t=(()=>{var e;const t={};return null!==(e=o.name)&&void 0!==e&&e.trim()?o.name.trim().length<2&&(t.name="Name must be at least 2 characters"):t.name="Name is required",o.email&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(o.email)&&(t.email="Please enter a valid email address"),o.phone&&!/^[\+]?[0-9\s\-\(\)]{10,}$/.test(o.phone)&&(t.phone="Please enter a valid phone number"),o.bio&&o.bio.length>500&&(t.bio="Bio must be less than 500 characters"),t})();if(Object.keys(t).length>0){const e=Object.values(t).join("\n");return void alert(e)}h(!0);try{await new Promise((e,t)=>{setTimeout(()=>{Math.random()<.1?t(new Error("Network error")):e()},1e3)}),r&&r(o);const e=i(i({},JSON.parse(localStorage.getItem("user")||sessionStorage.getItem("user")||"{}")),o);localStorage.getItem("user")&&localStorage.setItem("user",JSON.stringify(e)),sessionStorage.getItem("user")&&sessionStorage.setItem("user",JSON.stringify(e)),u(!1),alert("Profile updated successfully!")}catch(n){console.error("Error updating profile:",n),alert("Failed to update profile: ".concat(n.message,". Please try again."))}finally{h(!1)}},className:"profile-form",children:[(0,x.jsxs)("div",{className:"form-group",children:[(0,x.jsx)("label",{children:"Display Name *"}),(0,x.jsx)("input",{type:"text",value:o.name,onChange:e=>v("name",e.target.value),disabled:!c,required:!0})]}),(0,x.jsxs)("div",{className:"form-group",children:[(0,x.jsx)("label",{children:"Email"}),(0,x.jsx)("input",{type:"email",value:o.email,onChange:e=>v("email",e.target.value),disabled:!c})]}),(0,x.jsxs)("div",{className:"form-group",children:[(0,x.jsx)("label",{children:"Phone"}),(0,x.jsx)("input",{type:"tel",value:o.phone,onChange:e=>v("phone",e.target.value),disabled:!c})]}),(0,x.jsxs)("div",{className:"form-group",children:[(0,x.jsx)("label",{children:"Bio"}),(0,x.jsx)("textarea",{value:o.bio,onChange:e=>v("bio",e.target.value),disabled:!c,rows:"3",placeholder:"Tell others about yourself..."})]}),(0,x.jsxs)("div",{className:"form-group",children:[(0,x.jsx)("label",{children:"Status"}),(0,x.jsxs)("select",{value:o.status,onChange:e=>v("status",e.target.value),disabled:!c,children:[(0,x.jsx)("option",{value:"online",children:"\ud83d\udfe2 Online"}),(0,x.jsx)("option",{value:"away",children:"\ud83d\udfe1 Away"}),(0,x.jsx)("option",{value:"busy",children:"\ud83d\udd34 Busy"}),(0,x.jsx)("option",{value:"offline",children:"\u26ab Offline"})]})]}),(0,x.jsx)("div",{className:"form-actions",children:c?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("button",{type:"button",onClick:()=>{s&&(l({name:s.name||"",email:s.email||"",phone:s.phone||"",bio:s.bio||"",avatar:s.avatar||null,status:s.status||"online",theme:s.theme||"light",notifications:!1!==s.notifications,privacy:s.privacy||"friends"}),p(s.avatar)),u(!1)},className:"cancel-btn",children:"Cancel"}),(0,x.jsx)("button",{type:"submit",disabled:d,className:"save-btn",children:d?"Saving...":"Save Changes"})]}):(0,x.jsx)("button",{type:"button",onClick:()=>u(!0),className:"edit-btn",children:"Edit Profile"})})]})]}),"preferences"===f&&(0,x.jsxs)("div",{className:"preferences-tab",children:[(0,x.jsxs)("div",{className:"pref-group",children:[(0,x.jsx)("label",{children:"Theme"}),(0,x.jsxs)("div",{className:"theme-options",children:[(0,x.jsxs)("label",{className:"radio-option",children:[(0,x.jsx)("input",{type:"radio",name:"theme",value:"light",checked:"light"===o.theme,onChange:e=>v("theme",e.target.value)}),(0,x.jsx)("span",{children:"\u2600\ufe0f Light"})]}),(0,x.jsxs)("label",{className:"radio-option",children:[(0,x.jsx)("input",{type:"radio",name:"theme",value:"dark",checked:"dark"===o.theme,onChange:e=>v("theme",e.target.value)}),(0,x.jsx)("span",{children:"\ud83c\udf19 Dark"})]}),(0,x.jsxs)("label",{className:"radio-option",children:[(0,x.jsx)("input",{type:"radio",name:"theme",value:"auto",checked:"auto"===o.theme,onChange:e=>v("theme",e.target.value)}),(0,x.jsx)("span",{children:"\ud83d\udd04 Auto"})]})]})]}),(0,x.jsx)("div",{className:"pref-group",children:(0,x.jsxs)("label",{className:"checkbox-label",children:[(0,x.jsx)("input",{type:"checkbox",checked:o.notifications,onChange:e=>v("notifications",e.target.checked)}),(0,x.jsx)("span",{children:"Enable Notifications"})]})})]}),"privacy"===f&&(0,x.jsxs)("div",{className:"privacy-tab",children:[(0,x.jsxs)("div",{className:"pref-group",children:[(0,x.jsx)("label",{children:"Profile Visibility"}),(0,x.jsxs)("select",{value:o.privacy,onChange:e=>v("privacy",e.target.value),children:[(0,x.jsx)("option",{value:"public",children:"\ud83c\udf10 Public"}),(0,x.jsx)("option",{value:"friends",children:"\ud83d\udc65 Friends Only"}),(0,x.jsx)("option",{value:"private",children:"\ud83d\udd12 Private"})]})]}),(0,x.jsxs)("div",{className:"privacy-info",children:[(0,x.jsx)("h4",{children:"Privacy Settings"}),(0,x.jsxs)("ul",{children:[(0,x.jsxs)("li",{children:[(0,x.jsx)("strong",{children:"Public:"})," Your profile is visible to everyone"]}),(0,x.jsxs)("li",{children:[(0,x.jsx)("strong",{children:"Friends Only:"})," Only your contacts can see your profile"]}),(0,x.jsxs)("li",{children:[(0,x.jsx)("strong",{children:"Private:"})," Your profile is hidden from others"]})]})]})]})]})]})}):null},N=t=>{let{isOpen:n,onClose:a,initialSection:s="general"}=t;const{user:r,updateUser:o}=k(),[l,c]=(0,e.useState)(s),[u,d]=(0,e.useState)({theme:"light",language:"en",timezone:"auto",notifications:{desktop:!0,sound:!0,vibration:!0,email:!1,newMessages:!0,mentions:!0,calls:!0},privacy:{profileVisibility:"friends",lastSeen:!0,readReceipts:!0,typing:!0,blockedUsers:[]},chat:{fontSize:"medium",enterToSend:!0,autoDownload:!0,encryption:!0,backupEnabled:!0},media:{autoPlayVideos:!0,autoDownloadImages:!0,quality:"high",compression:"auto"}}),[h,m]=(0,e.useState)(!1);(0,e.useEffect)(()=>{n&&(()=>{try{const e=localStorage.getItem("quibish_settings");e&&d(t=>i(i({},t),JSON.parse(e))),r&&d(e=>i(i({},e),{},{theme:r.theme||e.theme,notifications:i(i({},e.notifications),r.notifications),privacy:i(i({},e.privacy),r.privacy)}))}catch(e){console.error("Error loading settings:",e)}})()},[n,r]);const p=(e,t,n)=>{d(a=>i(i({},a),{},{[e]:"object"!==typeof a[e]||Array.isArray(a[e])?n:i(i({},a[e]),{},{[t]:n})}))};return n?(0,x.jsx)("div",{className:"settings-modal-overlay",onClick:e=>e.target===e.currentTarget&&a(),children:(0,x.jsxs)("div",{className:"settings-modal",children:[(0,x.jsxs)("div",{className:"settings-header",children:[(0,x.jsx)("h2",{children:"Settings"}),(0,x.jsx)("button",{className:"close-btn",onClick:a,children:"\xd7"})]}),(0,x.jsxs)("div",{className:"settings-content",children:[(0,x.jsx)("div",{className:"settings-nav",children:[{id:"general",name:"General",icon:"\u2699\ufe0f"},{id:"notifications",name:"Notifications",icon:"\ud83d\udd14"},{id:"privacy",name:"Privacy",icon:"\ud83d\udd12"},{id:"chat",name:"Chat",icon:"\ud83d\udcac"},{id:"media",name:"Media",icon:"\ud83d\udcf1"},{id:"account",name:"Account",icon:"\ud83d\udc64"}].map(e=>(0,x.jsxs)("button",{className:"nav-item ".concat(l===e.id?"active":""),onClick:()=>c(e.id),children:[(0,x.jsx)("span",{className:"nav-icon",children:e.icon}),(0,x.jsx)("span",{className:"nav-text",children:e.name})]},e.id))}),(0,x.jsxs)("div",{className:"settings-panel",children:["general"===l&&(0,x.jsxs)("div",{className:"settings-section",children:[(0,x.jsx)("h3",{children:"General Settings"}),(0,x.jsxs)("div",{className:"setting-group",children:[(0,x.jsx)("label",{children:"Theme"}),(0,x.jsxs)("select",{value:u.theme,onChange:e=>p("theme",null,e.target.value),children:[(0,x.jsx)("option",{value:"light",children:"Light"}),(0,x.jsx)("option",{value:"dark",children:"Dark"}),(0,x.jsx)("option",{value:"auto",children:"Auto (System)"})]})]}),(0,x.jsxs)("div",{className:"setting-group",children:[(0,x.jsx)("label",{children:"Language"}),(0,x.jsxs)("select",{value:u.language,onChange:e=>p("language",null,e.target.value),children:[(0,x.jsx)("option",{value:"en",children:"English"}),(0,x.jsx)("option",{value:"es",children:"Espa\xf1ol"}),(0,x.jsx)("option",{value:"fr",children:"Fran\xe7ais"}),(0,x.jsx)("option",{value:"de",children:"Deutsch"})]})]}),(0,x.jsxs)("div",{className:"setting-group",children:[(0,x.jsx)("label",{children:"Timezone"}),(0,x.jsxs)("select",{value:u.timezone,onChange:e=>p("timezone",null,e.target.value),children:[(0,x.jsx)("option",{value:"auto",children:"Auto-detect"}),(0,x.jsx)("option",{value:"UTC",children:"UTC"}),(0,x.jsx)("option",{value:"America/New_York",children:"Eastern Time"}),(0,x.jsx)("option",{value:"America/Los_Angeles",children:"Pacific Time"})]})]})]}),"notifications"===l&&(0,x.jsxs)("div",{className:"settings-section",children:[(0,x.jsx)("h3",{children:"Notification Settings"}),(0,x.jsx)("div",{className:"setting-group",children:(0,x.jsxs)("label",{className:"toggle-label",children:[(0,x.jsx)("input",{type:"checkbox",checked:u.notifications.desktop,onChange:e=>p("notifications","desktop",e.target.checked)}),(0,x.jsx)("span",{className:"toggle-slider"}),"Desktop Notifications"]})}),(0,x.jsx)("div",{className:"setting-group",children:(0,x.jsxs)("label",{className:"toggle-label",children:[(0,x.jsx)("input",{type:"checkbox",checked:u.notifications.sound,onChange:e=>p("notifications","sound",e.target.checked)}),(0,x.jsx)("span",{className:"toggle-slider"}),"Sound Notifications"]})}),(0,x.jsx)("div",{className:"setting-group",children:(0,x.jsxs)("label",{className:"toggle-label",children:[(0,x.jsx)("input",{type:"checkbox",checked:u.notifications.newMessages,onChange:e=>p("notifications","newMessages",e.target.checked)}),(0,x.jsx)("span",{className:"toggle-slider"}),"New Messages"]})}),(0,x.jsx)("div",{className:"setting-group",children:(0,x.jsxs)("label",{className:"toggle-label",children:[(0,x.jsx)("input",{type:"checkbox",checked:u.notifications.mentions,onChange:e=>p("notifications","mentions",e.target.checked)}),(0,x.jsx)("span",{className:"toggle-slider"}),"Mentions & Replies"]})})]}),"privacy"===l&&(0,x.jsxs)("div",{className:"settings-section",children:[(0,x.jsx)("h3",{children:"Privacy Settings"}),(0,x.jsxs)("div",{className:"setting-group",children:[(0,x.jsx)("label",{children:"Profile Visibility"}),(0,x.jsxs)("select",{value:u.privacy.profileVisibility,onChange:e=>p("privacy","profileVisibility",e.target.value),children:[(0,x.jsx)("option",{value:"public",children:"Public"}),(0,x.jsx)("option",{value:"friends",children:"Friends Only"}),(0,x.jsx)("option",{value:"private",children:"Private"})]})]}),(0,x.jsx)("div",{className:"setting-group",children:(0,x.jsxs)("label",{className:"toggle-label",children:[(0,x.jsx)("input",{type:"checkbox",checked:u.privacy.lastSeen,onChange:e=>p("privacy","lastSeen",e.target.checked)}),(0,x.jsx)("span",{className:"toggle-slider"}),"Show Last Seen"]})}),(0,x.jsx)("div",{className:"setting-group",children:(0,x.jsxs)("label",{className:"toggle-label",children:[(0,x.jsx)("input",{type:"checkbox",checked:u.privacy.readReceipts,onChange:e=>p("privacy","readReceipts",e.target.checked)}),(0,x.jsx)("span",{className:"toggle-slider"}),"Read Receipts"]})})]}),"chat"===l&&(0,x.jsxs)("div",{className:"settings-section",children:[(0,x.jsx)("h3",{children:"Chat Settings"}),(0,x.jsxs)("div",{className:"setting-group",children:[(0,x.jsx)("label",{children:"Font Size"}),(0,x.jsxs)("select",{value:u.chat.fontSize,onChange:e=>p("chat","fontSize",e.target.value),children:[(0,x.jsx)("option",{value:"small",children:"Small"}),(0,x.jsx)("option",{value:"medium",children:"Medium"}),(0,x.jsx)("option",{value:"large",children:"Large"}),(0,x.jsx)("option",{value:"extra-large",children:"Extra Large"})]})]}),(0,x.jsx)("div",{className:"setting-group",children:(0,x.jsxs)("label",{className:"toggle-label",children:[(0,x.jsx)("input",{type:"checkbox",checked:u.chat.enterToSend,onChange:e=>p("chat","enterToSend",e.target.checked)}),(0,x.jsx)("span",{className:"toggle-slider"}),"Enter to Send Messages"]})}),(0,x.jsx)("div",{className:"setting-group",children:(0,x.jsxs)("label",{className:"toggle-label",children:[(0,x.jsx)("input",{type:"checkbox",checked:u.chat.encryption,onChange:e=>p("chat","encryption",e.target.checked)}),(0,x.jsx)("span",{className:"toggle-slider"}),"End-to-End Encryption"]})})]}),"media"===l&&(0,x.jsxs)("div",{className:"settings-section",children:[(0,x.jsx)("h3",{children:"Media Settings"}),(0,x.jsx)("div",{className:"setting-group",children:(0,x.jsxs)("label",{className:"toggle-label",children:[(0,x.jsx)("input",{type:"checkbox",checked:u.media.autoPlayVideos,onChange:e=>p("media","autoPlayVideos",e.target.checked)}),(0,x.jsx)("span",{className:"toggle-slider"}),"Auto-play Videos"]})}),(0,x.jsx)("div",{className:"setting-group",children:(0,x.jsxs)("label",{className:"toggle-label",children:[(0,x.jsx)("input",{type:"checkbox",checked:u.media.autoDownloadImages,onChange:e=>p("media","autoDownloadImages",e.target.checked)}),(0,x.jsx)("span",{className:"toggle-slider"}),"Auto-download Images"]})}),(0,x.jsxs)("div",{className:"setting-group",children:[(0,x.jsx)("label",{children:"Media Quality"}),(0,x.jsxs)("select",{value:u.media.quality,onChange:e=>p("media","quality",e.target.value),children:[(0,x.jsx)("option",{value:"low",children:"Low"}),(0,x.jsx)("option",{value:"medium",children:"Medium"}),(0,x.jsx)("option",{value:"high",children:"High"}),(0,x.jsx)("option",{value:"original",children:"Original"})]})]})]}),"account"===l&&(0,x.jsxs)("div",{className:"settings-section",children:[(0,x.jsx)("h3",{children:"Account Settings"}),(0,x.jsxs)("div",{className:"setting-group",children:[(0,x.jsx)("label",{children:"Account Information"}),(0,x.jsxs)("div",{className:"account-info",children:[(0,x.jsxs)("p",{children:[(0,x.jsx)("strong",{children:"Name:"})," ",(null===r||void 0===r?void 0:r.name)||"Demo User"]}),(0,x.jsxs)("p",{children:[(0,x.jsx)("strong",{children:"Email:"})," ",(null===r||void 0===r?void 0:r.email)||"demo@quibish.com"]}),(0,x.jsxs)("p",{children:[(0,x.jsx)("strong",{children:"Status:"})," ",(null===r||void 0===r?void 0:r.status)||"Online"]})]})]}),(0,x.jsx)("div",{className:"setting-group",children:(0,x.jsx)("button",{className:"danger-btn",onClick:()=>{confirm("Are you sure you want to reset all settings to defaults?")&&(localStorage.removeItem("quibish_settings"),window.location.reload())},children:"Reset All Settings"})})]})]})]}),(0,x.jsxs)("div",{className:"settings-footer",children:[(0,x.jsx)("button",{className:"btn-secondary",onClick:a,children:"Cancel"}),(0,x.jsx)("button",{className:"btn-primary",onClick:async()=>{m(!0);try{localStorage.setItem("quibish_settings",JSON.stringify(u)),o&&r&&o(i(i({},r),{},{theme:u.theme,notifications:u.notifications,privacy:u.privacy})),document.documentElement.setAttribute("data-theme",u.theme),console.log("Settings saved successfully"),alert("Settings saved successfully!")}catch(e){console.error("Error saving settings:",e),alert("Failed to save settings. Please try again.")}finally{m(!1)}},disabled:h,children:h?"Saving...":"Save Settings"})]})]})}):null},C=t=>{let{isOpen:n,onClose:a,onGifSelect:s}=t;const[r,o]=(0,e.useState)(""),[i,l]=(0,e.useState)([]),[c,u]=(0,e.useState)(!1),[d,h]=(0,e.useState)([]),m=[{id:"1",url:"https://media.giphy.com/media/3oKIPnAiaMCws8nOsE/giphy.gif",name:"Happy Dance",title:"Happy",size:1024e3,width:480,height:270},{id:"2",url:"https://media.giphy.com/media/l0MYrLAFex1R71l0A/giphy.gif",name:"Funny Cat",title:"Funny",size:856e3,width:480,height:360},{id:"3",url:"https://media.giphy.com/media/3o7TKTDn976rzVgky4/giphy.gif",name:"Excited Jump",title:"Excited",size:975e3,width:400,height:300},{id:"4",url:"https://media.giphy.com/media/l1J9u3TZfpmeDLkD6/giphy.gif",name:"Thumbs Up",title:"Approval",size:642e3,width:480,height:480},{id:"5",url:"https://media.giphy.com/media/3o7aD2saalBwwftBIY/giphy.gif",name:"Party Time",title:"Celebration",size:12e5,width:500,height:375},{id:"6",url:"https://media.giphy.com/media/26AHPxxnSw1L9T1rW/giphy.gif",name:"Mind Blown",title:"Surprised",size:89e4,width:480,height:270},{id:"7",url:"https://media.giphy.com/media/l3vR85PnGsBwu1PFK/giphy.gif",name:"Love Hearts",title:"Love",size:756e3,width:480,height:360},{id:"8",url:"https://media.giphy.com/media/3o6Zt0hNCfak3QCqsw/giphy.gif",name:"Crying Sad",title:"Sad",size:623e3,width:400,height:400}];(0,e.useEffect)(()=>{n&&(h(m),l(m))},[n]);const p=(0,e.useCallback)(async e=>{if(e.trim()){u(!0);try{const t=m.filter(t=>t.title.toLowerCase().includes(e.toLowerCase())||t.name.toLowerCase().includes(e.toLowerCase()));0===t.length?l(d.slice(0,3)):l(t)}catch(t){console.error("GIF search failed:",t),l(d.slice(0,3))}u(!1)}else l(d)},[d,m]);(0,e.useEffect)(()=>{const e=e=>{"Escape"===e.key&&a()};return n&&(document.addEventListener("keydown",e),setTimeout(()=>{const e=document.querySelector(".gif-search-input");e&&e.focus()},100)),()=>{document.removeEventListener("keydown",e)}},[n,a]);const f=e=>{console.log("GIF selected:",e),s(e),a()};return n?(0,x.jsx)("div",{className:"gif-picker-overlay",onClick:e=>{e.target===e.currentTarget&&a()},children:(0,x.jsxs)("div",{className:"gif-picker-modal",children:[(0,x.jsxs)("div",{className:"gif-picker-header",children:[(0,x.jsx)("h3",{children:"Choose a GIF"}),(0,x.jsx)("button",{className:"close-btn",onClick:a,children:"\xd7"})]}),(0,x.jsx)("div",{className:"gif-search",children:(0,x.jsx)("input",{type:"text",placeholder:"Search for GIFs...",value:r,onChange:e=>{const t=e.target.value;o(t),window.gifSearchTimeout&&clearTimeout(window.gifSearchTimeout),window.gifSearchTimeout=setTimeout(()=>{p(t)},300)},className:"gif-search-input"})}),(0,x.jsx)("div",{className:"gif-grid",children:c?(0,x.jsxs)("div",{className:"gif-loading",children:[(0,x.jsx)("div",{className:"loading-spinner"}),(0,x.jsx)("p",{children:"Loading GIFs..."}),(0,x.jsx)("span",{children:"Finding the perfect reaction"})]}):i.length>0?i.map(e=>(0,x.jsxs)("div",{className:"gif-item",onClick:()=>f(e),role:"button",tabIndex:0,"aria-label":"Select ".concat(e.name||e.title," GIF"),onKeyDown:t=>{"Enter"!==t.key&&" "!==t.key||(t.preventDefault(),f(e))},children:[(0,x.jsx)("img",{src:e.url,alt:e.name||e.title,loading:"lazy",onError:e=>{e.target.style.display="none",e.target.parentElement.style.background="#f0f0f0",e.target.parentElement.innerHTML+='<div style="display:flex;align-items:center;justify-content:center;height:100%;color:#999;font-size:12px;">Failed to load</div>'}}),(0,x.jsx)("div",{className:"gif-overlay",children:(0,x.jsx)("span",{children:e.name||e.title})})]},e.id)):(0,x.jsxs)("div",{className:"no-results",children:[(0,x.jsx)("p",{children:"No GIFs found"}),(0,x.jsx)("span",{children:"Try searching for something else"}),(0,x.jsx)("button",{className:"reset-search-btn",onClick:()=>{o(""),l(d)},children:"Show Trending"})]})}),!r&&(0,x.jsxs)("div",{className:"gif-categories",children:[(0,x.jsx)("h4",{children:"Popular Categories"}),(0,x.jsx)("div",{className:"category-buttons",children:["Happy","Funny","Love","Sad","Excited","Surprised","Celebration","Approval"].map(e=>(0,x.jsx)("button",{className:"category-btn",onClick:()=>{o(e),p(e)},children:e},e))})]})]})}):null};const E=new class{constructor(){this.contacts=[],this.contactGroups=[],this.storageKey="quibish_contacts",this.groupStorageKey="quibish_contact_groups"}initialize(){return this.loadContactsFromStorage(),this.loadGroupsFromStorage(),{success:!0,contactCount:this.contacts.length,groupCount:this.contactGroups.length}}async getContacts(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{search:t,group:n,limit:a=100,offset:s=0}=e;try{const e=await fetch("/api/contacts?limit=".concat(a,"&offset=").concat(s).concat(t?"&search=".concat(encodeURIComponent(t)):"").concat(n?"&group=".concat(encodeURIComponent(n)):""),{headers:{Authorization:"Bearer ".concat(await l.getTokenForRequest())}});if(e.ok){const t=await e.json();if(t.success)return this.contacts=t.contacts,this.saveContactsToStorage(),this.contacts}}catch(r){console.warn("API unavailable, using local contacts:",r)}return this.filterContacts(this.contacts,{search:t,group:n})}filterContacts(e,t){let{search:n,group:a}=t,s=[...e];if(n){const e=n.toLowerCase();s=s.filter(t=>{var a,s,r;return(null===(a=t.name)||void 0===a?void 0:a.toLowerCase().includes(e))||(null===(s=t.email)||void 0===s?void 0:s.toLowerCase().includes(e))||(null===(r=t.phone)||void 0===r?void 0:r.includes(n))})}return a&&(s=s.filter(e=>{var t;return null===(t=e.groups)||void 0===t?void 0:t.includes(a)})),s.sort((e,t)=>e.name.localeCompare(t.name))}async addContact(e){try{const n=i({id:Date.now().toString(),createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()},e),a=this.validateContact(n);if(!a.valid)return{success:!1,errors:a.errors};try{const e=await fetch("/api/contacts",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(await l.getTokenForRequest())},body:JSON.stringify(n)});if(!e.ok){const t=await e.json();return{success:!1,errors:t.errors||[t.error||"Unknown error"]}}{const t=await e.json();if(t.success)return this.contacts.push(t.contact),this.saveContactsToStorage(),{success:!0,contact:t.contact}}}catch(t){console.warn("API unavailable, saving locally:",t)}return this.contacts.push(n),this.saveContactsToStorage(),{success:!0,contact:n,offline:!0}}catch(n){return console.error("Failed to add contact:",n),{success:!1,error:n.message}}}async updateContact(e,t){try{const a=this.contacts.findIndex(t=>t.id===e);if(-1===a)return{success:!1,error:"Contact not found"};const s=i(i(i({},this.contacts[a]),t),{},{updatedAt:(new Date).toISOString()}),r=this.validateContact(s);if(!r.valid)return{success:!1,errors:r.errors};try{const t=await fetch("/api/contacts/".concat(e),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(await l.getTokenForRequest())},body:JSON.stringify(s)});if(!t.ok){const e=await t.json();return{success:!1,errors:e.errors||[e.error||"Unknown error"]}}{const e=await t.json();if(e.success)return this.contacts[a]=e.contact,this.saveContactsToStorage(),{success:!0,contact:e.contact}}}catch(n){console.warn("API unavailable, updating locally:",n)}return this.contacts[a]=s,this.saveContactsToStorage(),{success:!0,contact:s,offline:!0}}catch(a){return console.error("Failed to update contact:",a),{success:!1,error:a.message}}}async deleteContact(e){try{const n=this.contacts.findIndex(t=>t.id===e);if(-1===n)return{success:!1,error:"Contact not found"};try{const t=await fetch("/api/contacts/".concat(e),{method:"DELETE",headers:{Authorization:"Bearer ".concat(await l.getTokenForRequest())}});if(!t.ok){return{success:!1,error:(await t.json()).error||"Unknown error"}}if((await t.json()).success)return this.contacts.splice(n,1),this.saveContactsToStorage(),{success:!0}}catch(t){console.warn("API unavailable, deleting locally:",t)}return this.contacts.splice(n,1),this.saveContactsToStorage(),{success:!0,offline:!0}}catch(n){return console.error("Failed to delete contact:",n),{success:!1,error:n.message}}}validateContact(e){const t=[];return(!e.name||e.name.trim().length<1)&&t.push("Name is required"),e.email&&!this.isValidEmail(e.email)&&t.push("Invalid email format"),e.phone&&!this.isValidPhone(e.phone)&&t.push("Invalid phone format"),e.name&&e.name.length>100&&t.push("Name must be less than 100 characters"),{valid:0===t.length,errors:t}}isValidEmail(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}isValidPhone(e){return/^[+]?[1-9][\d]{0,15}$/.test(e.replace(/[\s\-()]/g,""))}createGroup(e){const t=i({id:Date.now().toString(),createdAt:(new Date).toISOString()},e);return this.contactGroups.push(t),this.saveGroupsToStorage(),{success:!0,group:t}}getGroups(){return this.contactGroups}addContactToGroup(e,t){const n=this.contacts.find(t=>t.id===e);return n?(n.groups||(n.groups=[]),n.groups.includes(t)||(n.groups.push(t),this.saveContactsToStorage()),{success:!0}):{success:!1,error:"Contact not found"}}removeContactFromGroup(e,t){const n=this.contacts.find(t=>t.id===e);return n&&n.groups?(n.groups=n.groups.filter(e=>e!==t),this.saveContactsToStorage(),{success:!0}):{success:!1,error:"Contact or group not found"}}async importFromDevice(){if(!("contacts"in navigator)||!("ContactsManager"in window))return{success:!1,error:"Contact API not supported"};try{const a=["name","email","tel"],s={multiple:!0},r=await navigator.contacts.select(a,s),o=[];for(const i of r){var e,t,n;const a={name:(null===(e=i.name)||void 0===e?void 0:e[0])||"Unknown",email:null===(t=i.email)||void 0===t?void 0:t[0],phone:null===(n=i.tel)||void 0===n?void 0:n[0]},s=await this.addContact(a);s.success&&o.push(s.contact)}return{success:!0,imported:o.length,contacts:o}}catch(a){return{success:!1,error:a.message}}}exportContacts(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"json";try{let t,n,a;if("csv"===e)t=this.contactsToCSV(),n="contacts.csv",a="text/csv";else t=JSON.stringify(this.contacts,null,2),n="contacts.json",a="application/json";const s=new Blob([t],{type:a}),r=URL.createObjectURL(s),o=document.createElement("a");return o.href=r,o.download=n,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(r),{success:!0}}catch(t){return console.error("Failed to export contacts:",t),{success:!1,error:t.message}}}contactsToCSV(){return[["Name","Email","Phone","Created At"],...this.contacts.map(e=>[e.name||"",e.email||"",e.phone||"",e.createdAt||""])].map(e=>e.map(e=>'"'.concat(e,'"')).join(",")).join("\n")}saveContactsToStorage(){try{localStorage.setItem(this.storageKey,JSON.stringify(this.contacts))}catch(e){console.error("Failed to save contacts to storage:",e)}}loadContactsFromStorage(){try{const e=localStorage.getItem(this.storageKey);e&&(this.contacts=JSON.parse(e))}catch(e){console.error("Failed to load contacts from storage:",e),this.contacts=[]}}saveGroupsToStorage(){try{localStorage.setItem(this.groupStorageKey,JSON.stringify(this.contactGroups))}catch(e){console.error("Failed to save groups to storage:",e)}}loadGroupsFromStorage(){try{const e=localStorage.getItem(this.groupStorageKey);e&&(this.contactGroups=JSON.parse(e))}catch(e){console.error("Failed to load groups from storage:",e),this.contactGroups=[]}}getStatistics(){const e=this.contacts.length,t=this.contacts.filter(e=>e.email).length,n=this.contacts.filter(e=>e.phone).length;return{total:e,withEmail:t,withPhone:n,groups:this.contactGroups.length,emailPercentage:e>0?Math.round(t/e*100):0,phonePercentage:e>0?Math.round(n/e*100):0}}},T=t=>{let{isOpen:n,onClose:a,onCreateChat:s}=t;const[r,o]=(0,e.useState)("direct"),[i,l]=(0,e.useState)([]),[c,u]=(0,e.useState)(""),[d,h]=(0,e.useState)(""),[m,p]=(0,e.useState)([]),[f,g]=(0,e.useState)(!1);(0,e.useEffect)(()=>{n&&v()},[n]);const v=async()=>{g(!0);try{const e=await E.getContacts({search:d});p(e)}catch(e){console.error("Failed to load contacts:",e),p([])}g(!1)},y=e=>{l("direct"===r?[e]:t=>t.find(t=>t.id===e.id)?t.filter(t=>t.id!==e.id):[...t,e])},b=()=>{o("direct"),l([]),u(""),h(""),a()};return n?(0,x.jsx)("div",{className:"new-chat-overlay",onClick:e=>{e.target===e.currentTarget&&b()},children:(0,x.jsxs)("div",{className:"new-chat-modal",children:[(0,x.jsxs)("div",{className:"new-chat-header",children:[(0,x.jsx)("h3",{children:"Start New Chat"}),(0,x.jsx)("button",{className:"close-btn",onClick:b,children:"\xd7"})]}),(0,x.jsx)("div",{className:"chat-type-selector",children:(0,x.jsxs)("div",{className:"chat-type-tabs",children:[(0,x.jsx)("button",{className:"tab ".concat("direct"===r?"active":""),onClick:()=>o("direct"),children:"Direct Message"}),(0,x.jsx)("button",{className:"tab ".concat("group"===r?"active":""),onClick:()=>o("group"),children:"Group Chat"})]})}),"group"===r&&(0,x.jsx)("div",{className:"group-settings",children:(0,x.jsx)("input",{type:"text",placeholder:"Enter group name...",value:c,onChange:e=>u(e.target.value),className:"group-name-input"})}),(0,x.jsx)("div",{className:"contact-search",children:(0,x.jsx)("input",{type:"text",placeholder:"Search contacts...",value:d,onChange:e=>{h(e.target.value),setTimeout(()=>v(),300)},className:"contact-search-input"})}),(0,x.jsx)("div",{className:"selected-contacts",children:i.length>0&&(0,x.jsxs)("div",{className:"selected-list",children:[(0,x.jsxs)("h4",{children:["Selected (",i.length,"):"]}),(0,x.jsx)("div",{className:"selected-items",children:i.map(e=>(0,x.jsxs)("div",{className:"selected-contact",children:[(0,x.jsx)("span",{children:e.name}),(0,x.jsx)("button",{onClick:()=>y(e),className:"remove-btn",children:"\xd7"})]},e.id))})]})}),(0,x.jsx)("div",{className:"contact-list",children:f?(0,x.jsxs)("div",{className:"loading-state",children:[(0,x.jsx)("div",{className:"loading-spinner"}),(0,x.jsx)("p",{children:"Loading contacts..."})]}):m.length>0?(0,x.jsx)("div",{className:"contacts",children:m.map(e=>{const t=i.find(t=>t.id===e.id);return(0,x.jsxs)("div",{className:"contact-item ".concat(t?"selected":""),onClick:()=>y(e),children:[(0,x.jsx)("div",{className:"contact-avatar",children:e.avatar?(0,x.jsx)("img",{src:e.avatar,alt:e.name}):(0,x.jsx)("div",{className:"avatar-placeholder",children:e.name.charAt(0).toUpperCase()})}),(0,x.jsxs)("div",{className:"contact-info",children:[(0,x.jsx)("h4",{children:e.name}),e.email&&(0,x.jsx)("p",{className:"contact-email",children:e.email}),e.phone&&(0,x.jsx)("p",{className:"contact-phone",children:e.phone})]}),(0,x.jsx)("div",{className:"contact-actions",children:t?(0,x.jsx)("div",{className:"selected-indicator",children:"\u2713"}):(0,x.jsx)("div",{className:"select-indicator",children:"+"})})]},e.id)})}):(0,x.jsxs)("div",{className:"no-contacts",children:[(0,x.jsx)("p",{children:"No contacts found"}),(0,x.jsx)("span",{children:"Try adjusting your search or add some contacts first"})]})}),(0,x.jsxs)("div",{className:"new-chat-footer",children:[(0,x.jsx)("button",{className:"cancel-btn",onClick:b,children:"Cancel"}),(0,x.jsx)("button",{className:"create-btn",onClick:()=>{if(0===i.length)return void alert("Please select at least one contact");if("group"===r&&!c.trim())return void alert("Please enter a group name");const e={type:r,participants:i,name:"group"===r?c:null,createdAt:(new Date).toISOString()};s(e),b()},disabled:0===i.length,children:"direct"===r?"Start Chat":"Create Group"})]})]})}):null};const A=new class{constructor(){this.feedbackHistory=[],this.feedbackCategories=["bug_report","feature_request","improvement","ui_ux","performance","general"],this.apiEndpoint="/api/feedback"}async submitFeedback(e){try{const n=i(i({id:Date.now().toString(),timestamp:(new Date).toISOString()},e),{},{status:"submitted"}),a=this.validateFeedback(n);if(!a.valid)return{success:!1,errors:a.errors};try{const e=await fetch(this.apiEndpoint,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(e.ok){const t=await e.json();return this.feedbackHistory.push(n),{success:!0,feedbackId:t.id||n.id,message:"Feedback submitted successfully"}}}catch(t){console.warn("API submission failed, storing locally:",t)}return this.feedbackHistory.push(n),this.saveFeedbackToStorage(),{success:!0,feedbackId:n.id,message:"Feedback saved locally",offline:!0}}catch(n){return console.error("Feedback submission failed:",n),{success:!1,error:n.message}}}getFeedback(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{category:t,status:n,limit:a=50}=e;let s=[...this.feedbackHistory];return t&&(s=s.filter(e=>e.category===t)),n&&(s=s.filter(e=>e.status===n)),s.sort((e,t)=>new Date(t.timestamp)-new Date(e.timestamp)),s.slice(0,a)}validateFeedback(e){const t=[];return(!e.title||e.title.trim().length<3)&&t.push("Title must be at least 3 characters long"),(!e.description||e.description.trim().length<10)&&t.push("Description must be at least 10 characters long"),e.category&&this.feedbackCategories.includes(e.category)||t.push("Invalid category selected"),e.title&&e.title.length>200&&t.push("Title must be less than 200 characters"),e.description&&e.description.length>2e3&&t.push("Description must be less than 2000 characters"),{valid:0===t.length,errors:t}}saveFeedbackToStorage(){try{localStorage.setItem("quibish_feedback",JSON.stringify(this.feedbackHistory))}catch(e){console.error("Failed to save feedback to storage:",e)}}loadFeedbackFromStorage(){try{const e=localStorage.getItem("quibish_feedback");e&&(this.feedbackHistory=JSON.parse(e))}catch(e){console.error("Failed to load feedback from storage:",e),this.feedbackHistory=[]}}getCategories(){return this.feedbackCategories.map(e=>({id:e,name:this.formatCategoryName(e),description:this.getCategoryDescription(e)}))}formatCategoryName(e){return e.split("_").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ")}getCategoryDescription(e){return{bug_report:"Report bugs, errors, or unexpected behavior",feature_request:"Suggest new features or functionality",improvement:"Suggest improvements to existing features",ui_ux:"Feedback about user interface and user experience",performance:"Report performance issues or slow loading",general:"General feedback and suggestions"}[e]||"General feedback"}async updateFeedbackStatus(e,t){try{const a=this.feedbackHistory.find(t=>t.id===e);if(!a)return{success:!1,error:"Feedback not found"};a.status=t,a.lastUpdated=(new Date).toISOString();try{if((await fetch("".concat(this.apiEndpoint,"/").concat(e),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:t})})).ok)return this.saveFeedbackToStorage(),{success:!0}}catch(n){console.warn("Failed to update feedback on server:",n)}return this.saveFeedbackToStorage(),{success:!0,offline:!0}}catch(a){return console.error("Failed to update feedback status:",a),{success:!1,error:a.message}}}deleteFeedback(e){try{const t=this.feedbackHistory.findIndex(t=>t.id===e);return-1===t?{success:!1,error:"Feedback not found"}:(this.feedbackHistory.splice(t,1),this.saveFeedbackToStorage(),{success:!0})}catch(t){return console.error("Failed to delete feedback:",t),{success:!1,error:t.message}}}getStatistics(){const e=this.feedbackHistory.length,t={},n={};return this.feedbackCategories.forEach(e=>{t[e]=0}),this.feedbackHistory.forEach(e=>{t.hasOwnProperty(e.category)&&t[e.category]++,n[e.status]?n[e.status]++:n[e.status]=1}),{total:e,byCategory:t,byStatus:n,averagePerDay:this.calculateAveragePerDay()}}calculateAveragePerDay(){if(0===this.feedbackHistory.length)return 0;const e=this.feedbackHistory.map(e=>new Date(e.timestamp).toDateString()),t=[...new Set(e)];return this.feedbackHistory.length/t.length}initialize(){return this.loadFeedbackFromStorage(),{success:!0,feedbackCount:this.feedbackHistory.length,categories:this.getCategories()}}},_=t=>{let{isOpen:n,onClose:a}=t;const[s,r]=(0,e.useState)({title:"",description:"",category:"general",priority:"medium",email:""}),[o,l]=(0,e.useState)(!1),[c,u]=(0,e.useState)(!1),[d,h]=(0,e.useState)([]),m=A.getCategories(),p=e=>{const{name:t,value:n}=e.target;r(e=>i(i({},e),{},{[t]:n})),d.length>0&&h([])},f=()=>{r({title:"",description:"",category:"general",priority:"medium",email:""}),h([]),u(!1),a()};return n?(0,x.jsx)("div",{className:"feedback-overlay",onClick:e=>{e.target===e.currentTarget&&f()},children:(0,x.jsxs)("div",{className:"feedback-modal",children:[(0,x.jsxs)("div",{className:"feedback-header",children:[(0,x.jsx)("h3",{children:"Send Feedback"}),(0,x.jsx)("button",{className:"close-btn",onClick:f,children:"\xd7"})]}),c?(0,x.jsxs)("div",{className:"success-message",children:[(0,x.jsx)("div",{className:"success-icon",children:"\u2713"}),(0,x.jsx)("h4",{children:"Thank you for your feedback!"}),(0,x.jsx)("p",{children:"We appreciate your input and will review it carefully."})]}):(0,x.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),l(!0),h([]);try{const e=await A.submitFeedback(s);e.success?(u(!0),r({title:"",description:"",category:"general",priority:"medium",email:""}),setTimeout(()=>{f()},2e3)):h(e.errors||["Failed to submit feedback"])}catch(t){h(["An unexpected error occurred. Please try again."])}l(!1)},className:"feedback-form",children:[d.length>0&&(0,x.jsx)("div",{className:"error-messages",children:d.map((e,t)=>(0,x.jsx)("div",{className:"error-message",children:e},t))}),(0,x.jsxs)("div",{className:"form-group",children:[(0,x.jsx)("label",{htmlFor:"title",children:"Subject *"}),(0,x.jsx)("input",{type:"text",id:"title",name:"title",value:s.title,onChange:p,placeholder:"Brief description of your feedback...",required:!0,maxLength:200}),(0,x.jsxs)("span",{className:"char-count",children:[s.title.length,"/200"]})]}),(0,x.jsxs)("div",{className:"form-group",children:[(0,x.jsx)("label",{htmlFor:"category",children:"Category *"}),(0,x.jsx)("select",{id:"category",name:"category",value:s.category,onChange:p,required:!0,children:m.map(e=>(0,x.jsx)("option",{value:e.id,children:e.name},e.id))})]}),(0,x.jsxs)("div",{className:"form-group",children:[(0,x.jsx)("label",{htmlFor:"priority",children:"Priority"}),(0,x.jsxs)("select",{id:"priority",name:"priority",value:s.priority,onChange:p,children:[(0,x.jsx)("option",{value:"low",children:"Low"}),(0,x.jsx)("option",{value:"medium",children:"Medium"}),(0,x.jsx)("option",{value:"high",children:"High"}),(0,x.jsx)("option",{value:"urgent",children:"Urgent"})]})]}),(0,x.jsxs)("div",{className:"form-group",children:[(0,x.jsx)("label",{htmlFor:"description",children:"Description *"}),(0,x.jsx)("textarea",{id:"description",name:"description",value:s.description,onChange:p,placeholder:"Please provide detailed feedback...",required:!0,rows:5,maxLength:2e3}),(0,x.jsxs)("span",{className:"char-count",children:[s.description.length,"/2000"]})]}),(0,x.jsxs)("div",{className:"form-group",children:[(0,x.jsx)("label",{htmlFor:"email",children:"Email (optional)"}),(0,x.jsx)("input",{type:"email",id:"email",name:"email",value:s.email,onChange:p,placeholder:"your.email@example.com"}),(0,x.jsx)("small",{children:"We'll only use this to follow up on your feedback if needed."})]}),(0,x.jsxs)("div",{className:"form-footer",children:[(0,x.jsx)("button",{type:"button",className:"cancel-btn",onClick:f,disabled:o,children:"Cancel"}),(0,x.jsx)("button",{type:"submit",className:"submit-btn",disabled:o||!s.title.trim()||!s.description.trim(),children:o?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("span",{className:"loading-spinner"}),"Sending..."]}):"Send Feedback"})]})]})]})}):null},I=t=>{let{isOpen:n,onClose:a}=t;const[s,r]=(0,e.useState)("getting-started"),[o,l]=(0,e.useState)(""),c={"getting-started":{title:"Getting Started",icon:"\ud83d\ude80",content:[{question:"How do I start a new chat?",answer:'Click the "New Chat" button in the sidebar or use the \u2795 icon in the header. You can start direct messages or create group chats with multiple contacts.'},{question:"How do I add contacts?",answer:'Go to the Contacts section and click "Add Contact". You can manually add contacts or import them from your device if supported.'},{question:"How do I send my first message?",answer:"Select a conversation from the sidebar, type your message in the input field at the bottom, and press Enter or click the send button."}]},messaging:{title:"Messaging Features",icon:"\ud83d\udcac",content:[{question:"How do I send files and images?",answer:"Click the attachment icon (\ud83d\udcce) next to the message input. You can send images, documents, videos, and other file types."},{question:"How do I add reactions to messages?",answer:"Hover over a message and click the reaction button, or long-press on mobile. Choose from available emoji reactions."},{question:"Can I edit or delete messages?",answer:"Yes! Click the three dots menu on any message to edit, delete, or perform other actions on your messages."},{question:"How do I search for messages?",answer:"Use the search icon in the header to search through your conversation history. You can search by text content or contact names."}]},"voice-video":{title:"Voice & Video Calls",icon:"\ud83d\udcde",content:[{question:"How do I start a voice call?",answer:"In any conversation, click the phone icon to start a voice call. Make sure you have microphone permissions enabled."},{question:"How do I start a video call?",answer:"Click the video camera icon in the conversation header. Ensure your camera and microphone permissions are granted."},{question:"Can I mute myself during a call?",answer:"Yes, use the mute button during any call to toggle your microphone on/off. Other participants will see a mute indicator."},{question:"How do voice calls work?",answer:"All voice and video calls use secure internet-based connections through WebRTC technology for the best quality and privacy."}]},settings:{title:"Settings & Customization",icon:"\u2699\ufe0f",content:[{question:"How do I change my profile picture?",answer:"Go to your user profile settings and click on your current avatar. Upload a new image to change your profile picture across all conversations."},{question:"Can I enable dark mode?",answer:"Yes! Look for the theme toggle in your settings or profile menu. Dark mode helps reduce eye strain in low-light environments."},{question:"How do I manage notifications?",answer:"Access notification settings through the main settings menu. You can customize notification sounds, frequency, and which events trigger notifications."},{question:"Is my data encrypted?",answer:"Yes, Quibish uses end-to-end encryption for your messages and calls to ensure your privacy and security."}]},troubleshooting:{title:"Troubleshooting",icon:"\ud83d\udd27",content:[{question:"Messages are not sending",answer:"Check your internet connection. If offline, messages will be saved and sent when you reconnect. Try refreshing the page if issues persist."},{question:"Voice/video calls not working",answer:"Ensure microphone and camera permissions are granted. Check your browser settings and try using a different browser if problems continue."},{question:"App is running slowly",answer:"Clear your browser cache, close other tabs, or restart your browser. Large conversation histories may impact performance."},{question:"I lost my conversation history",answer:"Conversation history is stored locally and on our servers. Try logging out and back in, or contact support if data appears to be missing."}]},privacy:{title:"Privacy & Security",icon:"\ud83d\udd12",content:[{question:"How is my data protected?",answer:"We use industry-standard encryption, secure servers, and follow best practices for data protection. Your conversations are private and secure."},{question:"Who can see my profile information?",answer:"Only your contacts can see your profile information. You control what information is shared and with whom."},{question:"Can I delete my account?",answer:"Yes, you can delete your account and all associated data through the account settings. This action is permanent and cannot be undone."},{question:"How do I report inappropriate content?",answer:"Use the report function on any message or contact. Our moderation team reviews all reports and takes appropriate action."}]}};if(!n)return null;const u=(()=>{if(!o.trim())return c[s].content;return Object.values(c).flatMap(e=>e.content.map(t=>i(i({},t),{},{section:e.title}))).filter(e=>e.question.toLowerCase().includes(o.toLowerCase())||e.answer.toLowerCase().includes(o.toLowerCase()))})();return(0,x.jsx)("div",{className:"help-overlay",onClick:e=>{e.target===e.currentTarget&&a()},children:(0,x.jsxs)("div",{className:"help-modal",children:[(0,x.jsxs)("div",{className:"help-header",children:[(0,x.jsx)("h3",{children:"Help & Support"}),(0,x.jsx)("button",{className:"close-btn",onClick:a,children:"\xd7"})]}),(0,x.jsx)("div",{className:"help-search",children:(0,x.jsx)("input",{type:"text",placeholder:"Search help topics...",value:o,onChange:e=>l(e.target.value),className:"help-search-input"})}),(0,x.jsxs)("div",{className:"help-content",children:[!o&&(0,x.jsx)("div",{className:"help-sidebar",children:(0,x.jsx)("nav",{className:"help-nav",children:Object.entries(c).map(e=>{let[t,n]=e;return(0,x.jsxs)("button",{className:"nav-item ".concat(s===t?"active":""),onClick:()=>r(t),children:[(0,x.jsx)("span",{className:"nav-icon",children:n.icon}),(0,x.jsx)("span",{className:"nav-title",children:n.title})]},t)})})}),(0,x.jsx)("div",{className:"help-main ".concat(o?"search-mode":""),children:o?(0,x.jsxs)("div",{className:"search-results",children:[(0,x.jsxs)("h4",{children:["Search Results (",u.length,")"]}),u.length>0?(0,x.jsx)("div",{className:"faq-list",children:u.map((e,t)=>(0,x.jsxs)("div",{className:"faq-item",children:[e.section&&(0,x.jsx)("div",{className:"faq-section",children:e.section}),(0,x.jsx)("h5",{className:"faq-question",children:e.question}),(0,x.jsx)("p",{className:"faq-answer",children:e.answer})]},t))}):(0,x.jsxs)("div",{className:"no-results",children:[(0,x.jsxs)("p",{children:['No results found for "',o,'"']}),(0,x.jsx)("span",{children:"Try different keywords or browse categories"})]})]}):(0,x.jsxs)("div",{className:"section-content",children:[(0,x.jsxs)("div",{className:"section-header",children:[(0,x.jsx)("span",{className:"section-icon",children:c[s].icon}),(0,x.jsx)("h4",{children:c[s].title})]}),(0,x.jsx)("div",{className:"faq-list",children:c[s].content.map((e,t)=>(0,x.jsxs)("div",{className:"faq-item",children:[(0,x.jsx)("h5",{className:"faq-question",children:e.question}),(0,x.jsx)("p",{className:"faq-answer",children:e.answer})]},t))})]})})]}),(0,x.jsx)("div",{className:"help-footer",children:(0,x.jsxs)("div",{className:"footer-content",children:[(0,x.jsx)("p",{children:"Still need help?"}),(0,x.jsxs)("div",{className:"footer-actions",children:[(0,x.jsx)("button",{className:"contact-support-btn",children:"\ud83d\udce7 Contact Support"}),(0,x.jsx)("button",{className:"feedback-btn",children:"\ud83d\udcdd Send Feedback"})]})]})})]})})},P=t=>{let{isOpen:n,onClose:a,onCapture:s,mode:r="photo"}=t;const[o,i]=(0,e.useState)(!1),[l,c]=(0,e.useState)(null),[u,d]=(0,e.useState)(null),[h,m]=(0,e.useState)(null),[p,f]=(0,e.useState)("user"),[g,v]=(0,e.useState)(!1),[y,b]=(0,e.useState)([]),[w,S]=(0,e.useState)("off"),k=(0,e.useRef)(null),j=(0,e.useRef)(null),N=(0,e.useRef)(null),C=(0,e.useRef)(null);(0,e.useEffect)(()=>(n?E():T(),()=>{T()}),[n,p]);const E=async()=>{i(!0),c(null);try{if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new Error("Camera access is not supported in this browser");const e={video:{facingMode:p,width:{ideal:1280},height:{ideal:720}},audio:"video"===r},t=await navigator.mediaDevices.getUserMedia(e);m(t),C.current=t,d(!0),k.current&&(k.current.srcObject=t,await k.current.play())}catch(e){console.error("Camera initialization error:",e),c(A(e)),d(!1)}finally{i(!1)}},T=()=>{C.current&&(C.current.getTracks().forEach(e=>e.stop()),C.current=null,m(null)),N.current&&g&&(N.current.stop(),v(!1))},A=e=>"NotAllowedError"===e.name||"PermissionDeniedError"===e.name?"Camera permission denied. Please enable camera access and try again.":"NotFoundError"===e.name||"DevicesNotFoundError"===e.name?"No camera found on this device.":"NotReadableError"===e.name||"TrackStartError"===e.name?"Camera is already in use by another application.":"OverconstrainedError"===e.name?"Camera does not support the requested settings.":e.message||"Failed to access camera. Please try again.";return n?(0,x.jsx)("div",{className:"camera-overlay",onClick:e=>{e.target===e.currentTarget&&a()},children:(0,x.jsxs)("div",{className:"camera-modal",children:[(0,x.jsxs)("div",{className:"camera-header",children:[(0,x.jsx)("button",{className:"camera-close",onClick:a,children:"\xd7"}),(0,x.jsx)("div",{className:"camera-title",children:"photo"===r?"\ud83d\udcf7 Camera":"\ud83c\udfa5 Video"}),(0,x.jsxs)("div",{className:"camera-actions",children:[(0,x.jsx)("button",{className:"flash-btn ".concat("on"===w?"active":""),onClick:async()=>{if(h)try{const e=h.getVideoTracks()[0];if(e.getCapabilities().torch){const t="off"===w?"on":"off";await e.applyConstraints({advanced:[{torch:"on"===t}]}),S(t)}}catch(e){console.error("Flash toggle error:",e)}},title:"Toggle Flash",children:"\u26a1"}),(0,x.jsx)("button",{className:"switch-camera-btn",onClick:()=>{f(e=>"user"===e?"environment":"user")},title:"Switch Camera",children:"\ud83d\udd04"})]})]}),(0,x.jsxs)("div",{className:"camera-content",children:[o&&(0,x.jsxs)("div",{className:"camera-loading",children:[(0,x.jsx)("div",{className:"loading-spinner"}),(0,x.jsx)("p",{children:"Initializing camera..."})]}),l&&(0,x.jsxs)("div",{className:"camera-error",children:[(0,x.jsx)("div",{className:"error-icon",children:"\ud83d\udea8"}),(0,x.jsx)("h4",{children:"Camera Error"}),(0,x.jsx)("p",{children:l}),(0,x.jsx)("button",{className:"retry-btn",onClick:E,children:"Try Again"})]}),u&&!l&&(0,x.jsxs)("div",{className:"camera-view",children:[(0,x.jsx)("video",{ref:k,className:"camera-video",autoPlay:!0,playsInline:!0,muted:!0}),(0,x.jsx)("canvas",{ref:j,className:"camera-canvas",style:{display:"none"}}),g&&(0,x.jsxs)("div",{className:"recording-indicator",children:[(0,x.jsx)("div",{className:"recording-dot"}),(0,x.jsx)("span",{children:"Recording..."})]})]})]}),u&&!l&&(0,x.jsx)("div",{className:"camera-controls",children:"photo"===r?(0,x.jsx)("button",{className:"capture-btn",onClick:()=>{if(!k.current||!j.current)return;const e=k.current,t=j.current,n=t.getContext("2d");t.width=e.videoWidth,t.height=e.videoHeight,n.drawImage(e,0,0,t.width,t.height),t.toBlob(e=>{if(e&&s){const t=new File([e],"photo_".concat(Date.now(),".jpg"),{type:"image/jpeg"});s(t,"photo"),a()}},"image/jpeg",.9)},children:"\ud83d\udcf7 Capture Photo"}):(0,x.jsx)("div",{className:"video-controls",children:g?(0,x.jsx)("button",{className:"stop-btn",onClick:()=>{N.current&&g&&(N.current.stop(),v(!1))},children:"\u23f9\ufe0f Stop Recording"}):(0,x.jsx)("button",{className:"record-btn",onClick:()=>{if(h)try{const e={mimeType:"video/webm;codecs=vp9,opus"};MediaRecorder.isTypeSupported(e.mimeType)||(e.mimeType="video/webm",MediaRecorder.isTypeSupported(e.mimeType)||(e.mimeType="video/mp4"));const t=new MediaRecorder(h,e);N.current=t;const n=[];t.ondataavailable=e=>{e.data.size>0&&n.push(e.data)},t.onstop=()=>{const e=new Blob(n,{type:t.mimeType}),r=new File([e],"video_".concat(Date.now(),".webm"),{type:e.type});s&&s(r,"video"),b([]),a()},t.start(1e3),v(!0),b(n)}catch(e){console.error("Recording start error:",e),c("Failed to start recording. Please try again.")}},children:"\u25cf Start Recording"})})})]})}):null},D=t=>{let{isOpen:n,onClose:a,onContactsSelected:s,multiple:r=!0}=t;const[o,l]=(0,e.useState)([]),[c,u]=(0,e.useState)([]),[d,h]=(0,e.useState)([]),[m,p]=(0,e.useState)(""),[f,g]=(0,e.useState)(!1),[v,y]=(0,e.useState)(null),[b,w]=(0,e.useState)(null),[S,k]=(0,e.useState)(null);(0,e.useEffect)(()=>{n&&j()},[n]),(0,e.useEffect)(()=>{if(m.trim()){const e=o.filter(e=>e.name.toLowerCase().includes(m.toLowerCase())||e.email&&e.email.toLowerCase().includes(m.toLowerCase())||e.phone&&e.phone.includes(m));u(e)}else u(o)},[o,m]);const j=async()=>{if(g(!0),y(null),"contacts"in navigator&&"ContactsManager"in window)try{const e=await navigator.contacts.getProperties();k({supported:!0,properties:e,api:"ContactsManager"}),await C()}catch(e){console.error("ContactsManager error:",e),N()}else if("contacts"in navigator)try{k({supported:!0,properties:["name","email","tel"],api:"ContactPicker"}),await C()}catch(e){console.error("ContactPicker error:",e),N()}else N()},N=()=>{k({supported:!1,reason:"Contact access is not supported in this browser",api:"none"}),E(),g(!1)},C=async()=>{try{if("ContactsManager"===(null===S||void 0===S?void 0:S.api)){const e=(await navigator.contacts.select(["name","email","tel"],{multiple:r})).map((e,t)=>{var n,a,s;return{id:"native_".concat(t),name:(null===(n=e.name)||void 0===n?void 0:n[0])||"Unknown",email:(null===(a=e.email)||void 0===a?void 0:a[0])||"",phone:(null===(s=e.tel)||void 0===s?void 0:s[0])||"",source:"device"}});l(e),w(!0)}else{const e=(await navigator.contacts.select(["name","email","tel"],{multiple:r})).map((e,t)=>({id:"picker_".concat(t),name:e.name||"Unknown",email:e.email||"",phone:e.tel||"",source:"device"}));l(e),w(!0)}}catch(e){console.error("Contact permission error:",e),"NotAllowedError"===e.name?(y("Contact access permission denied. Please enable contact access."),w(!1)):"NotSupportedError"===e.name?(y("Contact access is not supported on this device."),w(!1)):(y("Failed to access contacts. Using manual entry mode."),w(!1)),E()}finally{g(!1)}},E=()=>{const e=[{id:"fallback_1",name:"Manual Entry",email:"",phone:"",source:"manual",isManualEntry:!0}];try{const t=JSON.parse(localStorage.getItem("app_contacts")||"[]");e.push(...t.map(e=>i(i({},e),{},{source:"saved"})))}catch(t){console.error("Error loading saved contacts:",t)}l(e),w(!1)},T=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d;e.length>0&&s&&s(e),a()},A=e=>d.find(t=>t.id===e.id);return n?(0,x.jsx)("div",{className:"contact-picker-overlay",onClick:e=>{e.target===e.currentTarget&&a()},children:(0,x.jsxs)("div",{className:"contact-picker-modal",children:[(0,x.jsxs)("div",{className:"contact-picker-header",children:[(0,x.jsx)("h3",{children:r?"\ud83d\udcde Select Contacts":"\ud83d\udcde Select Contact"}),(0,x.jsx)("button",{className:"close-btn",onClick:a,children:"\xd7"})]}),f&&(0,x.jsxs)("div",{className:"contact-picker-loading",children:[(0,x.jsx)("div",{className:"loading-spinner"}),(0,x.jsx)("p",{children:"Accessing contacts..."})]}),v&&(0,x.jsxs)("div",{className:"contact-picker-error",children:[(0,x.jsx)("div",{className:"error-icon",children:"\u26a0\ufe0f"}),(0,x.jsx)("p",{children:v}),(0,x.jsx)("button",{className:"retry-btn",onClick:j,children:"Try Again"})]}),!f&&!v&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("div",{className:"contact-picker-search",children:(0,x.jsx)("input",{type:"text",placeholder:"Search contacts...",value:m,onChange:e=>p(e.target.value),className:"search-input"})}),(0,x.jsx)("div",{className:"contact-picker-content",children:c.length>0?(0,x.jsx)("div",{className:"contacts-list",children:c.map(e=>(0,x.jsxs)("div",{className:"contact-item ".concat(A(e)?"selected":""," ").concat(e.isManualEntry?"manual-entry":""),onClick:()=>(e=>{if(e.isManualEntry){const e=prompt("Enter contact name:"),t=prompt("Enter email (optional):")||"",n=prompt("Enter phone number (optional):")||"";if(e){const a={id:"manual_".concat(Date.now()),name:e,email:t,phone:n,source:"manual"};r?h(e=>[...e,a]):(h([a]),T([a]))}return}r?h(t=>t.find(t=>t.id===e.id)?t.filter(t=>t.id!==e.id):[...t,e]):(h([e]),T([e]))})(e),children:[(0,x.jsx)("div",{className:"contact-avatar",children:e.isManualEntry?"\u2795":e.name.charAt(0).toUpperCase()}),(0,x.jsxs)("div",{className:"contact-info",children:[(0,x.jsxs)("div",{className:"contact-name",children:[e.name,"device"===e.source&&(0,x.jsx)("span",{className:"source-badge",children:"Device"}),"saved"===e.source&&(0,x.jsx)("span",{className:"source-badge saved",children:"Saved"})]}),e.email&&(0,x.jsx)("div",{className:"contact-email",children:e.email}),e.phone&&(0,x.jsx)("div",{className:"contact-phone",children:e.phone})]}),r&&!e.isManualEntry&&(0,x.jsx)("div",{className:"contact-checkbox",children:A(e)?"\u2713":""})]},e.id))}):(0,x.jsxs)("div",{className:"no-contacts",children:[(0,x.jsx)("div",{className:"no-contacts-icon",children:"\ud83d\udcde"}),(0,x.jsx)("h4",{children:"No contacts found"}),(0,x.jsx)("p",{children:m?'No contacts match "'.concat(m,'"'):"No contacts available"})]})}),r&&d.length>0&&(0,x.jsxs)("div",{className:"contact-picker-footer",children:[(0,x.jsxs)("div",{className:"selected-count",children:[d.length," contact",1!==d.length?"s":""," selected"]}),(0,x.jsxs)("div",{className:"footer-actions",children:[(0,x.jsx)("button",{className:"cancel-btn",onClick:()=>h([]),children:"Clear"}),(0,x.jsx)("button",{className:"submit-btn",onClick:()=>T(),children:"Add Selected"})]})]})]})]})}):null},M=t=>{let{isOpen:n,onClose:a}=t;const[s,r]=(0,e.useState)([]),[o,l]=(0,e.useState)([]),[c,u]=(0,e.useState)(""),[d,h]=(0,e.useState)([]),[m,p]=(0,e.useState)(!1),[f,g]=(0,e.useState)(!1),[v,y]=(0,e.useState)(null),[b,w]=(0,e.useState)("name"),[S,k]=(0,e.useState)("grid"),[j,N]=(0,e.useState)({name:"",email:"",phone:"",company:"",notes:""});(0,e.useEffect)(()=>{n&&C()},[n]),(0,e.useEffect)(()=>{let e=s;c.trim()&&(e=s.filter(e=>e.name.toLowerCase().includes(c.toLowerCase())||e.email&&e.email.toLowerCase().includes(c.toLowerCase())||e.phone&&e.phone.includes(c)||e.company&&e.company.toLowerCase().includes(c.toLowerCase()))),e=[...e].sort((e,t)=>{switch(b){case"name":return e.name.localeCompare(t.name);case"email":return(e.email||"").localeCompare(t.email||"");case"company":return(e.company||"").localeCompare(t.company||"");case"recent":return new Date(t.lastContacted||0)-new Date(e.lastContacted||0);default:return 0}}),l(e)},[s,c,b]);const C=async()=>{p(!0);try{const e=await E.getContacts();r(e)}catch(e){console.error("Error loading contacts:",e)}finally{p(!1)}};return n?(0,x.jsx)("div",{className:"contact-manager-overlay",onClick:e=>{e.target===e.currentTarget&&a()},children:(0,x.jsxs)("div",{className:"contact-manager-modal",children:[(0,x.jsxs)("div",{className:"contact-manager-header",children:[(0,x.jsx)("h3",{children:"\ud83d\udcde Contact Manager"}),(0,x.jsx)("button",{className:"close-btn",onClick:a,children:"\xd7"})]}),(0,x.jsxs)("div",{className:"contact-manager-toolbar",children:[(0,x.jsx)("div",{className:"search-section",children:(0,x.jsx)("input",{type:"text",placeholder:"Search contacts...",value:c,onChange:e=>u(e.target.value),className:"search-input"})}),(0,x.jsxs)("div",{className:"toolbar-actions",children:[(0,x.jsxs)("select",{value:b,onChange:e=>w(e.target.value),className:"sort-select",children:[(0,x.jsx)("option",{value:"name",children:"Sort by Name"}),(0,x.jsx)("option",{value:"email",children:"Sort by Email"}),(0,x.jsx)("option",{value:"company",children:"Sort by Company"}),(0,x.jsx)("option",{value:"recent",children:"Sort by Recent"})]}),(0,x.jsxs)("div",{className:"view-toggle",children:[(0,x.jsx)("button",{className:"view-btn ".concat("grid"===S?"active":""),onClick:()=>k("grid"),title:"Grid View",children:"\u2059"}),(0,x.jsx)("button",{className:"view-btn ".concat("list"===S?"active":""),onClick:()=>k("list"),title:"List View",children:"\u2630"})]}),(0,x.jsx)("button",{className:"add-btn",onClick:()=>g(!0),children:"\u2795 Add"})]})]}),d.length>0&&(0,x.jsxs)("div",{className:"selection-bar",children:[(0,x.jsxs)("span",{children:[d.length," selected"]}),(0,x.jsxs)("div",{className:"selection-actions",children:[(0,x.jsx)("button",{onClick:()=>{d.length===o.length?h([]):h(o.map(e=>e.id))},children:d.length===o.length?"Deselect All":"Select All"}),(0,x.jsx)("button",{onClick:async()=>{if(0!==d.length&&window.confirm("Are you sure you want to delete ".concat(d.length," contact(s)?")))try{const e=(await Promise.all(d.map(e=>E.deleteContact(e)))).filter(e=>e.success);e.length>0&&(r(e=>e.filter(e=>!d.includes(e.id))),h([])),e.length<d.length&&alert("Some contacts could not be deleted")}catch(e){console.error("Error deleting contacts:",e),alert("Failed to delete some contacts")}},className:"delete-btn",children:"Delete Selected"})]})]}),(0,x.jsx)("div",{className:"contact-manager-content",children:m?(0,x.jsxs)("div",{className:"loading-state",children:[(0,x.jsx)("div",{className:"loading-spinner"}),(0,x.jsx)("p",{children:"Loading contacts..."})]}):o.length>0?(0,x.jsx)("div",{className:"contacts-container ".concat(S),children:o.map(e=>(0,x.jsxs)("div",{className:"contact-card ".concat(d.includes(e.id)?"selected":""),children:[(0,x.jsx)("div",{className:"contact-checkbox",children:(0,x.jsx)("input",{type:"checkbox",checked:d.includes(e.id),onChange:()=>{return t=e.id,void h(e=>e.includes(t)?e.filter(e=>e!==t):[...e,t]);var t}})}),(0,x.jsx)("div",{className:"contact-avatar",children:e.name.charAt(0).toUpperCase()}),(0,x.jsxs)("div",{className:"contact-details",children:[(0,x.jsx)("div",{className:"contact-name",children:e.name}),e.email&&(0,x.jsx)("div",{className:"contact-email",children:e.email}),e.phone&&(0,x.jsx)("div",{className:"contact-phone",children:e.phone}),e.company&&(0,x.jsx)("div",{className:"contact-company",children:e.company})]}),(0,x.jsxs)("div",{className:"contact-actions",children:[(0,x.jsx)("button",{onClick:()=>y(e),className:"edit-btn",title:"Edit",children:"\u270f\ufe0f"}),(0,x.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this contact?"))try{const t=await E.deleteContact(e);t.success?(r(t=>t.filter(t=>t.id!==e)),h(t=>t.filter(t=>t!==e))):alert("Failed to delete contact: ".concat(t.error))}catch(t){console.error("Error deleting contact:",t),alert("Failed to delete contact")}})(e.id),className:"delete-btn",title:"Delete",children:"\ud83d\uddd1\ufe0f"})]})]},e.id))}):(0,x.jsxs)("div",{className:"empty-state",children:[(0,x.jsx)("div",{className:"empty-icon",children:"\ud83d\udcde"}),(0,x.jsx)("h4",{children:"No contacts found"}),(0,x.jsx)("p",{children:c?'No contacts match "'.concat(c,'"'):"Start by adding your first contact"}),(0,x.jsx)("button",{className:"add-first-btn",onClick:()=>g(!0),children:"Add Contact"})]})}),(0,x.jsxs)("div",{className:"contact-manager-footer",children:[(0,x.jsxs)("div",{className:"footer-info",children:[s.length," total contact",1!==s.length?"s":""]}),(0,x.jsxs)("div",{className:"footer-actions",children:[(0,x.jsx)("input",{type:"file",accept:".json,.csv",onChange:async e=>{const t=e.target.files[0];if(t){try{const e=await t.text();let n;if(t.name.endsWith(".json"))n=JSON.parse(e);else if(t.name.endsWith(".csv")){const t=e.split("\n");t[0].split(",").map(e=>e.trim().replace(/"/g,""));n=t.slice(1).map(e=>{const t=e.split(",").map(e=>e.trim().replace(/"/g,""));return{name:t[0]||"Unknown",email:t[1]||"",phone:t[2]||"",company:t[3]||""}}).filter(e=>e.name&&"Unknown"!==e.name)}if(Array.isArray(n)){const e=(await Promise.all(n.map(e=>E.addContact(e)))).filter(e=>e.success);e.length>0?(r(t=>[...t,...e.map(e=>e.contact)]),alert("Successfully imported ".concat(e.length," contacts"))):alert("No contacts were imported")}else alert("Invalid file format")}catch(n){console.error("Error importing contacts:",n),alert("Failed to import contacts")}e.target.value=""}},style:{display:"none"},id:"import-input"}),(0,x.jsx)("label",{htmlFor:"import-input",className:"import-btn",children:"\ud83d\udcc1 Import"}),(0,x.jsx)("button",{onClick:async()=>{try{const e=E.exportContacts("json");e.success||alert("Failed to export contacts: ".concat(e.error))}catch(e){console.error("Error exporting contacts:",e),alert("Failed to export contacts")}},className:"export-btn",children:"\ud83d\udcc4 Export"})]})]}),f&&(0,x.jsx)("div",{className:"add-contact-overlay",children:(0,x.jsxs)("div",{className:"add-contact-modal",children:[(0,x.jsxs)("div",{className:"add-contact-header",children:[(0,x.jsx)("h4",{children:"Add New Contact"}),(0,x.jsx)("button",{onClick:()=>g(!1),children:"\xd7"})]}),(0,x.jsxs)("div",{className:"add-contact-form",children:[(0,x.jsx)("input",{type:"text",placeholder:"Full Name *",value:j.name,onChange:e=>N(t=>i(i({},t),{},{name:e.target.value}))}),(0,x.jsx)("input",{type:"email",placeholder:"Email",value:j.email,onChange:e=>N(t=>i(i({},t),{},{email:e.target.value}))}),(0,x.jsx)("input",{type:"tel",placeholder:"Phone Number",value:j.phone,onChange:e=>N(t=>i(i({},t),{},{phone:e.target.value}))}),(0,x.jsx)("input",{type:"text",placeholder:"Company",value:j.company,onChange:e=>N(t=>i(i({},t),{},{company:e.target.value}))}),(0,x.jsx)("textarea",{placeholder:"Notes",value:j.notes,onChange:e=>N(t=>i(i({},t),{},{notes:e.target.value})),rows:"3"}),(0,x.jsxs)("div",{className:"form-actions",children:[(0,x.jsx)("button",{onClick:()=>g(!1),className:"cancel-btn",children:"Cancel"}),(0,x.jsx)("button",{onClick:async()=>{if(j.name.trim())try{const e=await E.addContact(j);e.success?(r(t=>[...t,e.contact]),N({name:"",email:"",phone:"",company:"",notes:""}),g(!1)):alert("Failed to add contact: ".concat(e.errors?e.errors.join(", "):e.error))}catch(e){console.error("Error adding contact:",e),alert("Failed to add contact")}else alert("Please enter a contact name")},className:"save-btn",children:"Add Contact"})]})]})]})}),v&&(0,x.jsx)("div",{className:"add-contact-overlay",children:(0,x.jsxs)("div",{className:"add-contact-modal",children:[(0,x.jsxs)("div",{className:"add-contact-header",children:[(0,x.jsx)("h4",{children:"Edit Contact"}),(0,x.jsx)("button",{onClick:()=>y(null),children:"\xd7"})]}),(0,x.jsxs)("div",{className:"add-contact-form",children:[(0,x.jsx)("input",{type:"text",placeholder:"Full Name *",value:v.name,onChange:e=>y(t=>i(i({},t),{},{name:e.target.value}))}),(0,x.jsx)("input",{type:"email",placeholder:"Email",value:v.email||"",onChange:e=>y(t=>i(i({},t),{},{email:e.target.value}))}),(0,x.jsx)("input",{type:"tel",placeholder:"Phone Number",value:v.phone||"",onChange:e=>y(t=>i(i({},t),{},{phone:e.target.value}))}),(0,x.jsx)("input",{type:"text",placeholder:"Company",value:v.company||"",onChange:e=>y(t=>i(i({},t),{},{company:e.target.value}))}),(0,x.jsx)("textarea",{placeholder:"Notes",value:v.notes||"",onChange:e=>y(t=>i(i({},t),{},{notes:e.target.value})),rows:"3"}),(0,x.jsxs)("div",{className:"form-actions",children:[(0,x.jsx)("button",{onClick:()=>y(null),className:"cancel-btn",children:"Cancel"}),(0,x.jsx)("button",{onClick:async()=>{if(v.name.trim())try{const e=await E.updateContact(v.id,v);e.success?(r(t=>t.map(t=>t.id===e.contact.id?e.contact:t)),y(null)):alert("Failed to update contact: ".concat(e.errors?e.errors.join(", "):e.error))}catch(e){console.error("Error updating contact:",e),alert("Failed to update contact")}else alert("Please enter a contact name")},className:"save-btn",children:"Save Changes"})]})]})]})})]})}):null};const z=new class{constructor(){this.cache=new Map,this.cacheTimeout=3e5}async searchUsers(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{limit:n=10,includeCurrentUser:a=!1}=t;if(!e||e.trim().length<2)return{success:!1,error:"Search query must be at least 2 characters long",users:[]};const s=e.trim(),r="search:".concat(s,":").concat(n,":").concat(a);if(this.cache.has(r)){const e=this.cache.get(r);if(Date.now()-e.timestamp<this.cacheTimeout)return e.data;this.cache.delete(r)}try{const e=await l.getTokenForRequest();if(!e)return{success:!1,error:"Authentication required",users:[]};const t=await fetch("/api/users/search?q=".concat(encodeURIComponent(s),"&limit=").concat(n),{headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}});if(t.ok){const e=await t.json();return e.success?(this.cache.set(r,{data:{success:!0,users:e.users,query:s,count:e.count},timestamp:Date.now()}),{success:!0,users:e.users,query:s,count:e.count}):{success:!1,error:e.error||"Search failed",users:[]}}return{success:!1,error:(await t.json()).error||"Search request failed",users:[]}}catch(o){return console.error("User search error:",o),{success:!1,error:"Network error during search",users:[]}}}async getUserById(e){try{const t=await l.getTokenForRequest();if(!t)return{success:!1,error:"Authentication required"};const n=await fetch("/api/users/".concat(e),{headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"}});if(n.ok){return await n.json()}return{success:!1,error:(await n.json()).error||"Failed to get user"}}catch(t){return console.error("Get user error:",t),{success:!1,error:"Network error"}}}clearCache(){this.cache.clear()}getRecentSearches(){try{const e=localStorage.getItem("recentUserSearches");return e?JSON.parse(e):[]}catch(e){return console.error("Error getting recent searches:",e),[]}}addToRecentSearches(e,t){try{const n=this.getRecentSearches(),a={query:e.trim(),user:{id:t.id,name:t.name,username:t.username,avatar:t.avatar},timestamp:Date.now()},s=[a,...n.filter(n=>n.user.id!==t.id&&n.query.toLowerCase()!==e.toLowerCase())].slice(0,10);localStorage.setItem("recentUserSearches",JSON.stringify(s))}catch(n){console.error("Error saving recent search:",n)}}clearRecentSearches(){try{localStorage.removeItem("recentUserSearches")}catch(e){console.error("Error clearing recent searches:",e)}}formatUserForDisplay(e){return{id:e.id,name:e.name||e.username,username:e.username,displayName:e.displayName||e.name,avatar:e.avatar,status:e.status||"offline",bio:e.bio,location:e.location,company:e.company,isOnline:"online"===e.status}}debounce(e,t){let n;return function(){for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];clearTimeout(n),n=setTimeout(()=>{clearTimeout(n),e(...s)},t)}}createDebouncedSearch(e){var t=this;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300;return this.debounce(async function(n){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(n.trim().length>=2){const s=await t.searchUsers(n,a);e(s)}else e({success:!0,users:[],query:"",count:0})},n)}},R=t=>{let{isOpen:n,onClose:a,onUserSelect:s,searchQuery:r="",onSearchQueryChange:o}=t;const[i,l]=(0,e.useState)([]),[c,u]=(0,e.useState)(!1),[d,h]=(0,e.useState)(""),[m,p]=(0,e.useState)([]),[f,g]=(0,e.useState)(r),[v,y]=(0,e.useState)(null),b=(0,e.useRef)(null);(0,e.useEffect)(()=>{n&&(p(z.getRecentSearches()),g(r),setTimeout(()=>{b.current&&b.current.focus()},100))},[n,r]);const w=z.createDebouncedSearch(e=>{u(!1),e.success?(l(e.users),h("")):(h(e.error),l([]))},300),S=async e=>{if(v!==e.id)try{y(e.id),f.trim()&&z.addToRecentSearches(f,e),await s(e),a()}catch(d){console.error("Error creating chat:",d)}finally{y(null)}};return n?(0,x.jsx)("div",{className:"user-search-overlay",onClick:e=>{e.target===e.currentTarget&&a()},children:(0,x.jsxs)("div",{className:"user-search-modal",onKeyDown:e=>{"Escape"===e.key&&a()},children:[(0,x.jsxs)("div",{className:"user-search-header",children:[(0,x.jsx)("h3",{children:"\ud83d\udd0d Search Users"}),(0,x.jsx)("button",{className:"close-btn",onClick:a,children:"\xd7"})]}),(0,x.jsxs)("div",{className:"user-search-content",children:[(0,x.jsx)("div",{className:"search-input-section",children:(0,x.jsxs)("div",{className:"search-input-container",children:[(0,x.jsx)("span",{className:"search-icon",children:"\ud83d\udd0d"}),(0,x.jsx)("input",{ref:b,type:"text",placeholder:"Search users by name, username, or email...",value:f,onChange:e=>{const t=e.target.value;g(t),null===o||void 0===o||o(t),t.trim().length>=2?(u(!0),h(""),w(t)):(l([]),u(!1),h(""))},className:"user-search-input",autoComplete:"off"}),f&&(0,x.jsx)("button",{className:"clear-search-btn",onClick:()=>{g(""),null===o||void 0===o||o(""),l([]),h("")},children:"\xd7"})]})}),c&&(0,x.jsxs)("div",{className:"search-loading",children:[(0,x.jsx)("div",{className:"loading-spinner"}),(0,x.jsx)("p",{children:"Searching users..."})]}),d&&(0,x.jsxs)("div",{className:"search-error",children:[(0,x.jsx)("span",{className:"error-icon",children:"\u26a0\ufe0f"}),(0,x.jsx)("p",{children:d})]}),!c&&!d&&f.trim().length>=2&&(0,x.jsxs)("div",{className:"search-results",children:[(0,x.jsxs)("div",{className:"results-header",children:[(0,x.jsx)("h4",{children:"Search Results"}),i.length>0&&(0,x.jsxs)("span",{className:"results-count",children:[i.length," user",1!==i.length?"s":""," found"]})]}),i.length>0?(0,x.jsx)("div",{className:"users-list",children:i.map(e=>(0,x.jsxs)("div",{className:"user-item",onClick:()=>S(e),children:[(0,x.jsxs)("div",{className:"user-avatar",children:[e.avatar?(0,x.jsx)("img",{src:e.avatar,alt:e.name,onError:e=>{e.target.style.display="none",e.target.nextSibling.style.display="flex"}}):null,(0,x.jsx)("div",{className:"avatar-fallback",style:{display:e.avatar?"none":"flex"},children:(e.name||e.username||"?").charAt(0).toUpperCase()}),(0,x.jsx)("div",{className:"status-indicator ".concat(e.status||"offline")})]}),(0,x.jsxs)("div",{className:"user-info",children:[(0,x.jsx)("div",{className:"user-name",children:e.name||e.username}),(0,x.jsxs)("div",{className:"user-details",children:[(0,x.jsxs)("span",{className:"username",children:["@",e.username]}),e.bio&&(0,x.jsx)("span",{className:"bio",children:e.bio}),e.location&&(0,x.jsxs)("span",{className:"location",children:["\ud83d\udccd ",e.location]})]})]}),(0,x.jsx)("div",{className:"user-actions",children:(0,x.jsx)("button",{className:"chat-btn ".concat(v===e.id?"loading":""),title:v===e.id?"Creating chat...":"Start Chat",disabled:v===e.id,children:v===e.id?(0,x.jsx)("div",{className:"loading-spinner-small"}):"\ud83d\udcac"})})]},e.id))}):(0,x.jsxs)("div",{className:"no-results",children:[(0,x.jsx)("span",{className:"no-results-icon",children:"\ud83d\udd0d"}),(0,x.jsx)("h4",{children:"No users found"}),(0,x.jsx)("p",{children:"Try searching with different keywords"})]})]}),!c&&!d&&f.trim().length<2&&m.length>0&&(0,x.jsxs)("div",{className:"recent-searches",children:[(0,x.jsxs)("div",{className:"recent-header",children:[(0,x.jsx)("h4",{children:"Recent Searches"}),(0,x.jsx)("button",{className:"clear-recent-btn",onClick:()=>{z.clearRecentSearches(),p([])},children:"Clear All"})]}),(0,x.jsx)("div",{className:"recent-list",children:m.map((e,t)=>(0,x.jsxs)("div",{className:"recent-item",onClick:()=>(async e=>{g(e.query),null===o||void 0===o||o(e.query),await S(e.user)})(e),children:[(0,x.jsx)("div",{className:"recent-avatar",children:e.user.avatar?(0,x.jsx)("img",{src:e.user.avatar,alt:e.user.name}):(0,x.jsx)("div",{className:"avatar-fallback",children:(e.user.name||e.user.username||"?").charAt(0).toUpperCase()})}),(0,x.jsxs)("div",{className:"recent-info",children:[(0,x.jsx)("div",{className:"recent-name",children:e.user.name||e.user.username}),(0,x.jsxs)("div",{className:"recent-query",children:['"',e.query,'"']})]}),(0,x.jsx)("div",{className:"recent-time",children:new Date(e.timestamp).toLocaleDateString()})]},"".concat(e.user.id,"-").concat(t)))})]}),!c&&!d&&f.trim().length<2&&0===m.length&&(0,x.jsxs)("div",{className:"empty-state",children:[(0,x.jsx)("span",{className:"empty-icon",children:"\ud83d\udc65"}),(0,x.jsx)("h4",{children:"Search for Users"}),(0,x.jsx)("p",{children:"Enter at least 2 characters to search for other users"}),(0,x.jsxs)("div",{className:"search-tips",children:[(0,x.jsx)("h5",{children:"Search Tips:"}),(0,x.jsxs)("ul",{children:[(0,x.jsx)("li",{children:'\ud83d\udd24 Search by name: "John Doe"'}),(0,x.jsx)("li",{children:'\ud83d\udce7 Search by username: "johndoe"'}),(0,x.jsx)("li",{children:'\u2709\ufe0f Search by email: "john@example.com"'})]})]})]})]})]})}):null};const L=new class{constructor(){this.searchHistory=[],this.searchIndex=new Map,this.maxHistoryItems=50,this.loadSearchHistory()}async initIndexedDB(){return new Promise((e,t)=>{const n=indexedDB.open("QuibishSearchDB",1);n.onerror=()=>t(n.error),n.onsuccess=()=>e(n.result),n.onupgradeneeded=e=>{const t=e.target.result;if(!t.objectStoreNames.contains("searchIndex")){t.createObjectStore("searchIndex",{keyPath:"term"}).createIndex("term","term",{unique:!0})}if(!t.objectStoreNames.contains("searchHistory")){const e=t.createObjectStore("searchHistory",{keyPath:"id",autoIncrement:!0});e.createIndex("timestamp","timestamp",{unique:!1}),e.createIndex("query","query",{unique:!1})}}})}async buildSearchIndex(e){console.log("\ud83d\udd0d Building search index from",e.length,"messages..."),this.searchIndex.clear();for(const n of e){if(!n.text)continue;const e=this.tokenize(n.text);for(const t of e)this.searchIndex.has(t)||this.searchIndex.set(t,[]),this.searchIndex.get(t).push({messageId:n.id,conversationId:n.conversationId,userId:n.userId,timestamp:n.timestamp,text:n.text,type:n.type||"text"})}try{const e=await this.initIndexedDB(),t=e.transaction(["searchIndex"],"readwrite").objectStore("searchIndex");t.clear();for(const[n,a]of this.searchIndex.entries())t.add({term:n,results:a});console.log("\u2705 Search index built with",this.searchIndex.size,"unique terms")}catch(t){console.error("\u274c Failed to save search index to IndexedDB:",t)}}tokenize(e){return e?e.toLowerCase().replace(/[^\w\s]/g," ").split(/\s+/).filter(e=>e.length>=2).filter(e=>!this.isStopWord(e)):[]}isStopWord(e){return new Set(["the","is","at","which","on","a","an","and","or","but","in","with","to","for","of","as","by","that","this","it"]).has(e)}calculateLevenshteinDistance(e,t){const n=[];for(let a=0;a<=t.length;a++)n[a]=[a];for(let a=0;a<=e.length;a++)n[0][a]=a;for(let a=1;a<=t.length;a++)for(let s=1;s<=e.length;s++)t.charAt(a-1)===e.charAt(s-1)?n[a][s]=n[a-1][s-1]:n[a][s]=Math.min(n[a-1][s-1]+1,n[a][s-1]+1,n[a-1][s]+1);return n[t.length][e.length]}findSimilarTerms(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;const n=[];for(const a of this.searchIndex.keys()){const s=this.calculateLevenshteinDistance(e,a);s<=t&&n.push({term:a,distance:s})}return n.sort((e,t)=>e.distance-t.distance)}async search(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{conversationId:n=null,userId:a=null,messageType:s=null,dateFrom:r=null,dateTo:o=null,hasAttachments:l=null,fuzzyMatch:c=!0,limit:u=100,offset:d=0}=t;if(console.log("\ud83d\udd0d Searching for:",e,"with filters:",t),0===this.searchIndex.size){const e=b.getMessages();await this.buildSearchIndex(e)}const h=this.tokenize(e);let m=[];for(const f of h)if(this.searchIndex.has(f)&&m.push(...this.searchIndex.get(f)),c){const e=this.findSimilarTerms(f,2);for(const{term:t}of e)if(this.searchIndex.has(t)){const e=this.searchIndex.get(t).map(e=>i(i({},e),{},{fuzzyMatch:!0,matchedTerm:t}));m.push(...e)}}let p=Array.from(new Map(m.map(e=>[e.messageId,e])).values());if(n&&(p=p.filter(e=>e.conversationId===n)),a&&(p=p.filter(e=>e.userId===a)),s&&(p=p.filter(e=>e.type===s)),r){const e=new Date(r);p=p.filter(t=>new Date(t.timestamp)>=e)}if(o){const e=new Date(o);p=p.filter(t=>new Date(t.timestamp)<=e)}null!==l&&(p=p.filter(e=>{const t=e.attachments&&e.attachments.length>0;return l?t:!t})),p.sort((e,t)=>new Date(t.timestamp)-new Date(e.timestamp)),e.trim().length>0&&this.addToSearchHistory({query:e,filters:t,resultCount:p.length,timestamp:(new Date).toISOString()});return{success:!0,results:p.slice(d,d+u),total:p.length,query:e,filters:t,page:Math.floor(d/u)+1,totalPages:Math.ceil(p.length/u),hasMore:d+u<p.length}}async searchWithHighlights(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=await this.search(e,t),a=this.tokenize(e);return n.results=n.results.map(e=>i(i({},e),{},{highlightedText:this.highlightText(e.text,a)})),n}highlightText(e,t){let n=e;for(const a of t){const e=new RegExp("\\b(".concat(a,")\\b"),"gi");n=n.replace(e,"<mark>$1</mark>")}return n}async getSearchSuggestions(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;const n=new Set,a=e.toLowerCase();for(const s of this.searchIndex.keys())if(s.startsWith(a)&&(n.add(s),n.size>=t))break;return this.searchHistory.filter(e=>e.query.toLowerCase().includes(a)).slice(0,t-n.size).map(e=>e.query).forEach(e=>n.add(e)),Array.from(n).slice(0,t)}loadSearchHistory(){try{const e=localStorage.getItem("quibish_search_history");e&&(this.searchHistory=JSON.parse(e))}catch(e){console.error("Failed to load search history:",e),this.searchHistory=[]}}saveSearchHistory(){try{localStorage.setItem("quibish_search_history",JSON.stringify(this.searchHistory))}catch(e){console.error("Failed to save search history:",e)}}addToSearchHistory(e){this.searchHistory=this.searchHistory.filter(t=>t.query!==e.query),this.searchHistory.unshift(e),this.searchHistory.length>this.maxHistoryItems&&(this.searchHistory=this.searchHistory.slice(0,this.maxHistoryItems)),this.saveSearchHistory()}getSearchHistory(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;return this.searchHistory.slice(0,e)}clearSearchHistory(){this.searchHistory=[],this.saveSearchHistory()}async indexMessage(e){if(!e.text)return;const t=this.tokenize(e.text);for(const n of t)this.searchIndex.has(n)||this.searchIndex.set(n,[]),this.searchIndex.get(n).push({messageId:e.id,conversationId:e.conversationId,userId:e.userId,timestamp:e.timestamp,text:e.text,type:e.type||"text"})}async removeFromIndex(e){for(const[t,n]of this.searchIndex.entries()){const a=n.filter(t=>t.messageId!==e);0===a.length?this.searchIndex.delete(t):this.searchIndex.set(t,a)}}getSearchStats(){return{indexedTerms:this.searchIndex.size,totalMessages:Array.from(this.searchIndex.values()).reduce((e,t)=>e+t.length,0),historyCount:this.searchHistory.length,lastSearched:this.searchHistory.length>0?this.searchHistory[0].timestamp:null}}clearSearchIndex(){this.searchIndex.clear(),console.log("\ud83e\uddf9 Search index cleared")}},F=t=>{let{isOpen:n,onClose:a,onResultSelect:s,currentConversationId:r=null}=t;const[o,l]=(0,e.useState)(""),[c,u]=(0,e.useState)([]),[d,h]=(0,e.useState)(!1),[m,p]=(0,e.useState)(!1),[f,g]=(0,e.useState)([]),[v,y]=(0,e.useState)([]),[b,w]=(0,e.useState)(1),[S,k]=(0,e.useState)(1),[j,N]=(0,e.useState)(0),[C,E]=(0,e.useState)(-1),T=(0,e.useRef)(null),A=(0,e.useRef)(null),[_,I]=(0,e.useState)({conversationId:r,userId:null,messageType:null,dateFrom:null,dateTo:null,hasAttachments:null,fuzzyMatch:!0,limit:20,offset:0});(0,e.useEffect)(()=>{n&&(y(L.getSearchHistory()),setTimeout(()=>{T.current&&T.current.focus()},100))},[n]),(0,e.useEffect)(()=>{if(o.length>=2){const e=setTimeout(async()=>{const e=await L.getSearchSuggestions(o,5);g(e)},300);return()=>clearTimeout(e)}g([])},[o]);const P=(0,e.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(e.trim()){h(!0),E(-1);try{const n=i(i({},_),{},{offset:(t-1)*_.limit}),a=await L.searchWithHighlights(e,n);u(a.results),N(a.total),k(a.totalPages),w(t),console.log("\u2705 Found ".concat(a.total,' results for "').concat(e,'"'))}catch(n){console.error("Search failed:",n),u([])}finally{h(!1),g([])}}else u([])},[o,_]),D=(0,e.useCallback)(e=>{null===e||void 0===e||e.preventDefault(),P(o,1)},[o,P]),M=(0,e.useCallback)((e,t)=>{I(n=>i(i({},n),{},{[e]:t}))},[]),z=(0,e.useCallback)(()=>{P(o,1),p(!1)},[o,P]),R=(0,e.useCallback)(()=>{I({conversationId:r,userId:null,messageType:null,dateFrom:null,dateTo:null,hasAttachments:null,fuzzyMatch:!0,limit:20,offset:0})},[r]),F=(0,e.useCallback)(e=>{s&&s(e),a()},[s,a]),O=(0,e.useCallback)(e=>{e>=1&&e<=S&&P(o,e)},[o,S,P]);(0,e.useEffect)(()=>{const e=e=>{if(n)switch(e.key){case"Escape":a();break;case"ArrowDown":e.preventDefault(),E(e=>e<c.length-1?e+1:e);break;case"ArrowUp":e.preventDefault(),E(e=>e>0?e-1:-1);break;case"Enter":C>=0&&c[C]&&F(c[C])}};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[n,c,C,a,F]),(0,e.useEffect)(()=>{if(C>=0&&A.current){const e=A.current.children[C];e&&e.scrollIntoView({block:"nearest",behavior:"smooth"})}},[C]);const U=(0,e.useCallback)(e=>{l(e),P(e,1)},[P]),B=(0,e.useCallback)(e=>{l(e.query),I(t=>i(i({},t),e.filters)),P(e.query,1)},[P]),H=(0,e.useCallback)(()=>{L.clearSearchHistory(),y([])},[]);return n?(0,x.jsx)("div",{className:"advanced-search-modal-overlay",onClick:a,children:(0,x.jsxs)("div",{className:"advanced-search-modal",onClick:e=>e.stopPropagation(),children:[(0,x.jsxs)("div",{className:"search-modal-header",children:[(0,x.jsx)("h2",{children:"\ud83d\udd0d Advanced Search"}),(0,x.jsx)("button",{className:"close-btn",onClick:a,children:"\u2715"})]}),(0,x.jsxs)("form",{onSubmit:D,className:"search-form",children:[(0,x.jsxs)("div",{className:"search-input-wrapper",children:[(0,x.jsx)("span",{className:"search-icon",children:"\ud83d\udd0d"}),(0,x.jsx)("input",{ref:T,type:"text",className:"search-input",placeholder:"Search messages, conversations, users...",value:o,onChange:e=>l(e.target.value),autoComplete:"off"}),o&&(0,x.jsx)("button",{type:"button",className:"clear-query-btn",onClick:()=>l(""),title:"Clear search",children:"\u2715"})]}),(0,x.jsxs)("div",{className:"search-actions",children:[(0,x.jsx)("button",{type:"submit",className:"search-btn primary",disabled:!o.trim()||d,children:d?"\u23f3 Searching...":"\ud83d\udd0d Search"}),(0,x.jsx)("button",{type:"button",className:"filter-toggle-btn ".concat(m?"active":""),onClick:()=>p(!m),children:"\ud83c\udf9b\ufe0f Filters"})]})]}),f.length>0&&!d&&(0,x.jsxs)("div",{className:"search-suggestions",children:[(0,x.jsx)("div",{className:"suggestions-label",children:"Suggestions:"}),f.map((e,t)=>(0,x.jsx)("button",{className:"suggestion-item",onClick:()=>U(e),children:e},t))]}),m&&(0,x.jsxs)("div",{className:"filters-panel",children:[(0,x.jsxs)("div",{className:"filters-grid",children:[(0,x.jsxs)("div",{className:"filter-group",children:[(0,x.jsx)("label",{children:"Message Type"}),(0,x.jsxs)("select",{value:_.messageType||"",onChange:e=>M("messageType",e.target.value||null),children:[(0,x.jsx)("option",{value:"",children:"All Types"}),(0,x.jsx)("option",{value:"text",children:"Text"}),(0,x.jsx)("option",{value:"image",children:"Image"}),(0,x.jsx)("option",{value:"video",children:"Video"}),(0,x.jsx)("option",{value:"file",children:"File"}),(0,x.jsx)("option",{value:"voice",children:"Voice"})]})]}),(0,x.jsxs)("div",{className:"filter-group",children:[(0,x.jsx)("label",{children:"From Date"}),(0,x.jsx)("input",{type:"date",value:_.dateFrom||"",onChange:e=>M("dateFrom",e.target.value||null)})]}),(0,x.jsxs)("div",{className:"filter-group",children:[(0,x.jsx)("label",{children:"To Date"}),(0,x.jsx)("input",{type:"date",value:_.dateTo||"",onChange:e=>M("dateTo",e.target.value||null)})]}),(0,x.jsxs)("div",{className:"filter-group",children:[(0,x.jsx)("label",{children:"Attachments"}),(0,x.jsxs)("select",{value:null===_.hasAttachments?"":_.hasAttachments.toString(),onChange:e=>{const t=e.target.value;M("hasAttachments",""===t?null:"true"===t)},children:[(0,x.jsx)("option",{value:"",children:"Any"}),(0,x.jsx)("option",{value:"true",children:"With Attachments"}),(0,x.jsx)("option",{value:"false",children:"Without Attachments"})]})]}),(0,x.jsx)("div",{className:"filter-group checkbox-group",children:(0,x.jsxs)("label",{children:[(0,x.jsx)("input",{type:"checkbox",checked:_.fuzzyMatch,onChange:e=>M("fuzzyMatch",e.target.checked)}),(0,x.jsx)("span",{children:"Enable fuzzy matching (typo tolerance)"})]})}),(0,x.jsx)("div",{className:"filter-group checkbox-group",children:(0,x.jsxs)("label",{children:[(0,x.jsx)("input",{type:"checkbox",checked:!!_.conversationId,onChange:e=>M("conversationId",e.target.checked?r:null)}),(0,x.jsx)("span",{children:"Search only in current conversation"})]})})]}),(0,x.jsxs)("div",{className:"filters-actions",children:[(0,x.jsx)("button",{className:"apply-filters-btn",onClick:z,children:"\u2705 Apply Filters"}),(0,x.jsx)("button",{className:"clear-filters-btn",onClick:R,children:"\ud83e\uddf9 Clear Filters"})]})]}),!o&&v.length>0&&(0,x.jsxs)("div",{className:"search-history",children:[(0,x.jsxs)("div",{className:"history-header",children:[(0,x.jsx)("h3",{children:"Recent Searches"}),(0,x.jsx)("button",{className:"clear-history-btn",onClick:H,children:"Clear"})]}),(0,x.jsx)("div",{className:"history-list",children:v.map((e,t)=>(0,x.jsxs)("div",{className:"history-item",onClick:()=>B(e),children:[(0,x.jsxs)("span",{className:"history-query",children:["\ud83d\udd0d ",e.query]}),(0,x.jsxs)("span",{className:"history-count",children:[e.resultCount," results"]})]},t))})]}),(0,x.jsxs)("div",{className:"search-results-container",children:[d&&(0,x.jsxs)("div",{className:"search-loading",children:[(0,x.jsx)("div",{className:"loading-spinner"}),(0,x.jsx)("p",{children:"Searching messages..."})]}),!d&&c.length>0&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)("div",{className:"results-header",children:[(0,x.jsxs)("span",{className:"results-count",children:["Found ",j," result",1!==j?"s":"",' for "',o,'"']}),(0,x.jsxs)("span",{className:"results-page",children:["Page ",b," of ",S]})]}),(0,x.jsx)("div",{className:"search-results",ref:A,children:c.map((e,t)=>(0,x.jsxs)("div",{className:"search-result-item ".concat(t===C?"selected":""," ").concat(e.fuzzyMatch?"fuzzy-match":""),onClick:()=>F(e),children:[(0,x.jsxs)("div",{className:"result-header",children:[(0,x.jsx)("span",{className:"result-user",children:e.userId||"Unknown User"}),(0,x.jsx)("span",{className:"result-timestamp",children:new Date(e.timestamp).toLocaleString()})]}),(0,x.jsx)("div",{className:"result-text",dangerouslySetInnerHTML:{__html:e.highlightedText||e.text}}),e.fuzzyMatch&&(0,x.jsx)("div",{className:"fuzzy-badge",title:"Matched term: ".concat(e.matchedTerm),children:"~ Fuzzy Match"})]},e.messageId))}),S>1&&(0,x.jsxs)("div",{className:"search-pagination",children:[(0,x.jsx)("button",{className:"page-btn",onClick:()=>O(b-1),disabled:1===b,children:"\u2190 Previous"}),(0,x.jsx)("div",{className:"page-numbers",children:Array.from({length:Math.min(S,5)},(e,t)=>{let n;return n=S<=5||b<=3?t+1:b>=S-2?S-4+t:b-2+t,(0,x.jsx)("button",{className:"page-number ".concat(b===n?"active":""),onClick:()=>O(n),children:n},n)})}),(0,x.jsx)("button",{className:"page-btn",onClick:()=>O(b+1),disabled:b===S,children:"Next \u2192"})]})]}),!d&&o&&0===c.length&&(0,x.jsxs)("div",{className:"no-results",children:[(0,x.jsx)("div",{className:"no-results-icon",children:"\ud83d\udd0d"}),(0,x.jsx)("h3",{children:"No results found"}),(0,x.jsx)("p",{children:"Try different keywords or adjust your filters"})]}),!d&&!o&&0===c.length&&(0,x.jsxs)("div",{className:"search-tips",children:[(0,x.jsx)("h3",{children:"\ud83d\udca1 Search Tips"}),(0,x.jsxs)("ul",{children:[(0,x.jsx)("li",{children:"Use specific keywords for better results"}),(0,x.jsx)("li",{children:"Enable fuzzy matching to find messages with typos"}),(0,x.jsx)("li",{children:"Use date filters to narrow down your search"}),(0,x.jsx)("li",{children:"Filter by message type (text, image, video, etc.)"}),(0,x.jsx)("li",{children:"Use keyboard shortcuts: \u2191\u2193 to navigate, Enter to select, Esc to close"})]})]})]}),(0,x.jsxs)("div",{className:"search-shortcuts",children:[(0,x.jsxs)("span",{className:"shortcut",children:[(0,x.jsx)("kbd",{children:"\u2191"})," ",(0,x.jsx)("kbd",{children:"\u2193"})," Navigate"]}),(0,x.jsxs)("span",{className:"shortcut",children:[(0,x.jsx)("kbd",{children:"Enter"})," Select"]}),(0,x.jsxs)("span",{className:"shortcut",children:[(0,x.jsx)("kbd",{children:"Esc"})," Close"]}),(0,x.jsxs)("span",{className:"shortcut",children:[(0,x.jsx)("kbd",{children:"Ctrl"})," + ",(0,x.jsx)("kbd",{children:"F"})," Search"]})]})]})}):null};const O=new class{constructor(){this.isInitialized=!1,this.smartReplyCache=new Map,this.translationCache=new Map,this.sentimentCache=new Map,this.replyPatterns={greetings:{patterns:[/\b(hi|hello|hey|good morning|good afternoon|good evening)\b/i],replies:["\ud83d\udc4b Hello! How are you?","Hey there! \ud83d\ude0a","Hi! What's up?","Hello! Nice to hear from you!","Hey! How's it going?"]},questions:{patterns:[/\bhow are you\b/i,/\bhow's it going\b/i,/\bwhat's up\b/i],replies:["I'm doing great, thanks! How about you?","Pretty good! What about you?","All good here! How are things with you?","Doing well! How's your day going?","Great! Thanks for asking! \ud83d\ude0a"]},thanks:{patterns:[/\b(thank you|thanks|thx|appreciate it)\b/i],replies:["You're welcome! \ud83d\ude0a","No problem!","Happy to help!","Anytime!","My pleasure! \ud83d\udc4d"]},agreement:{patterns:[/\b(yes|yeah|yep|sure|okay|ok|sounds good)\b/i],replies:["\ud83d\udc4d Perfect!","Great! \u2728","Awesome! \ud83c\udf89","Cool! \ud83d\ude0e","Sounds good! \ud83d\udc4c"]},disagreement:{patterns:[/\b(no|nope|nah|not really|disagree)\b/i],replies:["I understand.","No worries!","That's okay!","Got it. \ud83d\udc4d","Fair enough!"]},help:{patterns:[/\b(help|need|problem|issue|stuck)\b/i],replies:["I'm here to help! What's the issue?","What do you need help with?","I'd be happy to assist! What's up?","Let me help you with that!","Tell me more about the problem."]},apology:{patterns:[/\b(sorry|apologize|my bad|oops)\b/i],replies:["No worries at all! \ud83d\ude0a","It's all good!","Don't worry about it!","No problem whatsoever!","All is forgiven! \ud83d\udc99"]},meeting:{patterns:[/\b(meet|meeting|call|schedule|appointment)\b/i],replies:["\ud83d\udcc5 When works best for you?","Sure! What time is good?","Let's schedule it! When are you free?","I'm available. What day works?","Great! Let me know your availability."]},goodbye:{patterns:[/\b(bye|goodbye|see you|talk later|ttyl)\b/i],replies:["\ud83d\udc4b See you later!","Goodbye! Take care!","Talk to you soon! \ud83d\ude0a","Bye! Have a great day!","See ya! \ud83d\udc4b"]},excitement:{patterns:[/\b(awesome|amazing|great|fantastic|excellent|wonderful)\b/i],replies:["\ud83c\udf89 That's fantastic!","So happy for you! \u2728","Awesome! \ud83d\ude4c","That's wonderful news!","Incredible! \ud83d\ude04"]}},this.sentimentKeywords={positive:["happy","great","good","excellent","awesome","love","wonderful","fantastic","amazing","perfect","thanks","appreciate"],negative:["bad","terrible","awful","hate","angry","upset","disappointed","sad","sorry","problem","issue","wrong"],neutral:["okay","fine","alright","maybe","perhaps","think","consider","understand"]},this.emojiSuggestions={happy:["\ud83d\ude0a","\ud83d\ude04","\ud83c\udf89","\u2728","\ud83d\udc99","\ud83c\udf1f"],sad:["\ud83d\ude22","\ud83d\ude14","\ud83d\udc94","\ud83d\ude1e","\ud83e\udd7a"],angry:["\ud83d\ude20","\ud83d\ude21","\ud83d\udca2","\ud83e\udd2c"],love:["\u2764\ufe0f","\ud83d\udc95","\ud83d\udc96","\ud83d\ude0d","\ud83e\udd70"],laugh:["\ud83d\ude02","\ud83e\udd23","\ud83d\ude06","\ud83d\ude01"],thinking:["\ud83e\udd14","\ud83d\udcad","\ud83e\uddd0"],celebration:["\ud83c\udf89","\ud83c\udf8a","\ud83e\udd73","\ud83c\udf7e","\u2728"],work:["\ud83d\udcbc","\ud83d\udcca","\ud83d\udcbb","\ud83d\udcdd","\u2705"],food:["\ud83c\udf55","\ud83c\udf54","\ud83c\udf70","\u2615","\ud83c\udf5c"]},this.initialize()}async initialize(){try{console.log("\ud83e\udd16 Initializing AI Service..."),this.capabilities={translation:"Intl"in window,textAnalysis:!0,speechRecognition:"webkitSpeechRecognition"in window||"SpeechRecognition"in window},this.isInitialized=!0,console.log("\u2705 AI Service initialized",this.capabilities)}catch(e){console.error("\u274c Failed to initialize AI Service:",e)}}async generateSmartReplies(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];try{const n="".concat(e,"-").concat(t.length);if(this.smartReplyCache.has(n))return this.smartReplyCache.get(n);const a=[],s=e.text||e,r=s.toLowerCase();for(const[e,t]of Object.entries(this.replyPatterns))for(const n of t.patterns)if(n.test(r)){const n=this.getRandomReplies(t.replies,2);a.push(...n.map(t=>({text:t,category:e,confidence:.8+.2*Math.random()})))}if(t.length>0){const e=this.generateContextualReplies(s,t);a.push(...e)}const o=this.suggestEmoji(s);o&&a.push(o);const i=this.deduplicateReplies(a).sort((e,t)=>t.confidence-e.confidence).slice(0,6);return this.smartReplyCache.set(n,i),i}catch(n){return console.error("Failed to generate smart replies:",n),[]}}generateContextualReplies(e,t){const n=[];return e.includes("?")&&n.push({text:"Yes, absolutely! \u2705",category:"contextual",confidence:.75},{text:"No, not really.",category:"contextual",confidence:.75},{text:"Let me think about it \ud83e\udd14",category:"contextual",confidence:.7}),/\b(when|time|date|schedule)\b/i.test(e)&&n.push({text:"How about tomorrow?",category:"contextual",confidence:.8},{text:"I'm free this week!",category:"contextual",confidence:.8}),/\b(confirm|verify|check|make sure)\b/i.test(e)&&n.push({text:"Confirmed! \u2705",category:"contextual",confidence:.85},{text:"Yes, I can confirm that.",category:"contextual",confidence:.85}),n}suggestEmoji(e){const t=e.toLowerCase();if(/\b(happy|joy|great|awesome|love|wonderful)\b/i.test(t)){return{text:this.emojiSuggestions.happy[0],category:"emoji",confidence:.7,isEmoji:!0}}if(/\b(haha|lol|funny|hilarious)\b/i.test(t)){return{text:this.emojiSuggestions.laugh[0],category:"emoji",confidence:.7,isEmoji:!0}}if(/\b(think|wonder|consider|maybe)\b/i.test(t)){return{text:this.emojiSuggestions.thinking[0],category:"emoji",confidence:.65,isEmoji:!0}}if(/\b(celebrate|party|congrats|yay)\b/i.test(t)){return{text:this.emojiSuggestions.celebration[0],category:"emoji",confidence:.75,isEmoji:!0}}return null}async analyzeSentiment(e){try{const t=e.text||e,n=t.toLowerCase().split(/\s+/);let a=0,s=0,r=0;n.forEach(e=>{this.sentimentKeywords.positive.some(t=>e.includes(t))&&a++,this.sentimentKeywords.negative.some(t=>e.includes(t))&&s++,this.sentimentKeywords.neutral.some(t=>e.includes(t))&&r++}),/!+/.test(t)&&(a+=.5),/\?{2,}/.test(t)&&(r+=.5),/\.{3,}/.test(t)&&(r+=.5);const o=t.match(/(?:\uD83D[\uDE00-\uDE4F])/g)||[];o.length>0&&(a+=.3*o.length);const i=a+s+r||1;return{positive:a/i,negative:s/i,neutral:r/i,overall:a>s?"positive":s>a?"negative":"neutral",confidence:Math.max(a,s,r)/i,score:(a-s)/i}}catch(t){return console.error("Failed to analyze sentiment:",t),{positive:.33,negative:.33,neutral:.34,overall:"neutral",confidence:.5,score:0}}}async translateMessage(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"auto";try{const a="".concat(e,"-").concat(n,"-").concat(t);if(this.translationCache.has(a))return this.translationCache.get(a);const s={text:e,sourceLanguage:"auto"===n?this.detectLanguage(e):n,targetLanguage:t,confidence:.85,translatedText:await this.mockTranslate(e,t)};return this.translationCache.set(a,s),s}catch(a){return console.error("Translation failed:",a),{text:e,sourceLanguage:"unknown",targetLanguage:t,confidence:0,translatedText:e,error:a.message}}}async mockTranslate(e,t){const n=e.toLowerCase(),a={es:{hello:"hola",goodbye:"adi\xf3s",thanks:"gracias"},fr:{hello:"bonjour",goodbye:"au revoir",thanks:"merci"},de:{hello:"hallo",goodbye:"auf wiedersehen",thanks:"danke"},it:{hello:"ciao",goodbye:"arrivederci",thanks:"grazie"},pt:{hello:"ol\xe1",goodbye:"tchau",thanks:"obrigado"},ja:{hello:"\u3053\u3093\u306b\u3061\u306f",goodbye:"\u3055\u3088\u3046\u306a\u3089",thanks:"\u3042\u308a\u304c\u3068\u3046"},zh:{hello:"\u4f60\u597d",goodbye:"\u518d\u89c1",thanks:"\u8c22\u8c22"}}[t];if(a){if(n.includes("hello")||n.includes("hi"))return a.hello;if(n.includes("bye")||n.includes("goodbye"))return a.goodbye;if(n.includes("thank"))return a.thanks}return"[".concat(t,"] ").concat(e)}detectLanguage(e){return/[\u4e00-\u9fa5]/.test(e)?"zh":/[\u3040-\u309f\u30a0-\u30ff]/.test(e)?"ja":/[\u0600-\u06ff]/.test(e)?"ar":/[\u0400-\u04ff]/.test(e)?"ru":/[\u0e00-\u0e7f]/.test(e)?"th":"en"}async enhanceMessage(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{tone:n="neutral",fixGrammar:a=!0,addEmoji:s=!1}=t;try{let t=e;if(a&&(t=this.fixCommonGrammar(t)),t=this.adjustTone(t,n),s){const e=this.getSuggestedEmojiForTone(n);e&&(t+=" ".concat(e))}return{original:e,enhanced:t,changes:this.getChanges(e,t),tone:n}}catch(r){return console.error("Failed to enhance message:",r),{original:e,enhanced:e,changes:[],tone:n,error:r.message}}}fixCommonGrammar(e){let t=e;t=t.charAt(0).toUpperCase()+t.slice(1);return Object.entries({teh:"the",recieve:"receive",definately:"definitely",seperate:"separate",occured:"occurred",untill:"until",wierd:"weird"}).forEach(e=>{let[n,a]=e;const s=new RegExp("\\b".concat(n,"\\b"),"gi");t=t.replace(s,a)}),/[.!?]$/.test(t)||(t+="."),t}adjustTone(e,t){switch(t){case"professional":return e.replace(/\b(hey|hi)\b/gi,"Hello").replace(/\b(yeah|yep)\b/gi,"Yes").replace(/\b(nope|nah)\b/gi,"No").replace(/\b(gonna)\b/gi,"going to").replace(/\b(wanna)\b/gi,"want to");case"casual":return e.replace(/\bHello\b/g,"Hey").replace(/\bYes\b/g,"Yeah").replace(/\bNo\b/g,"Nope");case"friendly":return e.includes("!")||(e=e.replace(/\.$/,"!")),e;case"formal":return e.replace(/!/g,".").replace(/\b(hi|hey)\b/gi,"Greetings").replace(/\b(thanks)\b/gi,"Thank you");default:return e}}getSuggestedEmojiForTone(e){return{casual:"\ud83d\ude0a",professional:"\ud83d\udce7",friendly:"\ud83c\udf1f",formal:"",happy:"\ud83d\ude04",excited:"\ud83c\udf89"}[e]||""}getChanges(e,t){const n=[];return e!==t&&n.push({type:"text",from:e,to:t}),n}getRandomReplies(e,t){return[...e].sort(()=>Math.random()-.5).slice(0,t)}deduplicateReplies(e){const t=new Set;return e.filter(e=>{const n=e.text.toLowerCase();return!t.has(n)&&(t.add(n),!0)})}async autoComplete(e){const t=[],n=e.toLowerCase();return n.startsWith("how ")?t.push("How are you?","How can I help?","How about tomorrow?"):n.startsWith("what ")?t.push("What do you think?","What time works?","What about later?"):n.startsWith("can ")&&t.push("Can we schedule a call?","Can you help me?","Can we meet?"),t.slice(0,3)}clearCaches(){this.smartReplyCache.clear(),this.translationCache.clear(),this.sentimentCache.clear()}getStats(){return{initialized:this.isInitialized,capabilities:this.capabilities,cacheSize:{smartReplies:this.smartReplyCache.size,translations:this.translationCache.size,sentiment:this.sentimentCache.size}}}},U=t=>{let{lastMessage:n,conversationHistory:a=[],onReplySelect:s,onClose:r,isVisible:o=!1}=t;const[i,l]=(0,e.useState)([]),[c,u]=(0,e.useState)(!1),[d,h]=(0,e.useState)(null);(0,e.useEffect)(()=>{n&&o&&(m(),p())},[n,o]);const m=(0,e.useCallback)(async()=>{if(n){u(!0);try{const e=await O.generateSmartReplies(n,a);l(e)}catch(e){console.error("Failed to generate smart replies:",e),l([])}finally{u(!1)}}},[n,a]),p=(0,e.useCallback)(async()=>{if(n)try{const e=await O.analyzeSentiment(n);h(e)}catch(e){console.error("Failed to analyze sentiment:",e)}},[n]);return o?(0,x.jsxs)("div",{className:"smart-replies-panel",children:[(0,x.jsxs)("div",{className:"smart-replies-header",children:[(0,x.jsxs)("div",{className:"header-left",children:[(0,x.jsx)("span",{className:"ai-icon",children:"\ud83e\udd16"}),(0,x.jsx)("h4",{children:"Smart Replies"})]}),d&&(0,x.jsxs)("div",{className:"sentiment-indicator",style:{color:d?"positive"===d.overall?"#10b981":"negative"===d.overall?"#ef4444":"#6b7280":"#9ca3af"},children:[(0,x.jsx)("span",{className:"sentiment-emoji",children:d?"positive"===d.overall?"\ud83d\ude0a":"negative"===d.overall?"\ud83d\ude1f":"\ud83d\ude10":"\ud83d\ude10"}),(0,x.jsx)("span",{className:"sentiment-label",children:d.overall})]})]}),c&&(0,x.jsxs)("div",{className:"smart-replies-loading",children:[(0,x.jsx)("div",{className:"loading-spinner"}),(0,x.jsx)("p",{children:"Generating suggestions..."})]}),!c&&i.length>0&&(0,x.jsx)("div",{className:"smart-replies-list",children:i.map((e,t)=>(0,x.jsxs)("button",{className:"smart-reply-btn ".concat(e.isEmoji?"emoji-reply":""),onClick:()=>(e=>{s&&s(e.text)})(e),title:"".concat(Math.round(100*e.confidence),"% confidence"),children:[(0,x.jsx)("span",{className:"reply-text",children:e.text}),e.confidence>.8&&!e.isEmoji&&(0,x.jsx)("span",{className:"confidence-badge",children:"\u2728"}),e.category&&!e.isEmoji&&(0,x.jsx)("span",{className:"category-tag",children:e.category})]},t))}),!c&&0===i.length&&(0,x.jsxs)("div",{className:"smart-replies-empty",children:[(0,x.jsx)("span",{className:"empty-icon",children:"\ud83d\udcad"}),(0,x.jsx)("p",{children:"No suggestions available"})]}),(0,x.jsxs)("div",{className:"smart-replies-footer",children:[(0,x.jsx)("button",{className:"refresh-btn",onClick:m,children:"\ud83d\udd04 Refresh"}),(0,x.jsx)("span",{className:"ai-powered",children:"Powered by AI"})]})]}):null},B=t=>{let{message:n,onTranslate:a,onEnhance:s,onClose:r,isVisible:o=!1}=t;const[i,l]=(0,e.useState)("translate"),[c,u]=(0,e.useState)("es"),[d,h]=(0,e.useState)("professional"),[m,p]=(0,e.useState)(!1),[f,g]=(0,e.useState)(null);return o?(0,x.jsxs)("div",{className:"ai-enhancement-panel",children:[(0,x.jsxs)("div",{className:"enhancement-header",children:[(0,x.jsx)("h4",{children:"\ud83e\udd16 AI Enhancement"}),(0,x.jsx)("button",{className:"close-btn",onClick:r,children:"\xd7"})]}),(0,x.jsxs)("div",{className:"enhancement-tabs",children:[(0,x.jsx)("button",{className:"tab-btn ".concat("translate"===i?"active":""),onClick:()=>l("translate"),children:"\ud83c\udf10 Translate"}),(0,x.jsx)("button",{className:"tab-btn ".concat("enhance"===i?"active":""),onClick:()=>l("enhance"),children:"\u2728 Enhance"})]}),(0,x.jsxs)("div",{className:"original-message",children:[(0,x.jsx)("div",{className:"message-label",children:"Original:"}),(0,x.jsx)("div",{className:"message-text",children:(null===n||void 0===n?void 0:n.text)||n})]}),"translate"===i&&(0,x.jsxs)("div",{className:"translate-content",children:[(0,x.jsxs)("div",{className:"language-selector",children:[(0,x.jsx)("label",{children:"Target Language:"}),(0,x.jsx)("div",{className:"language-grid",children:[{code:"es",name:"Spanish",flag:"\ud83c\uddea\ud83c\uddf8"},{code:"fr",name:"French",flag:"\ud83c\uddeb\ud83c\uddf7"},{code:"de",name:"German",flag:"\ud83c\udde9\ud83c\uddea"},{code:"it",name:"Italian",flag:"\ud83c\uddee\ud83c\uddf9"},{code:"pt",name:"Portuguese",flag:"\ud83c\uddf5\ud83c\uddf9"},{code:"ja",name:"Japanese",flag:"\ud83c\uddef\ud83c\uddf5"},{code:"zh",name:"Chinese",flag:"\ud83c\udde8\ud83c\uddf3"},{code:"ko",name:"Korean",flag:"\ud83c\uddf0\ud83c\uddf7"},{code:"ar",name:"Arabic",flag:"\ud83c\uddf8\ud83c\udde6"},{code:"ru",name:"Russian",flag:"\ud83c\uddf7\ud83c\uddfa"}].map(e=>(0,x.jsxs)("button",{className:"language-btn ".concat(c===e.code?"active":""),onClick:()=>u(e.code),children:[(0,x.jsx)("span",{className:"flag",children:e.flag}),(0,x.jsx)("span",{className:"lang-name",children:e.name})]},e.code))})]}),(0,x.jsx)("button",{className:"action-btn translate-btn",onClick:async()=>{if(n){p(!0);try{const e=n.text||n,t=await O.translateMessage(e,c);g(t),a&&a(t)}catch(e){console.error("Translation failed:",e)}finally{p(!1)}}},disabled:m,children:m?"\u23f3 Translating...":"\ud83c\udf10 Translate Now"})]}),"enhance"===i&&(0,x.jsxs)("div",{className:"enhance-content",children:[(0,x.jsxs)("div",{className:"tone-selector",children:[(0,x.jsx)("label",{children:"Select Tone:"}),(0,x.jsx)("div",{className:"tone-grid",children:[{value:"professional",label:"Professional",icon:"\ud83d\udcbc"},{value:"casual",label:"Casual",icon:"\ud83d\ude0a"},{value:"friendly",label:"Friendly",icon:"\ud83c\udf1f"},{value:"formal",label:"Formal",icon:"\ud83c\udfa9"}].map(e=>(0,x.jsxs)("button",{className:"tone-btn ".concat(d===e.value?"active":""),onClick:()=>h(e.value),children:[(0,x.jsx)("span",{className:"tone-icon",children:e.icon}),(0,x.jsx)("span",{className:"tone-label",children:e.label})]},e.value))})]}),(0,x.jsxs)("div",{className:"enhancement-options",children:[(0,x.jsxs)("label",{className:"checkbox-label",children:[(0,x.jsx)("input",{type:"checkbox",defaultChecked:!0}),(0,x.jsx)("span",{children:"Fix grammar & spelling"})]}),(0,x.jsxs)("label",{className:"checkbox-label",children:[(0,x.jsx)("input",{type:"checkbox",defaultChecked:!0}),(0,x.jsx)("span",{children:"Add appropriate emoji"})]})]}),(0,x.jsx)("button",{className:"action-btn enhance-btn",onClick:async()=>{if(n){p(!0);try{const e=n.text||n,t=await O.enhanceMessage(e,{tone:d,fixGrammar:!0,addEmoji:!0});g(t),s&&s(t)}catch(e){console.error("Enhancement failed:",e)}finally{p(!1)}}},disabled:m,children:m?"\u23f3 Enhancing...":"\u2728 Enhance Message"})]}),f&&(0,x.jsxs)("div",{className:"result-section",children:[(0,x.jsxs)("div",{className:"result-header",children:[(0,x.jsx)("span",{className:"result-label",children:"translate"===i?"\ud83c\udf10 Translation:":"\u2728 Enhanced:"}),(0,x.jsx)("button",{className:"copy-btn",onClick:()=>(async e=>{try{await navigator.clipboard.writeText(e),alert("Copied to clipboard!")}catch(t){console.error("Failed to copy:",t)}})("translate"===i?f.translatedText:f.enhanced),children:"\ud83d\udccb Copy"})]}),(0,x.jsx)("div",{className:"result-text",children:"translate"===i?f.translatedText:f.enhanced}),"translate"===i&&f.confidence&&(0,x.jsxs)("div",{className:"result-meta",children:[(0,x.jsxs)("span",{className:"confidence-badge",children:["Confidence: ",Math.round(100*f.confidence),"%"]}),(0,x.jsxs)("span",{className:"lang-badge",children:[f.sourceLanguage," \u2192 ",f.targetLanguage]})]}),"enhance"===i&&f.changes&&f.changes.length>0&&(0,x.jsxs)("div",{className:"result-meta",children:[(0,x.jsxs)("span",{className:"changes-badge",children:[f.changes.length," change",1!==f.changes.length?"s":""," made"]}),(0,x.jsxs)("span",{className:"tone-badge",children:["Tone: ",f.tone]})]})]}),(0,x.jsx)("div",{className:"enhancement-footer",children:(0,x.jsx)("span",{className:"ai-notice",children:"\u26a1 Powered by AI \u2022 Results may vary"})})]}):null},H=t=>{let{isOpen:n,onClose:a,onCall:s,initialNumber:r=""}=t;const[o,i]=(0,e.useState)(r),[l,c]=(0,e.useState)("US"),[u,d]=(0,e.useState)(""),[h,m]=(0,e.useState)(!1),[p,f]=(0,e.useState)([]),[g,v]=(0,e.useState)(!1),y=[{code:"US",name:"United States",dialCode:"+1",flag:"\ud83c\uddfa\ud83c\uddf8"},{code:"CA",name:"Canada",dialCode:"+1",flag:"\ud83c\udde8\ud83c\udde6"},{code:"GB",name:"United Kingdom",dialCode:"+44",flag:"\ud83c\uddec\ud83c\udde7"},{code:"DE",name:"Germany",dialCode:"+49",flag:"\ud83c\udde9\ud83c\uddea"},{code:"FR",name:"France",dialCode:"+33",flag:"\ud83c\uddeb\ud83c\uddf7"},{code:"IT",name:"Italy",dialCode:"+39",flag:"\ud83c\uddee\ud83c\uddf9"},{code:"ES",name:"Spain",dialCode:"+34",flag:"\ud83c\uddea\ud83c\uddf8"},{code:"NL",name:"Netherlands",dialCode:"+31",flag:"\ud83c\uddf3\ud83c\uddf1"},{code:"AU",name:"Australia",dialCode:"+61",flag:"\ud83c\udde6\ud83c\uddfa"},{code:"JP",name:"Japan",dialCode:"+81",flag:"\ud83c\uddef\ud83c\uddf5"},{code:"KR",name:"South Korea",dialCode:"+82",flag:"\ud83c\uddf0\ud83c\uddf7"},{code:"CN",name:"China",dialCode:"+86",flag:"\ud83c\udde8\ud83c\uddf3"},{code:"IN",name:"India",dialCode:"+91",flag:"\ud83c\uddee\ud83c\uddf3"},{code:"BR",name:"Brazil",dialCode:"+55",flag:"\ud83c\udde7\ud83c\uddf7"},{code:"MX",name:"Mexico",dialCode:"+52",flag:"\ud83c\uddf2\ud83c\uddfd"},{code:"RU",name:"Russia",dialCode:"+7",flag:"\ud83c\uddf7\ud83c\uddfa"},{code:"ZA",name:"South Africa",dialCode:"+27",flag:"\ud83c\uddff\ud83c\udde6"},{code:"EG",name:"Egypt",dialCode:"+20",flag:"\ud83c\uddea\ud83c\uddec"},{code:"NG",name:"Nigeria",dialCode:"+234",flag:"\ud83c\uddf3\ud83c\uddec"},{code:"KE",name:"Kenya",dialCode:"+254",flag:"\ud83c\uddf0\ud83c\uddea"},{code:"SG",name:"Singapore",dialCode:"+65",flag:"\ud83c\uddf8\ud83c\uddec"},{code:"TH",name:"Thailand",dialCode:"+66",flag:"\ud83c\uddf9\ud83c\uddad"},{code:"VN",name:"Vietnam",dialCode:"+84",flag:"\ud83c\uddfb\ud83c\uddf3"},{code:"PH",name:"Philippines",dialCode:"+63",flag:"\ud83c\uddf5\ud83c\uddad"},{code:"ID",name:"Indonesia",dialCode:"+62",flag:"\ud83c\uddee\ud83c\udde9"},{code:"MY",name:"Malaysia",dialCode:"+60",flag:"\ud83c\uddf2\ud83c\uddfe"},{code:"PK",name:"Pakistan",dialCode:"+92",flag:"\ud83c\uddf5\ud83c\uddf0"},{code:"BD",name:"Bangladesh",dialCode:"+880",flag:"\ud83c\udde7\ud83c\udde9"},{code:"LK",name:"Sri Lanka",dialCode:"+94",flag:"\ud83c\uddf1\ud83c\uddf0"},{code:"AE",name:"UAE",dialCode:"+971",flag:"\ud83c\udde6\ud83c\uddea"},{code:"SA",name:"Saudi Arabia",dialCode:"+966",flag:"\ud83c\uddf8\ud83c\udde6"},{code:"TR",name:"Turkey",dialCode:"+90",flag:"\ud83c\uddf9\ud83c\uddf7"},{code:"IL",name:"Israel",dialCode:"+972",flag:"\ud83c\uddee\ud83c\uddf1"},{code:"AR",name:"Argentina",dialCode:"+54",flag:"\ud83c\udde6\ud83c\uddf7"},{code:"CL",name:"Chile",dialCode:"+56",flag:"\ud83c\udde8\ud83c\uddf1"},{code:"CO",name:"Colombia",dialCode:"+57",flag:"\ud83c\udde8\ud83c\uddf4"},{code:"PE",name:"Peru",dialCode:"+51",flag:"\ud83c\uddf5\ud83c\uddea"}];(0,e.useEffect)(()=>{const e=JSON.parse(localStorage.getItem("international_call_history")||"[]");f(e)},[]);const b=y.find(e=>e.code===l)||y[0],w=y.filter(e=>e.name.toLowerCase().includes(u.toLowerCase())||e.dialCode.includes(u)||e.code.toLowerCase().includes(u.toLowerCase())),S=e=>{i(t=>t+e)},k=()=>o.length>=3;return n?(0,x.jsx)("div",{className:"dialer-overlay",onClick:e=>{e.target===e.currentTarget&&a()},children:(0,x.jsxs)("div",{className:"dialer-modal",children:[(0,x.jsxs)("div",{className:"dialer-header",children:[(0,x.jsx)("h3",{children:"\ud83c\udf0d International Dialer"}),(0,x.jsx)("button",{className:"close-btn",onClick:a,children:"\xd7"})]}),(0,x.jsxs)("div",{className:"dialer-content",children:[(0,x.jsxs)("div",{className:"country-selector",children:[(0,x.jsxs)("button",{className:"country-btn",onClick:()=>m(!h),children:[(0,x.jsx)("span",{className:"country-flag",children:b.flag}),(0,x.jsxs)("span",{className:"country-info",children:[(0,x.jsx)("span",{className:"country-name",children:b.name}),(0,x.jsx)("span",{className:"country-code",children:b.dialCode})]}),(0,x.jsx)("span",{className:"dropdown-arrow",children:"\u25bc"})]}),h&&(0,x.jsxs)("div",{className:"country-dropdown",children:[(0,x.jsx)("div",{className:"country-search",children:(0,x.jsx)("input",{type:"text",placeholder:"Search countries...",value:u,onChange:e=>d(e.target.value),className:"country-search-input"})}),(0,x.jsx)("div",{className:"country-list",children:w.map(e=>(0,x.jsxs)("button",{className:"country-item",onClick:()=>(e=>{c(e.code),m(!1),d("")})(e),children:[(0,x.jsx)("span",{className:"country-flag",children:e.flag}),(0,x.jsxs)("span",{className:"country-details",children:[(0,x.jsx)("span",{className:"country-name",children:e.name}),(0,x.jsx)("span",{className:"country-code",children:e.dialCode})]})]},e.code))})]})]}),(0,x.jsxs)("div",{className:"number-display",children:[(0,x.jsx)("input",{type:"text",value:(j=o,N=b,j?"".concat(N.dialCode," ").concat(j):N.dialCode),readOnly:!0,className:"number-input",placeholder:"".concat(b.dialCode," Enter number")}),(0,x.jsxs)("div",{className:"display-actions",children:[o&&(0,x.jsx)("button",{className:"clear-btn",onClick:()=>{i("")},children:"\ud83d\uddd1\ufe0f"}),(0,x.jsx)("button",{className:"history-btn",onClick:()=>v(!g),title:"Call History",children:"\ud83d\udd70\ufe0f"})]})]}),g&&p.length>0&&(0,x.jsxs)("div",{className:"call-history",children:[(0,x.jsx)("h4",{children:"Recent Calls"}),(0,x.jsx)("div",{className:"history-list",children:p.slice(0,5).map(e=>(0,x.jsxs)("button",{className:"history-item",onClick:()=>{return c((t=e).country.code),i(t.localNumber),void v(!1);var t},children:[(0,x.jsx)("span",{className:"history-flag",children:e.country.flag}),(0,x.jsx)("span",{className:"history-number",children:e.number}),(0,x.jsx)("span",{className:"history-time",children:new Date(e.timestamp).toLocaleDateString()})]},e.id))})]}),(0,x.jsxs)("div",{className:"number-pad",children:[(0,x.jsxs)("div",{className:"pad-row",children:[(0,x.jsx)("button",{onClick:()=>S("1"),children:"1"}),(0,x.jsxs)("button",{onClick:()=>S("2"),children:["2",(0,x.jsx)("span",{children:"ABC"})]}),(0,x.jsxs)("button",{onClick:()=>S("3"),children:["3",(0,x.jsx)("span",{children:"DEF"})]})]}),(0,x.jsxs)("div",{className:"pad-row",children:[(0,x.jsxs)("button",{onClick:()=>S("4"),children:["4",(0,x.jsx)("span",{children:"GHI"})]}),(0,x.jsxs)("button",{onClick:()=>S("5"),children:["5",(0,x.jsx)("span",{children:"JKL"})]}),(0,x.jsxs)("button",{onClick:()=>S("6"),children:["6",(0,x.jsx)("span",{children:"MNO"})]})]}),(0,x.jsxs)("div",{className:"pad-row",children:[(0,x.jsxs)("button",{onClick:()=>S("7"),children:["7",(0,x.jsx)("span",{children:"PQRS"})]}),(0,x.jsxs)("button",{onClick:()=>S("8"),children:["8",(0,x.jsx)("span",{children:"TUV"})]}),(0,x.jsxs)("button",{onClick:()=>S("9"),children:["9",(0,x.jsx)("span",{children:"WXYZ"})]})]}),(0,x.jsxs)("div",{className:"pad-row",children:[(0,x.jsx)("button",{onClick:()=>S("*"),children:"*"}),(0,x.jsxs)("button",{onClick:()=>S("0"),children:["0",(0,x.jsx)("span",{children:"+"})]}),(0,x.jsx)("button",{onClick:()=>S("#"),children:"#"})]})]}),(0,x.jsxs)("div",{className:"dialer-actions",children:[(0,x.jsx)("button",{className:"backspace-btn",onClick:()=>{i(e=>e.slice(0,-1))},disabled:!o,children:"\u232b"}),(0,x.jsx)("button",{className:"call-btn ".concat(k()?"enabled":"disabled"),onClick:()=>{if(!k())return void alert("Please enter a valid phone number");const e="".concat(b.dialCode).concat(o),t=[{id:Date.now(),number:e,country:b,localNumber:o,timestamp:(new Date).toISOString(),type:"outgoing"},...p.slice(0,49)];f(t),localStorage.setItem("international_call_history",JSON.stringify(t)),s&&s({number:e,country:b,localNumber:o}),a()},disabled:!k(),children:"\ud83d\udcde Call"})]})]})]})}):null;var j,N};const q=new class{constructor(){this.threads=new Map,this.messageToThread=new Map,this.listeners={onThreadCreated:[],onReplyAdded:[],onThreadUpdated:[],onThreadDeleted:[]},this.initialized=!1,console.log("\ud83d\udcac Message Thread Service created")}async initialize(){try{return console.log("\ud83d\udd04 Initializing Message Thread Service..."),await this.loadThreadsFromStorage(),this.initialized=!0,console.log("\u2705 Message Thread Service initialized"),!0}catch(e){return console.error("\u274c Failed to initialize thread service:",e),!1}}createThread(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};try{const a=e.id;if(!this.threads.has(a)){const t=i({id:a,parentMessage:e,replies:[],createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString(),replyCount:0,participants:new Set([e.user.id]),isCollapsed:!1},n);this.threads.set(a,t),console.log("\ud83d\udcdd Created new thread:",a)}return this.addReply(a,t),this.emit("onThreadCreated",{threadId:a,thread:this.threads.get(a)}),this.threads.get(a)}catch(a){return console.error("\u274c Failed to create thread:",a),null}}addReply(e,t){try{const n=this.threads.get(e);if(!n)return console.warn("\u26a0\ufe0f Thread not found:",e),!1;const a=i(i({},t),{},{threadId:e,replyTo:e,depth:this.calculateReplyDepth(e,t.id),createdAt:t.timestamp||(new Date).toISOString()});return n.replies.push(a),n.replyCount=n.replies.length,n.updatedAt=(new Date).toISOString(),n.participants.add(t.user.id),this.messageToThread.set(t.id,e),this.saveThreadToStorage(n),this.emit("onReplyAdded",{threadId:e,reply:a,thread:n}),console.log("\ud83d\udcac Added reply to thread:",e,"Reply count:",n.replyCount),!0}catch(n){return console.error("\u274c Failed to add reply:",n),!1}}calculateReplyDepth(e,t){return 1}getThread(e){if(this.threads.has(e))return this.threads.get(e);const t=this.messageToThread.get(e);return t?this.threads.get(t):null}getAllThreads(){return Array.from(this.threads.values()).sort((e,t)=>new Date(t.updatedAt)-new Date(e.updatedAt))}getThreadsForConversation(e){return this.getAllThreads().filter(t=>t.parentMessage.conversationId===e)}getReplies(e){const t=this.threads.get(e);return t?t.replies:[]}toggleThreadCollapse(e){const t=this.threads.get(e);return!!t&&(t.isCollapsed=!t.isCollapsed,this.emit("onThreadUpdated",{threadId:e,thread:t}),t.isCollapsed)}deleteThread(e){try{const t=this.threads.get(e);return!!t&&(t.replies.forEach(e=>{this.messageToThread.delete(e.id)}),this.threads.delete(e),this.removeThreadFromStorage(e),this.emit("onThreadDeleted",{threadId:e}),console.log("\ud83d\uddd1\ufe0f Deleted thread:",e),!0)}catch(t){return console.error("\u274c Failed to delete thread:",t),!1}}deleteReply(e,t){try{const n=this.threads.get(e);if(!n)return!1;const a=n.replies.findIndex(e=>e.id===t);return a>-1&&(n.replies.splice(a,1),n.replyCount=n.replies.length,n.updatedAt=(new Date).toISOString(),this.messageToThread.delete(t),this.saveThreadToStorage(n),this.emit("onThreadUpdated",{threadId:e,thread:n}),console.log("\ud83d\uddd1\ufe0f Deleted reply from thread:",e),!0)}catch(n){return console.error("\u274c Failed to delete reply:",n),!1}}isInThread(e){return this.threads.has(e)||this.messageToThread.has(e)}hasReplies(e){const t=this.threads.get(e);return t&&t.replies.length>0}getReplyCount(e){const t=this.threads.get(e);return t?t.replyCount:0}getThreadParticipants(e){const t=this.threads.get(e);return t?Array.from(t.participants):[]}searchThreads(e){const t=e.toLowerCase();return this.getAllThreads().filter(e=>!!e.parentMessage.text.toLowerCase().includes(t)||e.replies.some(e=>e.text.toLowerCase().includes(t)))}getThreadStats(e){var t,n;const a=this.threads.get(e);return a?{replyCount:a.replyCount,participantCount:a.participants.size,firstReplyAt:null===(t=a.replies[0])||void 0===t?void 0:t.createdAt,lastReplyAt:null===(n=a.replies[a.replies.length-1])||void 0===n?void 0:n.createdAt,isActive:this.isThreadActive(a)}:null}isThreadActive(e){if(!e.updatedAt)return!1;const t=new Date(e.updatedAt);return(new Date-t)/36e5<24}async loadThreadsFromStorage(){try{const e=(await this.openDatabase()).transaction(["threads"],"readonly"),t=e.objectStore("threads").getAll();return new Promise((e,n)=>{t.onsuccess=()=>{const n=t.result;n.forEach(e=>{e.participants=new Set(e.participants),this.threads.set(e.id,e),e.replies.forEach(t=>{this.messageToThread.set(t.id,e.id)})}),console.log("\ud83d\udcda Loaded ".concat(n.length," threads from storage")),e()},t.onerror=()=>{console.error("\u274c Failed to load threads:",t.error),n(t.error)}})}catch(e){console.error("\u274c Error loading threads:",e)}}async saveThreadToStorage(e){try{const t=(await this.openDatabase()).transaction(["threads"],"readwrite"),n=t.objectStore("threads"),a=i(i({},e),{},{participants:Array.from(e.participants)});return n.put(a),new Promise((e,n)=>{t.oncomplete=()=>e(),t.onerror=()=>n(t.error)})}catch(t){console.error("\u274c Error saving thread:",t)}}async removeThreadFromStorage(e){try{const t=(await this.openDatabase()).transaction(["threads"],"readwrite");return t.objectStore("threads").delete(e),new Promise((e,n)=>{t.oncomplete=()=>e(),t.onerror=()=>n(t.error)})}catch(t){console.error("\u274c Error removing thread:",t)}}async openDatabase(){return new Promise((e,t)=>{const n=indexedDB.open("QuibishThreads",1);n.onupgradeneeded=e=>{const t=e.target.result;if(!t.objectStoreNames.contains("threads")){const e=t.createObjectStore("threads",{keyPath:"id"});e.createIndex("conversationId","parentMessage.conversationId",{unique:!1}),e.createIndex("updatedAt","updatedAt",{unique:!1})}},n.onsuccess=()=>e(n.result),n.onerror=()=>t(n.error)})}async clearAllThreads(){try{this.threads.clear(),this.messageToThread.clear();const e=(await this.openDatabase()).transaction(["threads"],"readwrite");return e.objectStore("threads").clear(),console.log("\ud83d\uddd1\ufe0f Cleared all threads"),!0}catch(e){return console.error("\u274c Error clearing threads:",e),!1}}exportThreads(){return this.getAllThreads().map(e=>i(i({},e),{},{participants:Array.from(e.participants)}))}async importThreads(e){try{for(const t of e)t.participants=new Set(t.participants),this.threads.set(t.id,t),t.replies.forEach(e=>{this.messageToThread.set(e.id,t.id)}),await this.saveThreadToStorage(t);return console.log("\ud83d\udce5 Imported ".concat(e.length," threads")),!0}catch(t){return console.error("\u274c Error importing threads:",t),!1}}on(e,t){this.listeners[e]&&this.listeners[e].push(t)}off(e,t){this.listeners[e]&&(this.listeners[e]=this.listeners[e].filter(e=>e!==t))}emit(e,t){this.listeners[e]&&this.listeners[e].forEach(e=>e(t))}},W=t=>{var n;let{thread:a,onReply:s,onClose:r,currentUser:o,compact:i=!1}=t;const[l,c]=(0,e.useState)(!0),[u,d]=(0,e.useState)(""),[h,m]=(0,e.useState)(!1);if(!a)return null;const{parentMessage:p,replies:f=[],replyCount:g}=a,v=()=>{if(!u.trim())return;const e={id:Date.now(),text:u,user:o,timestamp:(new Date).toISOString(),reactions:[]};s&&s(a.id,e),q.addReply(a.id,e),d(""),m(!1)},y=e=>{if(!e)return"";const t=new Date(e),n=new Date-t,a=Math.floor(n/6e4),s=Math.floor(a/60),r=Math.floor(s/24);return a<1?"Just now":a<60?"".concat(a,"m ago"):s<24?"".concat(s,"h ago"):r<7?"".concat(r,"d ago"):t.toLocaleDateString()};return(0,x.jsxs)("div",{className:"thread-view ".concat(i?"compact":""," ").concat(l?"":"collapsed"),children:[(0,x.jsxs)("div",{className:"thread-header",children:[(0,x.jsxs)("div",{className:"thread-info",children:[(0,x.jsx)("button",{className:"thread-toggle",onClick:()=>c(!l),title:l?"Collapse thread":"Expand thread",children:l?"\u25bc":"\u25b6"}),(0,x.jsxs)("span",{className:"thread-title",children:["Thread: ",g," ",1===g?"reply":"replies"]}),(0,x.jsx)("div",{className:"thread-participants",children:Array.from(a.participants||[]).slice(0,3).map((e,t)=>(0,x.jsx)("div",{className:"participant-avatar",style:{zIndex:3-t},children:"\ud83d\udc64"},e))})]}),r&&(0,x.jsx)("button",{className:"thread-close",onClick:r,title:"Close thread view",children:"\u2715"})]}),l&&(0,x.jsxs)("div",{className:"thread-content",children:[(0,x.jsxs)("div",{className:"thread-parent-message",children:[(0,x.jsxs)("div",{className:"message-header",children:[(0,x.jsx)("span",{className:"message-avatar",children:"\ud83d\udc64"}),(0,x.jsxs)("div",{className:"message-info",children:[(0,x.jsx)("span",{className:"message-author",children:(null===(n=p.user)||void 0===n?void 0:n.name)||"Unknown"}),(0,x.jsx)("span",{className:"message-time",children:y(p.timestamp)})]})]}),(0,x.jsx)("div",{className:"message-text",children:p.text})]}),(0,x.jsxs)("div",{className:"thread-divider",children:[(0,x.jsx)("span",{className:"divider-line"}),(0,x.jsxs)("span",{className:"divider-text",children:[g," ",1===g?"Reply":"Replies"]}),(0,x.jsx)("span",{className:"divider-line"})]}),(0,x.jsx)("div",{className:"thread-replies",children:f.map((e,t)=>{var n;return(0,x.jsxs)("div",{className:"thread-reply",children:[(0,x.jsx)("div",{className:"reply-connector"}),(0,x.jsxs)("div",{className:"reply-content",children:[(0,x.jsxs)("div",{className:"message-header",children:[(0,x.jsx)("span",{className:"message-avatar",children:"\ud83d\udc64"}),(0,x.jsxs)("div",{className:"message-info",children:[(0,x.jsx)("span",{className:"message-author",children:(null===(n=e.user)||void 0===n?void 0:n.name)||"Unknown"}),(0,x.jsx)("span",{className:"message-time",children:y(e.timestamp)})]})]}),(0,x.jsx)("div",{className:"message-text",children:e.text})]})]},e.id||t)})}),h?(0,x.jsxs)("div",{className:"thread-reply-input",children:[(0,x.jsx)("textarea",{value:u,onChange:e=>d(e.target.value),placeholder:"Write a reply...",className:"reply-textarea",rows:"3",autoFocus:!0,onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),v())}}),(0,x.jsxs)("div",{className:"reply-actions",children:[(0,x.jsx)("button",{className:"reply-cancel-btn",onClick:()=>{m(!1),d("")},children:"Cancel"}),(0,x.jsx)("button",{className:"reply-send-btn",onClick:v,disabled:!u.trim(),children:"Send Reply"})]})]}):(0,x.jsx)("button",{className:"thread-reply-btn",onClick:()=>m(!0),children:"\ud83d\udcac Reply to thread"})]})]})},V=e=>{let{thread:t,onClick:n,compact:a=!1,showParticipants:s=!0}=e;if(!t)return null;const{replyCount:r=0,participants:o=new Set,updatedAt:i}=t,l=()=>{if(!i)return!1;return new Date-new Date(i)<864e5},c=()=>Array.from(o).length;return(0,x.jsxs)("div",{className:"thread-indicator ".concat(a?"compact":""," ").concat(l()?"active":""),onClick:n,role:"button",tabIndex:0,onKeyPress:e=>{"Enter"!==e.key&&" "!==e.key||null===n||void 0===n||n()},title:"".concat(r," ").concat(1===r?"reply":"replies"," \u2022 ").concat(c()," ").concat(1===c()?"participant":"participants"),children:[(0,x.jsx)("div",{className:"indicator-icon",children:"\ud83d\udcac"}),(0,x.jsxs)("div",{className:"indicator-content",children:[(0,x.jsx)("div",{className:"indicator-count",children:r}),!a&&(0,x.jsxs)("div",{className:"indicator-details",children:[s&&c()>0&&(0,x.jsxs)("span",{className:"indicator-participants",children:["\ud83d\udc65 ",c()]}),i&&(0,x.jsx)("span",{className:"indicator-time",children:(e=>{if(!e)return"";const t=new Date(e),n=new Date-t,a=Math.floor(n/6e4),s=Math.floor(a/60),r=Math.floor(s/24);return a<1?"Active now":a<60?"".concat(a,"m"):s<24?"".concat(s,"h"):r<7?"".concat(r,"d"):">1w"})(i)})]})]}),l()&&(0,x.jsx)("div",{className:"indicator-pulse"})]})},K=t=>{var n,a;let{isOpen:s,onClose:r,onDonate:o}=t;const[l,c]=(0,e.useState)(null),[u,d]=(0,e.useState)(""),[h,m]=(0,e.useState)("one-time"),[p,f]=(0,e.useState)("card"),[g,v]=(0,e.useState)(!1),[y,b]=(0,e.useState)({email:"",name:"",cardNumber:"",expiryDate:"",cvv:"",anonymous:!1}),w=[{id:"card",name:"Credit/Debit Card",icon:"\ud83d\udcb3",popular:!0},{id:"paypal",name:"PayPal",icon:"\ud83c\udf10",popular:!0},{id:"applepay",name:"Apple Pay",icon:"\ud83c\udf4f",popular:!1},{id:"googlepay",name:"Google Pay",icon:"\ud83c\udf08",popular:!1},{id:"crypto",name:"Cryptocurrency",icon:"\u20bf",popular:!1}],S=()=>u&&!isNaN(parseFloat(u))?parseFloat(u):l,k=()=>{const e=S();return e&&e>=1&&e<=1e4},j=(e,t)=>{b(n=>i(i({},n),{},{[e]:t}))},N=()=>{const{email:e,name:t,cardNumber:n,expiryDate:a,cvv:s}=y;return"card"===p?e&&t&&n&&a&&s:e&&t},C=()=>{c(null),d(""),m("one-time"),f("card"),v(!1),b({email:"",name:"",cardNumber:"",expiryDate:"",cvv:"",anonymous:!1})};return s?(0,x.jsx)("div",{className:"donation-overlay",onClick:e=>{e.target===e.currentTarget&&r()},children:(0,x.jsxs)("div",{className:"donation-modal",children:[(0,x.jsxs)("div",{className:"donation-header",children:[(0,x.jsx)("h3",{children:"\ud83d\udc96 Support Quibish"}),(0,x.jsx)("button",{className:"close-btn",onClick:r,children:"\xd7"})]}),g?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)("div",{className:"payment-content",children:[(0,x.jsxs)("div",{className:"payment-header",children:[(0,x.jsx)("button",{className:"back-btn",onClick:()=>{v(!1)},children:"\u2190 Back"}),(0,x.jsxs)("div",{className:"payment-summary",children:[(0,x.jsxs)("h4",{children:["monthly"===h?"Monthly":"One-time","$",S().toFixed(2)]}),(0,x.jsxs)("p",{children:["via ",null===(n=w.find(e=>e.id===p))||void 0===n?void 0:n.name]})]})]}),(0,x.jsxs)("div",{className:"payment-form",children:[(0,x.jsxs)("div",{className:"form-group",children:[(0,x.jsx)("label",{children:"Email Address *"}),(0,x.jsx)("input",{type:"email",placeholder:"your@email.com",value:y.email,onChange:e=>j("email",e.target.value)})]}),(0,x.jsxs)("div",{className:"form-group",children:[(0,x.jsx)("label",{children:"Full Name *"}),(0,x.jsx)("input",{type:"text",placeholder:"John Doe",value:y.name,onChange:e=>j("name",e.target.value),disabled:y.anonymous})]}),(0,x.jsx)("div",{className:"form-group checkbox-group",children:(0,x.jsxs)("label",{className:"checkbox-label",children:[(0,x.jsx)("input",{type:"checkbox",checked:y.anonymous,onChange:e=>j("anonymous",e.target.checked)}),(0,x.jsx)("span",{className:"checkmark"}),"Donate anonymously"]})}),"card"===p&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)("div",{className:"form-group",children:[(0,x.jsx)("label",{children:"Card Number *"}),(0,x.jsx)("input",{type:"text",placeholder:"1234 5678 9012 3456",value:y.cardNumber,onChange:e=>j("cardNumber",e.target.value),maxLength:"19"})]}),(0,x.jsxs)("div",{className:"form-row",children:[(0,x.jsxs)("div",{className:"form-group",children:[(0,x.jsx)("label",{children:"Expiry Date *"}),(0,x.jsx)("input",{type:"text",placeholder:"MM/YY",value:y.expiryDate,onChange:e=>j("expiryDate",e.target.value),maxLength:"5"})]}),(0,x.jsxs)("div",{className:"form-group",children:[(0,x.jsx)("label",{children:"CVV *"}),(0,x.jsx)("input",{type:"text",placeholder:"123",value:y.cvv,onChange:e=>j("cvv",e.target.value),maxLength:"4"})]})]})]}),"card"!==p&&(0,x.jsx)("div",{className:"external-payment-info",children:(0,x.jsxs)("p",{children:["You will be redirected to ",null===(a=w.find(e=>e.id===p))||void 0===a?void 0:a.name,"to complete your payment securely."]})})]})]}),(0,x.jsxs)("div",{className:"payment-footer",children:[(0,x.jsxs)("div",{className:"security-info",children:[(0,x.jsx)("span",{className:"security-icon",children:"\ud83d\udd12"}),(0,x.jsx)("span",{children:"Your payment information is secure and encrypted"})]}),(0,x.jsxs)("button",{className:"submit-btn ".concat(N()?"enabled":"disabled"),onClick:()=>{if(!N())return void alert("Please fill in all required fields");const e={amount:S(),type:h,method:p,email:y.email,name:y.anonymous?"Anonymous":y.name,anonymous:y.anonymous,timestamp:(new Date).toISOString()};console.log("Processing donation:",e),o&&o(e),alert("Thank you for your ".concat(h," donation of $").concat(S(),"!")),r(),C()},disabled:!N(),children:["Complete ","monthly"===h?"Subscription":"Donation"]})]})]}):(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)("div",{className:"donation-content",children:[(0,x.jsx)("div",{className:"donation-intro",children:(0,x.jsx)("p",{children:"Your support helps us keep Quibish free and continuously improve your communication experience. Every contribution matters!"})}),(0,x.jsx)("div",{className:"donation-type",children:(0,x.jsxs)("div",{className:"type-toggle",children:[(0,x.jsx)("button",{className:"type-btn ".concat("one-time"===h?"active":""),onClick:()=>m("one-time"),children:"One-time"}),(0,x.jsx)("button",{className:"type-btn ".concat("monthly"===h?"active":""),onClick:()=>m("monthly"),children:"Monthly"})]})}),(0,x.jsxs)("div",{className:"amount-selection",children:[(0,x.jsx)("h4",{children:"Choose Amount"}),(0,x.jsx)("div",{className:"amount-grid",children:[{value:5,label:"$5",description:"Coffee for the dev team"},{value:10,label:"$10",description:"Support server costs"},{value:25,label:"$25",description:"Help with development"},{value:50,label:"$50",description:"Sponsor new features"},{value:100,label:"$100",description:"Major contribution"},{value:250,label:"$250",description:"VIP supporter"}].map(e=>(0,x.jsxs)("button",{className:"amount-btn ".concat(l===e.value?"selected":""),onClick:()=>(e=>{c(e),d("")})(e.value),children:[(0,x.jsx)("span",{className:"amount-label",children:e.label}),(0,x.jsx)("span",{className:"amount-desc",children:e.description})]},e.value))}),(0,x.jsxs)("div",{className:"custom-amount",children:[(0,x.jsx)("label",{children:"Or enter custom amount:"}),(0,x.jsxs)("div",{className:"custom-input",children:[(0,x.jsx)("span",{className:"currency",children:"$"}),(0,x.jsx)("input",{type:"number",min:"1",max:"10000",step:"0.01",placeholder:"0.00",value:u,onChange:e=>{return t=e.target.value,d(t),void c(null);var t}})]})]})]}),(0,x.jsxs)("div",{className:"payment-methods",children:[(0,x.jsx)("h4",{children:"Payment Method"}),(0,x.jsx)("div",{className:"methods-grid",children:w.map(e=>(0,x.jsxs)("button",{className:"method-btn ".concat(p===e.id?"selected":""," ").concat(e.popular?"popular":""),onClick:()=>f(e.id),children:[(0,x.jsx)("span",{className:"method-icon",children:e.icon}),(0,x.jsx)("span",{className:"method-name",children:e.name}),e.popular&&(0,x.jsx)("span",{className:"popular-badge",children:"Popular"})]},e.id))})]})]}),(0,x.jsxs)("div",{className:"donation-footer",children:[(0,x.jsx)("div",{className:"donation-summary",children:S()&&(0,x.jsx)("p",{children:(0,x.jsxs)("strong",{children:["monthly"===h?"Monthly":"One-time"," donation: $",S().toFixed(2)]})})}),(0,x.jsxs)("button",{className:"donate-btn ".concat(k()?"enabled":"disabled"),onClick:()=>{k()?v(!0):alert("Please select a valid donation amount")},disabled:!k(),children:["monthly"===h?"Subscribe":"Donate",S()?"$".concat(S().toFixed(2)):""]})]})]})]})}):null},G=t=>{let{isVisible:n,onClose:a,onOpenDonation:s,onDismiss:r}=t;const[o,i]=(0,e.useState)(0),[l,c]=(0,e.useState)(!1),[u,d]=(0,e.useState)(10),[h,m]=(0,e.useState)(!1),p=[{id:"support",emoji:"\u2764\ufe0f",title:"Love Quibish?",message:"Help us keep the app free and add amazing new features!",buttonText:"Support Us",color:"#ff6b6b"},{id:"coffee",emoji:"\u2615",title:"Buy us a coffee?",message:"Your support helps fuel late-night coding sessions and server costs.",buttonText:"Get Coffee",color:"#8b4513"},{id:"growth",emoji:"\ud83d\ude80",title:"Help Quibish grow!",message:"Every contribution helps us reach more users and build better features.",buttonText:"Contribute",color:"#667eea"},{id:"community",emoji:"\ud83c\udf89",title:"Join our supporters!",message:"Be part of the community that makes Quibish possible for everyone.",buttonText:"Join Community",color:"#28a745"},{id:"future",emoji:"\ud83c\udf1f",title:"Shape our future!",message:"Your support helps prioritize features and improvements you want to see.",buttonText:"Shape Future",color:"#ffc107"}];(0,e.useEffect)(()=>{if(!n)return;const e=setInterval(()=>{c(!0),setTimeout(()=>{i(e=>(e+1)%p.length),c(!1)},300)},4e3);return()=>clearInterval(e)},[n,p.length]),(0,e.useEffect)(()=>{if(!n||!h)return;const e=setInterval(()=>{d(e=>e<=1?(r("auto"),m(!1),10):e-1)},1e3);return()=>clearInterval(e)},[n,h,r]);if(!n)return null;const f=p[o];return(0,x.jsx)("div",{className:"donation-prompt-overlay",children:(0,x.jsxs)("div",{className:"donation-prompt",style:{"--prompt-color":f.color},children:[(0,x.jsx)("button",{className:"prompt-close",onClick:a,children:"\xd7"}),(0,x.jsxs)("div",{className:"prompt-content ".concat(l?"animating":""),children:[(0,x.jsx)("div",{className:"prompt-emoji",children:f.emoji}),(0,x.jsx)("h3",{className:"prompt-title",children:f.title}),(0,x.jsx)("p",{className:"prompt-message",children:f.message})]}),(0,x.jsxs)("div",{className:"prompt-actions",children:[(0,x.jsx)("button",{className:"prompt-btn secondary",onClick:h?()=>function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"manual";m(!1),d(10),r(e)}("manual"):()=>{m(!0)},children:h?"Dismiss (".concat(u,"s)"):"Maybe Later"}),(0,x.jsx)("button",{className:"prompt-btn primary",onClick:()=>{s(),a()},children:f.buttonText})]}),(0,x.jsx)("div",{className:"prompt-indicators",children:p.map((e,t)=>(0,x.jsx)("div",{className:"indicator ".concat(t===o?"active":""),onClick:()=>i(t)},t))}),(0,x.jsx)("div",{className:"prompt-footer",children:(0,x.jsx)("span",{className:"prompt-note",children:"\ud83d\udd12 Secure donation \u2022 Cancel anytime"})})]})})};const $=new class{constructor(){this.vapidPublicKey=null,this.subscription=null,this.isSupported="serviceWorker"in navigator&&"PushManager"in window,this.permission="default",this.userId=null}async initialize(e){if(console.log("\ud83d\udd14 Initializing push notification service..."),this.userId=e,!this.isSupported)return console.warn("Push notifications not supported"),!1;try{return this.permission=await Notification.permission,console.log("Current notification permission:",this.permission),await this.registerServiceWorker(),"granted"===this.permission&&await this.setupPushSubscription(),!0}catch(t){return console.error("Failed to initialize push notifications:",t),!1}}async registerServiceWorker(){try{const e=await navigator.serviceWorker.register("/sw.js");return console.log("\u2705 Service Worker registered for notifications"),e}catch(e){throw console.error("Service Worker registration failed:",e),e}}async requestPermission(){if(!this.isSupported)throw new Error("Push notifications not supported");try{const e=await Notification.requestPermission();if(this.permission=e,console.log("Notification permission result:",e),"granted"===e)return await this.setupPushSubscription(),!0;throw"denied"===e?new Error("Notification permission denied"):new Error("Notification permission not granted")}catch(e){throw console.error("Failed to request notification permission:",e),e}}async setupPushSubscription(){try{const e=await navigator.serviceWorker.ready;await this.getVapidKey();const t=await e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:this.urlBase64ToUint8Array(this.vapidPublicKey)});return this.subscription=t,console.log("\u2705 Push subscription created"),await this.sendSubscriptionToBackend(t),t}catch(e){throw console.error("Failed to setup push subscription:",e),e}}async getVapidKey(){try{const e=await fetch("/api/notifications/vapid-key",{method:"GET",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")),"Content-Type":"application/json"}});if(!e.ok)throw new Error("Failed to get VAPID key");const t=await e.json();this.vapidPublicKey=t.publicKey,console.log("\u2705 VAPID key retrieved")}catch(e){console.error("Failed to get VAPID key:",e),this.vapidPublicKey="BMqSvZyI8NzEp_G-Jw5i5L7-8K9yJ8xI7qU6vN2mL4kP3oT8fF1R9eA2cX5nH7jQ6wE4dY9pM8vL3zK2aB1sC0f"}}async sendSubscriptionToBackend(e){try{if(!(await fetch("/api/notifications/subscribe",{method:"POST",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")),"Content-Type":"application/json"},body:JSON.stringify({subscription:e.toJSON(),userId:this.userId})})).ok)throw new Error("Failed to send subscription to backend");console.log("\u2705 Subscription sent to backend")}catch(t){throw console.error("Failed to send subscription to backend:",t),t}}async testNotification(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Test notification from Quibish!";if("granted"!==this.permission)throw new Error("Notification permission not granted");try{const t=new Notification("Quibish",{body:e,icon:"/logo192.png",badge:"/logo192.png",tag:"test-notification",requireInteraction:!1,actions:[{action:"open",title:"Open App"},{action:"dismiss",title:"Dismiss"}]});return t.onclick=()=>{window.focus(),t.close()},console.log("\u2705 Test notification sent"),t}catch(t){throw console.error("Failed to send test notification:",t),t}}showMessageNotification(e){if("granted"!==this.permission)return void console.warn("Cannot show notification: permission not granted");const t=new Notification("New message from ".concat(e.sender),{body:e.text||"You have a new message",icon:e.senderAvatar||"/logo192.png",badge:"/logo192.png",tag:"message-".concat(e.id),requireInteraction:!0,actions:[{action:"reply",title:"Reply"},{action:"view",title:"View"}],data:{messageId:e.id,conversationId:e.conversationId,senderId:e.senderId}});return t.onclick=()=>{window.focus(),window.postMessage({type:"OPEN_CONVERSATION",conversationId:e.conversationId},"*"),t.close()},t}async unsubscribe(){try{this.subscription&&(await this.subscription.unsubscribe(),console.log("\u2705 Unsubscribed from push notifications")),await fetch("/api/notifications/unsubscribe",{method:"POST",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")),"Content-Type":"application/json"},body:JSON.stringify({userId:this.userId})}),this.subscription=null}catch(e){throw console.error("Failed to unsubscribe:",e),e}}getSubscriptionStatus(){return{isSupported:this.isSupported,permission:this.permission,hasSubscription:!!this.subscription,userId:this.userId}}urlBase64ToUint8Array(e){const t=(e+"=".repeat((4-e.length%4)%4)).replace(/-/g,"+").replace(/_/g,"/"),n=window.atob(t),a=new Uint8Array(n.length);for(let s=0;s<n.length;++s)a[s]=n.charCodeAt(s);return a}isUserOnline(){return navigator.onLine&&"visible"===document.visibilityState}setupPresenceDetection(){document.addEventListener("visibilitychange",()=>{const e="visible"===document.visibilityState;console.log("User visibility changed:",e?"visible":"hidden"),this.updateUserPresence(e)}),window.addEventListener("online",()=>{console.log("User came online"),this.updateUserPresence(!0)}),window.addEventListener("offline",()=>{console.log("User went offline"),this.updateUserPresence(!1)})}async updateUserPresence(e){try{await fetch("/api/users/presence",{method:"POST",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")),"Content-Type":"application/json"},body:JSON.stringify({userId:this.userId,isOnline:e,lastSeen:(new Date).toISOString()})})}catch(t){console.error("Failed to update user presence:",t)}}},Y=t=>{let{isOpen:n,onClose:a,user:s}=t;const[r,o]=(0,e.useState)({pushEnabled:!1,emailEnabled:!0,soundEnabled:!0,vibrationEnabled:!0,showPreview:!0,quietHours:{enabled:!1,start:"22:00",end:"08:00"},emailFrequency:"immediate",notifyOnMention:!0,notifyOnDM:!0,notifyOnGroupMessage:!1}),[l,c]=(0,e.useState)({isSupported:!1,permission:"default",hasSubscription:!1}),[u,d]=(0,e.useState)(!1),[h,m]=(0,e.useState)(""),[p,f]=(0,e.useState)("");(0,e.useEffect)(()=>{n&&(g(),v())},[n]);const g=async()=>{try{const e=await fetch("/api/users/notification-preferences",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});if(e.ok){const t=await e.json();o(e=>i(i({},e),t))}}catch(h){console.error("Failed to load notification settings:",h)}},v=()=>{const e=$.getSubscriptionStatus();c(e)},y=(e,t)=>{o(n=>i(i({},n),{},{[e]:t}))},b=(e,t)=>{o(n=>i(i({},n),{},{quietHours:i(i({},n.quietHours),{},{[e]:t})}))};return n?(0,x.jsx)("div",{className:"notification-settings-overlay",children:(0,x.jsxs)("div",{className:"notification-settings-modal",children:[(0,x.jsxs)("div",{className:"notification-settings-header",children:[(0,x.jsx)("h2",{children:"\ud83d\udd14 Notification Settings"}),(0,x.jsx)("button",{className:"close-btn",onClick:a,children:"\xd7"})]}),(0,x.jsxs)("div",{className:"notification-settings-content",children:[h&&(0,x.jsx)("div",{className:"alert alert-error",children:(0,x.jsxs)("span",{children:["\u26a0\ufe0f ",h]})}),p&&(0,x.jsx)("div",{className:"alert alert-success",children:(0,x.jsxs)("span",{children:["\u2705 ",p]})}),(0,x.jsxs)("div",{className:"settings-section",children:[(0,x.jsx)("h3",{children:"\ud83d\udcf1 Push Notifications"}),(0,x.jsxs)("div",{className:"setting-item",children:[(0,x.jsxs)("div",{className:"setting-info",children:[(0,x.jsx)("label",{children:"Enable Push Notifications"}),(0,x.jsx)("span",{className:"setting-description",children:"Get notifications even when the app is closed"})]}),(0,x.jsx)("div",{className:"setting-controls",children:(0,x.jsxs)("label",{className:"toggle-switch",children:[(0,x.jsx)("input",{type:"checkbox",checked:r.pushEnabled,onChange:async()=>{if(l.isSupported){d(!0),m("");try{r.pushEnabled?(await $.unsubscribe(),o(e=>i(i({},e),{},{pushEnabled:!1})),v()):(await $.requestPermission(),o(e=>i(i({},e),{},{pushEnabled:!0})),v())}catch(h){console.error("Failed to toggle push notifications:",h),m("Failed to enable push notifications. Please check your browser settings.")}finally{d(!1)}}else m("Push notifications are not supported in this browser")},disabled:u||!l.isSupported}),(0,x.jsx)("span",{className:"toggle-slider"})]})})]}),!l.isSupported&&(0,x.jsx)("div",{className:"warning-message",children:"Push notifications are not supported in this browser"}),r.pushEnabled&&(0,x.jsxs)("div",{className:"push-status",children:[(0,x.jsxs)("p",{children:["Status: ",l.hasSubscription?"\u2705 Active":"\u26a0\ufe0f Not subscribed"]}),(0,x.jsx)("button",{className:"test-btn",onClick:async()=>{d(!0),m("");try{r.pushEnabled&&l.hasSubscription?(await $.testNotification("Test notification from Quibish! \ud83c\udf89"),f("Test notification sent!"),setTimeout(()=>f(""),3e3)):m("Push notifications must be enabled first")}catch(h){console.error("Failed to send test notification:",h),m("Failed to send test notification")}finally{d(!1)}},disabled:u||!l.hasSubscription,children:"Send Test Notification"})]})]}),(0,x.jsxs)("div",{className:"settings-section",children:[(0,x.jsx)("h3",{children:"\ud83d\udce7 Email Notifications"}),(0,x.jsxs)("div",{className:"setting-item",children:[(0,x.jsxs)("div",{className:"setting-info",children:[(0,x.jsx)("label",{children:"Enable Email Notifications"}),(0,x.jsx)("span",{className:"setting-description",children:"Receive email alerts when you're offline"})]}),(0,x.jsx)("div",{className:"setting-controls",children:(0,x.jsxs)("label",{className:"toggle-switch",children:[(0,x.jsx)("input",{type:"checkbox",checked:r.emailEnabled,onChange:e=>y("emailEnabled",e.target.checked)}),(0,x.jsx)("span",{className:"toggle-slider"})]})})]}),r.emailEnabled&&(0,x.jsxs)("div",{className:"setting-item",children:[(0,x.jsxs)("div",{className:"setting-info",children:[(0,x.jsx)("label",{children:"Email Frequency"}),(0,x.jsx)("span",{className:"setting-description",children:"How often to send email notifications"})]}),(0,x.jsx)("div",{className:"setting-controls",children:(0,x.jsxs)("select",{value:r.emailFrequency,onChange:e=>y("emailFrequency",e.target.value),className:"frequency-select",children:[(0,x.jsx)("option",{value:"immediate",children:"Immediate"}),(0,x.jsx)("option",{value:"hourly",children:"Hourly digest"}),(0,x.jsx)("option",{value:"daily",children:"Daily digest"}),(0,x.jsx)("option",{value:"weekly",children:"Weekly digest"})]})})]})]}),(0,x.jsxs)("div",{className:"settings-section",children:[(0,x.jsx)("h3",{children:"\ud83d\udccb Notification Types"}),(0,x.jsxs)("div",{className:"setting-item",children:[(0,x.jsxs)("div",{className:"setting-info",children:[(0,x.jsx)("label",{children:"Direct Messages"}),(0,x.jsx)("span",{className:"setting-description",children:"Notify when you receive a direct message"})]}),(0,x.jsx)("div",{className:"setting-controls",children:(0,x.jsxs)("label",{className:"toggle-switch",children:[(0,x.jsx)("input",{type:"checkbox",checked:r.notifyOnDM,onChange:e=>y("notifyOnDM",e.target.checked)}),(0,x.jsx)("span",{className:"toggle-slider"})]})})]}),(0,x.jsxs)("div",{className:"setting-item",children:[(0,x.jsxs)("div",{className:"setting-info",children:[(0,x.jsx)("label",{children:"Mentions"}),(0,x.jsx)("span",{className:"setting-description",children:"Notify when someone mentions you"})]}),(0,x.jsx)("div",{className:"setting-controls",children:(0,x.jsxs)("label",{className:"toggle-switch",children:[(0,x.jsx)("input",{type:"checkbox",checked:r.notifyOnMention,onChange:e=>y("notifyOnMention",e.target.checked)}),(0,x.jsx)("span",{className:"toggle-slider"})]})})]}),(0,x.jsxs)("div",{className:"setting-item",children:[(0,x.jsxs)("div",{className:"setting-info",children:[(0,x.jsx)("label",{children:"Group Messages"}),(0,x.jsx)("span",{className:"setting-description",children:"Notify for all group messages"})]}),(0,x.jsx)("div",{className:"setting-controls",children:(0,x.jsxs)("label",{className:"toggle-switch",children:[(0,x.jsx)("input",{type:"checkbox",checked:r.notifyOnGroupMessage,onChange:e=>y("notifyOnGroupMessage",e.target.checked)}),(0,x.jsx)("span",{className:"toggle-slider"})]})})]})]}),(0,x.jsxs)("div",{className:"settings-section",children:[(0,x.jsx)("h3",{children:"\ud83d\udd0a Notification Behavior"}),(0,x.jsxs)("div",{className:"setting-item",children:[(0,x.jsxs)("div",{className:"setting-info",children:[(0,x.jsx)("label",{children:"Sound"}),(0,x.jsx)("span",{className:"setting-description",children:"Play sound for notifications"})]}),(0,x.jsx)("div",{className:"setting-controls",children:(0,x.jsxs)("label",{className:"toggle-switch",children:[(0,x.jsx)("input",{type:"checkbox",checked:r.soundEnabled,onChange:e=>y("soundEnabled",e.target.checked)}),(0,x.jsx)("span",{className:"toggle-slider"})]})})]}),(0,x.jsxs)("div",{className:"setting-item",children:[(0,x.jsxs)("div",{className:"setting-info",children:[(0,x.jsx)("label",{children:"Vibration"}),(0,x.jsx)("span",{className:"setting-description",children:"Vibrate on mobile devices"})]}),(0,x.jsx)("div",{className:"setting-controls",children:(0,x.jsxs)("label",{className:"toggle-switch",children:[(0,x.jsx)("input",{type:"checkbox",checked:r.vibrationEnabled,onChange:e=>y("vibrationEnabled",e.target.checked)}),(0,x.jsx)("span",{className:"toggle-slider"})]})})]}),(0,x.jsxs)("div",{className:"setting-item",children:[(0,x.jsxs)("div",{className:"setting-info",children:[(0,x.jsx)("label",{children:"Show Message Preview"}),(0,x.jsx)("span",{className:"setting-description",children:"Show message content in notifications"})]}),(0,x.jsx)("div",{className:"setting-controls",children:(0,x.jsxs)("label",{className:"toggle-switch",children:[(0,x.jsx)("input",{type:"checkbox",checked:r.showPreview,onChange:e=>y("showPreview",e.target.checked)}),(0,x.jsx)("span",{className:"toggle-slider"})]})})]})]}),(0,x.jsxs)("div",{className:"settings-section",children:[(0,x.jsx)("h3",{children:"\ud83c\udf19 Quiet Hours"}),(0,x.jsxs)("div",{className:"setting-item",children:[(0,x.jsxs)("div",{className:"setting-info",children:[(0,x.jsx)("label",{children:"Enable Quiet Hours"}),(0,x.jsx)("span",{className:"setting-description",children:"No notifications during specified hours"})]}),(0,x.jsx)("div",{className:"setting-controls",children:(0,x.jsxs)("label",{className:"toggle-switch",children:[(0,x.jsx)("input",{type:"checkbox",checked:r.quietHours.enabled,onChange:e=>b("enabled",e.target.checked)}),(0,x.jsx)("span",{className:"toggle-slider"})]})})]}),r.quietHours.enabled&&(0,x.jsxs)("div",{className:"quiet-hours-times",children:[(0,x.jsxs)("div",{className:"time-input-group",children:[(0,x.jsx)("label",{children:"From:"}),(0,x.jsx)("input",{type:"time",value:r.quietHours.start,onChange:e=>b("start",e.target.value),className:"time-input"})]}),(0,x.jsxs)("div",{className:"time-input-group",children:[(0,x.jsx)("label",{children:"To:"}),(0,x.jsx)("input",{type:"time",value:r.quietHours.end,onChange:e=>b("end",e.target.value),className:"time-input"})]})]})]})]}),(0,x.jsxs)("div",{className:"notification-settings-footer",children:[(0,x.jsx)("button",{className:"cancel-btn",onClick:a,disabled:u,children:"Cancel"}),(0,x.jsx)("button",{className:"save-btn",onClick:async()=>{d(!0),m(""),f("");try{if(!(await fetch("/api/users/notification-preferences",{method:"PUT",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")),"Content-Type":"application/json"},body:JSON.stringify(r)})).ok)throw new Error("Failed to save settings");f("Notification settings saved successfully!"),setTimeout(()=>f(""),3e3)}catch(h){console.error("Failed to save notification settings:",h),m("Failed to save notification settings. Please try again.")}finally{d(!1)}},disabled:u,children:u?"Saving...":"Save Settings"})]})]})}):null};class Q{constructor(){this.mediaRecorder=null,this.audioStream=null,this.audioChunks=[],this.isRecording=!1,this.isPaused=!1,this.recordingStartTime=0,this.pausedDuration=0,this.audioContext=null,this.analyser=null,this.microphone=null,this.dataArray=null,this.animationFrame=null,this.config={mimeType:this.getSupportedMimeType(),audioBitsPerSecond:128e3,videoBitsPerSecond:null,sampleRate:44100,channelCount:1,echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0},this.listeners={onStart:[],onStop:[],onPause:[],onResume:[],onDataAvailable:[],onError:[],onVolumeChange:[]},console.log("\ud83c\udfa4 Voice Recorder Service created, awaiting initialization...")}async initialize(){try{if(console.log("\ud83d\udd04 Initializing Voice Recorder Service..."),!window.MediaRecorder)throw new Error("MediaRecorder is not supported in this browser");if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new Error("getUserMedia is not supported in this browser");if(!this.getSupportedMimeType())throw new Error("No supported audio formats found");return console.log("\u2705 Voice Recorder Service initialized successfully"),console.log("\ud83d\udcca Configuration:",this.config),!0}catch(e){return console.error("\u274c Voice Recorder Service initialization failed:",e),this.emit("onError",{type:"initialization",error:e}),!1}}getSupportedMimeType(){const e=["audio/webm;codecs=opus","audio/webm","audio/ogg;codecs=opus","audio/ogg","audio/wav","audio/mp4","audio/aac"];for(const t of e)if(MediaRecorder.isTypeSupported&&MediaRecorder.isTypeSupported(t))return console.log("\ud83d\udcf1 Using MIME type: ".concat(t)),t;return console.warn("\u26a0\ufe0f No preferred audio MIME type supported, using default"),MediaRecorder.isTypeSupported&&MediaRecorder.isTypeSupported("audio/webm"),"audio/webm"}async testMicrophoneAccess(){try{console.log("\ud83d\udd0d Testing microphone access...");const e=await navigator.mediaDevices.getUserMedia({audio:{channelCount:1,sampleRate:22050,echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0}});return console.log("\u2705 Microphone access test successful"),e.getTracks().forEach(e=>e.stop()),{success:!0,message:"Microphone access granted"}}catch(e){console.error("\u274c Microphone access test failed:",e);let t=e.message;switch(e.name){case"NotAllowedError":t="Microphone permission denied. Please allow microphone access in your browser settings.";break;case"NotFoundError":t="No microphone found. Please connect a microphone and try again.";break;case"NotSupportedError":t="Voice recording is not supported in this browser.";break;case"AbortError":t="Microphone access was aborted. Please try again.";break;case"NotReadableError":t="Microphone is already in use by another application."}return{success:!1,error:e.name,message:t}}}async startRecording(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;try{if(this.isRecording)return console.warn("\u26a0\ufe0f Recording already in progress"),this.emit("onError",{type:"start",error:new Error("Recording already in progress")}),!1;if(e&&(e.bitrate&&(this.config.audioBitsPerSecond=e.bitrate),e.sampleRate&&(this.config.sampleRate=e.sampleRate),console.log("\ufffd\ufe0f Using quality config:",e)),console.log("\ufffd\ud83c\udfa4 Requesting microphone permission..."),!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new Error("getUserMedia is not supported in this browser");let n;try{n=await navigator.mediaDevices.getUserMedia({audio:{channelCount:this.config.channelCount,sampleRate:this.config.sampleRate,echoCancellation:this.config.echoCancellation,noiseSuppression:this.config.noiseSuppression,autoGainControl:this.config.autoGainControl}})}catch(t){console.warn("\u26a0\ufe0f Advanced audio settings failed, trying basic settings..."),n=await navigator.mediaDevices.getUserMedia({audio:!0})}return console.log("\u2705 Microphone permission granted"),this.audioStream=n,this.audioChunks=[],this.recordingStartTime=Date.now(),this.pausedDuration=0,this.mediaRecorder=new MediaRecorder(n,{mimeType:this.config.mimeType,audioBitsPerSecond:this.config.audioBitsPerSecond}),this.mediaRecorder.ondataavailable=e=>{e.data.size>0&&(this.audioChunks.push(e.data),this.emit("onDataAvailable",{data:e.data}))},this.mediaRecorder.onstop=()=>{this.handleRecordingStop()},this.mediaRecorder.onerror=e=>{console.error("\u274c MediaRecorder error:",e.error),this.emit("onError",{type:"recording",error:e.error})},await this.setupAudioAnalysis(n),this.mediaRecorder.start(100),this.isRecording=!0,this.isPaused=!1,this.startVolumeMonitoring(),console.log("\ud83c\udfa4 Recording started successfully"),this.emit("onStart",{startTime:this.recordingStartTime,config:this.config}),!0}catch(n){console.error("\u274c Failed to start recording:",n);let e=n.message;"NotAllowedError"===n.name?e="Microphone permission denied. Please allow microphone access and try again.":"NotFoundError"===n.name?e="No microphone found. Please connect a microphone and try again.":"NotSupportedError"===n.name?e="Voice recording is not supported in this browser.":"AbortError"===n.name&&(e="Recording was aborted. Please try again.");const t=new Error(e);return t.originalError=n,this.emit("onError",{type:"start",error:t}),!1}}async stopRecording(){try{return this.isRecording?(this.mediaRecorder&&"recording"===this.mediaRecorder.state&&this.mediaRecorder.stop(),this.stopVolumeMonitoring(),this.audioStream&&(this.audioStream.getTracks().forEach(e=>e.stop()),this.audioStream=null),this.isRecording=!1,this.isPaused=!1,console.log("\ud83d\uded1 Recording stopped successfully"),new Promise(e=>{this.recordingStopResolver=e})):(console.warn("\u26a0\ufe0f No recording in progress"),null)}catch(e){return console.error("\u274c Failed to stop recording:",e),this.emit("onError",{type:"stop",error:e}),null}}handleRecordingStop(){try{const e=new Blob(this.audioChunks,{type:this.config.mimeType}),t=this.getRecordingDuration(),n=e.size;console.log("\ud83c\udfb5 Audio recorded: ".concat(t,"ms, ").concat((n/1024).toFixed(2),"KB"));const a={blob:e,duration:t,size:n,mimeType:this.config.mimeType,url:URL.createObjectURL(e),timestamp:(new Date).toISOString()};return this.emit("onStop",a),this.recordingStopResolver&&(this.recordingStopResolver(a),this.recordingStopResolver=null),a}catch(e){return console.error("\u274c Failed to process recording:",e),this.emit("onError",{type:"processing",error:e}),null}}pauseRecording(){try{return!(!this.isRecording||this.isPaused)&&(!(!this.mediaRecorder||"recording"!==this.mediaRecorder.state)&&(this.mediaRecorder.pause(),this.isPaused=!0,this.pauseStartTime=Date.now(),console.log("\u23f8\ufe0f Recording paused"),this.emit("onPause",{pauseTime:this.pauseStartTime}),!0))}catch(e){return console.error("\u274c Failed to pause recording:",e),this.emit("onError",{type:"pause",error:e}),!1}}resumeRecording(){try{return!(!this.isRecording||!this.isPaused)&&(!(!this.mediaRecorder||"paused"!==this.mediaRecorder.state)&&(this.mediaRecorder.resume(),this.isPaused=!1,this.pauseStartTime&&(this.pausedDuration+=Date.now()-this.pauseStartTime,this.pauseStartTime=0),console.log("\u25b6\ufe0f Recording resumed"),this.emit("onResume",{resumeTime:Date.now()}),!0))}catch(e){return console.error("\u274c Failed to resume recording:",e),this.emit("onError",{type:"resume",error:e}),!1}}cancelRecording(){try{return this.audioChunks=[],this.stopRecording(),console.log("\u274c Recording cancelled"),!0}catch(e){return console.error("\u274c Failed to cancel recording:",e),!1}}async setupAudioAnalysis(e){try{this.audioContext=new(window.AudioContext||window.webkitAudioContext),this.analyser=this.audioContext.createAnalyser(),this.microphone=this.audioContext.createMediaStreamSource(e),this.analyser.fftSize=256,this.analyser.smoothingTimeConstant=.3,this.microphone.connect(this.analyser),this.dataArray=new Uint8Array(this.analyser.frequencyBinCount),console.log("\ud83c\udfb5 Audio analysis setup complete")}catch(t){console.error("\u274c Failed to setup audio analysis:",t)}}startVolumeMonitoring(){if(!this.analyser||!this.dataArray)return;const e=()=>{if(!this.isRecording)return;this.analyser.getByteFrequencyData(this.dataArray);const t=this.dataArray.reduce((e,t)=>e+t,0)/this.dataArray.length,n=Math.round(t/255*100);this.emit("onVolumeChange",{volume:n,rawData:this.dataArray}),this.animationFrame=requestAnimationFrame(e)};e()}stopVolumeMonitoring(){this.animationFrame&&(cancelAnimationFrame(this.animationFrame),this.animationFrame=null),this.audioContext&&"closed"!==this.audioContext.state&&(this.audioContext.close(),this.audioContext=null)}getRecordingDuration(){if(!this.isRecording&&0===this.recordingStartTime)return 0;const e=this.isRecording?Date.now():this.recordingStartTime;return Math.max(0,e-this.recordingStartTime-this.pausedDuration)}formatDuration(e){const t=Math.floor(e/1e3),n=Math.floor(t/60),a=t%60;return n>0?"".concat(n,":").concat(a.toString().padStart(2,"0")):"0:".concat(a.toString().padStart(2,"0"))}getState(){return{isRecording:this.isRecording,isPaused:this.isPaused,duration:this.getRecordingDuration(),formattedDuration:this.formatDuration(this.getRecordingDuration()),hasPermission:!!this.audioStream,mimeType:this.config.mimeType}}async convertAudio(e,t){try{return e.type===t||console.warn("\u26a0\ufe0f Audio conversion from ".concat(e.type," to ").concat(t," not implemented")),e}catch(n){return console.error("\u274c Audio conversion failed:",n),e}}static isSupported(){return!!(window.MediaRecorder&&navigator.mediaDevices&&navigator.mediaDevices.getUserMedia)}static getCapabilities(){if(!Q.isSupported())return{supported:!1};const e={supported:!0,mimeTypes:[],features:{pause:!0,resume:!0,volumeMonitoring:!(!window.AudioContext&&!window.webkitAudioContext),realTimeAnalysis:!0}};return["audio/webm;codecs=opus","audio/webm","audio/ogg;codecs=opus","audio/ogg","audio/wav","audio/mp4","audio/aac"].forEach(t=>{MediaRecorder.isTypeSupported(t)&&e.mimeTypes.push(t)}),e}on(e,t){this.listeners[e]&&this.listeners[e].push(t)}off(e,t){this.listeners[e]&&(this.listeners[e]=this.listeners[e].filter(e=>e!==t))}emit(e,t){this.listeners[e]&&this.listeners[e].forEach(n=>{try{n(t)}catch(a){console.error("\u274c Error in event listener for ".concat(e,":"),a)}})}cleanup(){this.cancelRecording(),this.stopVolumeMonitoring(),Object.keys(this.listeners).forEach(e=>{this.listeners[e]=[]}),console.log("\ud83e\uddf9 Voice Recorder Service cleaned up")}}const J=new Q,X=t=>{let{audioUrl:n,duration:a,className:s="",compact:r=!1}=t;const[o,i]=(0,e.useState)(!1),[l,c]=(0,e.useState)(0),[u,d]=(0,e.useState)(a||0),h=(0,e.useRef)(null);(0,e.useEffect)(()=>{const e=h.current;if(!e)return;const t=()=>{c(1e3*e.currentTime)},n=()=>{d(1e3*e.duration)},a=()=>{i(!1),c(0)};return e.addEventListener("timeupdate",t),e.addEventListener("durationchange",n),e.addEventListener("ended",a),()=>{e.removeEventListener("timeupdate",t),e.removeEventListener("durationchange",n),e.removeEventListener("ended",a)}},[]);const m=e=>{const t=Math.floor(e/1e3),n=Math.floor(t/60),a=t%60;return"".concat(n,":").concat(a.toString().padStart(2,"0"))};return(0,x.jsxs)("div",{className:"voice-message-player ".concat(r?"compact":""," ").concat(s),children:[(0,x.jsx)("audio",{ref:h,src:n,preload:"metadata"}),(0,x.jsx)("button",{className:"play-pause-btn",onClick:()=>{const e=h.current;e&&(o?(e.pause(),i(!1)):(e.play(),i(!0)))},title:o?"Pause":"Play",children:(0,x.jsx)("span",{className:"btn-icon",children:o?"\u23f8\ufe0f":"\u25b6\ufe0f"})}),(0,x.jsxs)("div",{className:"playback-info",children:[(0,x.jsx)("div",{className:"progress-container",onClick:e=>{const t=h.current;if(!t)return;const n=e.currentTarget.getBoundingClientRect(),a=(e.clientX-n.left)/n.width*(u/1e3);t.currentTime=a,c(1e3*a)},children:(0,x.jsx)("div",{className:"progress-track",children:(0,x.jsx)("div",{className:"progress-fill",style:{width:"".concat(u>0?l/u*100:0,"%")}})})}),(0,x.jsxs)("div",{className:"time-display",children:[(0,x.jsx)("span",{className:"current-time",children:m(l)}),(0,x.jsx)("span",{className:"duration",children:m(u)})]})]})]})},Z=t=>{let{onRecordingComplete:n,onRecordingCancel:a,onRecordingStart:s,maxDuration:r=3e5,minDuration:o=1e3,className:i="",compact:l=!1,autoStart:c=!1}=t;const[u,d]=(0,e.useState)(!1),[h,m]=(0,e.useState)(!1),[p,f]=(0,e.useState)(0),[g,v]=(0,e.useState)(0),[y,b]=(0,e.useState)(!1),[w,S]=(0,e.useState)(null),[k,j]=(0,e.useState)(!1),[N,C]=(0,e.useState)(0),[E,T]=(0,e.useState)(null),[A,_]=(0,e.useState)("standard"),I=(0,e.useRef)(null),P=(0,e.useRef)(null),D=(0,e.useRef)(null);(0,e.useEffect)(()=>{(async()=>{try{if(console.log("\ud83c\udfa4 Initializing voice recorder..."),!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new Error("Your browser does not support voice recording. Please use Chrome, Firefox, or Safari.");const e=await J.initialize();if(j(e),e)console.log("\u2705 Voice recorder initialized successfully"),S(null);else{const e="Voice recording is not supported in your browser";console.error("\u274c Voice recorder initialization failed:",e),S(e)}}catch(w){console.error("\u274c Voice recorder initialization error:",w),S("Failed to initialize: ".concat(w.message)),j(!1)}})();const e=e=>{d(!0),m(!1),S(null),b(!0),s&&s(e)},t=e=>{d(!1),m(!1),f(0),v(0),n&&n(e)},a=()=>{m(!0)},r=()=>{m(!1)},o=e=>{let{volume:t}=e;v(t),W(t)},i=e=>{let{error:t,type:n}=e;S("Recording error (".concat(n,"): ").concat(t.message||t)),d(!1),m(!1),"start"===n&&b(!1)};return J.on("onStart",e),J.on("onStop",t),J.on("onPause",a),J.on("onResume",r),J.on("onVolumeChange",o),J.on("onError",i),c&&k&&z(),()=>{J.off("onStart",e),J.off("onStop",t),J.off("onPause",a),J.off("onResume",r),J.off("onVolumeChange",o),J.off("onError",i),I.current&&clearInterval(I.current)}},[c,s,n]),(0,e.useEffect)(()=>(u&&!h?I.current=setInterval(()=>{const e=J.getRecordingDuration();f(e),e>=r&&L()},100):I.current&&(clearInterval(I.current),I.current=null),()=>{I.current&&clearInterval(I.current)}),[u,h,r]);const M=(0,e.useCallback)(async()=>{try{if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)return S("MediaDevices API not supported in this browser"),!1;if(navigator.permissions){const e=await navigator.permissions.query({name:"microphone"});if("denied"===e.state)return S("Microphone permission denied. Please enable in browser settings."),!1;"prompt"===e.state&&S("Click record to allow microphone access")}return!0}catch(w){return console.warn("Permission check failed:",w),!0}},[]);(0,e.useEffect)(()=>{k&&M()},[k,M]);const z=(0,e.useCallback)(async()=>{if(!k){console.log("\ud83d\udd04 Service not initialized, initializing now...");try{const e=await J.initialize();if(j(e),!e)return void S("Failed to initialize voice recorder")}catch(w){return console.error("\u274c Initialization failed:",w),void S("Initialization failed: ".concat(w.message))}}try{console.log("\ud83c\udfa4 Testing microphone access first..."),S("Testing microphone access...");const e=await J.testMicrophoneAccess();if(!e.success)return console.error("\u274c Microphone test failed:",e.message),void S(e.message);console.log("\u2705 Microphone test passed, starting recording..."),S(null),C(0);const t={low:{bitrate:64e3,sampleRate:22050},standard:{bitrate:128e3,sampleRate:44100},high:{bitrate:256e3,sampleRate:48e3}}[A];if(!await J.startRecording(t))throw new Error("Failed to start recording - unknown error");console.log("\u2705 Recording started successfully")}catch(w){console.error("\u274c Recording start error:",w),S("Recording failed: ".concat(w.message)),d(!1)}},[k,A]),R=(0,e.useCallback)(()=>{J.cancelRecording(),f(0),v(0),T(null),S(null),a&&a()},[a]),L=(0,e.useCallback)(async()=>{if(p<o)return S("Recording too short. Minimum duration is ".concat(o/1e3," seconds.")),setTimeout(()=>S(null),3e3),void R();try{console.log("\ud83d\uded1 Stopping recording...");const e=await J.stopRecording();e&&e.url&&T(e),console.log("\u2705 Recording stopped successfully")}catch(w){console.error("\u274c Stop recording error:",w),S("Stop failed: ".concat(w.message)),setTimeout(()=>S(null),5e3)}},[p,o,R]),F=(0,e.useCallback)(()=>{J.pauseRecording()},[]),O=(0,e.useCallback)(()=>{J.resumeRecording()},[]),U=(0,e.useCallback)(async()=>{const e=N+1;C(e),e>3?S("Too many failed attempts. Please check your microphone settings and refresh the page."):(S("Retrying..."),setTimeout(()=>{z()},1e3*e))},[N,z]),B=(0,e.useCallback)(()=>{E&&n&&(n(E),T(null))},[E,n]),H=(0,e.useCallback)(()=>{E&&E.url&&URL.revokeObjectURL(E.url),T(null)},[E]),q=(0,e.useCallback)(e=>{const t=P.current;if(!t)return;const n=t.getContext("2d"),a=t.width,s=t.height,r=n.getImageData(2,0,a-2,s);n.putImageData(r,0,0),n.clearRect(a-2,0,2,s);const o=e/100*s,i=n.createLinearGradient(0,s,0,s-o);i.addColorStop(0,"#ef4444"),i.addColorStop(.5,"#f59e0b"),i.addColorStop(1,"#22c55e"),n.fillStyle=i,n.fillRect(a-2,s-o,2,o)},[]),W=(0,e.useCallback)(e=>{if(D.current){const t=Math.min(100,Math.max(0,e));D.current.style.width="".concat(t,"%")}P.current&&u&&q(e)},[u,q]),V=e=>{const t=Math.floor(e/1e3),n=Math.floor(t/60),a=t%60;return"".concat(n,":").concat(a.toString().padStart(2,"0"))};return k?!w||y||u?(0,x.jsxs)("div",{className:"voice-recorder ".concat(u?"recording":""," ").concat(h?"paused":""," ").concat(l?"compact":""," ").concat(i),children:[u&&(0,x.jsxs)("div",{className:"recording-status",children:[(0,x.jsxs)("div",{className:"recording-indicator",children:[(0,x.jsx)("div",{className:"recording-dot"}),(0,x.jsx)("span",{className:"recording-text",children:h?"Paused":"Recording"})]}),(0,x.jsx)("div",{className:"recording-duration",children:V(p)})]}),u&&!l&&(0,x.jsxs)("div",{className:"volume-visualization",children:[(0,x.jsxs)("div",{className:"volume-meter",children:[(0,x.jsx)("div",{className:"volume-label",children:"Volume"}),(0,x.jsx)("div",{className:"volume-bar-container",children:(0,x.jsx)("div",{ref:D,className:"volume-bar",style:{backgroundColor:g<20?"#6b7280":g<50?"#22c55e":g<80?"#f59e0b":"#ef4444"}})}),(0,x.jsxs)("div",{className:"volume-value",children:[g,"%"]})]}),(0,x.jsx)("div",{className:"waveform-container",children:(0,x.jsx)("canvas",{ref:P,className:"waveform-canvas",width:"200",height:"60"})})]}),u&&(0,x.jsxs)("div",{className:"recording-progress",children:[(0,x.jsx)("div",{className:"progress-bar",style:{width:"".concat(Math.min(100,p/r*100),"%")}}),(0,x.jsxs)("div",{className:"progress-time",children:[V(r-p)," remaining"]})]}),E&&!u&&(0,x.jsxs)("div",{className:"audio-preview",children:[(0,x.jsxs)("div",{className:"preview-header",children:[(0,x.jsx)("span",{className:"preview-title",children:"\ud83c\udfb5 Recording Preview"}),(0,x.jsxs)("span",{className:"preview-info",children:[V(E.duration)," \u2022 ",(E.size/1024).toFixed(0),"KB"]})]}),(0,x.jsx)(X,{audioUrl:E.url,duration:E.duration,compact:!1}),(0,x.jsxs)("div",{className:"preview-actions",children:[(0,x.jsxs)("button",{className:"preview-btn save-btn",onClick:B,title:"Save recording",children:[(0,x.jsx)("span",{className:"btn-icon",children:"\u2705"}),(0,x.jsx)("span",{className:"btn-text",children:"Save & Send"})]}),(0,x.jsxs)("button",{className:"preview-btn discard-btn",onClick:H,title:"Record again",children:[(0,x.jsx)("span",{className:"btn-icon",children:"\ud83d\udd04"}),(0,x.jsx)("span",{className:"btn-text",children:"Record Again"})]})]})]}),!u&&!E&&!l&&(0,x.jsxs)("div",{className:"quality-selector",children:[(0,x.jsx)("label",{className:"quality-label",children:"Recording Quality:"}),(0,x.jsxs)("div",{className:"quality-options",children:[(0,x.jsx)("button",{className:"quality-btn ".concat("low"===A?"active":""),onClick:()=>_("low"),title:"Low quality - Smaller file size",children:"\ud83d\udcc9 Low"}),(0,x.jsx)("button",{className:"quality-btn ".concat("standard"===A?"active":""),onClick:()=>_("standard"),title:"Standard quality - Balanced",children:"\ud83d\udcca Standard"}),(0,x.jsx)("button",{className:"quality-btn ".concat("high"===A?"active":""),onClick:()=>_("high"),title:"High quality - Larger file size",children:"\ud83d\udcc8 High"})]}),(0,x.jsxs)("div",{className:"quality-info",children:["low"===A&&"22kHz, 64kbps - Best for voice notes","standard"===A&&"44kHz, 128kbps - Recommended","high"===A&&"48kHz, 256kbps - Best quality"]})]}),(0,x.jsx)("div",{className:"recording-controls",children:u?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)("button",{className:"control-btn pause-resume-btn",onClick:h?O:F,title:h?"Resume recording":"Pause recording",children:[(0,x.jsx)("span",{className:"btn-icon",children:h?"\u25b6\ufe0f":"\u23f8\ufe0f"}),(0,x.jsx)("span",{className:"btn-text",children:h?"Resume":"Pause"})]}),(0,x.jsxs)("button",{className:"control-btn stop-btn",onClick:L,title:"Stop and save recording",children:[(0,x.jsx)("span",{className:"btn-icon",children:"\u23f9\ufe0f"}),(0,x.jsx)("span",{className:"btn-text",children:"Stop"})]}),(0,x.jsxs)("button",{className:"control-btn cancel-btn",onClick:R,title:"Cancel recording",children:[(0,x.jsx)("span",{className:"btn-icon",children:"\u274c"}),(0,x.jsx)("span",{className:"btn-text",children:"Cancel"})]})]}):(0,x.jsxs)("button",{className:"control-btn record-btn",onClick:z,title:"Start recording",children:[(0,x.jsx)("span",{className:"btn-icon",children:"\ud83c\udfa4"}),(0,x.jsx)("span",{className:"btn-text",children:"Record"})]})}),w&&(0,x.jsxs)("div",{className:"recorder-error",children:[(0,x.jsx)("span",{className:"error-icon",children:"\u26a0\ufe0f"}),(0,x.jsx)("span",{className:"error-text",children:w})]}),!u&&!l&&(0,x.jsxs)("div",{className:"recorder-info",children:[(0,x.jsxs)("div",{className:"info-item",children:[(0,x.jsx)("span",{className:"info-label",children:"Max Duration:"}),(0,x.jsx)("span",{className:"info-value",children:V(r)})]}),(0,x.jsxs)("div",{className:"info-item",children:[(0,x.jsx)("span",{className:"info-label",children:"Format:"}),(0,x.jsx)("span",{className:"info-value",children:J.config.mimeType.split(";")[0]})]})]})]}):(0,x.jsx)("div",{className:"voice-recorder error ".concat(i),children:(0,x.jsxs)("div",{className:"recorder-message",children:[(0,x.jsx)("span",{className:"error-icon",children:"\ud83c\udfa4\u274c"}),(0,x.jsx)("span",{className:"error-message",children:w}),(0,x.jsx)("div",{className:"error-help",children:(0,x.jsxs)("details",{children:[(0,x.jsx)("summary",{children:"How to fix microphone issues"}),(0,x.jsxs)("ul",{children:[(0,x.jsx)("li",{children:"\u2705 Click the lock icon in your browser's address bar"}),(0,x.jsx)("li",{children:"\u2705 Allow microphone permissions for this site"}),(0,x.jsx)("li",{children:"\u2705 Check your system microphone settings"}),(0,x.jsx)("li",{children:"\u2705 Make sure no other app is using the microphone"}),(0,x.jsx)("li",{children:"\u2705 Try refreshing the page"})]})]})}),(0,x.jsxs)("div",{className:"error-actions",children:[(0,x.jsxs)("button",{className:"retry-btn primary",onClick:U,disabled:N>=3,children:["\ud83d\udd04 ",N>0?"Retry (".concat(3-N," left)"):"Try Again"]}),(0,x.jsx)("button",{className:"test-btn secondary",onClick:async()=>{const e=await J.testMicrophoneAccess();e.success?(S('\u2705 Microphone test passed! Click "Try Again" to record.'),b(!0),setTimeout(()=>S(null),3e3)):S(e.message)},children:"\ud83d\udd0d Test Microphone"})]})]})}):(0,x.jsx)("div",{className:"voice-recorder loading ".concat(i),children:(0,x.jsxs)("div",{className:"recorder-message",children:[(0,x.jsx)("div",{className:"loading-spinner"}),(0,x.jsx)("span",{children:"Initializing voice recorder..."})]})})};const ee=new class{constructor(){this.messages=[],this.persistentStorage=b}loadMessagesFromStorage(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;try{const t=this.persistentStorage.getMessages();return e?t.filter(t=>t.conversationId===e):t}catch(t){return console.error("\u274c Failed to load messages from storage:",t),[]}}saveMessagesToStorage(e){try{return this.persistentStorage.setMessages(e)}catch(t){return console.error("\u274c Failed to save messages to storage:",t),!1}}async getMessages(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{conversationId:t,limit:n=50,offset:a=0}=e;try{const e=await fetch("/api/messages?conversationId=".concat(t,"&limit=").concat(n,"&offset=").concat(a));if(e.ok){return await e.json()}}catch(s){console.warn("API unavailable, loading from storage:",s)}return this.loadMessagesFromStorage(t)}async sendMessage(e){const t=i({id:Date.now().toString(),timestamp:(new Date).toISOString()},e);try{const e=await fetch("/api/messages",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(e.ok){const t=await e.json();return this.persistentStorage.addMessage(t),t}}catch(n){console.warn("\u26a0\ufe0f API unavailable, saving locally:",n)}return this.persistentStorage.addMessage(t),console.log("\ud83d\udcbe Message saved to persistent storage"),t}async addReaction(e,t){try{const n=await fetch("/api/messages/".concat(e,"/reactions"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({emoji:t})});if(n.ok){const t=await n.json();return this.persistentStorage.updateMessage(e,t),t}}catch(a){console.warn("\u26a0\ufe0f API unavailable for reactions:",a)}const n=this.loadMessagesFromStorage().find(t=>t.id===e);return n?(n.reactions||(n.reactions=[]),n.reactions.push({emoji:t,userId:"current-user",timestamp:(new Date).toISOString()}),this.persistentStorage.updateMessage(e,n),{success:!0}):{success:!1}}async deleteMessage(e){try{if((await fetch("/api/messages/".concat(e),{method:"DELETE"})).ok)return this.persistentStorage.deleteMessage(e),{success:!0}}catch(t){console.warn("\u26a0\ufe0f API unavailable for deletion:",t)}return this.persistentStorage.deleteMessage(e)?{success:!0}:{success:!1}}searchMessages(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this.loadMessagesFromStorage(t).filter(t=>{var n,a;return(null===(n=t.text)||void 0===n?void 0:n.toLowerCase().includes(e.toLowerCase()))||(null===(a=t.user)||void 0===a?void 0:a.toLowerCase().includes(e.toLowerCase()))})}clearMessages(){this.persistentStorage.setMessages([]),console.log("\ud83e\uddf9 All messages cleared from persistent storage")}};var te=n(111),ne=n.n(te);const ae=new class{constructor(){this.encryptionKey=null,this.isInitialized=!1,this.encryptionEnabled=!1}async initializeEncryption(e){try{const t=localStorage.getItem("encryption_key_".concat(e));return t?this.encryptionKey=t:(this.encryptionKey=ne().lib.WordArray.random(32).toString(),localStorage.setItem("encryption_key_".concat(e),this.encryptionKey)),this.isInitialized=!0,this.encryptionEnabled=!0,{success:!0,message:"Encryption initialized successfully",keyGenerated:!t}}catch(t){return console.error("Encryption initialization failed:",t),{success:!1,message:"Failed to initialize encryption",error:t.message}}}getEncryptionStatus(){return{initialized:this.isInitialized,enabled:this.encryptionEnabled,hasKey:!!this.encryptionKey}}encryptMessage(e){if(!this.isInitialized||!this.encryptionKey)throw new Error("Encryption not initialized");try{return ne().AES.encrypt(e,this.encryptionKey).toString()}catch(t){throw console.error("Message encryption failed:",t),t}}decryptMessage(e){if(!this.isInitialized||!this.encryptionKey)throw new Error("Encryption not initialized");try{return ne().AES.decrypt(e,this.encryptionKey).toString(ne().enc.Utf8)}catch(t){throw console.error("Message decryption failed:",t),t}}async sendMessage(e){try{let t=i({},e);this.encryptionEnabled&&e.text&&(t.text=this.encryptMessage(e.text),t.encrypted=!0),t.id=Date.now().toString(),t.timestamp=(new Date).toISOString(),t.encryptionStatus=this.getEncryptionStatus();const n=await fetch("/api/messages/encrypted",{method:"POST",headers:{"Content-Type":"application/json","X-Encryption-Enabled":this.encryptionEnabled.toString()},body:JSON.stringify(t)});if(n.ok)return await n.json();throw new Error("API request failed")}catch(t){return console.warn("Encrypted message API unavailable, using fallback:",t),i(i({},e),{},{id:Date.now().toString(),timestamp:(new Date).toISOString(),encrypted:this.encryptionEnabled,fallback:!0})}}async getMessages(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{limit:t=50,conversationId:n}=e;try{const e=await fetch("/api/messages/encrypted?limit=".concat(t,"&conversationId=").concat(n),{headers:{"X-Encryption-Key":this.encryptionKey||""}});if(e.ok){return(await e.json()).map(e=>{if(e.encrypted&&this.encryptionEnabled)try{return i(i({},e),{},{text:this.decryptMessage(e.text),decrypted:!0})}catch(t){return console.error("Failed to decrypt message:",t),i(i({},e),{},{text:"[Decryption Failed]",decryptionError:!0})}return e})}}catch(a){console.warn("Encrypted messages API unavailable:",a)}return[]}toggleEncryption(){return this.encryptionEnabled=!this.encryptionEnabled,this.encryptionEnabled}resetEncryption(e){localStorage.removeItem("encryption_key_".concat(e)),this.encryptionKey=null,this.isInitialized=!1,this.encryptionEnabled=!1}};const se=new class{constructor(){this.currentCall=null,this.localStream=null,this.remoteStream=null,this.peerConnection=null,this.isCallActive=!1,this.isMuted=!1,this.isVideoEnabled=!1,this.callHistory=[]}async initializeCall(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{const{video:a=!1,audio:s=!0}=t;if(console.log("\ud83c\udfa4 Requesting media permissions - video:",a,"audio:",s),!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)return console.warn("\u26a0\ufe0f getUserMedia not supported"),this.currentCall={id:Date.now().toString(),targetUserId:e,startTime:new Date,type:a?"video":"voice",status:"connecting"},this.isCallActive=!0,{success:!0,callId:this.currentCall.id,localStream:null};try{this.localStream=await navigator.mediaDevices.getUserMedia({video:a,audio:s}),console.log("\u2705 Media stream obtained:",this.localStream)}catch(n){console.warn("\u26a0\ufe0f Failed to get media stream:",n.message),this.localStream=null}return this.peerConnection=new RTCPeerConnection({iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:stun1.l.google.com:19302"}]}),this.localStream&&this.localStream.getTracks().forEach(e=>{this.peerConnection.addTrack(e,this.localStream)}),this.peerConnection.ontrack=e=>{this.remoteStream=e.streams[0]},this.currentCall={id:Date.now().toString(),targetUserId:e,startTime:new Date,type:a?"video":"voice",status:"connecting"},this.isCallActive=!0,this.isVideoEnabled=a,console.log("\ud83d\udcde Call initialized successfully:",this.currentCall),{success:!0,callId:this.currentCall.id,localStream:this.localStream}}catch(a){return console.error("\u274c Call initialization failed:",a),{success:!1,error:a.message}}}async endCall(){try{return this.localStream&&(this.localStream.getTracks().forEach(e=>e.stop()),this.localStream=null),this.peerConnection&&(this.peerConnection.close(),this.peerConnection=null),this.currentCall&&(this.currentCall.endTime=new Date,this.currentCall.duration=this.currentCall.endTime-this.currentCall.startTime,this.currentCall.status="ended",this.callHistory.push(i({},this.currentCall)),this.currentCall=null),this.isCallActive=!1,this.isMuted=!1,this.isVideoEnabled=!1,{success:!0}}catch(e){return console.error("Error ending call:",e),{success:!1,error:e.message}}}toggleMute(){if(this.localStream){const e=this.localStream.getAudioTracks()[0];e&&(e.enabled=!e.enabled,this.isMuted=!e.enabled)}return this.isMuted}toggleVideo(){if(this.localStream){const e=this.localStream.getVideoTracks()[0];e&&(e.enabled=!e.enabled,this.isVideoEnabled=e.enabled)}return this.isVideoEnabled}getCallState(){return{active:this.isCallActive,muted:this.isMuted,videoEnabled:this.isVideoEnabled,currentCall:this.currentCall,hasLocalStream:!!this.localStream,hasRemoteStream:!!this.remoteStream}}getCallHistory(){return this.callHistory}async acceptCall(e){try{const t=await this.initializeCall(e.callerId,{video:e.hasVideo,audio:!0});return t.success&&(this.currentCall.status="active",this.currentCall.type="incoming"),t}catch(t){return console.error("Error accepting call:",t),{success:!1,error:t.message}}}rejectCall(e){return this.callHistory.push({id:e.id,targetUserId:e.callerId,startTime:new Date(e.timestamp),endTime:new Date,type:"incoming",status:"rejected",duration:0}),{success:!0}}async checkDeviceCapabilities(){try{const e=await navigator.mediaDevices.enumerateDevices(),t=e.some(e=>"videoinput"===e.kind);return{camera:t,microphone:e.some(e=>"audioinput"===e.kind),webRTC:!!window.RTCPeerConnection}}catch(e){return console.error("Error checking device capabilities:",e),{camera:!1,microphone:!1,webRTC:!1,error:e.message}}}async getAvailableCallMethods(e){console.log("\ud83d\udd0d Getting available call methods for user:",e);const t=await this.checkDeviceCapabilities();console.log("\ud83c\udfa4 Device capabilities:",t);const n=[];return t.microphone&&t.webRTC&&n.push({type:"voice",icon:"\ud83d\udcde",description:"Voice Call",quality:"high",estimated_quality:"HD Audio",latency:50+100*Math.random(),note:"High-quality voice call using WebRTC"}),t.camera&&t.microphone&&t.webRTC&&n.push({type:"video",icon:"\ud83d\udcf9",description:"Video Call",quality:"premium",estimated_quality:"HD Video",latency:80+120*Math.random(),note:"HD video call with voice"}),0===n.length&&n.push({type:"fallback",icon:"\ud83d\udcf1",description:"Audio Call (Fallback)",quality:"standard",estimated_quality:"Standard Audio",latency:200,note:"Basic audio call - check your device permissions"}),console.log("\ud83d\udcde Available methods:",n),n}async initiateEnhancedCall(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"auto";try{const n=await this.getAvailableCallMethods(e);let a;a="auto"===t?n[0]:n.find(e=>e.type===t)||n[0];const s="video"===a.type,r=await this.initializeCall(e.id||e.username,{video:s,audio:!0});if(r.success)return{success:!0,callId:r.callId,method:a,status:"connecting",connectionStatus:{quality:"good",latency:a.latency}};throw new Error(r.error)}catch(n){return console.error("Failed to initiate enhanced call:",n),{success:!1,error:n.message}}}};const re=new class{constructor(){this.isConnected=navigator.onLine,this.connectionType="unknown",this.lastConnectionCheck=Date.now(),this.connectionHistory=[],this.reconnectAttempts=0,this.maxReconnectAttempts=5,this.websocket=null,this.eventListeners=new Map}async connect(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{const{autoReconnect:t=!0,websocketUrl:n=null}=e;this.setupNetworkMonitoring(),n&&await this.connectWebSocket(n);const a=await this.checkConnectionQuality();return this.connectionHistory.push({timestamp:new Date,status:"connected",quality:a,type:this.connectionType}),{connected:!0,quality:a,type:this.connectionType,websocketConnected:!!this.websocket}}catch(t){return console.error("Connection failed:",t),{connected:!1,error:t.message}}}async disconnect(){try{return this.websocket&&(this.websocket.close(),this.websocket=null),this.removeNetworkMonitoring(),this.connectionHistory.push({timestamp:new Date,status:"disconnected",manual:!0}),{success:!0}}catch(e){return console.error("Disconnect error:",e),{success:!1,error:e.message}}}getStatus(){var e;return{connected:this.isConnected,type:this.connectionType,lastCheck:this.lastConnectionCheck,websocketConnected:(null===(e=this.websocket)||void 0===e?void 0:e.readyState)===WebSocket.OPEN,reconnectAttempts:this.reconnectAttempts}}async checkConnectionQuality(){try{const e=Date.now(),t=(await fetch("/api/ping",{method:"HEAD",cache:"no-cache"}),Date.now()-e);let n="excellent";return t>1e3?n="poor":t>500?n="fair":t>200&&(n="good"),{latency:t,quality:n,timestamp:new Date}}catch(e){return{latency:-1,quality:"offline",error:e.message,timestamp:new Date}}}setupNetworkMonitoring(){const e=()=>{this.isConnected=!0,this.connectionType=this.getConnectionType(),this.emit("online",{timestamp:new Date}),this.reconnectAttempts>0&&(this.reconnectAttempts=0,this.emit("reconnected",{attempts:this.reconnectAttempts}))},t=()=>{this.isConnected=!1,this.emit("offline",{timestamp:new Date}),this.attemptReconnect()};window.addEventListener("online",e),window.addEventListener("offline",t),this.networkHandlers={handleOnline:e,handleOffline:t}}removeNetworkMonitoring(){this.networkHandlers&&(window.removeEventListener("online",this.networkHandlers.handleOnline),window.removeEventListener("offline",this.networkHandlers.handleOffline))}async attemptReconnect(){if(this.reconnectAttempts>=this.maxReconnectAttempts)return void this.emit("reconnectFailed",{attempts:this.reconnectAttempts});this.reconnectAttempts++,this.emit("reconnecting",{attempt:this.reconnectAttempts});const e=Math.min(1e3*Math.pow(2,this.reconnectAttempts),3e4);setTimeout(async()=>{try{(await this.connect()).connected?(this.reconnectAttempts=0,this.emit("reconnected",{attempts:this.reconnectAttempts})):this.attemptReconnect()}catch(e){this.attemptReconnect()}},e)}async connectWebSocket(e){return new Promise((t,n)=>{try{this.websocket=new WebSocket(e),this.websocket.onopen=()=>{this.emit("websocketConnected",{url:e}),t()},this.websocket.onerror=e=>{this.emit("websocketError",{error:e}),n(e)},this.websocket.onclose=()=>{this.emit("websocketDisconnected",{})},this.websocket.onmessage=e=>{this.emit("websocketMessage",{data:e.data})}}catch(a){n(a)}})}getConnectionType(){return"connection"in navigator&&navigator.connection.effectiveType||"unknown"}on(e,t){this.eventListeners.has(e)||this.eventListeners.set(e,[]),this.eventListeners.get(e).push(t)}off(e,t){if(this.eventListeners.has(e)){var n,a;const s=this.eventListeners.get(e),r=null!==(n=null===s||void 0===s||null===(a=s.indexOf)||void 0===a?void 0:a.call(s,t))&&void 0!==n?n:-1;r>-1&&s.splice(r,1)}}emit(e,t){this.eventListeners.has(e)&&this.eventListeners.get(e).forEach(n=>{try{n(t)}catch(a){console.error("Error in event listener for ".concat(e,":"),a)}})}getConnectionHistory(){return this.connectionHistory}getConnectionStatus(){const e=navigator.onLine&&this.isConnected,t=this.getConnectionQuality(),n=this.connectionType||"unknown";let a="#10b981";return e?("poor"===t||"fair"===t)&&(a="#f59e0b"):a="#ef4444",{quality:e?t:"offline",type:e?n:"offline",color:a,connected:e,websocketConnected:!!this.websocket}}getConnectionQuality(){if(!navigator.onLine)return"offline";const e=this.connectionHistory.filter(e=>Date.now()-e.timestamp.getTime()<3e4).sort((e,t)=>t.timestamp.getTime()-e.timestamp.getTime());if(e.length>0&&e[0].quality)return e[0].quality;const t=navigator.connection||navigator.mozConnection||navigator.webkitConnection;if(t){const e=t.effectiveType;if("4g"===e)return"excellent";if("3g"===e)return"good";if("2g"===e)return"fair";if("slow-2g"===e)return"poor"}return"good"}},oe={BASE_URL:"http://localhost:5000/api",WS_URL:"ws://localhost:5000",TIMEOUT:1e4},ie=e=>{const t=e.startsWith("/")?e.slice(1):e;return"".concat(oe.BASE_URL,"/").concat(t)};const le=new class{constructor(){this.features={camera:!1,microphone:!1,geolocation:!1,notifications:!1,vibration:!1,deviceMotion:!1,touchSupport:!1,fullscreen:!1},this.permissions={},this.isInitialized=!1}async initialize(){try{return await this.detectFeatures(),await this.checkPermissions(),this.isInitialized=!0,{success:!0,features:this.features,permissions:this.permissions}}catch(e){return console.error("Failed to initialize device features:",e),{success:!1,error:e.message}}}async detectFeatures(){if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia)try{const e=await navigator.mediaDevices.enumerateDevices();this.features.camera=e.some(e=>"videoinput"===e.kind),this.features.microphone=e.some(e=>"audioinput"===e.kind)}catch(e){console.warn("Could not enumerate devices:",e)}this.features.geolocation="geolocation"in navigator,this.features.notifications="Notification"in window,this.features.vibration="vibrate"in navigator,this.features.deviceMotion="DeviceMotionEvent"in window,this.features.touchSupport="ontouchstart"in window||navigator.maxTouchPoints>0,this.features.fullscreen=!!(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled)}async checkPermissions(){if("permissions"in navigator){const t=["camera","microphone","geolocation","notifications"];for(const n of t)try{const e=await navigator.permissions.query({name:n});this.permissions[n]=e.state}catch(e){this.permissions[n]="unknown"}}}getFeatures(){return i(i({},this.features),{},{permissions:this.permissions,initialized:this.isInitialized})}async requestCamera(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{video:!0};if(!this.features.camera)return{success:!1,error:"Camera not available"};try{var t;const n=await navigator.mediaDevices.getUserMedia(e);return{success:!0,stream:n,deviceId:null===(t=n.getVideoTracks()[0])||void 0===t?void 0:t.getSettings().deviceId}}catch(n){return{success:!1,error:n.message,name:n.name}}}async requestMicrophone(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{audio:!0};if(!this.features.microphone)return{success:!1,error:"Microphone not available"};try{var t;const n=await navigator.mediaDevices.getUserMedia(e);return{success:!0,stream:n,deviceId:null===(t=n.getAudioTracks()[0])||void 0===t?void 0:t.getSettings().deviceId}}catch(n){return{success:!1,error:n.message,name:n.name}}}async requestGeolocation(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.features.geolocation?new Promise(t=>{navigator.geolocation.getCurrentPosition(e=>{t({success:!0,coords:{latitude:e.coords.latitude,longitude:e.coords.longitude,accuracy:e.coords.accuracy},timestamp:e.timestamp})},e=>{t({success:!1,error:e.message,code:e.code})},i({enableHighAccuracy:!1,timeout:1e4,maximumAge:3e5},e))}):{success:!1,error:"Geolocation not available"}}async requestNotifications(){if(!this.features.notifications)return{success:!1,error:"Notifications not available"};try{const e=await Notification.requestPermission();return this.permissions.notifications=e,{success:"granted"===e,permission:e}}catch(e){return{success:!1,error:e.message}}}sendNotification(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.features.notifications||"granted"!==this.permissions.notifications)return{success:!1,error:"Notification permission not granted"};try{return{success:!0,notification:new Notification(e,i({icon:"/logo192.png",badge:"/logo192.png"},t))}}catch(n){return{success:!1,error:n.message}}}vibrate(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[200,100,200];if(!this.features.vibration)return{success:!1,error:"Vibration not available"};try{return navigator.vibrate(e),{success:!0}}catch(t){return{success:!1,error:t.message}}}async enterFullscreen(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.documentElement;if(!this.features.fullscreen)return{success:!1,error:"Fullscreen not available"};try{return e.requestFullscreen?await e.requestFullscreen():e.webkitRequestFullscreen?await e.webkitRequestFullscreen():e.mozRequestFullScreen&&await e.mozRequestFullScreen(),{success:!0}}catch(t){return{success:!1,error:t.message}}}async exitFullscreen(){try{return document.exitFullscreen?await document.exitFullscreen():document.webkitExitFullscreen?await document.webkitExitFullscreen():document.mozCancelFullScreen&&await document.mozCancelFullScreen(),{success:!0}}catch(e){return{success:!1,error:e.message}}}startDeviceMotionListening(e){if(!this.features.deviceMotion)return{success:!1,error:"Device motion not available"};const t=t=>{e({acceleration:t.acceleration,accelerationIncludingGravity:t.accelerationIncludingGravity,rotationRate:t.rotationRate,interval:t.interval})};return window.addEventListener("devicemotion",t),{success:!0,stop:()=>window.removeEventListener("devicemotion",t)}}isSupported(e){const t={camera:"camera",microphone:"microphone",geolocation:"geolocation",notifications:"notifications",vibration:"vibration",deviceMotion:"deviceMotion",motion:"deviceMotion",touch:"touchSupport",touchSupport:"touchSupport",fullscreen:"fullscreen",contacts:!1}[e];return!1!==t&&(!(!t||!this.features.hasOwnProperty(t))&&this.features[t])}getSupportedFeatures(){return Object.keys(this.features).filter(e=>this.features[e])}getFeatureStatus(e){const t=this.isSupported(e),n=this.permissions[e]||"unknown";return{supported:t,permission:n,available:t&&"denied"!==n}}};const ce=new class{constructor(){this.storageKey="quibish_conversations",this.conversations=this.loadConversationsFromStorage()}loadConversationsFromStorage(){try{const e=localStorage.getItem(this.storageKey);return e?JSON.parse(e):[]}catch(e){return console.error("Error loading conversations from storage:",e),[]}}saveConversationsToStorage(){try{localStorage.setItem(this.storageKey,JSON.stringify(this.conversations))}catch(e){console.error("Error saving conversations to storage:",e)}}getAllConversations(){return this.conversations}getConversationById(e){return this.conversations.find(t=>t.id===e)}createConversationWithUser(e,t){const n=this.conversations.find(t=>t.participantId===e.id||t.participants&&t.participants.includes(e.id));if(n)return{success:!0,conversation:n,isNew:!1};const a={id:Date.now().toString(),name:e.name||e.username,avatar:e.avatar||"https://ui-avatars.com/api/?name=".concat(encodeURIComponent(e.name||e.username),"&background=667eea&color=fff&size=40"),lastMessage:"",lastMessageTime:"now",unreadCount:0,isOnline:"online"===e.status,isPinned:!1,isMuted:!1,messageStatus:null,timestamp:new Date,participantId:e.id,participants:[t,e.id],type:"direct",createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString(),user:{id:e.id,name:e.name,username:e.username,avatar:e.avatar,status:e.status},messages:[]};return this.conversations.unshift(a),this.saveConversationsToStorage(),{success:!0,conversation:a,isNew:!0}}updateConversation(e,t){const n=this.conversations.findIndex(t=>t.id===e);return-1!==n?(this.conversations[n]=i(i(i({},this.conversations[n]),t),{},{updatedAt:(new Date).toISOString()}),this.saveConversationsToStorage(),this.conversations[n]):null}deleteConversation(e){const t=this.conversations.findIndex(t=>t.id===e);return-1!==t&&(this.conversations.splice(t,1),this.saveConversationsToStorage(),!0)}addMessageToConversation(e,t){const n=this.getConversationById(e);return n?(n.messages||(n.messages=[]),n.messages.push(t),n.lastMessage=t.text||t.content||"",n.lastMessageTime="now",n.timestamp=new Date,n.updatedAt=(new Date).toISOString(),this.saveConversationsToStorage(),n):null}searchConversations(e){if(!e||0===e.trim().length)return this.conversations;const t=e.toLowerCase().trim();return this.conversations.filter(e=>{var n,a,s,r,o,i;return(null===(n=e.name)||void 0===n?void 0:n.toLowerCase().includes(t))||(null===(a=e.lastMessage)||void 0===a?void 0:a.toLowerCase().includes(t))||(null===(s=e.user)||void 0===s||null===(r=s.name)||void 0===r?void 0:r.toLowerCase().includes(t))||(null===(o=e.user)||void 0===o||null===(i=o.username)||void 0===i?void 0:i.toLowerCase().includes(t))})}getStats(){return{total:this.conversations.length,unread:this.conversations.filter(e=>e.unreadCount>0).length,groups:this.conversations.filter(e=>"group"===e.type).length,direct:this.conversations.filter(e=>"direct"===e.type).length,pinned:this.conversations.filter(e=>e.isPinned).length}}initializeDefaultConversations(){if(0===this.conversations.length){const e=[{id:"welcome-1",name:"Welcome to Quibish",avatar:"https://ui-avatars.com/api/?name=Quibish&background=667eea&color=fff&size=40",lastMessage:"Welcome! Start chatting by searching for users above.",lastMessageTime:"now",unreadCount:1,isOnline:!1,isPinned:!0,isMuted:!1,messageStatus:"delivered",timestamp:new Date,type:"system",createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString(),messages:[{id:"welcome-msg-1",text:"\ud83d\udc4b Welcome to Quibish! To start chatting with other users, click the \ud83d\udc65 button in the search bar above and search for people by name.",sender:"System",timestamp:(new Date).toISOString(),type:"system"}]}];this.conversations=e,this.saveConversationsToStorage()}}subscribe(e){this.updateCallback=e}notifyUpdate(){this.updateCallback&&this.updateCallback(this.conversations)}clearConversations(){this.conversations=[],this.saveConversationsToStorage()}},ue=t=>{var n,a,s;let{user:r={id:"user1",name:"Current User",avatar:null},conversations:o=[],currentConversation:l=null,onLogout:c=()=>{},darkMode:u=!1,onToggleDarkMode:d=()=>{}}=t;const{user:h,updateUser:m,isAuthenticated:p}=k(),f=h||r;(0,e.useEffect)(()=>{f&&f.id&&(b.updateUserData(f),console.log("\ud83d\udcbe User data synced to persistent storage"))},[f]);const[g]=(0,e.useState)(!0),[v,y]=(0,e.useState)(!1),[w,S]=(0,e.useState)(()=>{const e=ce.getAllConversations();return e.length>0?e:o.length>0?o:(ce.initializeDefaultConversations(),ce.getAllConversations())}),[z,Q]=(0,e.useState)((null===(n=w[0])||void 0===n?void 0:n.id)||null),[J,te]=(0,e.useState)(""),[ne,oe]=(0,e.useState)("conversations"),[ue,de]=(0,e.useState)(!1),[he,me]=(0,e.useState)("all"),[pe,fe]=(0,e.useState)(!1),[ge,ve]=(0,e.useState)(!1),[ye,be]=(0,e.useState)(!1),[xe,we]=(0,e.useState)({open:!1,imageUrl:null,imageName:null,zoom:1,pan:{x:0,y:0},isDragging:!1,currentIndex:0,images:[],isLoading:!1}),[Se,ke]=(0,e.useState)({open:!1,videoUrl:null,videoName:null,poster:null,type:null}),[je,Ne]=(0,e.useState)(!1),[Ce,Ee]=(0,e.useState)(!1),[Te,Ae]=(0,e.useState)(!1),[_e,Ie]=(0,e.useState)(!1),[Pe,De]=(0,e.useState)("photo"),[Me,ze]=(0,e.useState)(!1),[Re,Le]=(0,e.useState)(!1),[Fe,Oe]=(0,e.useState)(null),[Ue,Be]=(0,e.useState)(!1),[He,qe]=(0,e.useState)(!1),[We,Ve]=(0,e.useState)(!1),[Ke,Ge]=(0,e.useState)(!1),[$e,Ye]=(0,e.useState)([]),[Qe,Je]=(0,e.useState)(!1),[Xe,Ze]=(0,e.useState)(""),[et,tt]=(0,e.useState)(null),[nt,at]=(0,e.useState)(!1),[st,rt]=(0,e.useState)(new Map),[ot,it]=(0,e.useState)(!1),[lt,ct]=(0,e.useState)({enabled:!1}),[ut,dt]=(0,e.useState)(!0),[ht,mt]=(0,e.useState)({isUploading:!1,fileName:"",progress:0,fileSize:0,uploadedSize:0}),[pt,ft]=(0,e.useState)(null),[gt,vt]=(0,e.useState)(null),yt=(0,e.useRef)(null),bt=(0,e.useRef)(null),xt=(0,e.useRef)(null),wt=(0,e.useRef)(null),St=(0,e.useRef)(null),kt=(0,e.useRef)(null),jt=(0,e.useRef)(null),[Nt,Ct]=(0,e.useState)([]),[Et,Tt]=(0,e.useState)(!0),[At,_t]=(0,e.useState)(null),[It,Pt]=(0,e.useState)(null),[Dt,Mt]=(0,e.useState)(!1),zt=z&&w.find(e=>e.id===z)||null;(0,e.useEffect)(()=>{(async()=>{try{Tt(!0),_t(null);try{const e=await ae.initializeEncryption(f.id);if(it(e),e){const e=ae.getEncryptionStatus();ct(e),console.log("\ud83d\udd12 Encryption initialized for ProChat")}}catch(e){console.warn("\u26a0\ufe0f Encryption initialization failed:",e),it(!1)}const t=await ae.getMessages({limit:50});Array.isArray(t)?Ct(t):(console.warn("Invalid messages format received:",t),Ct([]))}catch(t){console.error("Failed to load messages:",t),_t("Failed to load messages");try{const e=b.getMessages();Array.isArray(e)&&e.length>0&&(Ct(e),console.log("\ud83d\udcf1 Loaded messages from persistent storage"))}catch(n){console.error("\u274c Failed to load from persistent storage:",n)}}finally{Tt(!1)}})()},[f.id]);const Rt=(0,e.useCallback)(()=>{St.current&&St.current.scrollIntoView({behavior:"smooth",block:"end"})},[]);(0,e.useEffect)(()=>{Rt()},[Nt,Rt]),(0,e.useEffect)(()=>{const e=()=>{Jn(re.getConnectionStatus())};e();const t=setInterval(e,1e4);return()=>clearInterval(t)},[]),(0,e.useEffect)(()=>(null!==f&&void 0!==f&&f.id&&(async()=>{try{console.log("\ud83d\udd14 Initializing notification system..."),await $.initialize(f.id)&&(console.log("\u2705 Push notification service initialized"),$.setupPresenceDetection(),await fetch(ie("/notifications/presence"),{method:"POST",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")),"Content-Type":"application/json"},body:JSON.stringify({userId:f.id,isOnline:!0,lastSeen:(new Date).toISOString()})}))}catch(e){console.error("\u274c Failed to initialize notifications:",e)}})(),()=>{null!==f&&void 0!==f&&f.id&&fetch(ie("/notifications/presence"),{method:"POST",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")),"Content-Type":"application/json"},body:JSON.stringify({userId:f.id,isOnline:!1,lastSeen:(new Date).toISOString()})}).catch(console.error)}),[null===f||void 0===f?void 0:f.id]),(0,e.useEffect)(()=>{(async()=>{try{console.log("\ud83d\udd0d Initializing search index...");const e=b.getMessages();await L.buildSearchIndex(e),console.log("\u2705 Search index built successfully"),"serviceWorker"in navigator&&navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({type:"INDEX_MESSAGES"})}catch(e){console.error("\u274c Failed to initialize search index:",e)}})()},[]),(0,e.useEffect)(()=>{const e=e=>{(e.ctrlKey||e.metaKey)&&"f"===e.key&&(e.preventDefault(),Le(!0)),"Escape"===e.key&&(Re?Le(!1):Ce&&Ee(!1))};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[Re,Ce]),(0,e.useEffect)(()=>{const e=()=>{window.innerWidth<=480?y(!0):window.innerWidth>768&&y(!1)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),(0,e.useEffect)(()=>{if(window.innerWidth<=480&&(pe||Dt)){document.body.classList.add("emoji-picker-open");const e=document.body.style.overflow;return document.body.style.overflow="hidden",()=>{document.body.classList.remove("emoji-picker-open"),document.body.style.overflow=e}}},[pe,Dt]);const Lt=(0,e.useCallback)(()=>{y(e=>!e)},[]),Ft=(0,e.useCallback)(e=>{window.innerWidth<=768&&(vt(null),ft(e.targetTouches[0].clientX))},[]),Ot=(0,e.useCallback)(e=>{window.innerWidth<=768&&vt(e.targetTouches[0].clientX)},[]),Ut=(0,e.useCallback)(()=>{if(!pt||!gt)return;const e=pt-gt,t=e>50,n=e<-50;window.innerWidth<=768&&(t&&!v?y(!0):n&&v&&y(!1)),ft(null),vt(null)},[pt,gt,v]),Bt=(0,e.useCallback)(()=>{window.innerWidth<=480&&y(!0)},[]),Ht=(0,e.useCallback)(async e=>{if(!e)return void console.warn("Invalid conversation ID provided");const t=w.find(t=>t.id===e);if(!t)return console.warn("Conversation not found:",e),void _t("Conversation not found");Q(e);try{Tt(!0),_t(null),console.log("Loading messages for conversation:",t.name,e);const n=await ee.getMessages({conversationId:e,limit:50});Array.isArray(n)?(Ct(n),console.log("Loaded conversation messages:",n.length),t.unreadCount>0&&console.log("Marked conversation as read:",t.name),setTimeout(()=>{Rt()},100)):(console.warn("Invalid conversation messages format received:",n),Ct([]))}catch(n){console.error("Failed to load conversation messages:",n),_t("Failed to load conversation messages");try{const t=ee.loadMessagesFromStorage(e);Array.isArray(t)&&t.length>0?(Ct(t),console.log("Loaded conversation messages from cache")):Ct([])}catch(a){console.error("Error loading conversation messages from storage:",a),Ct([])}}finally{Tt(!1),window.innerWidth<=768&&y(!0)}},[w,ee,Rt]),qt=(0,e.useCallback)(e=>{try{var t;const n=(null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.value)||"";te(n)}catch(n){console.error("Error handling search change:",n),te("")}},[]),Wt=((0,e.useCallback)(()=>{const e="conversations"===ne?"users":"conversations";oe(e),te(""),"users"===e&&de(!0)},[ne]),(0,e.useCallback)(()=>{oe("users"),de(!0)},[])),Vt=(0,e.useCallback)(async e=>{console.log("User selected for chat:",e);try{const t=ce.createConversationWithUser(e,f.id);if(t.success){const n=ce.getAllConversations();return S(n),Q(t.conversation.id),de(!1),t.isNew?console.log("\u2705 Started new chat with ".concat(e.name||e.username)):console.log("\u2705 Opened existing chat with ".concat(e.name||e.username)),setTimeout(()=>{const e=document.querySelector(".pro-chat-container");e&&(e.scrollTop=0)},100),Promise.resolve(t)}return console.error("Failed to create conversation:",t.error),Promise.reject(new Error("Failed to start chat. Please try again."))}catch(t){return console.error("Error creating conversation:",t),Promise.reject(t)}},[f.id]);(0,e.useEffect)(()=>(ce.subscribe(e=>{S(e)}),()=>{ce.subscribe(null)}),[]),(0,e.useEffect)(()=>{w.length>0&&(ce.conversations=w,ce.saveConversationsToStorage())},[w]);const Kt=(0,e.useCallback)(e=>{me(e)},[]),Gt=(0,e.useCallback)(()=>{On(!0)},[]),$t=(0,e.useCallback)(()=>{On(!0),console.log("Create group clicked - opening new chat modal")},[]),Yt=(0,e.useCallback)(async e=>{try{var t,n,a,s;console.log("New chat created:",e);const r={id:e.id||"conv_".concat(Date.now()),name:(null===e||void 0===e?void 0:e.name)||(null===e||void 0===e||null===(t=e.participants)||void 0===t||null===(n=t.find(e=>(null===e||void 0===e?void 0:e.id)!==(null===f||void 0===f?void 0:f.id)))||void 0===n?void 0:n.name)||"New Chat",type:e.type,participants:e.participants,lastMessage:{text:"Chat created",timestamp:e.createdAt||(new Date).toISOString(),user:{name:"System"}},unreadCount:0,isOnline:!0,avatar:"group"===e.type?null:null===e||void 0===e||null===(a=e.participants)||void 0===a||null===(s=a.find(e=>(null===e||void 0===e?void 0:e.id)!==(null===f||void 0===f?void 0:f.id)))||void 0===s?void 0:s.avatar};console.log("Formatted conversation:",r),Q(r.id)}catch(r){throw console.error("Failed to handle new chat:",r),r}},[f]),Qt=(0,e.useCallback)(()=>{console.log("\u2699\ufe0f Settings button clicked!"),Ln({open:!0,section:"general"}),console.log("\u2705 Settings modal state set to open")},[]),Jt=(0,e.useCallback)(e=>{const t=e.target.files;t&&t.length>0&&(Array.from(t).forEach(e=>{if(console.log("Processing file:",e.name,e.type),e.type.startsWith("image/")){const t=new FileReader;t.onload=t=>{var n;console.log("Image loaded, creating message with URL:",(null===(n=t.target.result)||void 0===n?void 0:n.substring(0,50))+"...");const a={id:Date.now()+Math.random(),text:"\ufffd ".concat(e.name),user:f,timestamp:(new Date).toISOString(),reactions:[],file:{name:e.name,size:e.size,type:e.type,url:t.target.result}};Ct(e=>[...e,a]),setTimeout(()=>{Rt()},100)},t.onerror=e=>{console.error("Error reading file:",e)},t.readAsDataURL(e)}else{const t={id:Date.now()+Math.random(),text:"\ud83d\udcce ".concat(e.name," (").concat((e.size/1024).toFixed(1)," KB)"),user:f,timestamp:(new Date).toISOString(),reactions:[],file:{name:e.name,size:e.size,type:e.type,url:URL.createObjectURL(e)}};Ct(e=>[...e,t]),setTimeout(()=>{Rt()},100)}}),e.target.value="")},[f,Rt]),Xt=(0,e.useCallback)(()=>/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),[]),Zt=(0,e.useCallback)(()=>{Ne(!0)},[]),en=(0,e.useCallback)(()=>{const e=document.createElement("input");e.type="file",e.accept="image/gif",e.multiple=!0,e.onchange=e=>{Jt(e)},e.click()},[Jt]),tn=(0,e.useCallback)(e=>{const t={id:Date.now()+Math.random(),text:"\ud83c\udfad ".concat(e.name),user:f,timestamp:(new Date).toISOString(),reactions:[],file:{name:e.name||"selected.gif",size:e.size||0,type:"image/gif",url:e.url,isGif:!0}};Ct(e=>[...e,t]),Ne(!1),setTimeout(()=>{Rt()},100)},[f,Ct,Rt]),nn=(0,e.useCallback)(()=>{Ne(!1)},[]),an=(0,e.useCallback)(()=>{},[]),sn=(0,e.useCallback)(function(){De(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"photo"),Ae(!0)},[]),rn=(0,e.useCallback)(()=>{Ae(!1)},[]),on=(0,e.useCallback)(async(e,t,n)=>{try{const a=new File([e],"".concat(t,"-").concat(Date.now(),".").concat("photo"===t?"jpg":"mp4"),{type:e.type});await Jt({target:{files:[a]}}),Ae(!1),na({text:"\ud83d\udcf8 ".concat("photo"===t?"Photo":"Video"," captured from camera"),type:"system",metadata:n})}catch(a){console.error("Failed to handle camera capture:",a),na({text:"\u274c Failed to upload captured media",type:"system"})}},[]),ln=(0,e.useCallback)(()=>{Ie(!0)},[]),cn=(0,e.useCallback)(()=>{Ie(!1)},[]),un=(0,e.useCallback)(e=>{try{const t=e.map(e=>{const t=[];return e.name&&t.push(e.name),e.phone&&t.push("\ud83d\udcf1 ".concat(e.phone)),e.email&&t.push("\ud83d\udce7 ".concat(e.email)),t.join("\n")}).join("\n\n");na({text:"\ud83d\udc65 Shared Contact".concat(e.length>1?"s":"",":\n\n").concat(t),type:"contact",metadata:{contacts:e,shared:!0}}),Ie(!1)}catch(t){console.error("Failed to share contacts:",t),na({text:"\u274c Failed to share contacts",type:"system"})}},[]),dn=(0,e.useCallback)(()=>{ve(!0)},[]),hn=(0,e.useCallback)(()=>{Ee(e=>!e)},[]),mn=(0,e.useCallback)(()=>{const e={conversation:(null===zt||void 0===zt?void 0:zt.name)||"Chat Export",messages:Nt,exportDate:(new Date).toISOString(),totalMessages:Nt.length},t=JSON.stringify(e,null,2),n=new Blob([t],{type:"application/json"}),a=document.createElement("a");a.href=URL.createObjectURL(n),a.download="chat-export-".concat((new Date).toISOString().split("T")[0],".json"),document.body.appendChild(a),a.click(),document.body.removeChild(a),Ee(!1);const s={id:"export_".concat(Date.now()),text:"\ud83d\udce5 Chat exported successfully",user:"System",timestamp:(new Date).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),type:"system",isSystemMessage:!0};Ct(e=>[...e,s])},[Nt,zt]),pn=(0,e.useCallback)(()=>{const e=!("true"===localStorage.getItem("notificationsMuted"));localStorage.setItem("notificationsMuted",e.toString()),Ee(!1);const t={id:"mute_".concat(Date.now()),text:"\ud83d\udd14 Notifications ".concat(e?"muted":"unmuted"),user:"System",timestamp:(new Date).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),type:"system",isSystemMessage:!0};Ct(e=>[...e,t])},[]),fn=(0,e.useCallback)(()=>{if(window.confirm("Are you sure you want to clear this chat? This action cannot be undone.")){Ct([]),Ee(!1);const e={id:"clear_".concat(Date.now()),text:"\ud83e\uddf9 Chat cleared",user:"System",timestamp:(new Date).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),type:"system",isSystemMessage:!0};Ct([e])}},[]),gn=(0,e.useCallback)(()=>{ze(!0),Ee(!1)},[]),vn=(0,e.useCallback)(async e=>{try{const t={id:"contact_chat_".concat(Date.now()),text:"\ud83d\udcac Starting chat with ".concat(e.name),user:"System",timestamp:(new Date).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),type:"system",isSystemMessage:!0,contactId:e.id};Ct(e=>[...e,t]),ze(!1),await E.updateContactInteraction(e.id,"chat_started")}catch(t){console.error("Error starting chat with contact:",t)}},[]),yn=(0,e.useCallback)(async e=>{try{if(e.phoneNumbers&&e.phoneNumbers.length>0){const t=e.phoneNumbers[0],n={id:"contact_call_".concat(Date.now()),text:"\ud83d\udcde Calling ".concat(e.name," at ").concat(t.number),user:"System",timestamp:(new Date).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),type:"system",isSystemMessage:!0,contactId:e.id};Ct(e=>[...e,n]),await E.updateContactInteraction(e.id,"call_made"),ze(!1)}else alert("No phone number available for this contact")}catch(t){console.error("Error calling contact:",t)}},[]),bn=(0,e.useCallback)(()=>{Le(!0),Ee(!1)},[]),xn=(0,e.useCallback)(e=>{console.log("Search result selected:",e),e.conversationId&&e.conversationId!==z&&Q(e.conversationId),Oe(e.messageId),setTimeout(()=>{const t=document.getElementById("message-".concat(e.messageId));t&&(t.scrollIntoView({behavior:"smooth",block:"center"}),setTimeout(()=>{Oe(null)},3e3))},300)},[z]),wn=(0,e.useCallback)(()=>{Nt.map(e=>"[".concat(e.timestamp,"] ").concat(e.user,": ").concat(e.text)).join("\n");const e=window.open("","_blank");e.document.write("\n      <html>\n        <head>\n          <title>Chat Print - ".concat((null===zt||void 0===zt?void 0:zt.name)||"Chat",'</title>\n          <style>\n            body { font-family: Arial, sans-serif; margin: 20px; }\n            .header { border-bottom: 2px solid #ccc; margin-bottom: 20px; padding-bottom: 10px; }\n            .message { margin-bottom: 10px; padding: 8px; border-left: 3px solid #007bff; }\n            .timestamp { color: #666; font-size: 0.9em; }\n            .user { font-weight: bold; color: #333; }\n            .text { margin-top: 5px; }\n          </style>\n        </head>\n        <body>\n          <div class="header">\n            <h1>Chat: ').concat((null===zt||void 0===zt?void 0:zt.name)||"Conversation","</h1>\n            <p>Exported on: ").concat((new Date).toLocaleString(),"</p>\n            <p>Total Messages: ").concat(Nt.length,'</p>\n          </div>\n          <div class="messages">\n            ').concat(Nt.map(e=>'\n              <div class="message">\n                <div class="timestamp">'.concat(e.timestamp,'</div>\n                <div class="user">').concat(e.user,'</div>\n                <div class="text">').concat(e.text,"</div>\n              </div>\n            ")).join(""),"\n          </div>\n        </body>\n      </html>\n    ")),e.document.close(),e.print(),Ee(!1)},[Nt,zt]);(0,e.useEffect)(()=>{const e=e=>{!Ce||e.target.closest(".header-menu")||e.target.classList.contains("menu-btn")||e.target.classList.contains("action-btn")||(console.log("Closing menu due to outside click"),Ee(!1))},t=setTimeout(()=>{document.addEventListener("click",e)},100);return()=>{clearTimeout(t),document.removeEventListener("click",e)}},[Ce]);const Sn=(0,e.useCallback)(async(e,t)=>{Ct(n=>n.map(n=>{if(n.id===e){var a;const e=null===n||void 0===n||null===(a=n.reactions)||void 0===a?void 0:a.find(e=>(null===e||void 0===e?void 0:e.emoji)===t);return i(i({},n),{},e?{reactions:n.reactions.map(e=>e.emoji===t?i(i({},e),{},{count:e.count+1}):e)}:{reactions:[...n.reactions,{emoji:t,count:1,userId:f.id}]})}return n}));try{ee.addReaction&&await ee.addReaction(e,t)}catch(n){console.error("Failed to sync reaction with backend:",n)}},[f.id]),kn=(0,e.useCallback)(e=>{It?Sn(It,e):Dn(t=>t+e),fe(!1),Mt(!1),Pt(null)},[It,Sn]),jn=(0,e.useCallback)(e=>{Pt(e),Mt(!0),fe(!1)},[]),Nn=(0,e.useCallback)(e=>{const t=Math.floor(e/1e3),n=Math.floor(t/60),a=t%60;return"".concat(n,":").concat(a.toString().padStart(2,"0"))},[]),Cn=(0,e.useCallback)(e=>{be(!0),fe(!1),console.log("Enhanced voice recording started",e)},[]),En=(0,e.useCallback)(e=>{if(be(!1),e&&e.audioBlob&&e.duration>1e3){const t=URL.createObjectURL(e.audioBlob),n={id:Date.now(),text:"\ud83c\udfa4 Voice message (".concat(Nn(e.duration),")"),user:f,timestamp:(new Date).toISOString(),reactions:[],type:"voice",duration:e.duration,audioUrl:t,audioBlob:e.audioBlob,mimeType:e.mimeType};Ct(e=>[...e,n]),setTimeout(()=>{Rt()},100),console.log("Voice message sent:",e)}},[Nn,f,Rt]),Tn=(0,e.useCallback)(()=>{be(!1),console.log("Voice recording cancelled")},[]);(0,e.useCallback)(()=>{console.log("startRecording called - handled by VoiceRecorder component")},[]),(0,e.useCallback)(function(){console.log("stopRecording called - handled by VoiceRecorder component")},[]);(0,e.useEffect)(()=>()=>{},[]);const An=(0,e.useMemo)(()=>{if(!Array.isArray(w))return console.warn("Conversations is not an array:",w),[];let e=w.filter(e=>e&&"object"===typeof e&&e.id&&e.name);if(null!==J&&void 0!==J&&J.trim()){const t=J.toLowerCase().trim();e=e.filter(e=>{var n,a;const s=(null===(n=e.name)||void 0===n?void 0:n.toLowerCase())||"",r=(null===(a=e.lastMessage)||void 0===a?void 0:a.toLowerCase())||"";return s.includes(t)||r.includes(t)})}try{switch(he){case"unread":e=e.filter(e=>(e.unreadCount||0)>0);break;case"groups":e=e.filter(e=>{const t=e.name||"";return t.includes("Team")||t.includes("Group")})}}catch(t){console.error("Error applying conversation filter:",t)}return e},[w,J,he]),_n=(0,e.useMemo)(()=>{if(!Array.isArray(w))return{all:0,unread:0,groups:0};try{return{all:w.length,unread:w.filter(e=>e&&(e.unreadCount||0)>0).length,groups:w.filter(e=>{const t=(null===e||void 0===e?void 0:e.name)||"";return t.includes("Team")||t.includes("Group")}).length}}catch(e){return console.error("Error calculating filter counts:",e),{all:w.length,unread:0,groups:0}}},[w]),In=(0,e.useMemo)(()=>w.reduce((e,t)=>e+t.unreadCount,0),[w]),[Pn,Dn]=(0,e.useState)(""),[Mn,zn]=(0,e.useState)({open:!1,userId:null,username:null}),[Rn,Ln]=(0,e.useState)({open:!1,section:"profile"}),[Fn,On]=(0,e.useState)(!1),[Un,Bn]=(0,e.useState)(!1),[Hn,qn]=(0,e.useState)(!1),[Wn,Vn]=(0,e.useState)(!1),[Kn,Gn]=(0,e.useState)({active:!1,withUser:null,minimized:!1,audioOnly:!1}),[$n,Yn]=(0,e.useState)({active:!1,withUser:null,minimized:!1,audioOnly:!0}),[Qn,Jn]=(0,e.useState)(null),[Xn,Zn]=(0,e.useState)([]),[ea,ta]=(0,e.useState)(!1),na=(0,e.useCallback)(async()=>{if(Pn.trim())try{const e={text:Pn.trim(),conversationId:z,user:(null===f||void 0===f?void 0:f.name)||"User"},t=(null===zt||void 0===zt?void 0:zt.participants)||[],n=t.find(e=>e!==f.id),a=await ae.sendMessage(e,{encrypt:ut&&ot,recipientId:n,conversationParticipants:t}),s={id:a.id||Date.now(),text:Pn.trim(),user:f,timestamp:a.timestamp||(new Date).toISOString(),reactions:a.reactions||[],conversationId:z,isEncrypted:a.isEncrypted||!1,encryptionStatus:a.encryptionStatus};Ct(e=>[...e,s]),Dn(""),await L.indexMessage(s),"serviceWorker"in navigator&&navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({type:"INDEX_NEW_MESSAGE",message:s}),setTimeout(()=>{Rt()},100)}catch(e){console.error("Failed to send message:",e);const t={id:Date.now(),text:Pn.trim(),user:f,timestamp:(new Date).toISOString(),reactions:[],pending:!0,conversationId:z};Ct(e=>[...e,t]),Dn(""),setTimeout(()=>{Rt()},100),console.warn("Message sent offline, will sync when connection is restored")}},[Pn,f,z,Rt,zt,ut,ot]),aa=(0,e.useCallback)(e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),na())},[na]),sa=(0,e.useCallback)(e=>{Dn(e),Ge(!1)},[]),ra=(0,e.useCallback)(()=>{Pn.trim()&&(Ze(Pn),Je(!0))},[Pn]),oa=(0,e.useCallback)(e=>{Dn(e),Je(!1)},[]);(0,e.useEffect)(()=>{(async()=>{if(Nt.length>0){var e;const n=Nt[Nt.length-1];if((null===(e=n.user)||void 0===e?void 0:e.id)===f.id)return void Ge(!1);try{const e=await O.generateSmartReplies(n.text,{conversationHistory:Nt.slice(-5).map(e=>e.text),userName:f.name});Ye(e),Ge(e.length>0)}catch(t){console.error("Failed to generate smart replies:",t),Ye([]),Ge(!1)}}})()},[Nt,f]),(0,e.useEffect)(()=>{if(q.onThreadCreated=e=>{rt(t=>new Map(t).set(e.id,e))},q.onReplyAdded=e=>{const t=q.getThread(e);t&&rt(n=>new Map(n).set(e,t))},q.onThreadUpdated=e=>{rt(t=>new Map(t).set(e.id,e))},q.onThreadDeleted=e=>{rt(t=>{const n=new Map(t);return n.delete(e),n}),(null===et||void 0===et?void 0:et.id)===e&&(tt(null),at(!1))},z){const e=q.getThreadsForConversation(z),t=new Map;e.forEach(e=>t.set(e.id,e)),rt(t)}return()=>{q.onThreadCreated=null,q.onReplyAdded=null,q.onThreadUpdated=null,q.onThreadDeleted=null}},[z,et]);const ia=(0,e.useCallback)(e=>{try{const t=q.createThread(e,z);tt(t),at(!0),console.log("Thread created:",t)}catch(t){console.error("Failed to create thread:",t),alert("Failed to create thread. Please try again.")}},[z]),la=(0,e.useCallback)(e=>{const t=q.getThread(e);t&&(tt(t),at(!0))},[]),ca=(0,e.useCallback)(()=>{tt(null),at(!1)},[]),ua=(0,e.useCallback)((e,t)=>{try{q.addReply(e,t),console.log("Reply added to thread:",e)}catch(n){console.error("Failed to add reply:",n),alert("Failed to add reply. Please try again.")}},[]),da=(0,e.useCallback)(e=>Array.from(st.values()).find(t=>t.parentMessage.id===e),[st]),ha=(0,e.useCallback)((e,t)=>{console.log("\ud83c\udfaf Profile button clicked!",{userId:e,username:t,user:f}),console.log("\ud83d\udcf1 Current user data:",f),zn({open:!0,userId:e,username:t}),console.log("\u2705 Profile modal state set to open")},[f]),ma=(0,e.useCallback)(()=>{zn({open:!1,userId:null,username:null})},[]),pa=(0,e.useCallback)(()=>{Ln({open:!1,section:"profile"})},[]),fa=(0,e.useCallback)(async e=>{try{console.log("Feedback submitted:",e);const t=A.formatFeedbackData(e);if(!A.validateFeedback(t).isValid)throw new Error("Please check your feedback and try again.");const n=await A.submitFeedback(t);return console.log("\u2705 Feedback submitted successfully:",n),n}catch(t){throw console.error("\u274c Failed to submit feedback:",t),t}},[]),ga=(0,e.useCallback)(()=>Nt.filter(e=>e.file&&e.file.type.startsWith("image/")).map(e=>({url:e.file.url,name:e.file.name,messageId:e.id})),[Nt]),va=(0,e.useCallback)((e,t)=>{const n=ga(),a=n.findIndex(t=>t.url===e);we({open:!0,imageUrl:e,imageName:t,zoom:1,pan:{x:0,y:0},isDragging:!1,currentIndex:Math.max(0,a),images:n})},[ga]),ya=(0,e.useCallback)((e,t,n,a)=>{ke({open:!0,videoUrl:e,videoName:t,poster:n,type:a})},[]),ba=(0,e.useCallback)(()=>{ke({open:!1,videoUrl:null,videoName:null,poster:null,type:null})},[]),xa=(0,e.useCallback)(e=>{we(t=>{const n="next"===e?Math.min(t.currentIndex+1,t.images.length-1):Math.max(t.currentIndex-1,0),a=t.images[n];return a?i(i({},t),{},{currentIndex:n,imageUrl:a.url,imageName:a.name,zoom:1,pan:{x:0,y:0},isLoading:!0}):t})},[]),wa=(0,e.useCallback)(()=>{we(e=>i(i({},e),{},{isLoading:!1}))},[]),Sa=(0,e.useCallback)(()=>{we(e=>i(i({},e),{},{isLoading:!1}))},[]),ka=(0,e.useCallback)(()=>{we({open:!1,imageUrl:null,imageName:null,zoom:1,pan:{x:0,y:0},isDragging:!1,currentIndex:0,images:[],isLoading:!1})},[]),ja=(0,e.useCallback)(()=>{we(e=>i(i({},e),{},{zoom:Math.min(1.2*e.zoom,3)}))},[]),Na=(0,e.useCallback)(()=>{we(e=>i(i({},e),{},{zoom:Math.max(e.zoom/1.2,.5),pan:e.zoom<=1?{x:0,y:0}:e.pan}))},[]),Ca=(0,e.useCallback)(()=>{we(e=>i(i({},e),{},{zoom:1,pan:{x:0,y:0}}))},[]),Ea=(0,e.useCallback)(e=>{xe.zoom>1&&we(e=>i(i({},e),{},{isDragging:!0}))},[xe.zoom]),Ta=(0,e.useCallback)(e=>{xe.isDragging&&xe.zoom>1&&we(t=>i(i({},t),{},{pan:{x:t.pan.x+e.movementX,y:t.pan.y+e.movementY}}))},[xe.isDragging,xe.zoom]),Aa=(0,e.useCallback)(()=>{we(e=>i(i({},e),{},{isDragging:!1}))},[]);(0,e.useEffect)(()=>{const e=e=>{if(xe.open)switch(e.key){case"Escape":ka();break;case"ArrowLeft":e.preventDefault(),xa("prev");break;case"ArrowRight":e.preventDefault(),xa("next");break;case"+":case"=":e.preventDefault(),ja();break;case"-":e.preventDefault(),Na();break;case"0":e.preventDefault(),Ca()}else if(Se.open&&"Escape"===e.key)ba()},t=e=>{xe.open&&(e.preventDefault(),e.deltaY<0?ja():Na())};return document.addEventListener("keydown",e),document.addEventListener("wheel",t,{passive:!1}),()=>{document.removeEventListener("keydown",e),document.removeEventListener("wheel",t)}},[xe.open,ka,xa,ja,Na,Ca]);const _a=(0,e.useCallback)(()=>{Gn(e=>i(i({},e),{},{active:!1}))},[]),Ia=(0,e.useCallback)(()=>{Gn(e=>i(i({},e),{},{minimized:!e.minimized}))},[]),Pa=(0,e.useCallback)(async()=>{let e=zt||l;!e&&w.length>0&&(e=w[0],console.log("\ufffd Using first conversation as fallback:",e)),e||(e={id:"demo-user",name:"Demo User",username:"demo",avatar:null,phone:"+1-555-0123"},console.log("\ud83d\udcde Using demo user for voice call test")),console.log("\ufffd\ud83d\udd0d Voice call debug - currentUser:",e),console.log("\ud83d\udd0d Voice call debug - currentSelectedConversation:",zt),console.log("\ud83d\udd0d Voice call debug - currentConversation:",l),console.log("\ud83d\udd0d Voice call debug - conversations:",w);try{console.log("\ud83d\udcde Starting voice call with user:",e.name||e.username);const t=await se.getAvailableCallMethods(e);if(console.log("\ud83d\udcde Available call methods:",t),Zn(t),t.length>1)return console.log("\ud83d\udcde Multiple methods available, showing selector"),void ta(!0);console.log("\ud83d\udcde Starting enhanced voice call with auto method"),await Da(e,"auto")}catch(t){console.error("\u274c Failed to start voice call:",t),alert("Failed to start voice call: ".concat(t.message))}},[zt,l,w]),Da=(0,e.useCallback)(async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"auto";try{console.log("\ud83d\ude80 Starting enhanced voice call - targetUser:",e,"method:",t);const n=await se.initiateEnhancedCall(e,t);if(console.log("\ud83d\udcde Call instance result:",n),!n.success)throw new Error(n.error||"Failed to initiate call");Yn({active:!0,withUser:{name:e.name||e.username,avatar:e.avatar,phone:e.phone},minimized:!1,audioOnly:!0,callInstance:n});const a={id:n.callId,text:"\ud83d\udcde ".concat(n.method.description," with ").concat(e.name||e.username),user:"You",timestamp:(new Date).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),type:"voice_call_enhanced",callStatus:n.status,callMethod:n.method,connectionQuality:n.connectionStatus.quality,isSystemMessage:!0};console.log("\ud83d\udcde Adding voice call message to chat:",a),Ct(e=>[...e,a]),ta(!1),alert("\ud83d\udcde Voice call initiated successfully!\n\nNote: This is a demo implementation. In a real app, you would hear audio and see call controls.")}catch(n){console.error("\u274c Failed to start enhanced voice call:",n),alert("Failed to start voice call: ".concat(n.message))}},[]),Ma=(0,e.useCallback)(()=>{Yn(e=>i(i({},e),{},{active:!1}))},[]),za=(0,e.useCallback)(()=>{Be(!0)},[]),Ra=(0,e.useCallback)(()=>{Be(!1),qe(!0)},[]),La=(0,e.useCallback)(e=>{console.log("\ud83d\udcde International call initiated:",e);const t={id:"call_".concat(Date.now()),text:"\ud83d\udcde Calling ".concat(e.number," (").concat(e.country.name,")"),user:"You",timestamp:(new Date).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),type:"international_call",callData:e,isSystemMessage:!0};Ct(e=>[...e,t]),alert("\ud83d\udcde Calling ".concat(e.number,"\n\nNote: This is a demo implementation. In a real app, this would connect to a VoIP service provider like Twilio, WebRTC, or similar service to handle the actual phone call.")),qe(!1)},[]),Fa=(0,e.useCallback)(async()=>{console.log("\ud83c\udfaf handleAppCall called"),alert("App call clicked! Check console for debug info."),Be(!1),await Pa()},[Pa]),Oa=(0,e.useCallback)(()=>{Yn(e=>i(i({},e),{},{minimized:!e.minimized}))},[]),Ua=(0,e.useCallback)(async()=>{const e=zt||l;if(e)try{const t=await se.initiateEnhancedCall(e,"video");if(!t.success)throw new Error(t.error);{Gn({active:!0,withUser:{name:e.name,avatar:e.avatar,phone:e.phone},minimized:!1,audioOnly:!1,callInstance:t});const n={id:t.callId,text:"\ud83d\udcf9 Video call with ".concat(e.name),user:"You",timestamp:(new Date).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),type:"video_call",callStatus:"connecting",isSystemMessage:!0};Ct(e=>[...e,n]),alert("\ud83d\udcf9 Video call initiated!\n\nNote: This is a demo implementation. In a real app, you would see the video call interface.")}}catch(t){console.error("Failed to start video call:",t),alert("Failed to start video call. Please check your camera and microphone permissions.")}else alert("Please select a conversation to start a video call")},[zt,l]),Ba=(0,e.useMemo)(()=>null,[Kn,_a,Ia]),Ha=(0,e.useMemo)(()=>null,[$n,Ma,Oa]),qa=((0,e.useCallback)(e=>{const{text:t,file:n,reactions:a}=e;if(null!==n&&void 0!==n&&n.type.startsWith("image/"))return"\ud83d\udcf8 Image: ".concat(n.name);if(null!==n&&void 0!==n&&n.type.startsWith("video/"))return"\ud83c\udfa5 Video: ".concat(n.name);if(null!==n&&void 0!==n&&n.type.startsWith("audio/"))return"\ud83c\udfb5 Audio: ".concat(n.name);if(n&&!n.type.startsWith("image/")&&!n.type.startsWith("video/")&&!n.type.startsWith("audio/"))return"\ud83d\udcce File: ".concat(n.name);if(t.includes("```"))return"\ud83d\udcbb Code snippet";if(t.match(/https?:\/\/[^\s]+/))return"\ud83d\udd17 ".concat(t.substring(0,60),"...");if(t.includes("@")){const e=t.match(/@\w+/g);return"\ud83d\udcac ".concat(t.replace(/@\w+/g,"@user")).concat((null===e||void 0===e?void 0:e.length)>1?" (+".concat(e.length-1," mentions)"):"")}return(null===a||void 0===a?void 0:a.length)>0?"".concat(t.substring(0,60),"... (").concat(a.length," ").concat(1===a.length?"reaction":"reactions",")"):t.length>100?t.substring(0,100)+"...":t},[]),(0,e.useCallback)(e=>{const{text:t,file:n,user:a,reactions:s=[]}=e,r=t.length;return{length:r<=50?"short":r<=200?"medium":r<=500?"long":"very-long",type:n?n.type.startsWith("image/")?"image":n.type.startsWith("video/")?"video":n.type.startsWith("audio/")?"audio":"file":"text",priority:"admin"===a.role?"high":"moderator"===a.role?"medium":"normal",hasMedia:!!n,hasReactions:s.length>0,hasCode:t.includes("```")||t.includes("`"),hasLinks:/https?:\/\/[^\s]+/.test(t),hasMentions:/@\w+/.test(t),sentiment:t.includes("!")&&t.includes("urgent")?"urgent":t.includes("?")?"question":/[\ud83d\ude00\ud83d\ude03\ud83d\ude04\ud83d\ude01\ud83d\ude06\ud83d\ude05\ud83d\ude02\ud83e\udd23\ud83d\ude0a\ud83d\ude07\ud83d\ude42\ud83d\ude09\ud83d\ude0c\ud83d\ude0d\ud83e\udd70\ud83d\ude18\ud83d\ude17\ud83d\ude19\ud83d\ude1a\ud83d\ude0b\ud83d\ude1b\ud83d\ude1d\ud83d\ude1c\ud83e\udd2a\ud83e\udd28\ud83e\uddd0\ud83e\udd13\ud83d\ude0e\ud83e\udd29\ud83e\udd73\ud83d\ude0f\ud83d\ude12\ud83d\ude1e\ud83d\ude14\ud83d\ude1f\ud83d\ude15\ud83d\ude41\u2639\ufe0f\ud83d\ude23\ud83d\ude16\ud83d\ude2b\ud83d\ude29\ud83e\udd7a\ud83d\ude22\ud83d\ude2d\ud83d\ude24\ud83d\ude20\ud83d\ude21\ud83e\udd2c\ud83e\udd2f\ud83d\ude33\ud83e\udd75\ud83e\udd76\ud83d\ude31\ud83d\ude28\ud83d\ude30\ud83d\ude25\ud83d\ude13\ud83e\udd17\ud83e\udd14\ud83e\udd2d\ud83e\udd2b\ud83e\udd25\ud83d\ude36\ud83d\ude10\ud83d\ude11\ud83d\ude2c\ud83d\ude44\ud83d\ude2f\ud83d\ude26\ud83d\ude27\ud83d\ude2e\ud83d\ude32\ud83e\udd71\ud83d\ude34\ud83e\udd24\ud83d\ude2a\ud83d\ude35\ud83e\udd10\ud83e\udd74\ud83e\udd22\ud83e\udd2e\ud83e\udd27\ud83d\ude37\ud83e\udd12\ud83e\udd15\ud83e\udd11\ud83e\udd20\ud83d\ude08\ud83d\udc7f\ud83d\udc79\ud83d\udc7a\ud83e\udd21\ud83d\udca9\ud83d\udc7b\ud83d\udc80\u2620\ufe0f\ud83d\udc7d\ud83d\udc7e\ud83e\udd16\ud83c\udf83\ud83d\ude3a\ud83d\ude38\ud83d\ude39\ud83d\ude3b\ud83d\ude3c\ud83d\ude3d\ud83d\ude40\ud83d\ude3f\ud83d\ude3e]/.test(t)?"emoji":"neutral"}},[])),Wa=(0,e.useCallback)(e=>{const t=e.length;return t<=50?"short":t<=200?"medium":t<=500?"long":"very-long"},[]);return(0,x.jsxs)("div",{className:"pro-layout mobile-optimized smartphone-optimized",children:[(0,x.jsxs)("div",{className:"dynamic-background",children:[(0,x.jsx)("div",{className:"gradient-orb orb-1"}),(0,x.jsx)("div",{className:"gradient-orb orb-2"}),(0,x.jsx)("div",{className:"gradient-orb orb-3"}),(0,x.jsx)("div",{className:"gradient-orb orb-4"}),(0,x.jsx)("div",{className:"gradient-orb orb-5"}),(0,x.jsx)("div",{className:"floating-particles",children:[...Array(20)].map((e,t)=>(0,x.jsx)("div",{className:"particle particle-".concat(t+1)},t))})]}),(0,x.jsx)("div",{className:"content-backdrop"}),Ba,Ha,(0,x.jsxs)("div",{ref:kt,className:"pro-sidebar enhanced-sidebar ".concat(v?"collapsed":""),onTouchStart:Ft,onTouchMove:Ot,onTouchEnd:Ut,children:[(0,x.jsxs)("div",{className:"pro-sidebar-header",children:[(0,x.jsxs)("div",{className:"sidebar-logo",children:[(0,x.jsxs)("div",{className:"logo-icon","data-tooltip":"Quibish Chat",children:["\ud83d\udcac",In>0&&(0,x.jsx)("div",{className:"logo-unread-badge",children:In>99?"99+":In})]}),!v&&(0,x.jsxs)("div",{className:"logo-text",children:[(0,x.jsx)("h2",{children:"Quibish"}),(0,x.jsx)("span",{className:"version",children:"v2.0"})]})]}),(0,x.jsx)("button",{onClick:Lt,className:"sidebar-toggle-btn",title:v?"Expand sidebar":"Collapse sidebar",children:v?"\u2b9e":"\u2b9c"})]}),(0,x.jsxs)("div",{className:"sidebar-user-profile",children:[(0,x.jsxs)("div",{className:"user-avatar ".concat("admin"===(null===f||void 0===f?void 0:f.role)?"admin-user":""),"data-tooltip":"admin"===(null===f||void 0===f?void 0:f.role)?"".concat((null===f||void 0===f?void 0:f.name)||"Admin"," (Administrator)"):(null===f||void 0===f?void 0:f.name)||"User Profile",children:[(0,x.jsx)("img",{src:ge?"/default-avatar.png":(null===f||void 0===f?void 0:f.avatar)||"https://ui-avatars.com/api/?name=".concat(encodeURIComponent((null===f||void 0===f?void 0:f.name)||"User"),"&background=4f46e5&color=fff&size=80&bold=true&format=png"),alt:(null===f||void 0===f?void 0:f.name)||"User",onError:e=>{ge||(console.log("Avatar load failed, trying fallback:",e.target.src),dn(),e.target.src.includes("ui-avatars.com")?e.target.src="/default-avatar.png":e.target.src="https://ui-avatars.com/api/?name=".concat(encodeURIComponent((null===f||void 0===f?void 0:f.name)||"User"),"&background=4f46e5&color=fff&size=80&bold=true&format=png"))},onLoad:()=>ve(!1)}),(0,x.jsx)("div",{className:"status-indicator online"}),"admin"===(null===f||void 0===f?void 0:f.role)&&(0,x.jsx)("div",{className:"admin-badge",title:"Administrator",children:"\ud83d\udc51"})]}),!v&&(0,x.jsxs)("div",{className:"user-info",children:[(0,x.jsx)("h3",{className:"user-name",children:(null===f||void 0===f?void 0:f.name)||"User"}),(0,x.jsx)("p",{className:"user-status",children:"Online"})]}),!v&&(0,x.jsxs)("div",{className:"user-actions",children:[(0,x.jsxs)("button",{className:"action-btn settings-btn",title:"Settings",onClick:Qt,children:[(0,x.jsx)("span",{className:"action-icon",children:"\u2699\ufe0f"}),(0,x.jsx)("span",{className:"action-label",children:"Settings"})]}),(0,x.jsxs)("button",{className:"action-btn profile-btn",title:"Profile",onClick:()=>ha(null===f||void 0===f?void 0:f.id,null===f||void 0===f?void 0:f.name),children:[(0,x.jsx)("span",{className:"action-icon",children:"\ud83d\udc64"}),(0,x.jsx)("span",{className:"action-label",children:"Profile"})]}),(0,x.jsxs)("button",{className:"action-btn logout-btn",title:"Logout",onClick:c,children:[(0,x.jsx)("span",{className:"action-icon",children:"\ud83d\udeaa"}),(0,x.jsx)("span",{className:"action-label",children:"Logout"})]})]})]}),!v&&(0,x.jsxs)("div",{className:"sidebar-quick-actions",children:[(0,x.jsxs)("button",{className:"quick-action-btn primary",onClick:Gt,children:[(0,x.jsx)("span",{className:"icon",children:"\u2795"}),(0,x.jsx)("span",{className:"text",children:"New Chat"})]}),(0,x.jsxs)("button",{className:"quick-action-btn secondary",onClick:$t,children:[(0,x.jsx)("span",{className:"icon",children:"\ud83d\udc65"}),(0,x.jsx)("span",{className:"text",children:"Create Group"})]})]}),!v&&(0,x.jsx)("div",{className:"sidebar-search",children:(0,x.jsxs)("div",{className:"search-container",children:[(0,x.jsx)("span",{className:"search-icon",children:"\ud83d\udd0d"}),(0,x.jsx)("input",{type:"text",placeholder:"conversations"===ne?"Search conversations...":"Click to search users...",className:"search-input",value:"conversations"===ne?J:"",onChange:"conversations"===ne?qt:void 0,onClick:"users"===ne?Wt:void 0,readOnly:"users"===ne}),(0,x.jsxs)("div",{className:"search-mode-toggle",children:[(0,x.jsx)("button",{className:"search-mode-btn ".concat("conversations"===ne?"active":""),onClick:()=>oe("conversations"),title:"Search conversations",children:"\ud83d\udcac"}),(0,x.jsx)("button",{className:"search-mode-btn ".concat("users"===ne?"active":""),onClick:Wt,title:"Search users",children:"\ud83d\udc65"})]})]})}),!v&&(0,x.jsxs)("div",{className:"sidebar-filters",children:[(0,x.jsxs)("button",{className:"filter-tab ".concat("all"===he?"active":""),onClick:()=>Kt("all"),children:[(0,x.jsx)("span",{className:"tab-text",children:"All"}),(0,x.jsx)("span",{className:"tab-count",children:_n.all})]}),(0,x.jsxs)("button",{className:"filter-tab ".concat("unread"===he?"active":""),onClick:()=>Kt("unread"),children:[(0,x.jsx)("span",{className:"tab-text",children:"Unread"}),(0,x.jsx)("span",{className:"tab-count",children:_n.unread})]}),(0,x.jsxs)("button",{className:"filter-tab ".concat("groups"===he?"active":""),onClick:()=>Kt("groups"),children:[(0,x.jsx)("span",{className:"tab-text",children:"Groups"}),(0,x.jsx)("span",{className:"tab-count",children:_n.groups})]})]}),(0,x.jsxs)("div",{className:"pro-sidebar-content",children:[(0,x.jsx)("div",{className:"conversations-header",children:!v&&(0,x.jsx)("h4",{children:"Recent Conversations"})}),(0,x.jsx)("div",{className:"conversations-list",children:An.map(e=>(0,x.jsxs)("div",{className:"conversation-item enhanced ".concat(z===e.id?"active":""),onClick:()=>Ht(e.id),children:[(0,x.jsxs)("div",{className:"conversation-avatar","data-tooltip":e.name,children:[(0,x.jsx)("img",{src:e.avatar||"https://ui-avatars.com/api/?name=".concat(e.name,"&background=random&size=40"),alt:e.name}),e.isOnline&&(0,x.jsx)("div",{className:"online-dot"}),e.unreadCount>0&&(0,x.jsx)("div",{className:"unread-badge",children:e.unreadCount})]}),!v&&(0,x.jsxs)("div",{className:"conversation-details",children:[(0,x.jsxs)("div",{className:"conversation-header",children:[(0,x.jsx)("h5",{className:"conversation-name",children:e.name}),(0,x.jsx)("span",{className:"conversation-time",children:e.lastMessageTime||"2m"})]}),(0,x.jsxs)("div",{className:"conversation-preview",children:[(0,x.jsx)("p",{className:"last-message",children:e.lastMessage||"Hey there! How are you doing?"}),(0,x.jsxs)("div",{className:"conversation-meta",children:[e.isPinned&&(0,x.jsx)("span",{className:"pin-icon",children:"\ud83d\udccc"}),e.isMuted&&(0,x.jsx)("span",{className:"mute-icon",children:"\ud83d\udd07"}),e.messageStatus&&(0,x.jsx)("span",{className:"message-status ".concat(e.messageStatus),children:"\u2713"})]})]})]}),v&&e.unreadCount>0&&(0,x.jsx)("div",{className:"collapsed-unread-indicator"})]},e.id))}),!v&&(0,x.jsx)("div",{className:"placeholder-content"})]}),(0,x.jsxs)("div",{className:"sidebar-footer",children:[!v&&(0,x.jsxs)("div",{className:"footer-stats",children:[(0,x.jsxs)("div",{className:"stat-item",children:[(0,x.jsx)("span",{className:"stat-label",children:"Active"}),(0,x.jsx)("span",{className:"stat-value",children:"12"})]}),(0,x.jsxs)("div",{className:"stat-item",children:[(0,x.jsx)("span",{className:"stat-label",children:"Total"}),(0,x.jsx)("span",{className:"stat-value",children:"156"})]})]}),(0,x.jsxs)("div",{className:"footer-actions",children:[(0,x.jsx)("button",{className:"footer-btn",title:"Profile",onClick:()=>ha(null===f||void 0===f?void 0:f.id,null===f||void 0===f?void 0:f.name),"data-mobile-action":"profile",children:"\ud83d\udc64"}),(0,x.jsx)("button",{className:"footer-btn",title:"Settings",onClick:Qt,"data-mobile-action":"settings",children:"\u2699\ufe0f"}),(0,x.jsx)("button",{className:"footer-btn logout-btn",title:"Logout",onClick:c,"data-mobile-action":"logout",children:"\ud83d\udeaa"}),!v&&(0,x.jsx)("button",{className:"footer-btn",title:"Help",onClick:()=>qn(!0),children:"\u2753"}),!v&&(0,x.jsx)("button",{className:"footer-btn",title:"Feedback",onClick:()=>Bn(!0),children:"\ud83d\udcac"})]})]})]}),!v&&(0,x.jsx)("div",{className:"pro-sidebar-overlay",onClick:Bt,"aria-hidden":"true"}),(0,x.jsxs)("div",{className:"pro-main ".concat(v?"collapsed":""),children:[(0,x.jsx)("div",{className:"pro-header enhanced-chat-header",children:(0,x.jsxs)("div",{className:"header-left",children:[(0,x.jsxs)("div",{className:"conversation-avatar",children:[(0,x.jsx)("img",{src:(null===zt||void 0===zt?void 0:zt.avatar)||(null===l||void 0===l?void 0:l.avatar)||"https://images.unsplash.com/photo-1516726817505-f5ed825624d8?w=40&h=40&fit=crop&crop=face",alt:(null===zt||void 0===zt?void 0:zt.name)||(null===l||void 0===l?void 0:l.name)||"Chat"}),(0,x.jsx)("div",{className:"online-indicator ".concat(g?"online":"offline")})]}),(0,x.jsxs)("div",{className:"conversation-info",children:[(0,x.jsx)("h3",{className:"conversation-title",children:(null===zt||void 0===zt?void 0:zt.name)||(null===l||void 0===l?void 0:l.name)||(z?"Loading conversation...":"Select a conversation")}),(0,x.jsxs)("div",{className:"conversation-status",children:[(0,x.jsx)("span",{className:"connection-status ".concat(g?"connected":"disconnected"),children:g?"\u25cf Online":"\u25cf Disconnected"}),(0,x.jsxs)("span",{className:"participant-count",children:[(null===zt||void 0===zt?void 0:zt.participants)||(null===l||void 0===l?void 0:l.participants)||(zt?2:0)," participants"]})]})]}),(0,x.jsxs)("div",{className:"header-actions",children:[(0,x.jsx)("button",{className:"action-btn invite-user-btn",title:"\ud83d\udc65 Invite Users - Search and invite people to chat",onClick:Wt,children:"\ud83d\udc65"}),(0,x.jsx)("button",{className:"action-btn new-chat-btn",title:"\u2795 New Chat - Start a new conversation",onClick:Gt,children:"\u2795"}),(0,x.jsxs)("button",{className:"action-btn unified-call-btn",title:"\ud83d\udcde Make Calls - International phone calls & app-to-app voice calls",onClick:za,children:["\ud83d\udcde",Qn&&(0,x.jsx)("span",{className:"connection-indicator",style:{color:Qn.color},children:Qn.icon})]}),(0,x.jsx)("button",{className:"action-btn video-call-btn",title:"Start video call",onClick:Ua,children:"\ufffd"}),(0,x.jsx)("button",{className:"action-btn info-btn",title:"Chat info",children:"\u2139\ufe0f"}),(0,x.jsx)("button",{className:"action-btn donation-btn",title:"\ud83d\udc9d Support Our Free App - Help us keep it free for everyone!",onClick:()=>Ve(!0),children:"\ud83d\udc9d"}),(0,x.jsx)("button",{onClick:c,className:"action-btn logout-btn",title:"Logout / Disconnect",children:"\ud83d\udeaa"}),(0,x.jsxs)("div",{className:"header-menu",children:[(0,x.jsx)("button",{className:"action-btn menu-btn",title:"More options",onClick:hn,style:{position:"relative",zIndex:10},children:"\u22ee"}),Ce&&(0,x.jsxs)("div",{style:{position:"fixed",top:"80px",right:"20px",zIndex:99999,width:"280px",maxWidth:"calc(100vw - 40px)",backgroundColor:"rgba(255, 255, 255, 0.98)",backdropFilter:"blur(20px)",border:"1px solid rgba(226, 232, 240, 0.8)",borderRadius:"12px",boxShadow:"0 10px 25px rgba(0, 0, 0, 0.15)",overflow:"hidden",maxHeight:"calc(100vh - 120px)",overflowY:"auto"},children:[(0,x.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"12px 16px",borderBottom:"1px solid rgba(226, 232, 240, 0.5)",fontWeight:"600",fontSize:"14px",color:"#374151",backgroundColor:"rgba(249, 250, 251, 0.8)"},children:[(0,x.jsx)("span",{children:"More Options"}),(0,x.jsx)("button",{onClick:()=>Ee(!1),style:{background:"none",border:"none",fontSize:"18px",color:"#6b7280",cursor:"pointer",padding:"0",width:"20px",height:"20px",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"4px"},children:"\xd7"})]}),(0,x.jsxs)("button",{className:"dropdown-item",onClick:bn,onMouseEnter:e=>e.target.style.backgroundColor="rgba(59, 130, 246, 0.08)",onMouseLeave:e=>e.target.style.backgroundColor="transparent",style:{display:"flex",alignItems:"center",gap:"12px",width:"100%",padding:"12px 16px",border:"none",background:"none",textAlign:"left",fontSize:"14px",color:"#374151",cursor:"pointer",transition:"background-color 0.2s ease"},children:[(0,x.jsx)("span",{style:{fontSize:"16px",width:"20px"},children:"\ud83d\udd0d"}),"Search in Chat"]}),(0,x.jsxs)("button",{className:"dropdown-item",onClick:gn,onMouseEnter:e=>e.target.style.backgroundColor="rgba(59, 130, 246, 0.08)",onMouseLeave:e=>e.target.style.backgroundColor="transparent",style:{display:"flex",alignItems:"center",gap:"12px",width:"100%",padding:"12px 16px",border:"none",background:"none",textAlign:"left",fontSize:"14px",color:"#374151",cursor:"pointer",transition:"background-color 0.2s ease",minHeight:"44px"},children:[(0,x.jsx)("span",{style:{fontSize:"16px",width:"20px"},children:"\ud83d\udc65"}),"Contacts"]}),(0,x.jsxs)("button",{className:"dropdown-item",onClick:mn,style:{display:"flex",alignItems:"center",gap:"12px",width:"100%",padding:"12px 16px",border:"none",background:"none",textAlign:"left",fontSize:"14px",color:"#374151",cursor:"pointer"},children:[(0,x.jsx)("span",{style:{fontSize:"16px",width:"20px"},children:"\ud83d\udce5"}),"Export Chat"]}),(0,x.jsxs)("button",{className:"dropdown-item",onClick:wn,style:{display:"flex",alignItems:"center",gap:"12px",width:"100%",padding:"12px 16px",border:"none",background:"none",textAlign:"left",fontSize:"14px",color:"#374151",cursor:"pointer"},children:[(0,x.jsx)("span",{style:{fontSize:"16px",width:"20px"},children:"\ud83d\udda8\ufe0f"}),"Print Chat"]}),(0,x.jsxs)("button",{className:"dropdown-item",onClick:pn,style:{display:"flex",alignItems:"center",gap:"12px",width:"100%",padding:"12px 16px",border:"none",background:"none",textAlign:"left",fontSize:"14px",color:"#374151",cursor:"pointer"},children:[(0,x.jsx)("span",{style:{fontSize:"16px",width:"20px"},children:"true"===localStorage.getItem("notificationsMuted")?"\ufffd":"\ud83d\udd15"}),"true"===localStorage.getItem("notificationsMuted")?"Unmute":"Mute"," Notifications"]}),(0,x.jsxs)("button",{className:"dropdown-item",onClick:fn,style:{display:"flex",alignItems:"center",gap:"12px",width:"100%",padding:"12px 16px",border:"none",background:"none",textAlign:"left",fontSize:"14px",color:"#374151",cursor:"pointer"},children:[(0,x.jsx)("span",{style:{fontSize:"16px",width:"20px"},children:"\ud83d\uddd1\ufe0f"}),"Clear Chat"]}),(0,x.jsxs)("button",{className:"dropdown-item",onClick:()=>{d(),Ee(!1)},onMouseEnter:e=>e.target.style.backgroundColor="rgba(59, 130, 246, 0.08)",onMouseLeave:e=>e.target.style.backgroundColor="transparent",style:{display:"flex",alignItems:"center",gap:"12px",width:"100%",padding:"12px 16px",border:"none",background:"none",textAlign:"left",fontSize:"14px",color:"#374151",cursor:"pointer"},children:[(0,x.jsx)("span",{style:{fontSize:"16px",width:"20px"},children:u?"\u2600\ufe0f":"\ud83c\udf19"}),u?"Light Mode":"Dark Mode"]}),(0,x.jsx)("hr",{style:{height:"1px",background:"rgba(226, 232, 240, 0.8)",border:"none",margin:"4px 0"}}),(0,x.jsxs)("button",{className:"dropdown-item",onClick:Qt,style:{display:"flex",alignItems:"center",gap:"12px",width:"100%",padding:"12px 16px",border:"none",background:"none",textAlign:"left",fontSize:"14px",color:"#374151",cursor:"pointer"},children:[(0,x.jsx)("span",{style:{fontSize:"16px",width:"20px"},children:"\u2699\ufe0f"}),"Settings"]}),(0,x.jsxs)("button",{className:"dropdown-item",onClick:()=>Vn(!0),style:{display:"flex",alignItems:"center",gap:"12px",width:"100%",padding:"12px 16px",border:"none",background:"none",textAlign:"left",fontSize:"14px",color:"#374151",cursor:"pointer"},children:[(0,x.jsx)("span",{style:{fontSize:"16px",width:"20px"},children:"\ud83d\udd14"}),"Notifications"]}),(0,x.jsxs)("button",{className:"dropdown-item",onClick:()=>qn(!0),style:{display:"flex",alignItems:"center",gap:"12px",width:"100%",padding:"12px 16px",border:"none",background:"none",textAlign:"left",fontSize:"14px",color:"#374151",cursor:"pointer"},children:[(0,x.jsx)("span",{style:{fontSize:"16px",width:"20px"},children:"\u2753"}),"Help & Support"]}),(0,x.jsxs)("button",{className:"dropdown-item",onClick:()=>Bn(!0),style:{display:"flex",alignItems:"center",gap:"12px",width:"100%",padding:"12px 16px",border:"none",background:"none",textAlign:"left",fontSize:"14px",color:"#374151",cursor:"pointer"},children:[(0,x.jsx)("span",{style:{fontSize:"16px",width:"20px"},children:"\ud83d\udcac"}),"Send Feedback"]}),(0,x.jsx)("hr",{style:{height:"1px",background:"rgba(226, 232, 240, 0.8)",border:"none",margin:"4px 0"}}),(0,x.jsxs)("button",{onClick:c,style:{display:"flex",alignItems:"center",gap:"12px",width:"100%",padding:"12px 16px",border:"none",background:"none",textAlign:"left",fontSize:"14px",color:"#dc2626",cursor:"pointer"},children:[(0,x.jsx)("span",{style:{fontSize:"16px",width:"20px"},children:"\ud83d\udeaa"}),"Logout"]})]})]})]})]})}),(0,x.jsxs)("div",{className:"pro-message-list mobile-optimized pull-to-refresh",ref:jt,children:[Et&&(0,x.jsxs)("div",{className:"message-loading-indicator",children:[(0,x.jsx)("div",{className:"loading-spinner"}),(0,x.jsx)("span",{children:"Loading messages..."})]}),At&&!Et&&(0,x.jsxs)("div",{className:"message-error-indicator",children:[(0,x.jsxs)("span",{children:["\u26a0\ufe0f ",At]}),(0,x.jsx)("button",{className:"retry-button",onClick:()=>window.location.reload(),children:"Retry"})]}),!Et&&!At&&0===Nt.length&&(0,x.jsx)("div",{className:"no-messages-indicator",children:z?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("span",{children:"\ud83d\udcac No messages yet in this conversation"}),(0,x.jsx)("p",{children:"Be the first to send a message!"})]}):(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("span",{children:"\ud83d\udc48 Select a conversation to view messages"}),(0,x.jsx)("p",{children:"Choose a conversation from the sidebar to start chatting."})]})}),Nt.map(e=>{var t,n,a,s,r;return(0,x.jsxs)("div",{id:"message-".concat(e.id),className:"pro-message-blurb ".concat(Fe===e.id?"search-highlighted":""),"data-message-id":e.id,children:[(0,x.jsx)("div",{className:"message-avatar",children:(0,x.jsx)("img",{src:e.user.avatar||"https://images.unsplash.com/photo-1535713875002-d1d0cf377fde?w=32&h=32&fit=crop&crop=face",alt:e.user.name,onClick:()=>ha(e.user.id,e.user.name)})}),(0,x.jsxs)("div",{className:"message-content",onClick:()=>jn(e.id),children:[(0,x.jsxs)("div",{className:"message-header",children:[(0,x.jsx)("span",{className:"user-name",children:e.user.name}),e.isEncrypted&&(0,x.jsx)("span",{className:"encryption-indicator ".concat(e.encryptionStatus),title:"Message is encrypted (".concat(e.encryptionStatus,")"),children:"decrypted"===e.encryptionStatus?"\ud83d\udd13":"failed"===e.encryptionStatus?"\u26a0\ufe0f":"sent"===e.encryptionStatus?"\ud83d\udd12":"\ud83d\udd10"})]}),(0,x.jsx)("div",{className:"message-text","data-length":Wa(e.text),"data-content-type":qa(e).type,"data-has-code":qa(e).hasCode,"data-has-links":qa(e).hasLinks,"data-has-mentions":qa(e).hasMentions,"data-sentiment":qa(e).sentiment,children:(0,x.jsx)("span",{className:"message-smart-text",children:e.text})}),e.file&&(0,x.jsx)("div",{className:"message-attachment",children:e.file.type.startsWith("image/")?(0,x.jsxs)("div",{className:"image-attachment ".concat(e.file.isGif?"gif-attachment":""),children:[e.file.isGif&&(0,x.jsx)("div",{className:"gif-badge",children:(0,x.jsx)("span",{className:"gif-label",children:"GIF"})}),(0,x.jsx)("img",{src:e.file.url,alt:e.file.name,className:"attached-image ".concat(e.file.isGif?"gif-image":""),onClick:()=>{va(e.file.url,e.file.name)}}),(0,x.jsxs)("div",{className:"image-caption ".concat(e.file.isGif?"gif-caption":""),children:[e.file.isGif&&"\ud83c\udfad ",e.file.name," (",(e.file.size/1024).toFixed(1)," KB)",e.file.isGif&&(0,x.jsx)("span",{className:"gif-info",children:" \u2022 Animated GIF"})]})]}):e.file.type.startsWith("video/")?(0,x.jsxs)("div",{className:"video-attachment",children:[(0,x.jsxs)("div",{className:"video-container",children:[(0,x.jsxs)("video",{src:e.file.url,poster:e.file.thumbnail,controls:!0,preload:"metadata",muted:!1,playsInline:!0,"webkit-playsinline":"true",onClick:()=>{ya(e.file.url,e.file.name,e.file.thumbnail,e.file.type)},onError:t=>{console.error("Video playback error:",t),console.log("Video details:",{src:e.file.url,type:e.file.type,poster:e.file.thumbnail?"Has thumbnail":"No thumbnail",error:t.target.error})},onLoadedMetadata:e=>{console.log("Video loaded for playback:",{duration:e.target.duration,videoWidth:e.target.videoWidth,videoHeight:e.target.videoHeight,readyState:e.target.readyState})},onLoadStart:()=>console.log("Video load started"),onCanPlay:()=>console.log("Video can play"),onCanPlayThrough:()=>console.log("Video can play through"),style:{maxWidth:"400px",maxHeight:"300px",borderRadius:"8px",width:"100%",height:"auto",cursor:"pointer"},children:[(0,x.jsx)("source",{src:e.file.url,type:e.file.type}),"Your browser does not support the video tag."]}),e.file.duration&&(0,x.jsx)("div",{className:"video-duration-badge",children:e.file.duration})]}),(0,x.jsxs)("div",{className:"video-caption",children:["\ud83c\udfa5 ",e.file.name,e.file.size&&" (".concat((e.file.size/1048576).toFixed(1)," MB)"),e.file.width&&e.file.height&&" \u2022 ".concat(e.file.width,"\xd7").concat(e.file.height)]})]}):(0,x.jsxs)("div",{className:"file-attachment",children:[(0,x.jsx)("div",{className:"file-icon",children:"\ud83d\udcc4"}),(0,x.jsxs)("div",{className:"file-info",children:[(0,x.jsx)("div",{className:"file-name",children:e.file.name}),(0,x.jsxs)("div",{className:"file-size",children:[(e.file.size/1024).toFixed(1)," KB"]})]}),(0,x.jsx)("button",{className:"download-btn",onClick:()=>{const t=document.createElement("a");t.href=e.file.url,t.download=e.file.name,t.click()},children:"Download"})]})}),"voice"===e.type&&(0,x.jsx)("div",{className:"voice-message enhanced",children:e.audioUrl?(0,x.jsx)(X,{audioUrl:e.audioUrl,duration:e.duration,compact:!0,className:"chat-voice-player"}):(0,x.jsxs)("div",{className:"voice-message-fallback",children:[(0,x.jsx)("div",{className:"voice-icon",children:"\ud83c\udfa4"}),(0,x.jsx)("div",{className:"voice-duration",children:Nn(e.duration||0)}),(0,x.jsx)("div",{className:"voice-placeholder",children:"Legacy voice message"})]})}),"voice_call"===e.type&&(0,x.jsxs)("div",{className:"voice-call-message",children:[(0,x.jsx)("div",{className:"voice-call-icon",children:"\ud83d\udcde"}),(0,x.jsxs)("div",{className:"voice-call-info",children:[(0,x.jsx)("div",{className:"voice-call-text",children:e.text}),(0,x.jsxs)("div",{className:"voice-call-status",children:["Status: ",e.callStatus]})]}),(0,x.jsx)("div",{className:"voice-call-controls",children:"connecting"===e.callStatus&&(0,x.jsx)("button",{className:"voice-call-btn-small end-call",onClick:()=>Ma(),title:"End call",children:"End"})})]}),"voice_call_enhanced"===e.type&&(0,x.jsxs)("div",{className:"voice-call-enhanced-message",children:[(0,x.jsxs)("div",{className:"voice-call-enhanced-header",children:[(0,x.jsx)("div",{className:"voice-call-method-icon",children:(null===(t=e.callMethod)||void 0===t?void 0:t.icon)||"\ud83d\udcde"}),(0,x.jsxs)("div",{className:"voice-call-enhanced-info",children:[(0,x.jsx)("div",{className:"voice-call-enhanced-text",children:e.text}),(0,x.jsx)("div",{className:"voice-call-method-description",children:null===(n=e.callMethod)||void 0===n?void 0:n.description}),(0,x.jsxs)("div",{className:"voice-call-quality-info",children:[(0,x.jsxs)("span",{className:"connection-quality",style:{color:re.getConnectionStatus().color},children:[null===(a=e.callMethod)||void 0===a?void 0:a.estimated_quality," ",e.connectionQuality]}),(null===(s=e.callMethod)||void 0===s?void 0:s.latency)&&(0,x.jsxs)("span",{className:"latency-info",children:["\u2022 ",Math.round(e.callMethod.latency),"ms"]})]})]})]}),(0,x.jsxs)("div",{className:"voice-call-enhanced-controls",children:[(0,x.jsxs)("div",{className:"call-status-indicator",children:[(0,x.jsx)("div",{className:"status-dot ".concat(e.callStatus)}),(0,x.jsx)("span",{className:"status-text",children:e.callStatus})]}),("connecting"===e.callStatus||"connected"===e.callStatus)&&(0,x.jsx)("button",{className:"voice-call-btn-small end-call-enhanced",onClick:()=>Ma(),title:"End call",children:"End Call"})]}),(null===(r=e.callMethod)||void 0===r?void 0:r.note)&&(0,x.jsxs)("div",{className:"call-method-note",children:["\u2139\ufe0f ",e.callMethod.note]})]})]}),(0,x.jsxs)("div",{className:"message-timestamp-with-reactions",children:[(0,x.jsx)("div",{className:"message-timestamp",children:new Date(e.timestamp).toLocaleTimeString()}),e.reactions&&e.reactions.length>0&&(0,x.jsx)("div",{className:"message-reactions-inline",children:e.reactions.map((t,n)=>(0,x.jsxs)("button",{className:"reaction-bubble-inline",onClick:n=>{n.stopPropagation(),Sn(e.id,t.emoji)},title:"".concat(t.emoji," ").concat(t.count),children:[(0,x.jsx)("span",{className:"reaction-emoji",children:t.emoji}),(0,x.jsx)("span",{className:"reaction-count",children:t.count})]},n))})]}),(0,x.jsx)("div",{className:"message-threading-actions",children:(()=>{const t=da(e.id);return t?(0,x.jsx)(V,{thread:t,onClick:()=>la(t.id),compact:!1,showParticipants:!0}):(0,x.jsx)("button",{className:"reply-in-thread-btn",onClick:t=>{t.stopPropagation(),ia(e)},title:"Reply in thread",children:"\ud83d\udcac Reply in thread"})})()})]},e.id)}),(0,x.jsx)("div",{ref:St})]}),(0,x.jsxs)("div",{className:"pro-chat-input-container enhanced mobile-input-bar keyboard-avoiding",children:[(0,x.jsxs)("div",{className:"input-wrapper enhanced touch-target",children:[ye&&(0,x.jsx)("div",{className:"enhanced-recording-container",children:(0,x.jsx)(Z,{onRecordingComplete:En,onRecordingCancel:Tn,onRecordingStart:Cn,maxDuration:3e5,minDuration:1e3,compact:!0,autoStart:!1,className:"chat-voice-recorder"})}),!ye&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("input",{ref:yt,type:"file",accept:"image/*,image/gif,video/*,audio/*,.pdf,.doc,.docx,.txt",style:{display:"none"},multiple:!0,onChange:Jt}),(0,x.jsx)("input",{ref:bt,id:"mobile-camera-photo",type:"file",accept:"image/*",capture:"environment",style:{display:"none"},onChange:Jt}),(0,x.jsx)("input",{ref:xt,id:"mobile-camera-video",type:"file",accept:"video/*",capture:"environment",style:{display:"none"},onChange:Jt}),(0,x.jsx)("input",{ref:wt,id:"mobile-gallery",type:"file",accept:"image/*,video/*,image/gif",style:{display:"none"},multiple:!0,onChange:Jt}),(0,x.jsxs)("div",{className:"input-actions-row",children:[(0,x.jsx)("button",{className:"input-btn attachment-btn mobile-action-button touch-target touch-ripple haptic-light",onClick:Xt()?an:()=>{var e;return null===(e=yt.current)||void 0===e?void 0:e.click()},type:"button",title:Xt()?"Upload menu":"Attach files",children:"\ud83d\udcce"}),(0,x.jsx)("button",{className:"input-btn gif-btn mobile-action-button touch-target touch-ripple haptic-light",onClick:Zt,type:"button",title:"Choose GIF",children:"\ud83c\udfad"}),(0,x.jsx)("button",{className:"input-btn gif-upload-btn",onClick:en,type:"button",title:"Upload your own GIF",children:"\ud83d\udce4"}),!ye&&(0,x.jsx)(Z,{onRecordingComplete:En,onRecordingCancel:Tn,onRecordingStart:Cn,maxDuration:3e5,minDuration:1e3,compact:!0,autoStart:!1,className:"inline-voice-recorder"}),le.isSupported("camera")&&(0,x.jsx)("button",{className:"input-btn camera-btn mobile-action-button touch-target touch-ripple haptic-light",onClick:()=>sn("photo"),type:"button",title:"Take photo/video",children:"\ud83d\udcf7"}),le.isSupported("contacts")&&(0,x.jsx)("button",{className:"input-btn contact-btn mobile-action-button touch-target touch-ripple haptic-light",onClick:ln,type:"button",title:"Share contacts",children:"\ud83d\udc65"}),(0,x.jsx)("button",{className:"input-btn emoji-btn mobile-action-button touch-target touch-ripple haptic-light",onClick:()=>fe(!pe),type:"button",title:"Add emoji",children:"\ud83d\ude0a"}),(0,x.jsx)("button",{className:"input-btn ai-btn mobile-action-button touch-target touch-ripple haptic-light",onClick:ra,disabled:!Pn.trim(),type:"button",title:"AI Enhance & Translate",children:"\u2728"}),ot&&(0,x.jsx)("button",{className:"input-btn encryption-btn mobile-action-button touch-target touch-ripple haptic-light ".concat(ut?"active":""),onClick:()=>dt(!ut),type:"button",title:ut?"Encryption enabled":"Encryption disabled",children:ut?"\ud83d\udd12":"\ud83d\udd13"})]}),(0,x.jsxs)("div",{className:"message-input-row",children:[(0,x.jsx)("textarea",{value:Pn,onChange:e=>Dn(e.target.value),onKeyPress:aa,placeholder:"Type your message...",className:"message-input enhanced mobile-message-input touch-target",rows:"1",autoComplete:"off",autoCorrect:"on",autoCapitalize:"sentences",spellCheck:"true",inputMode:"text","aria-label":"Type your message","data-testid":"message-input"}),(0,x.jsx)("button",{onClick:na,disabled:!Pn.trim(),className:"send-button enhanced mobile-action-button touch-target touch-ripple haptic-light",type:"button","aria-label":"Send message",title:"Send message","data-testid":"send-button",children:(0,x.jsx)("span",{className:"send-icon","aria-hidden":"true",children:"\u27a4"})})]})]})]}),pe&&(0,x.jsx)("div",{className:"emoji-picker-overlay",onClick:()=>fe(!1),children:(0,x.jsxs)("div",{className:"emoji-picker",onClick:e=>e.stopPropagation(),children:[(0,x.jsxs)("div",{className:"emoji-picker-header",children:[(0,x.jsx)("span",{children:"Choose an emoji"}),(0,x.jsx)("button",{className:"emoji-close",onClick:()=>fe(!1),children:"\u2715"})]}),(0,x.jsx)("div",{className:"emoji-grid",children:["\ud83d\ude0a","\ud83d\ude02","\ud83e\udd70","\ud83d\ude0d","\ud83e\udd14","\ud83d\ude2e","\ud83d\ude05","\ud83d\udc4d","\ud83d\udc4e","\u2764\ufe0f","\ud83d\udd25","\ud83c\udf89","\ud83d\udc4f","\ud83d\ude4c","\u2728","\ud83d\udcaf","\ud83d\ude80","\ud83d\udca1","\ud83c\udfaf","\u2705","\u274c","\u26a1","\ud83c\udf1f","\ud83e\udd1d","\ud83d\udcaa","\ud83c\udf08","\u2600\ufe0f","\ud83c\udf19","\u2b50","\ud83d\udc9d","\ud83c\udf88"].map(e=>(0,x.jsx)("button",{className:"emoji-item",onClick:()=>kn(e),children:e},e))})]})}),Dt&&It&&(0,x.jsx)("div",{className:"emoji-picker-overlay",onClick:()=>{Mt(!1),Pt(null)},children:(0,x.jsxs)("div",{className:"emoji-picker",onClick:e=>e.stopPropagation(),children:[(0,x.jsxs)("div",{className:"emoji-picker-header",children:[(0,x.jsx)("span",{children:"Add Reaction"}),(0,x.jsx)("button",{className:"emoji-close",onClick:()=>{Mt(!1),Pt(null)},children:"\u2715"})]}),(0,x.jsx)("div",{className:"emoji-grid",children:["\ud83d\ude0a","\ud83d\ude02","\ud83e\udd70","\ud83d\ude0d","\ud83e\udd14","\ud83d\ude2e","\ud83d\ude05","\ud83d\udc4d","\ud83d\udc4e","\u2764\ufe0f","\ud83d\udd25","\ud83c\udf89","\ud83d\udc4f","\ud83d\ude4c","\u2728","\ud83d\udcaf","\ud83d\ude80","\ud83d\udca1","\ud83c\udfaf","\u2705","\u274c","\u26a1","\ud83c\udf1f","\ud83e\udd1d","\ud83d\udcaa","\ud83c\udf08","\u2600\ufe0f","\ud83c\udf19","\u2b50","\ud83d\udc9d","\ud83c\udf88"].map(e=>(0,x.jsx)("button",{className:"emoji-item",onClick:()=>kn(e),children:e},e))})]})}),Ke&&$e.length>0&&(0,x.jsx)(U,{replies:$e,onSelectReply:sa,onClose:()=>Ge(!1),lastMessage:Nt[Nt.length-1]}),Qe&&(0,x.jsx)(B,{message:Xe,onEnhance:oa,onClose:()=>Je(!1)})]})]}),Mn.open&&(0,x.jsxs)(x.Fragment,{children:[console.log("\ud83d\udd0d Rendering UserProfileModal:",{profileModal:Mn,user:f}),(0,x.jsx)(j,{isOpen:Mn.open,user:f,onClose:ma,onUpdateProfile:e=>{console.log("Profile updated:",e)}})]}),Rn.open&&(0,x.jsxs)(x.Fragment,{children:[console.log("\ud83d\udd27 Rendering SettingsModal:",{settingsModal:Rn}),(0,x.jsx)(N,{isOpen:Rn.open,onClose:pa,initialSection:Rn.section})]}),Wn&&(0,x.jsx)(Y,{isOpen:Wn,onClose:()=>Vn(!1),user:f}),xe.open&&(0,x.jsx)("div",{className:"pro-lightbox-overlay",onClick:ka,children:(0,x.jsxs)("div",{className:"pro-lightbox-content",onClick:e=>e.stopPropagation(),children:[(0,x.jsxs)("div",{className:"pro-lightbox-header",children:[(0,x.jsxs)("div",{className:"pro-lightbox-info",children:[(0,x.jsx)("div",{className:"pro-lightbox-title",children:xe.imageName}),(0,x.jsxs)("div",{className:"pro-lightbox-meta",children:[(0,x.jsxs)("span",{className:"pro-lightbox-zoom-info",children:[Math.round(100*xe.zoom),"%"]}),xe.images.length>1&&(0,x.jsxs)("span",{className:"pro-lightbox-counter",children:[xe.currentIndex+1," / ",xe.images.length]})]})]}),(0,x.jsxs)("div",{className:"pro-lightbox-controls",children:[(0,x.jsx)("button",{className:"pro-lightbox-btn",onClick:Na,title:"Zoom out (-)",children:"\ud83d\udd0d-"}),(0,x.jsx)("button",{className:"pro-lightbox-btn",onClick:Ca,title:"Reset zoom (0)",children:"\u22a1"}),(0,x.jsx)("button",{className:"pro-lightbox-btn",onClick:ja,title:"Zoom in (+)",children:"\ud83d\udd0d+"}),(0,x.jsx)("button",{className:"pro-lightbox-btn pro-lightbox-download",onClick:()=>{const e=document.createElement("a");e.href=xe.imageUrl,e.download=xe.imageName,e.click()},title:"Download image",children:"\ud83d\udcbe"})]}),(0,x.jsx)("button",{className:"pro-lightbox-close",onClick:ka,children:"\xd7"})]}),(0,x.jsxs)("div",{className:"pro-lightbox-image-container",onMouseDown:Ea,onMouseMove:Ta,onMouseUp:Aa,onMouseLeave:Aa,style:{cursor:xe.zoom>1?xe.isDragging?"grabbing":"grab":"zoom-in"},children:[xe.images.length>1&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("button",{className:"pro-lightbox-nav pro-lightbox-nav-prev",onClick:()=>xa("prev"),disabled:0===xe.currentIndex,title:"Previous image (\u2190)",children:"\u2190"}),(0,x.jsx)("button",{className:"pro-lightbox-nav pro-lightbox-nav-next",onClick:()=>xa("next"),disabled:xe.currentIndex===xe.images.length-1,title:"Next image (\u2192)",children:"\u2192"})]}),(0,x.jsx)("img",{src:xe.imageUrl,alt:xe.imageName,className:"pro-lightbox-image ".concat(xe.isLoading?"loading":"loaded"),style:{transform:"scale(".concat(xe.zoom,") translate(").concat(xe.pan.x,"px, ").concat(xe.pan.y,"px)"),transition:xe.isDragging?"none":"transform 0.3s ease",opacity:xe.isLoading?.3:1},onLoad:wa,onError:Sa,onDoubleClick:()=>{1===xe.zoom?ja():Ca()},draggable:!1}),xe.isLoading&&(0,x.jsxs)("div",{className:"pro-lightbox-loading",children:[(0,x.jsx)("div",{className:"pro-lightbox-spinner"}),(0,x.jsx)("span",{children:"Loading..."})]})]}),(0,x.jsx)("div",{className:"pro-lightbox-help",children:(0,x.jsx)("span",{children:"ESC to close \u2022 Arrow keys to navigate \u2022 Mouse wheel to zoom \u2022 Drag to pan \u2022 Double-click to zoom"})})]})}),Se.open&&(0,x.jsx)("div",{className:"pro-lightbox-overlay",onClick:ba,children:(0,x.jsxs)("div",{className:"pro-lightbox-content",onClick:e=>e.stopPropagation(),children:[(0,x.jsxs)("div",{className:"pro-lightbox-header",children:[(0,x.jsx)("div",{className:"pro-lightbox-info",children:(0,x.jsx)("div",{className:"pro-lightbox-title",children:(0,x.jsx)("h3",{children:Se.videoName})})}),(0,x.jsx)("div",{className:"pro-lightbox-controls",children:(0,x.jsx)("button",{className:"pro-lightbox-btn pro-lightbox-download",onClick:()=>{const e=document.createElement("a");e.href=Se.videoUrl,e.download=Se.videoName,e.click()},title:"Download video",children:"\ud83d\udcbe"})}),(0,x.jsx)("button",{className:"pro-lightbox-close",onClick:ba,children:"\xd7"})]}),(0,x.jsx)("div",{className:"pro-lightbox-video-container",children:(0,x.jsxs)("video",{src:Se.videoUrl,poster:Se.poster,controls:!0,autoPlay:!0,playsInline:!0,className:"pro-lightbox-video",style:{maxWidth:"100%",maxHeight:"80vh",width:"auto",height:"auto"},children:[(0,x.jsx)("source",{src:Se.videoUrl,type:Se.type}),"Your browser does not support the video tag."]})}),(0,x.jsx)("div",{className:"pro-lightbox-help",children:(0,x.jsx)("span",{children:"ESC to close \u2022 Click outside to close \u2022 Download available"})})]})}),(0,x.jsx)(C,{isOpen:je,onGifSelect:tn,onClose:nn}),(0,x.jsx)(T,{isOpen:Fn,onClose:()=>On(!1),onCreateChat:Yt,currentUser:f,darkMode:u}),(0,x.jsx)(_,{isOpen:Un,onClose:()=>Bn(!1),onSubmit:fa}),(0,x.jsx)(I,{isOpen:Hn,onClose:()=>qn(!1)}),ea&&(0,x.jsx)("div",{className:"call-method-selector-overlay",children:(0,x.jsxs)("div",{className:"call-method-selector-modal",children:[(0,x.jsxs)("div",{className:"call-method-header",children:[(0,x.jsx)("h3",{children:"Choose Call Method"}),(0,x.jsx)("button",{className:"close-btn",onClick:()=>ta(!1),children:"\xd7"})]}),(0,x.jsx)("div",{className:"call-method-list",children:Xn.map((e,t)=>(0,x.jsxs)("div",{className:"call-method-option ".concat(e.quality),onClick:()=>{Da(zt||l,e.type)},children:[(0,x.jsx)("div",{className:"method-icon",children:e.icon}),(0,x.jsxs)("div",{className:"method-info",children:[(0,x.jsx)("div",{className:"method-title",children:e.description}),(0,x.jsx)("div",{className:"method-quality",children:e.estimated_quality}),e.targetPhone&&(0,x.jsxs)("div",{className:"method-phone",children:["\ud83d\udcf1 ",e.targetPhone]}),e.note&&(0,x.jsx)("div",{className:"method-note",children:e.note}),e.estimatedLatency&&(0,x.jsxs)("div",{className:"method-latency",children:["\u26a1 ",Math.round(e.estimatedLatency),"ms"]})]}),(0,x.jsx)("div",{className:"method-quality-badge",children:e.quality})]},t))}),(0,x.jsx)("div",{className:"connection-info",children:(0,x.jsxs)("div",{className:"current-connection",children:["\ud83d\udcf6 Current: ",re.getConnectionStatus().quality,"(",re.getConnectionStatus().type,")"]})})]})}),Te&&(0,x.jsx)(P,{mode:Pe,onCapture:on,onClose:rn}),_e&&(0,x.jsx)(D,{onContactSelect:un,onClose:cn}),Me&&(0,x.jsx)(M,{isOpen:Me,onClose:()=>ze(!1),onStartChat:vn,onStartCall:yn,currentUser:f,darkMode:u}),Ue&&(0,x.jsx)("div",{className:"modal-overlay",onClick:()=>Be(!1),children:(0,x.jsxs)("div",{className:"modal-content call-options-modal",onClick:e=>e.stopPropagation(),children:[(0,x.jsxs)("div",{className:"modal-header",children:[(0,x.jsx)("h3",{children:"Choose Call Type"}),(0,x.jsx)("button",{className:"close-btn",onClick:()=>Be(!1),children:"\xd7"})]}),(0,x.jsxs)("div",{className:"call-options-content",children:[(0,x.jsxs)("button",{className:"call-option-btn international-option",onClick:Ra,children:[(0,x.jsx)("span",{className:"call-option-icon",children:"\ud83c\udf0d"}),(0,x.jsxs)("div",{className:"call-option-info",children:[(0,x.jsx)("h4",{children:"International Phone Call"}),(0,x.jsx)("p",{children:"Call any phone number worldwide - completely FREE!"})]})]}),(0,x.jsxs)("button",{className:"call-option-btn app-call-option",onClick:Fa,children:[(0,x.jsx)("span",{className:"call-option-icon",children:"\ud83d\udcac"}),(0,x.jsxs)("div",{className:"call-option-info",children:[(0,x.jsx)("h4",{children:"App-to-App Voice Call"}),(0,x.jsx)("p",{children:"High-quality voice call with other Quibish users"})]})]})]})]})}),He&&(0,x.jsx)(H,{isOpen:He,onClose:()=>qe(!1),onCall:La,darkMode:u}),We&&(0,x.jsx)(K,{isOpen:We,onClose:()=>Ve(!1),darkMode:u,userStats:{callsMade:0,messagesSent:(null===l||void 0===l||null===(a=l.messages)||void 0===a?void 0:a.length)||0,daysUsed:1}}),(0,x.jsx)(G,{userStats:{callsMade:0,messagesSent:(null===l||void 0===l||null===(s=l.messages)||void 0===s?void 0:s.length)||0,daysUsed:1},darkMode:u,onOpenDonation:()=>Ve(!0),position:"bottom-right",autoShow:!0}),ue&&(0,x.jsx)(R,{isOpen:ue,onClose:()=>de(!1),onUserSelect:Vt,searchQuery:"users"===ne?J:"",onSearchQueryChange:te}),Re&&(0,x.jsx)(F,{isOpen:Re,onClose:()=>Le(!1),onResultSelect:xn,currentConversationId:z}),nt&&et&&(0,x.jsx)("div",{className:"thread-view-overlay",onClick:ca,children:(0,x.jsx)("div",{className:"thread-view-panel",onClick:e=>e.stopPropagation(),children:(0,x.jsx)(W,{thread:et,onReply:ua,onClose:ca,currentUser:f,compact:!1})})})]})},de="http://localhost:5000/api";const he=new class{constructor(){this.baseURL=de,this.token=localStorage.getItem("authToken")}setToken(e){this.token=e,e?localStorage.setItem("authToken",e):localStorage.removeItem("authToken")}getHeaders(){const e={"Content-Type":"application/json"};return this.token&&(e.Authorization="Bearer ".concat(this.token)),e}async request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n="".concat(this.baseURL).concat(e),a=i(i({},t),{},{headers:i(i({},this.getHeaders()),t.headers)});try{const e=await fetch(n,a);if(!e.ok)throw new Error("HTTP error! status: ".concat(e.status));const t=e.headers.get("content-type");return t&&t.includes("application/json")?await e.json():await e.text()}catch(s){throw console.error("API request failed:",s),s}}async get(e){return this.request(e,{method:"GET"})}async post(e,t){return this.request(e,{method:"POST",body:JSON.stringify(t)})}async put(e,t){return this.request(e,{method:"PUT",body:JSON.stringify(t)})}async delete(e){return this.request(e,{method:"DELETE"})}},me={async login(e,t){try{if(await pe()){const n=await he.post("/auth/login",{email:e,password:t});return n.token&&he.setToken(n.token),n}{if(console.log("\ud83d\udd04 Backend unavailable - using offline mode login"),!e||!t)throw new Error("Please enter both username and password");if(t.length<3)throw new Error("Password too short for demo");const n={id:Date.now().toString(),username:e,email:e,name:e.charAt(0).toUpperCase()+e.slice(1),avatar:"https://ui-avatars.com/api/?name=".concat(encodeURIComponent(e),"&background=6366f1&color=fff&size=40"),theme:"light",language:"en",isDemo:!0,joinedAt:(new Date).toISOString()},a=btoa(JSON.stringify({userId:n.id,username:e,timestamp:Date.now()}));return console.log("\u2705 Offline login successful for demo user:",e),{success:!0,user:n,token:a,message:"Logged in successfully (offline mode)"}}}catch(n){if(n.message.includes("fetch")||n.message.includes("network")||n.message.includes("Failed to fetch")){if(console.log("\ud83d\udd04 Network error detected - falling back to offline mode"),!e||!t)throw new Error("Please enter both username and password");const n={id:Date.now().toString(),username:e,email:e,name:e.charAt(0).toUpperCase()+e.slice(1),avatar:"https://ui-avatars.com/api/?name=".concat(encodeURIComponent(e),"&background=6366f1&color=fff&size=40"),theme:"light",language:"en",isDemo:!0,joinedAt:(new Date).toISOString()};return{success:!0,user:n,token:btoa(JSON.stringify({userId:n.id,username:e,timestamp:Date.now()})),message:"Logged in successfully (offline mode)"}}throw new Error(n.message||"Login failed. Please check your credentials.")}},async register(e){try{if(await pe()){const t=await he.post("/auth/register",e);return t.token&&he.setToken(t.token),t}{console.log("\ud83d\udd04 Backend unavailable - using offline mode registration");const{username:t,email:n,password:a,confirmPassword:s}=e;if(!t||!n||!a)throw new Error("Please fill in all required fields");if(a!==s)throw new Error("Passwords do not match");if(a.length<3)throw new Error("Password too short for demo");const r={id:Date.now().toString(),username:t,email:n,name:t.charAt(0).toUpperCase()+t.slice(1),avatar:"https://ui-avatars.com/api/?name=".concat(encodeURIComponent(t),"&background=6366f1&color=fff&size=40"),theme:"light",language:"en",isDemo:!0,joinedAt:(new Date).toISOString()},o=btoa(JSON.stringify({userId:r.id,username:t,timestamp:Date.now()}));return console.log("\u2705 Offline registration successful for demo user:",t),{success:!0,user:r,token:o,message:"Registered successfully (offline mode)"}}}catch(t){if(t.message.includes("fetch")||t.message.includes("network")||t.message.includes("Failed to fetch")){console.log("\ud83d\udd04 Network error detected - falling back to offline mode registration");const{username:t,email:n,password:a,confirmPassword:s}=e;if(!t||!n||!a)throw new Error("Please fill in all required fields");if(a!==s)throw new Error("Passwords do not match");const r={id:Date.now().toString(),username:t,email:n,name:t.charAt(0).toUpperCase()+t.slice(1),avatar:"https://ui-avatars.com/api/?name=".concat(encodeURIComponent(t),"&background=6366f1&color=fff&size=40"),theme:"light",language:"en",isDemo:!0,joinedAt:(new Date).toISOString()};return{success:!0,user:r,token:btoa(JSON.stringify({userId:r.id,username:t,timestamp:Date.now()})),message:"Registered successfully (offline mode)"}}throw new Error(t.message||"Registration failed. Please try again.")}},async logout(){try{await he.post("/auth/logout")}catch(e){console.warn("Logout API call failed:",e)}finally{he.setToken(null)}},async getCurrentUser(){try{return await he.get("/auth/me")}catch(e){throw new Error("Failed to get current user.")}},async refreshToken(){try{const e=await he.post("/auth/refresh");return e.token&&he.setToken(e.token),e}catch(e){throw new Error("Token refresh failed.")}}},pe=async()=>{try{return(await fetch("".concat(de,"/health"))).ok}catch(e){return console.warn("API connection check failed:",e),!1}},fe=()=>{window.innerWidth<=430&&"ontouchstart"in window&&((()=>{const e=()=>{const e=.01*window.innerHeight;if(document.documentElement.style.setProperty("--vh","".concat(e,"px")),window.navigator.userAgent.includes("iPhone")&&window.screen.height>=844&&3===window.devicePixelRatio){document.documentElement.classList.add("iphone-pro");const e=document.querySelector(".auth-form");e&&e.classList.add("iphone-pro-optimized")}};e(),window.addEventListener("resize",e),window.addEventListener("orientationchange",()=>{setTimeout(e,100)})})(),(()=>{let e=window.innerHeight;const t=()=>{const t=window.innerHeight;if(e-t>150){document.body.classList.add("keyboard-open");const e=document.activeElement;e&&"INPUT"===e.tagName&&setTimeout(()=>{e.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})},300)}else document.body.classList.remove("keyboard-open")};window.addEventListener("resize",t),document.addEventListener("focusin",e=>{"INPUT"===e.target.tagName&&setTimeout(t,300)}),document.addEventListener("focusout",()=>{setTimeout(()=>{document.body.classList.remove("keyboard-open")},300)})})(),document.addEventListener("touchstart",e=>{e.target.matches('button, .text-button, input[type="submit"]')&&e.target.classList.add("touch-active")}),document.addEventListener("touchend",e=>{e.target.matches('button, .text-button, input[type="submit"]')&&setTimeout(()=>{e.target.classList.remove("touch-active")},150)}),document.querySelectorAll("input").forEach(e=>{e.addEventListener("focus",()=>{e.style.fontSize="16px"})}),new MutationObserver(e=>{e.forEach(e=>{if("childList"===e.type){const t=document.querySelector(".auth-container");t&&e.target.contains(t)&&setTimeout(()=>{t.scrollIntoView({behavior:"smooth",block:"start"})},100)}})}).observe(document.body,{childList:!0,subtree:!0}),console.log("iPhone Pro authentication enhancements initialized"))},ge={addIPhoneProClass:()=>!!(window.navigator.userAgent.includes("iPhone")&&window.screen.height>=844&&3===window.devicePixelRatio)&&(document.documentElement.classList.add("iphone-pro"),!0),isKeyboardOpen:()=>document.body.classList.contains("keyboard-open"),scrollToAuthForm:()=>{const e=document.querySelector(".auth-form");e&&e.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})}},ve=t=>{let{onLogin:n,switchToRegister:a}=t;const{login:s}=k(),[r,o]=(0,e.useState)(""),[i,l]=(0,e.useState)(""),[c,u]=(0,e.useState)(!1),[d,h]=(0,e.useState)(null),[m,p]=(0,e.useState)(!1),[f,g]=(0,e.useState)(!1),[v,y]=(0,e.useState)(!1),[b,w]=(0,e.useState)("checking"),[S,j]=(0,e.useState)(!1),[N,C]=(0,e.useState)(null),[E,T]=(0,e.useState)(""),A=(0,e.useRef)(null);(0,e.useEffect)(()=>{A.current&&A.current.focus(),fe(),ge.addIPhoneProClass();(async()=>{await pe()?(console.log("API server is online"),w("online")):(console.log("API server appears to be offline"),h("\ud83c\udf10 Unable to connect to server. Please check your connection and try again."),w("offline"))})()},[]);return(0,x.jsx)("div",{className:"login-container",children:(0,x.jsxs)("div",{className:"auth-form",children:[(0,x.jsxs)("div",{className:"elegant-header",children:[(0,x.jsxs)("div",{className:"brand-section",children:[(0,x.jsx)("div",{className:"brand-icon",children:(0,x.jsx)("span",{className:"brand-emoji",children:"\ud83d\udcac"})}),(0,x.jsxs)("div",{className:"brand-content",children:[(0,x.jsx)("h2",{className:"brand-title",children:"Welcome Back"}),(0,x.jsx)("p",{className:"brand-subtitle",children:"Sign in to continue your conversation"})]})]}),(0,x.jsx)("div",{className:"decorative-line"})]}),"checking"!==b&&(0,x.jsxs)("div",{className:"server-status ".concat(b),children:[(0,x.jsx)("div",{className:"status-indicator"}),(0,x.jsx)("div",{className:"status-text",children:"online"===b?"Server Online":"Server Offline"})]}),(0,x.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),y(!0),r.trim()?i?!(i.length<6)||(h("Password must be at least 6 characters"),0):(h("Password is required"),0):(h("Username or email is required"),0)){p(!0),h(null);try{console.log("Login Component - Attempting login with:",{username:r});const e=await me.login(r,i);if(console.log("Login Component - Login response:",e),!e)throw console.error("Login Component - Empty response received"),new Error("No response from server");if(e.requiresTwoFactor)return console.log("Login Component - 2FA required for user:",e.userId),C(e.userId),T(r),j(!0),void p(!1);if(!e.user)throw console.error("Login Component - Missing user data in response"),new Error("User data missing from response");if(!e.token)throw console.error("Login Component - Missing token in response"),new Error("Authentication token missing from response");console.log("Login Component - Login successful, saving session"),s(e.user,e.token,c),n(e.user,e.token),console.log("Login Component - Session saved and parent notified")}catch(t){if(console.error("Login Component - Login error:",t),t.response){const e=t.response.data;console.error("Login Component - Server error response:",e),e.error?h(e.error):e.message?h(e.message):401===t.response.status?h("Invalid username or password. Please try again."):404===t.response.status?h("Server endpoint not found. Is the server running?"):h("Server error (".concat(t.response.status,"). Please try again later."))}else t.request?(console.error("Login Component - Network error, no response received"),h("Unable to connect to server. Please check your internet connection and try again."),pe().then(e=>{e||h("Server appears to be offline. Please try again later.")})):(console.error("Login Component - Other error:",t.message),h(t.message||"Login failed. Please try again."))}finally{p(!1)}}},children:[(0,x.jsxs)("div",{className:"form-group",children:[(0,x.jsx)("label",{htmlFor:"username",children:"Username or Email"}),(0,x.jsxs)("div",{className:"input-wrapper",children:[(0,x.jsx)("input",{id:"username",type:"text",value:r,onChange:e=>o(e.target.value),onBlur:()=>y(!0),ref:A,required:!0,autoComplete:"username email",placeholder:"Enter your username or email",className:v&&!r.trim()?"error-input":""}),r&&(0,x.jsx)("button",{type:"button",className:"clear-input",onClick:()=>o(""),"aria-label":"Clear username",children:"\u2715"})]}),v&&!r.trim()&&(0,x.jsx)("div",{className:"field-error",children:"Username or email is required"})]}),(0,x.jsxs)("div",{className:"form-group",children:[(0,x.jsx)("label",{htmlFor:"password",children:"Password"}),(0,x.jsxs)("div",{className:"input-wrapper",children:[(0,x.jsx)("input",{id:"password",type:f?"text":"password",value:i,onChange:e=>l(e.target.value),onBlur:()=>y(!0),required:!0,autoComplete:"current-password",placeholder:"Enter your password",className:v&&!i?"error-input":""}),(0,x.jsx)("button",{type:"button",className:"toggle-password",onClick:()=>g(!f),"aria-label":f?"Hide password":"Show password",children:f?"\ud83d\udc41\ufe0f":"\ud83d\udc41\ufe0f\u200d\ud83d\udde8\ufe0f"})]}),v&&!i&&(0,x.jsx)("div",{className:"field-error",children:"Password is required"}),v&&i&&i.length<6&&(0,x.jsx)("div",{className:"field-error",children:"Password must be at least 6 characters"})]}),(0,x.jsxs)("div",{className:"form-options",children:[(0,x.jsxs)("label",{className:"checkbox-container",children:[(0,x.jsx)("input",{type:"checkbox",checked:c,onChange:e=>u(e.target.checked)}),(0,x.jsx)("span",{className:"checkmark"}),"Remember me"]}),(0,x.jsx)("button",{type:"button",className:"forgot-password",onClick:()=>console.log("Forgot password clicked"),children:"Forgot password?"})]}),(0,x.jsx)("button",{type:"submit",className:"auth-button",disabled:m,children:m?(0,x.jsxs)("span",{className:"button-with-loader",children:[(0,x.jsx)("span",{className:"loader"}),(0,x.jsx)("span",{children:"Signing in..."})]}):(0,x.jsx)("span",{children:"Sign In"})}),d&&(0,x.jsxs)("div",{className:"auth-error",children:[(0,x.jsx)("div",{className:"error-icon",children:"\u2757"}),(0,x.jsx)("div",{className:"error-message",children:d})]})]}),(0,x.jsxs)("div",{className:"auth-switch",children:["Don't have an account?"," ",(0,x.jsx)("button",{className:"text-button",onClick:a,children:"Sign Up"})]})]})})};const ye=new class{constructor(){this.emailRegex=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,this.disposableEmailDomains=["10minutemail.com","tempmail.org","guerrillamail.com","mailinator.com","throwaway.email"]}isValidFormat(e){return!(!e||"string"!==typeof e)&&this.emailRegex.test(e.trim().toLowerCase())}isDisposableEmail(e){if(!this.isValidFormat(e))return!1;const t=e.split("@")[1].toLowerCase();return this.disposableEmailDomains.includes(t)}validateEmail(e){const t={isValid:!1,errors:[],warnings:[]};if(!e||""===e.trim())return t.errors.push("Email is required"),t;const n=e.trim().toLowerCase();return this.isValidFormat(n)?n.length>254?(t.errors.push("Email is too long"),t):n.includes("..")?(t.errors.push("Email cannot contain consecutive dots"),t):n.startsWith(".")||n.endsWith(".")?(t.errors.push("Email cannot start or end with a dot"),t):(this.isDisposableEmail(n)&&t.warnings.push("Disposable email addresses are not recommended"),t.isValid=!0,t):(t.errors.push("Invalid email format"),t)}suggestCorrection(e){if(!e)return null;const t=e.split("@");if(2!==t.length)return null;const[n,a]=t,s={"gmail.co":"gmail.com","gmail.cm":"gmail.com","gmial.com":"gmail.com","gmai.com":"gmail.com","yahoo.co":"yahoo.com","yahoo.cm":"yahoo.com","hotmai.com":"hotmail.com","hotmial.com":"hotmail.com","outlook.co":"outlook.com","outlok.com":"outlook.com"}[a.toLowerCase()];return s?"".concat(n,"@").concat(s):null}validateRealTime(e){if(!e)return{isValid:!1,message:""};if(e.length<3)return{isValid:!1,message:"Email is too short"};if(!e.includes("@"))return{isValid:!1,message:"Email must contain @"};const t=this.validateEmail(e);return t.isValid?t.warnings.length>0?{isValid:!0,message:t.warnings[0],isWarning:!0}:{isValid:!0,message:"Valid email"}:{isValid:!1,message:t.errors[0]||"Invalid email"}}async validateEmailAsync(e){const t=this.validateEmail(e);if(!t.isValid)return t;await new Promise(e=>setTimeout(e,500));return i(i({},t),{},{deliverable:Math.random()>.1,riskScore:Math.floor(100*Math.random()),suggestedCorrection:this.suggestCorrection(e)})}},be=t=>{let{onRegisterSuccess:n,switchToLogin:a}=t;const[s,r]=(0,e.useState)(""),[o,i]=(0,e.useState)(""),[l,c]=(0,e.useState)(""),[u,d]=(0,e.useState)(""),[h,m]=(0,e.useState)(null),[p,f]=(0,e.useState)(!1),[g,v]=(0,e.useState)(!1),[y,b]=(0,e.useState)(!1),[w,S]=(0,e.useState)(!1),[k,j]=(0,e.useState)({}),[N,C]=(0,e.useState)("checking"),[E,T]=(0,e.useState)(!1),[A,_]=(0,e.useState)(null),[I,P]=(0,e.useState)(!1),[D,M]=(0,e.useState)({score:0,feedback:[]}),z=(0,e.useRef)(null);(0,e.useEffect)(()=>{z.current&&z.current.focus(),fe(),ge.addIPhoneProClass(),pe().then(e=>{e?(console.log("API server is online"),C("online")):(console.log("API server appears to be offline"),m("Server connection failed. Please try again later."),C("offline"))})},[]),(0,e.useEffect)(()=>{if(o){const e=R(o);M(e)}else M({score:0,feedback:[]})},[o]);const R=e=>{let t=0;const n=[];return e.length>=8?t+=1:n.push("Use at least 8 characters"),/[a-z]/.test(e)?t+=1:n.push("Include lowercase letters"),/[A-Z]/.test(e)?t+=1:n.push("Include uppercase letters"),/\d/.test(e)?t+=1:n.push("Include numbers"),/[^\w\s]/.test(e)?t+=1:n.push("Include special characters"),{score:t,feedback:n}};return(0,x.jsx)("div",{className:"login-container",children:(0,x.jsxs)("div",{className:"auth-form tall-form",children:[(0,x.jsxs)("div",{className:"elegant-header",children:[(0,x.jsxs)("div",{className:"brand-section",children:[(0,x.jsx)("div",{className:"brand-icon",children:(0,x.jsx)("span",{className:"brand-emoji",children:"\u2728"})}),(0,x.jsxs)("div",{className:"brand-content",children:[(0,x.jsx)("h2",{className:"brand-title",children:"Create Account"}),(0,x.jsx)("p",{className:"brand-subtitle",children:"Join the conversation and get started"})]})]}),(0,x.jsx)("div",{className:"decorative-line"})]}),"checking"!==N&&(0,x.jsxs)("div",{className:"server-status ".concat(N),children:[(0,x.jsx)("div",{className:"status-indicator"}),(0,x.jsx)("div",{className:"status-text",children:"online"===N?"Server Online":"Server Offline - Demo Mode"})]}),(0,x.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),(()=>{S(!0);const e={};return s.trim()?s.length<3?e.username="Username must be at least 3 characters":s.length>20?e.username="Username must be less than 20 characters":/^[a-zA-Z0-9_]+$/.test(s)?/^\d/.test(s)&&(e.username="Username cannot start with a number"):e.username="Username can only contain letters, numbers and underscore":e.username="Username is required",u.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(u)?u.length>254&&(e.email="Email address is too long"):e.email="Please enter a valid email address":e.email="Email is required",o?o.length<8?e.password="Password must be at least 8 characters":D.score<3&&(e.password="Password is too weak. Please strengthen it."):e.password="Password is required",l?o!==l&&(e.confirmPassword="Passwords do not match"):e.confirmPassword="Please confirm your password",j(e),0===Object.keys(e).length})())if(f(!0),m(null),E)setTimeout(()=>{console.log("Using demo mode registration");const e={id:Date.now(),username:s,email:u},t="offline-token-"+Date.now().toString().slice(-6);me.saveUserSession(e,t,!0),n(e,t),f(!1)},1e3);else try{console.log("Register Component - Starting email verification for:",{username:s,email:u});const e=await ye.sendVerificationEmail(u,s,o);e.success&&(_({verificationId:e.verificationId,email:u,expiresAt:e.expiresAt}),P(!0))}catch(t){console.error("Register Component - Email verification error:",t),m(t.message||"Failed to send verification email. Please try again.")}finally{f(!1)}},children:[(0,x.jsxs)("div",{className:"form-group",children:[(0,x.jsx)("label",{htmlFor:"username",children:"Username"}),(0,x.jsxs)("div",{className:"input-wrapper",children:[(0,x.jsx)("input",{id:"username",type:"text",value:s,onChange:e=>r(e.target.value),onBlur:()=>S(!0),ref:z,required:!0,placeholder:"Choose a username",className:w&&k.username?"error-input":""}),s&&(0,x.jsx)("button",{type:"button",className:"clear-input",onClick:()=>r(""),"aria-label":"Clear username",children:"\u2715"})]}),w&&k.username&&(0,x.jsx)("div",{className:"field-error",children:k.username})]}),(0,x.jsxs)("div",{className:"form-group",children:[(0,x.jsx)("label",{htmlFor:"email",children:"Email"}),(0,x.jsxs)("div",{className:"input-wrapper",children:[(0,x.jsx)("input",{id:"email",type:"email",value:u,onChange:e=>d(e.target.value),onBlur:()=>S(!0),required:!0,placeholder:"Your email address",className:w&&k.email?"error-input":""}),u&&(0,x.jsx)("button",{type:"button",className:"clear-input",onClick:()=>d(""),"aria-label":"Clear email",children:"\u2715"})]}),w&&k.email&&(0,x.jsx)("div",{className:"field-error",children:k.email})]}),(0,x.jsxs)("div",{className:"form-group",children:[(0,x.jsx)("label",{htmlFor:"password",children:"Password"}),(0,x.jsxs)("div",{className:"input-wrapper",children:[(0,x.jsx)("input",{id:"password",type:g?"text":"password",value:o,onChange:e=>i(e.target.value),onBlur:()=>S(!0),required:!0,placeholder:"Choose a password",className:w&&k.password?"error-input":""}),(0,x.jsx)("button",{type:"button",className:"toggle-password",onClick:()=>v(!g),"aria-label":g?"Hide password":"Show password",children:g?"\ud83d\udc41\ufe0f":"\ud83d\udc41\ufe0f\u200d\ud83d\udde8\ufe0f"})]}),w&&k.password&&(0,x.jsx)("div",{className:"field-error",children:k.password})]}),(0,x.jsxs)("div",{className:"form-group",children:[(0,x.jsx)("label",{htmlFor:"confirmPassword",children:"Confirm Password"}),(0,x.jsxs)("div",{className:"input-wrapper",children:[(0,x.jsx)("input",{id:"confirmPassword",type:y?"text":"password",value:l,onChange:e=>c(e.target.value),onBlur:()=>S(!0),required:!0,placeholder:"Confirm your password",className:w&&k.confirmPassword?"error-input":""}),(0,x.jsx)("button",{type:"button",className:"toggle-password",onClick:()=>b(!y),"aria-label":y?"Hide password":"Show password",children:y?"\ud83d\udc41\ufe0f":"\ud83d\udc41\ufe0f\u200d\ud83d\udde8\ufe0f"})]}),w&&k.confirmPassword&&(0,x.jsx)("div",{className:"field-error",children:k.confirmPassword})]}),(0,x.jsx)("button",{type:"submit",className:"auth-button",disabled:p,children:p?(0,x.jsxs)("span",{className:"button-with-loader",children:[(0,x.jsx)("span",{className:"loader"}),(0,x.jsx)("span",{children:"Creating account..."})]}):(0,x.jsx)("span",{children:"Sign Up"})}),h&&(0,x.jsxs)("div",{className:"auth-error",children:[(0,x.jsx)("div",{className:"error-icon",children:"\u2757"}),(0,x.jsx)("div",{className:"error-message",children:h})]})]}),(0,x.jsxs)("div",{className:"auth-switch",children:["Already have an account?"," ",(0,x.jsx)("button",{className:"text-button",onClick:a,children:"Log In"})]}),(0,x.jsx)("div",{className:"demo-mode-switch",children:(0,x.jsxs)("label",{className:"checkbox-container",children:[(0,x.jsx)("input",{type:"checkbox",checked:E,onChange:e=>T(e.target.checked)}),(0,x.jsx)("span",{className:"checkmark"}),"Use Demo Mode ",E&&"(Account will be stored locally)"]})})]})})},xe=e=>{let{size:t="medium",message:n="Loading..."}=e;return(0,x.jsxs)("div",{className:"loading-spinner-container ".concat(t),children:[(0,x.jsxs)("div",{className:"loading-spinner",children:[(0,x.jsx)("div",{className:"spinner-ring"}),(0,x.jsx)("div",{className:"spinner-ring"}),(0,x.jsx)("div",{className:"spinner-ring"})]}),n&&(0,x.jsx)("p",{className:"loading-message",children:n})]})},we=t=>{let{isVisible:n=!0,darkMode:a=!1,appVersion:s="1.0.0",onComplete:r}=t;const[o,i]=(0,e.useState)(0),[l,c]=(0,e.useState)("Initializing...");return(0,e.useEffect)(()=>{if(!n)return;const e=[{progress:20,text:"Loading components..."},{progress:40,text:"Connecting to services..."},{progress:60,text:"Preparing interface..."},{progress:80,text:"Finalizing setup..."},{progress:100,text:"Ready!"}];let t=0;const a=setInterval(()=>{t<e.length?(i(e[t].progress),c(e[t].text),t++):(clearInterval(a),setTimeout(()=>{r&&r()},500))},300);return()=>clearInterval(a)},[n,r]),n?(0,x.jsx)("div",{className:"dynamic-splash-screen ".concat(a?"dark-mode":""),children:(0,x.jsxs)("div",{className:"splash-content",children:[(0,x.jsxs)("div",{className:"splash-logo",children:[(0,x.jsx)("h1",{children:"Quibish"}),(0,x.jsxs)("p",{className:"version",children:["v",s]})]}),(0,x.jsxs)("div",{className:"splash-progress",children:[(0,x.jsx)("div",{className:"progress-bar",children:(0,x.jsx)("div",{className:"progress-fill",style:{width:"".concat(o,"%")}})}),(0,x.jsx)("p",{className:"loading-text",children:l})]})]})}):null};class Se extends e.Component{constructor(e){super(e),this.handleReset=()=>{this.setState({hasError:!1,error:null,errorInfo:null})},this.handleReload=()=>{window.location.reload()},this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,t){this.setState({error:e,errorInfo:t})}render(){return this.state.hasError?(0,x.jsx)("div",{className:"error-boundary",children:(0,x.jsxs)("div",{className:"error-content",children:[(0,x.jsx)("div",{className:"error-icon",children:"\u26a0\ufe0f"}),(0,x.jsx)("h2",{children:"Something went wrong"}),(0,x.jsx)("p",{children:"We're sorry, but something unexpected happened."}),!1,(0,x.jsxs)("div",{className:"error-actions",children:[(0,x.jsx)("button",{onClick:this.handleReset,className:"retry-btn",children:"Try Again"}),(0,x.jsx)("button",{onClick:this.handleReload,className:"reload-btn",children:"Reload Page"})]})]})}):this.props.children}}const ke=Se,je=()=>{const[t,n]=(0,e.useState)(navigator.onLine),[a,s]=(0,e.useState)(!1);(0,e.useEffect)(()=>{const e=()=>n(!0),t=()=>n(!1);return window.addEventListener("online",e),window.addEventListener("offline",t),"serviceWorker"in navigator&&navigator.serviceWorker.addEventListener("controllerchange",()=>{s(!0)}),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",t)}},[]);const r=()=>{window.location.reload()};return t?a?(0,x.jsxs)("div",{className:"pwa-status update-available",children:[(0,x.jsx)("span",{className:"status-icon",children:"\ud83d\udd04"}),(0,x.jsx)("span",{className:"status-text",children:"Update Available"}),(0,x.jsx)("button",{onClick:r,className:"refresh-btn",children:"Refresh"})]}):null:(0,x.jsxs)("div",{className:"pwa-status offline",children:[(0,x.jsx)("span",{className:"status-icon",children:"\ud83d\udce1"}),(0,x.jsx)("span",{className:"status-text",children:"Offline Mode"})]})},Ne=()=>{const[t,n]=(0,e.useState)(null),[a,s]=(0,e.useState)(!1);(0,e.useEffect)(()=>{const e=e=>{e.preventDefault(),n(e),s(!0)};return window.addEventListener("beforeinstallprompt",e),()=>{window.removeEventListener("beforeinstallprompt",e)}},[]);return a&&t?(0,x.jsx)("div",{className:"install-prompt",children:(0,x.jsxs)("div",{className:"install-prompt-content",children:[(0,x.jsx)("div",{className:"install-icon",children:"\ud83d\udcf1"}),(0,x.jsxs)("div",{className:"install-text",children:[(0,x.jsx)("h3",{children:"Install Quibish"}),(0,x.jsx)("p",{children:"Add to your home screen for a better experience"})]}),(0,x.jsxs)("div",{className:"install-actions",children:[(0,x.jsx)("button",{onClick:async()=>{if(!t)return;t.prompt();"accepted"===(await t.userChoice).outcome&&console.log("PWA install accepted"),n(null),s(!1)},className:"install-btn",children:"Install"}),(0,x.jsx)("button",{onClick:()=>{s(!1),n(null)},className:"dismiss-btn",children:"\u2715"})]})]})}):null};const Ce=new class{constructor(){this.currentTheme="default",this.backgroundType="static",this.seasonalThemes=this.getSeasonalThemes(),this.customThemes=new Map,this.backgroundAnimations=new Map,this.init()}init(){this.detectAndApplySeason(),this.setupTimeBasedThemes(),this.initBackgroundEffects()}getSeasonalThemes(){return{spring:{name:"Spring Bloom",colors:{primary:"#10b981",secondary:"#34d399",accent:"#f59e0b",background:"linear-gradient(135deg, #ecfdf5 0%, #d1fae5 50%, #a7f3d0 100%)",particles:["\ud83c\udf38","\ud83c\udf31","\ud83e\udd8b","\ud83c\udf3f"]},effects:["floating-petals","gentle-breeze"]},summer:{name:"Summer Vibes",colors:{primary:"#3b82f6",secondary:"#60a5fa",accent:"#f59e0b",background:"linear-gradient(135deg, #dbeafe 0%, #93c5fd 50%, #60a5fa 100%)",particles:["\u2600\ufe0f","\ud83c\udf0a","\ud83c\udfd6\ufe0f","\ud83c\udf1e"]},effects:["sun-rays","wave-motion"]},autumn:{name:"Autumn Leaves",colors:{primary:"#f59e0b",secondary:"#fb923c",accent:"#dc2626",background:"linear-gradient(135deg, #fef3c7 0%, #fed7aa 50%, #fdba74 100%)",particles:["\ud83c\udf42","\ud83c\udf41","\ud83c\udf30","\ud83c\udf44"]},effects:["falling-leaves","wind-rustle"]},winter:{name:"Winter Wonder",colors:{primary:"#6366f1",secondary:"#818cf8",accent:"#06b6d4",background:"linear-gradient(135deg, #f1f5f9 0%, #e2e8f0 50%, #cbd5e1 100%)",particles:["\u2744\ufe0f","\u2b50","\ud83c\udf28\ufe0f","\u2728"]},effects:["snowfall","twinkling-stars"]}}}detectAndApplySeason(){const e=(new Date).getMonth();let t;t=e>=2&&e<=4?"spring":e>=5&&e<=7?"summer":e>=8&&e<=10?"autumn":"winter";const n=localStorage.getItem("quibish-theme-preference");n&&"auto"!==n?this.applyTheme(n):this.applySeasonalTheme(t)}applySeasonalTheme(e){const t=this.seasonalThemes[e];t&&(this.currentTheme=e,this.updateCSSVariables(t.colors),this.setBackground(t.colors.background),this.updateParticles(t.colors.particles),this.applyEffects(t.effects),console.log("\ud83c\udfa8 Applied ".concat(t.name," theme")))}applyTheme(e){if(this.seasonalThemes[e])this.applySeasonalTheme(e);else if(this.customThemes.has(e)){const t=this.customThemes.get(e);this.updateCSSVariables(t.colors),this.setBackground(t.background)}localStorage.setItem("quibish-theme-preference",e)}updateCSSVariables(e){const t=document.documentElement;Object.entries(e).forEach(e=>{let[n,a]=e;"background"!==n&&"particles"!==n&&t.style.setProperty("--theme-".concat(n),a)})}setBackground(e){const t=document.querySelector(".app");t&&(t.style.background=e,t.style.transition="background 1s ease-in-out")}initBackgroundEffects(){this.createParticleSystem(),this.createAnimatedShapes()}createParticleSystem(){const e=document.createElement("div");e.className="dynamic-particles",e.style.cssText="\n      position: fixed;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: 100%;\n      pointer-events: none;\n      z-index: -1;\n      overflow: hidden;\n    ",document.body.appendChild(e),this.particleContainer=e}updateParticles(e){if(this.particleContainer){this.particleContainer.innerHTML="";for(let t=0;t<20;t++){const t=this.createParticle(e);this.particleContainer.appendChild(t)}}}createParticle(e){const t=document.createElement("div"),n=e[Math.floor(Math.random()*e.length)],a=20*Math.random()+10,s=100*Math.random(),r=10*Math.random()+15,o=5*Math.random();return t.textContent=n,t.style.cssText="\n      position: absolute;\n      font-size: ".concat(a,"px;\n      left: ").concat(s,"%;\n      top: -50px;\n      animation: particleFall ").concat(r,"s linear infinite;\n      animation-delay: ").concat(o,"s;\n      opacity: 0.7;\n    "),t}createAnimatedShapes(){const e=document.createElement("div");e.className="animated-shapes",e.style.cssText="\n      position: fixed;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: 100%;\n      pointer-events: none;\n      z-index: -2;\n      overflow: hidden;\n    ";for(let t=0;t<5;t++){const t=this.createAnimatedShape();e.appendChild(t)}document.body.appendChild(e)}createAnimatedShape(){const e=document.createElement("div"),t=100*Math.random()+50,n=100*Math.random(),a=100*Math.random(),s=360*Math.random(),r=20*Math.random()+10,o=Math.random();let i="0";return o<.33?i="50%":o<.66&&(i="25%"),e.style.cssText="\n      position: absolute;\n      width: ".concat(t,"px;\n      height: ").concat(t,"px;\n      left: ").concat(n,"%;\n      top: ").concat(a,"%;\n      background: linear-gradient(45deg, \n        rgba(99, 102, 241, 0.1), \n        rgba(139, 92, 246, 0.1));\n      border-radius: ").concat(i,";\n      transform: rotate(").concat(s,"deg);\n      animation: floatShape ").concat(r,"s ease-in-out infinite;\n      opacity: 0.3;\n    "),e}applyEffects(e){e.forEach(e=>{switch(e){case"floating-petals":this.createFloatingPetals();break;case"snowfall":this.createSnowfall();break;case"sun-rays":this.createSunRays();break;case"falling-leaves":this.createFallingLeaves()}})}createFloatingPetals(){const e=document.createElement("style");e.textContent="\n      @keyframes petalFloat {\n        0% { transform: translateY(100vh) rotateZ(0deg); }\n        100% { transform: translateY(-100px) rotateZ(360deg); }\n      }\n      .petal-particle {\n        animation: petalFloat 8s linear infinite !important;\n      }\n    ",document.head.appendChild(e)}createSnowfall(){const e=document.createElement("style");e.textContent="\n      @keyframes snowfall {\n        0% { transform: translateY(-100px) translateX(0px); }\n        100% { transform: translateY(100vh) translateX(100px); }\n      }\n      .snow-particle {\n        animation: snowfall 6s linear infinite !important;\n      }\n    ",document.head.appendChild(e)}createSunRays(){const e=document.createElement("div");e.className="sun-rays",e.style.cssText="\n      position: fixed;\n      top: -50%;\n      left: -50%;\n      width: 200%;\n      height: 200%;\n      background: radial-gradient(\n        circle at 70% 20%, \n        rgba(251, 191, 36, 0.1) 0%, \n        transparent 50%\n      );\n      animation: sunRotate 30s linear infinite;\n      pointer-events: none;\n      z-index: -1;\n    ",document.body.appendChild(e);const t=document.createElement("style");t.textContent="\n      @keyframes sunRotate {\n        0% { transform: rotate(0deg); }\n        100% { transform: rotate(360deg); }\n      }\n    ",document.head.appendChild(t)}createFallingLeaves(){const e=document.createElement("style");e.textContent="\n      @keyframes leafFall {\n        0% { \n          transform: translateY(-100px) rotateZ(0deg) translateX(0px);\n          opacity: 1;\n        }\n        50% { \n          transform: translateY(50vh) rotateZ(180deg) translateX(50px);\n          opacity: 0.8;\n        }\n        100% { \n          transform: translateY(100vh) rotateZ(360deg) translateX(-50px);\n          opacity: 0;\n        }\n      }\n      .leaf-particle {\n        animation: leafFall 10s ease-in-out infinite !important;\n      }\n    ",document.head.appendChild(e)}setupTimeBasedThemes(){setInterval(()=>{const e=(new Date).getHours();"true"===localStorage.getItem("quibish-auto-dark")&&(e>=20||e<=6?this.enableDarkMode():this.disableDarkMode())},6e4)}enableDarkMode(){document.body.classList.add("dark-theme");document.documentElement.style.setProperty("--theme-background","linear-gradient(135deg, #1e293b 0%, #334155 50%, #475569 100%)")}disableDarkMode(){document.body.classList.remove("dark-theme"),this.detectAndApplySeason()}createCustomTheme(e,t,n){this.customThemes.set(e,{colors:t,background:n}),localStorage.setItem("quibish-custom-theme-".concat(e),JSON.stringify({colors:t,background:n}))}getAvailableThemes(){return{seasonal:Object.keys(this.seasonalThemes).map(e=>({id:e,name:this.seasonalThemes[e].name,preview:this.seasonalThemes[e].colors.background})),custom:Array.from(this.customThemes.keys()).map(e=>({id:e,name:e,preview:this.customThemes.get(e).background}))}}addAnimationStyles(){const e=document.createElement("style");e.textContent="\n      @keyframes particleFall {\n        0% {\n          transform: translateY(-100px) rotate(0deg);\n          opacity: 0;\n        }\n        10% {\n          opacity: 1;\n        }\n        90% {\n          opacity: 1;\n        }\n        100% {\n          transform: translateY(100vh) rotate(360deg);\n          opacity: 0;\n        }\n      }\n\n      @keyframes floatShape {\n        0%, 100% {\n          transform: translateY(0px) rotate(0deg);\n        }\n        33% {\n          transform: translateY(-20px) rotate(120deg);\n        }\n        66% {\n          transform: translateY(10px) rotate(240deg);\n        }\n      }\n\n      .dynamic-particles {\n        transition: opacity 0.5s ease;\n      }\n\n      .animated-shapes {\n        transition: opacity 0.5s ease;\n      }\n\n      @media (prefers-reduced-motion: reduce) {\n        .dynamic-particles,\n        .animated-shapes,\n        .sun-rays {\n          display: none !important;\n        }\n      }\n    ",document.head.appendChild(e)}toggleEffects(e){const t=document.querySelector(".dynamic-particles"),n=document.querySelector(".animated-shapes");t&&(t.style.opacity=e?"1":"0"),n&&(n.style.opacity=e?"1":"0")}cleanup(){const e=document.querySelector(".dynamic-particles"),t=document.querySelector(".animated-shapes"),n=document.querySelector(".sun-rays");e&&e.remove(),t&&t.remove(),n&&n.remove(),this.backgroundAnimations.forEach(e=>{e.cancel&&e.cancel()}),this.backgroundAnimations.clear()}},Ee=Ce,Te=()=>{var t,n;const[a,s]=(0,e.useState)("auto"),[r,o]=(0,e.useState)(!1),[i,l]=(0,e.useState)(!0),[c,u]=(0,e.useState)(!0);(0,e.useEffect)(()=>{const e=localStorage.getItem("quibish-theme-preference")||"auto",t=localStorage.getItem("quibish-effects-enabled"),n=localStorage.getItem("quibish-auto-mode");s(e),l("false"!==t),u("false"!==n),"false"===t&&Ee.toggleEffects(!1),Ee.addAnimationStyles()},[]);const d=[{id:"auto",name:"Auto (Seasonal)",icon:"\ud83c\udf1f",description:"Automatically changes with seasons"},{id:"spring",name:"Spring Bloom",icon:"\ud83c\udf38",description:"Fresh greens and blooming flowers"},{id:"summer",name:"Summer Vibes",icon:"\u2600\ufe0f",description:"Bright blues and sunny vibes"},{id:"autumn",name:"Autumn Leaves",icon:"\ud83c\udf42",description:"Warm oranges and falling leaves"},{id:"winter",name:"Winter Wonder",icon:"\u2744\ufe0f",description:"Cool blues and snowy effects"},{id:"dark",name:"Dark Mode",icon:"\ud83c\udf19",description:"Easy on the eyes"},{id:"cosmic",name:"Cosmic",icon:"\ud83c\udf0c",description:"Deep space vibes"},{id:"ocean",name:"Ocean Depths",icon:"\ud83c\udf0a",description:"Calming ocean blues"}],h=e=>{s(e),"auto"===e?(u(!0),localStorage.setItem("quibish-auto-mode","true"),Ee.detectAndApplySeason()):(u(!1),localStorage.setItem("quibish-auto-mode","false"),Ee.applyTheme(e)),localStorage.setItem("quibish-theme-preference",e)};return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("button",{className:"theme-toggle ".concat(r?"active":""),onClick:()=>o(!r),title:"Theme Settings",children:(0,x.jsx)("span",{className:"theme-icon",children:"\ud83c\udfa8"})}),r&&(0,x.jsxs)("div",{className:"theme-panel",children:[(0,x.jsxs)("div",{className:"theme-panel-header",children:[(0,x.jsx)("h3",{children:"\ud83c\udfa8 Themes & Effects"}),(0,x.jsx)("button",{className:"close-btn",onClick:()=>o(!1),children:"\u2715"})]}),(0,x.jsxs)("div",{className:"theme-panel-content",children:[(0,x.jsxs)("div",{className:"theme-section",children:[(0,x.jsx)("h4",{children:"Choose Theme"}),(0,x.jsx)("div",{className:"theme-grid",children:d.map(e=>(0,x.jsxs)("div",{className:"theme-card ".concat(a===e.id?"active":""),onClick:()=>h(e.id),children:[(0,x.jsx)("div",{className:"theme-preview",children:(0,x.jsx)("span",{className:"theme-emoji",children:e.icon})}),(0,x.jsxs)("div",{className:"theme-info",children:[(0,x.jsx)("div",{className:"theme-name",children:e.name}),(0,x.jsx)("div",{className:"theme-description",children:e.description})]})]},e.id))})]}),(0,x.jsxs)("div",{className:"theme-section",children:[(0,x.jsx)("h4",{children:"Visual Effects"}),(0,x.jsxs)("div",{className:"effects-controls",children:[(0,x.jsxs)("label",{className:"toggle-label",children:[(0,x.jsx)("input",{type:"checkbox",checked:i,onChange:()=>{const e=!i;l(e),Ee.toggleEffects(e),localStorage.setItem("quibish-effects-enabled",e.toString())}}),(0,x.jsx)("span",{className:"toggle-slider"}),(0,x.jsx)("span",{className:"toggle-text",children:i?"\u2728 Effects On":"\ud83d\udeab Effects Off"})]}),(0,x.jsxs)("label",{className:"toggle-label",children:[(0,x.jsx)("input",{type:"checkbox",checked:c,onChange:e=>{u(e.target.checked),localStorage.setItem("quibish-auto-mode",e.target.checked.toString()),e.target.checked&&h("auto")}}),(0,x.jsx)("span",{className:"toggle-slider"}),(0,x.jsx)("span",{className:"toggle-text",children:c?"\ud83c\udf1f Auto Season":"\ud83d\udd12 Manual Mode"})]})]})]}),(0,x.jsxs)("div",{className:"theme-section",children:[(0,x.jsx)("h4",{children:"Personalization"}),(0,x.jsxs)("button",{className:"custom-theme-btn",onClick:()=>{const e=prompt("Enter custom theme name:");if(!e)return;const t=prompt("Enter primary color (hex):")||"#3b82f6",n=prompt("Enter secondary color (hex):")||"#60a5fa",a=prompt("Enter accent color (hex):")||"#f59e0b",s={primary:t,secondary:n,accent:a},r="linear-gradient(135deg, ".concat(t,"20 0%, ").concat(n,"20 50%, ").concat(a,"20 100%)");Ee.createCustomTheme(e,s,r),h(e)},children:[(0,x.jsx)("span",{children:"\ud83c\udfa8"}),"Create Custom Theme"]})]}),(0,x.jsx)("div",{className:"theme-section",children:(0,x.jsxs)("div",{className:"current-theme-info",children:[(0,x.jsx)("h4",{children:"Current Theme"}),(0,x.jsxs)("div",{className:"current-theme-display",children:[(0,x.jsx)("span",{className:"current-theme-icon",children:(null===(t=d.find(e=>e.id===a))||void 0===t?void 0:t.icon)||"\ud83c\udfa8"}),(0,x.jsx)("span",{className:"current-theme-name",children:(null===(n=d.find(e=>e.id===a))||void 0===n?void 0:n.name)||"Custom Theme"})]})]})})]})]}),r&&(0,x.jsx)("div",{className:"theme-panel-overlay",onClick:()=>o(!1)})]})},Ae=()=>{const[t,n]=(0,e.useState)(navigator.onLine),[a,s]=(0,e.useState)(!1);return(0,e.useEffect)(()=>{const e=()=>{n(!0),s(!0),setTimeout(()=>s(!1),3e3)},t=()=>{n(!1),s(!0)};return window.addEventListener("online",e),window.addEventListener("offline",t),navigator.onLine||s(!0),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",t)}},[]),a?(0,x.jsx)("div",{className:"connection-status ".concat(t?"online":"offline"),children:(0,x.jsxs)("div",{className:"status-content",children:[(0,x.jsx)("span",{className:"status-icon",children:t?"\ud83d\udfe2":"\ud83d\udd34"}),(0,x.jsx)("span",{className:"status-text",children:t?"Back online":"No internet connection"})]})}):null};const _e=new class{constructor(){this.isSupported="serviceWorker"in navigator,this.shortcuts=new Map,this.initialize()}initialize(){this.isSupported?(this.registerServiceWorker(),this.initializeShortcuts(),this.handleAppInstall()):console.warn("PWA: Service Workers not supported in this browser")}async registerServiceWorker(){try{if("serviceWorker"in navigator){const e=await navigator.serviceWorker.register("/sw.js");console.log("PWA: Service Worker registered successfully:",e.scope),e.addEventListener("updatefound",()=>{console.log("PWA: Service Worker update found")})}}catch(e){console.error("PWA: Service Worker registration failed:",e)}}initializeShortcuts(){this.shortcuts.set("voice-call",{name:"Voice Call",shortName:"Call",description:"Start a voice call",url:"/?action=voice-call",icons:[{src:"/icons/voice-call-96x96.png",sizes:"96x96"}]}),this.shortcuts.set("video-call",{name:"Video Call",shortName:"Video",description:"Start a video call",url:"/?action=video-call",icons:[{src:"/icons/video-call-96x96.png",sizes:"96x96"}]}),this.shortcuts.set("new-message",{name:"New Message",shortName:"Message",description:"Compose a new message",url:"/?action=new-message",icons:[{src:"/icons/message-96x96.png",sizes:"96x96"}]})}handleAppInstall(){let e;window.addEventListener("beforeinstallprompt",t=>{console.log("PWA: Install prompt available"),t.preventDefault(),e=t,this.showInstallButton(e)}),window.addEventListener("appinstalled",t=>{console.log("PWA: App installed successfully"),e=null})}showInstallButton(e){if(!document.getElementById("pwa-install-button")){const t=document.createElement("button");t.id="pwa-install-button",t.textContent="Install App",t.className="pwa-install-btn",t.addEventListener("click",async()=>{if(e){e.prompt();const n=await e.userChoice;console.log("PWA: Install prompt result:",n),e=null,t.style.display="none"}});const n=()=>{const e=document.querySelector("header")||document.body;e&&e.appendChild(t)};"loading"===document.readyState?document.addEventListener("DOMContentLoaded",n):n()}}triggerShortcut(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=this.shortcuts.get(e);if(!n)return console.warn("PWA: Unknown shortcut: ".concat(e)),!1;console.log("PWA: Triggering shortcut: ".concat(n.name),t);const a=new CustomEvent("pwa-shortcut-".concat(e),{detail:{shortcut:n,options:t}});return window.dispatchEvent(a),!0}async share(e){if(!navigator.share)return console.warn("PWA: Web Share API not supported"),this.fallbackShare(e);try{return await navigator.share(e),console.log("PWA: Content shared successfully"),!0}catch(t){return"AbortError"===t.name?console.log("PWA: Share cancelled by user"):console.error("PWA: Share failed:",t),!1}}fallbackShare(e){if(navigator.clipboard&&e.text)return navigator.clipboard.writeText(e.text),console.log("PWA: Content copied to clipboard"),!0;const t=e.url||window.location.href,n=e.text||e.title||"Check this out!",a=document.createElement("input");return a.value="".concat(n," ").concat(t),document.body.appendChild(a),a.select(),document.execCommand("copy"),document.body.removeChild(a),console.log("PWA: Content copied to clipboard (fallback)"),!0}async requestNotificationPermission(){if(!("Notification"in window))return console.warn("PWA: Notifications not supported"),!1;if("granted"===Notification.permission)return!0;if("denied"===Notification.permission)return console.warn("PWA: Notification permission denied"),!1;return"granted"===await Notification.requestPermission()}async showNotification(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!await this.requestNotificationPermission())return console.warn("PWA: Cannot show notification - permission denied"),!1;const n=i(i({},{icon:"/icons/icon-192x192.png",badge:"/icons/badge-72x72.png",tag:"quibish-notification",requireInteraction:!1,silent:!1}),t);try{const a=new Notification(e,n);return a.onclick=()=>{window.focus(),a.close(),t.onClick&&t.onClick()},a}catch(a){return console.error("PWA: Failed to show notification:",a),!1}}isStandalone(){return window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone||document.referrer.includes("android-app://")}getCapabilities(){return{serviceWorker:"serviceWorker"in navigator,notifications:"Notification"in window,share:"share"in navigator,clipboard:"clipboard"in navigator,geolocation:"geolocation"in navigator,camera:"mediaDevices"in navigator&&"getUserMedia"in navigator.mediaDevices,standalone:this.isStandalone(),online:navigator.onLine}}setupNetworkHandling(){window.addEventListener("online",()=>{console.log("PWA: Back online"),document.body.classList.remove("offline"),document.body.classList.add("online")}),window.addEventListener("offline",()=>{console.log("PWA: Gone offline"),document.body.classList.remove("online"),document.body.classList.add("offline")}),navigator.onLine?document.body.classList.add("online"):document.body.classList.add("offline")}};const Ie=new class{constructor(){this.shortcuts=[],this.isInitialized=!1}init(){if(!this.isInitialized)try{"serviceWorker"in navigator&&"shortcuts"in navigator&&this.registerShortcuts(),this.isInitialized=!0}catch(e){console.warn("PWA Shortcuts not supported:",e)}}registerShortcuts(){this.shortcuts=[{name:"New Chat",short_name:"Chat",description:"Start a new conversation",url:"/?action=new-chat",icons:[{src:"/logo192.png",sizes:"192x192"}]},{name:"Profile",short_name:"Profile",description:"View your profile",url:"/?action=profile",icons:[{src:"/logo192.png",sizes:"192x192"}]}]}getShortcuts(){return this.shortcuts}updateShortcuts(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];try{const t=e.slice(0,3).map((e,t)=>({name:"Chat with ".concat(e.name),short_name:e.name,description:"Start conversation with ".concat(e.name),url:"/?action=chat&contact=".concat(e.id),icons:[{src:e.avatar||"/logo192.png",sizes:"192x192"}]}));this.shortcuts=[...this.shortcuts.slice(0,2),...t],console.log("\ud83d\udd17 PWA shortcuts updated with frequent contacts")}catch(t){console.warn("Failed to update PWA shortcuts:",t)}}};const Pe=new class{constructor(){this.migrationVersion="1.0.0",this.migrationKey="quibish_migration_status"}needsMigration(){try{const e=localStorage.getItem(this.migrationKey);return!e||e!==this.migrationVersion}catch(e){return console.warn("\u26a0\ufe0f Could not check migration status:",e),!0}}async performMigration(){console.log("\ud83d\udd04 Starting data migration to persistent storage...");try{const e={userMigrated:!1,messagesMigrated:!1,tokenMigrated:!1,settingsMigrated:!1,conversationsMigrated:!1};return e.userMigrated=this.migrateUserData(),e.messagesMigrated=this.migrateMessages(),e.tokenMigrated=this.migrateAuthTokens(),e.settingsMigrated=this.migrateSettings(),e.conversationsMigrated=this.migrateConversations(),localStorage.setItem(this.migrationKey,this.migrationVersion),console.log("\u2705 Data migration completed:",e),this.cleanupOldData(),e}catch(e){throw console.error("\u274c Data migration failed:",e),e}}migrateUserData(){try{const t=[localStorage.getItem("user"),sessionStorage.getItem("user"),localStorage.getItem("currentUser"),sessionStorage.getItem("currentUser")];for(const n of t)if(n)try{const e=JSON.parse(n);if(e&&e.id){const t=b.getUserData();if(!t||t.id!==e.id)return b.setUserData(e),console.log("\ud83d\udc64 Migrated user data:",e.username||e.name),!0}}catch(e){console.warn("\u26a0\ufe0f Could not parse user data from source:",e)}return!1}catch(t){return console.error("\u274c User data migration failed:",t),!1}}migrateMessages(){try{const t=[localStorage.getItem("quibish_messages"),localStorage.getItem("messages"),sessionStorage.getItem("quibish_messages"),sessionStorage.getItem("messages")];for(const n of t)if(n)try{const e=JSON.parse(n);if(Array.isArray(e)&&e.length>0){if(0===b.getMessages().length)return b.setMessages(e),console.log("\ud83d\udcac Migrated messages:",e.length),!0}}catch(e){console.warn("\u26a0\ufe0f Could not parse messages from source:",e)}return!1}catch(t){return console.error("\u274c Messages migration failed:",t),!1}}migrateAuthTokens(){try{const e=[localStorage.getItem("authToken"),localStorage.getItem("token"),sessionStorage.getItem("authToken"),sessionStorage.getItem("token")];for(const t of e)if(t){if(!b.getAuthToken())return b.setAuthToken(t),console.log("\ud83d\udd11 Migrated auth token"),!0}return!1}catch(e){return console.error("\u274c Auth token migration failed:",e),!1}}migrateSettings(){try{const t=[localStorage.getItem("settings"),localStorage.getItem("userSettings"),localStorage.getItem("preferences"),sessionStorage.getItem("settings")];for(const n of t)if(n)try{const e=JSON.parse(n);if(e&&"object"===typeof e){const t=b.getSettings();if(0===Object.keys(t).length)return b.setSettings(e),console.log("\u2699\ufe0f Migrated settings:",Object.keys(e)),!0}}catch(e){console.warn("\u26a0\ufe0f Could not parse settings from source:",e)}return!1}catch(t){return console.error("\u274c Settings migration failed:",t),!1}}migrateConversations(){try{const t=[localStorage.getItem("conversations"),localStorage.getItem("chats"),sessionStorage.getItem("conversations")];for(const n of t)if(n)try{const e=JSON.parse(n);if(Array.isArray(e)&&e.length>0){if(0===b.getConversations().length)return b.setConversations(e),console.log("\ud83d\udcac Migrated conversations:",e.length),!0}}catch(e){console.warn("\u26a0\ufe0f Could not parse conversations from source:",e)}return!1}catch(t){return console.error("\u274c Conversations migration failed:",t),!1}}cleanupOldData(){try{let e=0;["user","currentUser","authToken","token","quibish_messages","messages","settings","userSettings","preferences","conversations","chats"].forEach(t=>{localStorage.getItem(t)&&(localStorage.removeItem(t),e++),sessionStorage.getItem(t)&&(sessionStorage.removeItem(t),e++)}),e>0&&console.log("\ud83e\uddf9 Cleaned up ".concat(e," old storage entries"))}catch(e){console.warn("\u26a0\ufe0f Error during cleanup:",e)}}createBackup(){try{const e=b.exportAllData(),t="quibish_backup_".concat(Date.now());return localStorage.setItem(t,JSON.stringify(e)),console.log("\ud83d\udcbe Created data backup:",t),this.cleanupOldBackups(),t}catch(e){return console.error("\u274c Failed to create backup:",e),null}}cleanupOldBackups(){try{const e=[];for(let t=0;t<localStorage.length;t++){const n=localStorage.key(t);n&&n.startsWith("quibish_backup_")&&e.push(n)}e.sort((e,t)=>{const n=parseInt(e.split("_")[2]);return parseInt(t.split("_")[2])-n}),e.length>3&&e.slice(3).forEach(e=>{localStorage.removeItem(e),console.log("\ud83d\uddd1\ufe0f Removed old backup: ".concat(e))})}catch(e){console.warn("\u26a0\ufe0f Error during backup cleanup:",e)}}restoreFromBackup(e){try{const t=localStorage.getItem(e);if(!t)throw new Error("Backup not found");const n=JSON.parse(t);if(b.importAllData(n))return console.log("\u2705 Data restored from backup:",e),!0;throw new Error("Import failed")}catch(t){return console.error("\u274c Failed to restore from backup:",t),!1}}getAvailableBackups(){try{const e=[];for(let t=0;t<localStorage.length;t++){const n=localStorage.key(t);if(n&&n.startsWith("quibish_backup_")){const t=parseInt(n.split("_")[2]);e.push({key:n,timestamp:t,date:new Date(t).toLocaleString()})}}return e.sort((e,t)=>t.timestamp-e.timestamp)}catch(e){return console.error("\u274c Failed to get backups:",e),[]}}async initializePersistence(){try{console.log("\ud83d\ude80 Initializing data persistence..."),this.createBackup(),this.needsMigration()&&await this.performMigration();const e=b.healthCheck();return e.healthy||console.warn("\u26a0\ufe0f Storage health check failed:",e),console.log("\u2705 Data persistence initialized successfully"),!0}catch(e){return console.error("\u274c Failed to initialize persistence:",e),!1}}},De=()=>{const{isAuthenticated:t,user:n,loading:a,logout:s}=k(),[r,o]=(0,e.useState)("login"),[i,l]=(0,e.useState)(()=>!sessionStorage.getItem("quibish-splash-seen")),[c,u]=(0,e.useState)(()=>{const e=localStorage.getItem("quibish-dark-mode");return!!e&&JSON.parse(e)}),[d,h]=(0,e.useState)(!1),[m,p]=(0,e.useState)(null),[f]=(0,e.useState)([{id:1,name:"Sarah Johnson",avatar:"https://ui-avatars.com/api/?name=Sarah+Johnson&background=8b5cf6&color=fff&size=40",lastMessage:"Hey! Are we still on for lunch today?",lastMessageTime:"2m",unreadCount:2,isOnline:!0,isPinned:!0,isMuted:!1,messageStatus:"delivered",timestamp:new Date(Date.now()-12e4)},{id:2,name:"Team Alpha",avatar:"https://ui-avatars.com/api/?name=Team+Alpha&background=10b981&color=fff&size=40",lastMessage:"Mike: The deployment went smoothly \ud83d\ude80",lastMessageTime:"15m",unreadCount:5,isOnline:!1,isPinned:!1,isMuted:!1,messageStatus:"read",timestamp:new Date(Date.now()-9e5)},{id:3,name:"Alex Chen",avatar:"https://ui-avatars.com/api/?name=Alex+Chen&background=f59e0b&color=fff&size=40",lastMessage:"Thanks for the code review!",lastMessageTime:"1h",unreadCount:0,isOnline:!0,isPinned:!1,isMuted:!0,messageStatus:"sent",timestamp:new Date(Date.now()-36e5)},{id:4,name:"Design Team",avatar:"https://ui-avatars.com/api/?name=Design+Team&background=ef4444&color=fff&size=40",lastMessage:"Lisa: New mockups are ready for review",lastMessageTime:"3h",unreadCount:1,isOnline:!1,isPinned:!0,isMuted:!1,messageStatus:"delivered",timestamp:new Date(Date.now()-108e5)},{id:5,name:"Mom",avatar:"https://ui-avatars.com/api/?name=Mom&background=ec4899&color=fff&size=40",lastMessage:"Don't forget to call grandma today! \u2764\ufe0f",lastMessageTime:"5h",unreadCount:0,isOnline:!1,isPinned:!1,isMuted:!1,messageStatus:"read",timestamp:new Date(Date.now()-18e6)}]),[g]=(0,e.useState)(f[0]);(0,e.useEffect)(()=>{t&&n&&!a?(console.log("App - User authenticated, setting view to home"),o("home")):t||a||(console.log("App - User not authenticated, ensuring login view"),"home"===r&&o("login"))},[t,n,a,r]),(0,e.useEffect)(()=>{if(n&&n.theme){const e="dark"===n.theme;u(e),localStorage.setItem("quibish-dark-mode",JSON.stringify(e))}},[n]),(0,e.useEffect)(()=>((async()=>{try{console.log("\ud83d\ude80 Starting Quibish App...");await Pe.initializePersistence()||console.warn("\u26a0\ufe0f Data persistence initialization failed, continuing with limited functionality");const e=b.healthCheck();console.log("\ud83d\udcbe Storage health:",e),console.log("\u2705 App initialization completed"),h(!0),console.log("\u2705 App initialized successfully")}catch(e){console.error("\u274c App initialization failed:",e),p(e.message),h(!0)}})(),()=>{console.log("\ud83e\uddf9 App unmounting - ensuring data persistence...");try{Pe.createBackup(),console.log("\ud83d\udcbe Final backup created before unmount")}catch(e){console.warn("\u26a0\ufe0f Could not create final backup:",e)}}),[]),(0,e.useEffect)(()=>{if(window.addEventListener("pwa-new-chat",e=>{console.log("\ud83d\udcf1 PWA: New chat shortcut triggered"),t&&o("home")}),window.addEventListener("pwa-voice-call",e=>{console.log("\ud83d\udcf1 PWA: Voice call shortcut triggered",e.detail),t&&(o("home"),_e.triggerShortcut("voice-call",{initiated:"shortcut"}))}),window.addEventListener("pwa-video-call",e=>{console.log("\ud83d\udcf1 PWA: Video call shortcut triggered",e.detail),t&&(o("home"),_e.triggerShortcut("video-call",{initiated:"shortcut"}))}),window.addEventListener("pwa-files-shared",e=>{if(console.log("\ud83d\udcc1 PWA: Files shared",e.detail),t){o("home");const{files:t}=e.detail;console.log("Processing shared files:",t)}}),window.addEventListener("pwa-share-received",e=>{if(console.log("\ud83d\udce4 PWA: Content shared",e.detail),t){o("home");const{title:t,text:n,url:a}=e.detail;console.log("Processing shared content:",{title:t,text:n,url:a})}}),window.addEventListener("pwa-installed",e=>{console.log("\ud83d\udcf1 PWA: App installed",e.detail)}),t&&f.length>0){const e=f.filter(e=>e.lastMessageTime).sort((e,t)=>new Date(t.timestamp)-new Date(e.timestamp)).slice(0,4).map(e=>({id:e.id,name:e.name,avatar:e.avatar}));Ie.updateShortcuts(e)}},[t,f]),(0,e.useEffect)(()=>{localStorage.setItem("quibish-dark-mode",JSON.stringify(c)),document.documentElement.setAttribute("data-theme",c?"dark":"light"),c?document.body.classList.add("dark-theme"):document.body.classList.remove("dark-theme")},[c]);const v=()=>{l(!1),sessionStorage.setItem("quibish-splash-seen","true")};return a?(0,x.jsx)(xe,{size:"large",message:"Loading..."}):d?i?(0,x.jsx)(we,{isVisible:!0,darkMode:c,appVersion:"1.0.0",onComplete:v}):(0,x.jsxs)(ke,{children:[(0,x.jsx)("div",{className:"app smartphone-optimized ".concat(c?"dark-mode":""),children:(0,x.jsx)("div",{className:"app-content",children:t&&n&&!a?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(Ae,{compact:!0}),(0,x.jsx)(ue,{user:n,conversations:f,currentConversation:g,onLogout:()=>{s(),o("login")},darkMode:c,onToggleDarkMode:()=>u(e=>!e)})]}):a?(0,x.jsx)(xe,{size:"large",message:"Signing you in..."}):(0,x.jsxs)("div",{className:"auth-container",children:["login"===r&&(0,x.jsx)(ve,{onLogin:()=>{console.log("App - handleLogin called, waiting for auth state update")},switchToRegister:()=>{console.log("App - switchToRegister called"),o("register")}}),"register"===r&&(0,x.jsx)(be,{onRegisterSuccess:()=>{console.log("App - handleRegister called, redirecting to login"),o("login")},switchToLogin:()=>o("login")})]})})}),(0,x.jsx)(je,{}),(0,x.jsx)(Ne,{}),(0,x.jsx)(Te,{})]}):(0,x.jsx)(xe,{size:"large",message:m?"Initialization failed: ".concat(m):"Initializing application..."})};console.log("\ud83d\udd0d Voice Recorder Diagnostic Test Starting..."),window.runVoiceRecorderDiagnostics=async function(){console.log("\ud83d\ude80 Starting Voice Recorder Diagnostics...");const e={browserSupport:!1,mimeTypeSupport:!1,permissions:"unknown",getUserMedia:!1,mediaRecorder:!1};try{e.browserSupport=function(){console.log("\n=== Test 1: Browser Support ===");const e={mediaRecorder:!!window.MediaRecorder,getUserMedia:!(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia),audioContext:!(!window.AudioContext&&!window.webkitAudioContext),permissions:!!navigator.permissions};return console.log("Browser Support:",e),e.mediaRecorder?e.getUserMedia?(console.log("\u2705 Basic browser support available"),!0):(console.error("\u274c getUserMedia not supported"),!1):(console.error("\u274c MediaRecorder not supported"),!1)}(),e.browserSupport&&(e.mimeTypeSupport=function(){console.log("\n=== Test 2: MIME Type Support ===");const e=["audio/webm;codecs=opus","audio/webm","audio/ogg;codecs=opus","audio/ogg","audio/wav","audio/mp4","audio/aac"],t=e.filter(e=>{const t=MediaRecorder.isTypeSupported(e);return console.log("".concat(t?"\u2705":"\u274c"," ").concat(e,": ").concat(t)),t});return console.log("\nSupported MIME types: ".concat(t.length,"/").concat(e.length)),t.length>0}(),e.permissions=await async function(){console.log("\n=== Test 3: Permission Status ===");try{if(navigator.permissions){const e=await navigator.permissions.query({name:"microphone"});return console.log("\ud83c\udfa4 Microphone permission: ".concat(e.state)),e.addEventListener("change",()=>{console.log("\ud83d\udd04 Permission changed to: ".concat(e.state))}),e.state}return console.log("\u26a0\ufe0f Permissions API not supported"),"unknown"}catch(e){return console.error("\u274c Permission check failed:",e),"error"}}(),e.getUserMedia=await async function(){console.log("\n=== Test 4: getUserMedia Test ===");try{console.log("\ud83c\udfa4 Requesting microphone access...");const e=await navigator.mediaDevices.getUserMedia({audio:{channelCount:1,sampleRate:44100,echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0}});console.log("\u2705 Microphone access granted"),console.log("\ud83d\udcca Stream info:",{id:e.id,active:e.active,tracks:e.getAudioTracks().length});const t=e.getAudioTracks()[0];return t&&(console.log("\ud83c\udfb5 Audio track settings:",t.getSettings()),console.log("\ud83c\udfb5 Audio track capabilities:",t.getCapabilities())),e.getTracks().forEach(e=>e.stop()),console.log("\ud83e\uddf9 Stream stopped"),!0}catch(e){switch(console.error("\u274c getUserMedia failed:",e),console.error("\u274c Error name:",e.name),console.error("\u274c Error message:",e.message),e.name){case"NotAllowedError":console.log("\ud83d\udca1 User denied microphone permission or feature policy blocks it");break;case"NotFoundError":console.log("\ud83d\udca1 No microphone device found");break;case"NotSupportedError":console.log("\ud83d\udca1 Audio constraints not supported");break;case"AbortError":console.log("\ud83d\udca1 Request was aborted");break;default:console.log("\ud83d\udca1 Unknown error occurred")}return!1}}(),e.getUserMedia&&(e.mediaRecorder=await async function(){console.log("\n=== Test 5: MediaRecorder Test ===");try{const e=await navigator.mediaDevices.getUserMedia({audio:!0});console.log("\u2705 Got media stream for MediaRecorder test");const t="audio/webm;codecs=opus",n=new MediaRecorder(e,{mimeType:MediaRecorder.isTypeSupported(t)?t:void 0});return console.log("\u2705 MediaRecorder created successfully"),console.log("\ud83d\udcca MediaRecorder info:",{mimeType:n.mimeType,state:n.state,stream:n.stream.id}),n.onstart=()=>console.log("\ud83c\udfa4 MediaRecorder started"),n.onstop=()=>console.log("\ud83d\uded1 MediaRecorder stopped"),n.ondataavailable=e=>{console.log("\ud83d\udce6 Data available: ".concat(e.data.size," bytes"))},n.onerror=e=>{console.error("\u274c MediaRecorder error:",e.error)},console.log("\ud83c\udfa4 Starting 2-second test recording..."),n.start(100),setTimeout(()=>{n.stop(),e.getTracks().forEach(e=>e.stop()),console.log("\u2705 Test recording completed")},2e3),!0}catch(e){return console.error("\u274c MediaRecorder test failed:",e),!1}}())),console.log("\n=== Final Results ==="),console.log("\ud83d\udcca Diagnostic Results:",e);e.browserSupport&&e.mimeTypeSupport&&e.getUserMedia&&e.mediaRecorder?console.log("\ud83c\udf89 Voice recording should work perfectly!"):(console.log("\u26a0\ufe0f Voice recording may have issues:"),e.browserSupport||console.log("  - Browser support missing"),e.mimeTypeSupport||console.log("  - No supported MIME types"),e.getUserMedia||console.log("  - Cannot access microphone"),e.mediaRecorder||console.log("  - MediaRecorder issues"),"denied"===e.permissions&&console.log("  - Microphone permission denied"))}catch(t){console.error("\u274c Diagnostic test failed:",t)}},window.addEventListener("error",e=>{if(e.filename&&(e.filename.includes("contentScript.js")||e.filename.includes("chrome-extension://")||e.filename.includes("moz-extension://")))return console.warn("\ud83d\udd0c Browser extension error (ignored):",e.message),e.preventDefault(),!0});t.createRoot(document.getElementById("root")).render((0,x.jsx)(e.StrictMode,{children:(0,x.jsx)(S,{children:(0,x.jsx)(De,{})})}))})()})();
//# sourceMappingURL=main.2bc51456.js.map