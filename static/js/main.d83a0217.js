/*! For license information please see main.d83a0217.js.LICENSE.txt */
(()=>{"use strict";var e={17:(e,t,n)=>{n.r(t),n.d(t,{default:()=>i});var a=n(950),s=n(414);const i=e=>{let{message:t,onReply:n,onReact:i,onEdit:o,onDelete:r,onTranslate:l,currentUser:c}=e;const[d,u]=(0,a.useState)(!1),[h,m]=(0,a.useState)(!1),p=(0,a.useMemo)(()=>{const e=["reply","react"];return(t.text.includes("```")||t.text.includes("`"))&&e.push("copy-code"),t.text.match(/https?:\/\/[^\s]+/)&&e.push("preview-links"),t.file&&(e.push("download"),t.file.type.startsWith("image/")&&e.push("view-full")),t.user.id!==c.id&&e.push("translate"),t.user.id===c.id&&e.push("edit","delete"),t.text.length>500&&e.push("summarize"),e},[t,c.id]),f=(0,a.useCallback)(()=>{var e;const n=[...t.text.match(/```[\s\S]*?```/g)||[],...t.text.match(/`[^`]+`/g)||[]].join("\n");null===(e=navigator.clipboard)||void 0===e||e.writeText(n.replace(/```/g,"").replace(/`/g,"")),console.log("Code copied to clipboard")},[t.text]),g=(0,a.useCallback)(()=>{const e=t.text.match(/https?:\/\/[^\s]+/g)||[];e.length>0&&window.open(e[0],"_blank","noopener,noreferrer")},[t.text]),v=(0,a.useCallback)(()=>{if(t.file){const e=document.createElement("a");e.href=t.file.url,e.download=t.file.name,e.click()}},[t.file]),y=(0,a.useCallback)(()=>{var e;console.log("Opening full image view for:",null===(e=t.file)||void 0===e?void 0:e.name)},[t.file]),b=(0,a.useCallback)(()=>{const e=t.text.substring(0,150)+"... [AI Summary would appear here]";console.log("Summary:",e)},[t.text]);return(0,s.jsxs)("div",{className:"message-actions ".concat(d?"visible":""),onMouseEnter:()=>u(!0),onMouseLeave:()=>{u(!1),m(!1)},children:[(0,s.jsx)("div",{className:"actions-trigger",children:(0,s.jsx)("button",{className:"actions-toggle",title:"More actions",children:"\u22ef"})}),d&&(0,s.jsx)("div",{className:"actions-menu",children:p.map(e=>(e=>{const a={reply:{icon:"\u21a9\ufe0f",label:"Reply",onClick:()=>n(t.id)},react:{icon:"\ud83d\ude0a",label:"React",onClick:()=>m(!h)},"copy-code":{icon:"\ud83d\udccb",label:"Copy Code",onClick:f},"preview-links":{icon:"\ud83d\udd17",label:"Preview Links",onClick:g},download:{icon:"\u2b07\ufe0f",label:"Download",onClick:v},"view-full":{icon:"\ud83d\udd0d",label:"View Full",onClick:y},translate:{icon:"\ud83c\udf10",label:"Translate",onClick:()=>l(t.id)},edit:{icon:"\u270f\ufe0f",label:"Edit",onClick:()=>o(t.id)},delete:{icon:"\ud83d\uddd1\ufe0f",label:"Delete",onClick:()=>r(t.id)},summarize:{icon:"\ud83d\udcdd",label:"Summarize",onClick:b}}[e];return a?(0,s.jsxs)("button",{className:"message-action-btn action-".concat(e),onClick:a.onClick,title:a.label,children:[(0,s.jsx)("span",{className:"action-icon",children:a.icon}),(0,s.jsx)("span",{className:"action-label",children:a.label})]},e):null})(e))}),h&&(0,s.jsx)("div",{className:"reaction-picker",children:["\ud83d\udc4d","\u2764\ufe0f","\ud83d\ude02","\ud83d\ude2e","\ud83d\ude22","\ud83d\ude21"].map(e=>(0,s.jsx)("button",{className:"reaction-btn",onClick:()=>{i(t.id,e),m(!1)},children:e},e))})]})}},52:(e,t,n)=>{n.r(t),n.d(t,{default:()=>R});var a=n(950),s=n(555),i=n(589),o=n(532),r=n(414);const l=e=>{var t,n,l,c,d,u,h,m,p,f;let{user:g,onClose:v,onUpdate:y,darkMode:b=!1}=e;const{updateUser:x}=(0,o.As)(),[w,j]=(0,a.useState)({username:(null===g||void 0===g?void 0:g.username)||"",email:(null===g||void 0===g?void 0:g.email)||"",name:(null===g||void 0===g?void 0:g.name)||"",displayName:(null===g||void 0===g?void 0:g.displayName)||"",bio:(null===g||void 0===g?void 0:g.bio)||"",phone:(null===g||void 0===g?void 0:g.phone)||"",location:(null===g||void 0===g?void 0:g.location)||"",website:(null===g||void 0===g?void 0:g.website)||"",company:(null===g||void 0===g?void 0:g.company)||"",jobTitle:(null===g||void 0===g?void 0:g.jobTitle)||"",twitter:(null===g||void 0===g||null===(t=g.socialLinks)||void 0===t?void 0:t.twitter)||"",linkedin:(null===g||void 0===g||null===(n=g.socialLinks)||void 0===n?void 0:n.linkedin)||"",github:(null===g||void 0===g||null===(l=g.socialLinks)||void 0===l?void 0:l.github)||"",theme:(null===g||void 0===g?void 0:g.theme)||"light",language:(null===g||void 0===g?void 0:g.language)||"en",timezone:(null===g||void 0===g?void 0:g.timezone)||Intl.DateTimeFormat().resolvedOptions().timeZone,notifications:{email:!1!==(null===g||void 0===g||null===(c=g.notifications)||void 0===c?void 0:c.email),push:!1!==(null===g||void 0===g||null===(d=g.notifications)||void 0===d?void 0:d.push),mentions:!1!==(null===g||void 0===g||null===(u=g.notifications)||void 0===u?void 0:u.mentions),messages:!1!==(null===g||void 0===g||null===(h=g.notifications)||void 0===h?void 0:h.messages)},profileVisibility:(null===g||void 0===g||null===(m=g.privacy)||void 0===m?void 0:m.profileVisibility)||"public",showOnlineStatus:!1!==(null===g||void 0===g||null===(p=g.privacy)||void 0===p?void 0:p.showOnlineStatus),allowDirectMessages:!1!==(null===g||void 0===g||null===(f=g.privacy)||void 0===f?void 0:f.allowDirectMessages),avatar:(null===g||void 0===g?void 0:g.avatar)||null,avatarColor:(null===g||void 0===g?void 0:g.avatarColor)||"#6366f1",statusMessage:(null===g||void 0===g?void 0:g.statusMessage)||""}),[N,S]=(0,a.useState)("profile"),[C,k]=(0,a.useState)((null===g||void 0===g?void 0:g.avatar)||null),[E,A]=(0,a.useState)(!1),[P,T]=(0,a.useState)(null),[L,M]=(0,a.useState)(null),[I,O]=(0,a.useState)(!1),[_,D]=(0,a.useState)({currentPassword:"",newPassword:"",confirmPassword:""}),R=(0,a.useRef)(null);(0,a.useEffect)(()=>{const e=JSON.stringify(w)!==JSON.stringify({username:(null===g||void 0===g?void 0:g.username)||"",email:(null===g||void 0===g?void 0:g.email)||"",name:(null===g||void 0===g?void 0:g.name)||""});O(e)},[w,g]);const F=e=>{const{name:t,value:n,type:a,checked:i}=e.target;if(t.includes(".")){const[e,o]=t.split(".");j(t=>(0,s.A)((0,s.A)({},t),{},{[e]:(0,s.A)((0,s.A)({},t[e]),{},{[o]:"checkbox"===a?i:n})}))}else j(e=>(0,s.A)((0,s.A)({},e),{},{[t]:"checkbox"===a?i:n}))};return(0,r.jsxs)("div",{className:"enhanced-profile ".concat(b?"dark":""),children:[(0,r.jsxs)("div",{className:"profile-header",children:[(0,r.jsx)("h2",{children:"Account Settings"}),I&&(0,r.jsx)("span",{className:"unsaved-indicator",children:"Unsaved changes"}),(0,r.jsx)("button",{className:"close-button",onClick:v,children:(0,r.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,r.jsx)("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),(0,r.jsx)("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),(0,r.jsxs)("div",{className:"profile-tabs",children:[(0,r.jsxs)("button",{className:"tab-button ".concat("profile"===N?"active":""),onClick:()=>S("profile"),children:[(0,r.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,r.jsx)("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),(0,r.jsx)("circle",{cx:"12",cy:"7",r:"4"})]}),"Profile"]}),(0,r.jsxs)("button",{className:"tab-button ".concat("preferences"===N?"active":""),onClick:()=>S("preferences"),children:[(0,r.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,r.jsx)("circle",{cx:"12",cy:"12",r:"3"}),(0,r.jsx)("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"})]}),"Preferences"]}),(0,r.jsxs)("button",{className:"tab-button ".concat("security"===N?"active":""),onClick:()=>S("security"),children:[(0,r.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,r.jsx)("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),(0,r.jsx)("circle",{cx:"12",cy:"16",r:"1"}),(0,r.jsx)("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]}),"Security"]})]}),P&&(0,r.jsx)("div",{className:"profile-error",children:P}),L&&(0,r.jsx)("div",{className:"profile-success",children:L}),"profile"===N&&(0,r.jsxs)("form",{className:"profile-form",onSubmit:async e=>{e.preventDefault(),console.log("Save Profile Button Clicked!"),console.log("Current user prop:",g),console.log("FormData state:",w),A(!0),T(null),M(null);try{const e=localStorage.getItem("authToken"),t=localStorage.getItem("token"),n=sessionStorage.getItem("authToken"),a=sessionStorage.getItem("token"),s=localStorage.getItem("user")||sessionStorage.getItem("user");console.log("Profile Save Debug - Available tokens:",{authToken:e?"present":"missing",token:t?"present":"missing",sessionAuthToken:n?"present":"missing",sessionToken:a?"present":"missing",currentUser:s?"present":"missing"});if(!(e||t||n||a))throw new Error("No authentication token found. Please log in again.");const o={name:w.name,displayName:w.displayName,bio:w.bio,phone:w.phone,location:w.location,website:w.website,company:w.company,jobTitle:w.jobTitle,statusMessage:w.statusMessage,avatarColor:w.avatarColor,socialLinks:{twitter:w.twitter,linkedin:w.linkedin,github:w.github,instagram:w.instagram,facebook:w.facebook,youtube:w.youtube,website:w.socialWebsite}};console.log("Profile Save Debug - Update data:",o);const r=await i.authService.updateProfile(o);console.log("Profile Save Debug - API response:",r),r.success&&(M("Profile updated successfully!"),O(!1),x(r.user),y&&y(r.user))}catch(n){var t;console.error("Profile update error details:",{error:n,message:n.message,stack:n.stack,response:null===(t=n.response)||void 0===t?void 0:t.data}),T(n.message||"Failed to update profile")}finally{A(!1)}},children:[(0,r.jsxs)("div",{className:"form-section",children:[(0,r.jsx)("h3",{children:"Profile Picture"}),(0,r.jsxs)("div",{className:"avatar-section",children:[(0,r.jsx)("div",{className:"avatar-container",children:C?(0,r.jsx)("img",{src:C,alt:"Profile",className:"avatar-preview"}):(0,r.jsx)("div",{className:"avatar-placeholder",style:{backgroundColor:w.avatarColor},children:(X=w.name,(null===X||void 0===X?void 0:X.split(" ").map(e=>e.charAt(0)).join("").substring(0,2).toUpperCase())||"U")})}),(0,r.jsxs)("div",{className:"avatar-controls",children:[(0,r.jsxs)("label",{className:"upload-button ".concat(E?"loading":""),children:[(0,r.jsx)("input",{type:"file",accept:"image/*",onChange:async e=>{const t=e.target.files[0];if(t)if(t.size>5242880)T("Avatar file size must be less than 5MB");else if(t.type.startsWith("image/")){A(!0),T(null);try{const e=new FileReader;e.onloadend=()=>{k(e.result)},e.readAsDataURL(t);const n=await i.authService.uploadAvatar(t);if(!n.success)throw new Error(n.error||"Upload failed");{j(e=>(0,s.A)((0,s.A)({},e),{},{avatar:n.avatarUrl})),M("Avatar uploaded successfully!");const e=i.authService.getUser();if(e){const t=(0,s.A)((0,s.A)({},e),{},{avatar:n.avatarUrl}),a=i.authService.getToken();i.authService.saveUserSession(t,a,!0)}}}catch(P){console.error("Avatar upload error:",P),T("Failed to upload avatar: ".concat(P.message)),k((null===g||void 0===g?void 0:g.avatar)||null)}finally{A(!1)}}else T("Please select a valid image file")},ref:R,hidden:!0,disabled:E}),E?"Uploading...":"Upload Photo"]}),C&&(0,r.jsx)("button",{type:"button",className:"remove-button",onClick:async()=>{A(!0),T(null);try{await i.authService.removeAvatar(),k(null),j(e=>(0,s.A)((0,s.A)({},e),{},{avatar:null})),R.current&&(R.current.value="");const e=i.authService.getUser();if(e){const t=(0,s.A)((0,s.A)({},e),{},{avatar:null}),n=i.authService.getToken();i.authService.saveUserSession(t,n,!0)}M("Avatar removed successfully!")}catch(P){console.error("Remove avatar error:",P),T("Failed to remove avatar: ".concat(P.message))}finally{A(!1)}},disabled:E,children:E?"Removing...":"Remove"}),(0,r.jsxs)("div",{className:"avatar-color-picker",children:[(0,r.jsx)("label",{children:"Avatar Color:"}),(0,r.jsx)("input",{type:"color",value:w.avatarColor,onChange:e=>j(t=>(0,s.A)((0,s.A)({},t),{},{avatarColor:e.target.value}))})]})]})]})]}),(0,r.jsxs)("div",{className:"form-section",children:[(0,r.jsx)("h3",{children:"Basic Information"}),(0,r.jsxs)("div",{className:"form-grid",children:[(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{htmlFor:"name",children:"Full Name *"}),(0,r.jsx)("input",{id:"name",name:"name",type:"text",value:w.name,onChange:F,required:!0})]}),(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{htmlFor:"displayName",children:"Display Name"}),(0,r.jsx)("input",{id:"displayName",name:"displayName",type:"text",value:w.displayName,onChange:F,placeholder:"How others see you"})]}),(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{htmlFor:"email",children:"Email Address *"}),(0,r.jsx)("input",{id:"email",name:"email",type:"email",value:w.email,onChange:F,required:!0})]}),(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{htmlFor:"phone",children:"Phone Number"}),(0,r.jsx)("input",{id:"phone",name:"phone",type:"tel",value:w.phone,onChange:F})]})]})]}),(0,r.jsxs)("div",{className:"form-section",children:[(0,r.jsx)("h3",{children:"About"}),(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{htmlFor:"statusMessage",children:"Status Message"}),(0,r.jsx)("input",{id:"statusMessage",name:"statusMessage",type:"text",value:w.statusMessage,onChange:F,placeholder:"What's on your mind?",maxLength:"100"})]}),(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{htmlFor:"bio",children:"Bio"}),(0,r.jsx)("textarea",{id:"bio",name:"bio",value:w.bio,onChange:F,rows:"4",placeholder:"Tell us about yourself...",maxLength:"500"}),(0,r.jsxs)("div",{className:"char-count",children:[w.bio.length,"/500"]})]})]}),(0,r.jsxs)("div",{className:"form-section",children:[(0,r.jsx)("h3",{children:"Professional Information"}),(0,r.jsxs)("div",{className:"form-grid",children:[(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{htmlFor:"company",children:"Company"}),(0,r.jsx)("input",{id:"company",name:"company",type:"text",value:w.company,onChange:F})]}),(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{htmlFor:"jobTitle",children:"Job Title"}),(0,r.jsx)("input",{id:"jobTitle",name:"jobTitle",type:"text",value:w.jobTitle,onChange:F})]}),(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{htmlFor:"location",children:"Location"}),(0,r.jsx)("input",{id:"location",name:"location",type:"text",value:w.location,onChange:F,placeholder:"City, Country"})]}),(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{htmlFor:"website",children:"Website"}),(0,r.jsx)("input",{id:"website",name:"website",type:"url",value:w.website,onChange:F,placeholder:"https://yourwebsite.com"})]})]})]}),(0,r.jsxs)("div",{className:"form-section",children:[(0,r.jsx)("h3",{children:"Social Links"}),(0,r.jsxs)("div",{className:"form-grid",children:[(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{htmlFor:"twitter",children:"Twitter"}),(0,r.jsx)("input",{id:"twitter",name:"twitter",type:"text",value:w.twitter,onChange:F,placeholder:"@username"})]}),(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{htmlFor:"linkedin",children:"LinkedIn"}),(0,r.jsx)("input",{id:"linkedin",name:"linkedin",type:"url",value:w.linkedin,onChange:F,placeholder:"https://linkedin.com/in/username"})]}),(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{htmlFor:"github",children:"GitHub"}),(0,r.jsx)("input",{id:"github",name:"github",type:"text",value:w.github,onChange:F,placeholder:"username"})]})]})]}),(0,r.jsx)("div",{className:"form-actions",children:(0,r.jsx)("button",{type:"submit",className:"save-button",disabled:E,onClick:e=>{console.log("Save button clicked directly!")},children:E?"Saving...":"Save Profile"})})]}),"preferences"===N&&(0,r.jsxs)("form",{className:"profile-form",onSubmit:async e=>{e.preventDefault(),A(!0),T(null),M(null);try{const e={theme:w.theme,language:w.language,timezone:w.timezone,notifications:w.notifications,privacy:{profileVisibility:w.profileVisibility,showOnlineStatus:w.showOnlineStatus,allowDirectMessages:w.allowDirectMessages,lastSeenVisibility:w.lastSeenVisibility||"everyone",onlineStatusVisibility:w.onlineStatusVisibility||"everyone",phoneVisibility:w.phoneVisibility||"contacts",emailVisibility:w.emailVisibility||"contacts",locationVisibility:w.locationVisibility||"contacts"}},t=await i.authService.updateCurrentUserPreferences(e);t.success&&(M("Preferences updated successfully!"),O(!1),x(t.user),y&&y(t.user))}catch(t){console.error("Preferences update error:",t),T(t.message||"Failed to update preferences")}finally{A(!1)}},children:[(0,r.jsxs)("div",{className:"form-section",children:[(0,r.jsx)("h3",{children:"Appearance"}),(0,r.jsxs)("div",{className:"form-grid",children:[(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{htmlFor:"theme",children:"Theme"}),(0,r.jsxs)("select",{id:"theme",name:"theme",value:w.theme,onChange:F,children:[(0,r.jsx)("option",{value:"light",children:"Light"}),(0,r.jsx)("option",{value:"dark",children:"Dark"}),(0,r.jsx)("option",{value:"system",children:"System Default"})]})]}),(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{htmlFor:"language",children:"Language"}),(0,r.jsxs)("select",{id:"language",name:"language",value:w.language,onChange:F,children:[(0,r.jsx)("option",{value:"en",children:"English"}),(0,r.jsx)("option",{value:"es",children:"Espa\xf1ol"}),(0,r.jsx)("option",{value:"fr",children:"Fran\xe7ais"}),(0,r.jsx)("option",{value:"de",children:"Deutsch"}),(0,r.jsx)("option",{value:"pt",children:"Portugu\xeas"}),(0,r.jsx)("option",{value:"zh",children:"\u4e2d\u6587"}),(0,r.jsx)("option",{value:"ja",children:"\u65e5\u672c\u8a9e"})]})]}),(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{htmlFor:"timezone",children:"Timezone"}),(0,r.jsxs)("select",{id:"timezone",name:"timezone",value:w.timezone,onChange:F,children:[(0,r.jsx)("option",{value:"America/New_York",children:"Eastern Time"}),(0,r.jsx)("option",{value:"America/Chicago",children:"Central Time"}),(0,r.jsx)("option",{value:"America/Denver",children:"Mountain Time"}),(0,r.jsx)("option",{value:"America/Los_Angeles",children:"Pacific Time"}),(0,r.jsx)("option",{value:"Europe/London",children:"GMT"}),(0,r.jsx)("option",{value:"Europe/Paris",children:"Central European Time"}),(0,r.jsx)("option",{value:"Asia/Tokyo",children:"Japan Standard Time"}),(0,r.jsx)("option",{value:"Australia/Sydney",children:"Australian Eastern Time"})]})]})]})]}),(0,r.jsxs)("div",{className:"form-section",children:[(0,r.jsx)("h3",{children:"Notifications"}),(0,r.jsxs)("div",{className:"checkbox-group",children:[(0,r.jsxs)("label",{className:"checkbox-label",children:[(0,r.jsx)("input",{type:"checkbox",name:"notifications.email",checked:w.notifications.email,onChange:F}),"Email notifications"]}),(0,r.jsxs)("label",{className:"checkbox-label",children:[(0,r.jsx)("input",{type:"checkbox",name:"notifications.push",checked:w.notifications.push,onChange:F}),"Push notifications"]}),(0,r.jsxs)("label",{className:"checkbox-label",children:[(0,r.jsx)("input",{type:"checkbox",name:"notifications.mentions",checked:w.notifications.mentions,onChange:F}),"Notify when mentioned"]}),(0,r.jsxs)("label",{className:"checkbox-label",children:[(0,r.jsx)("input",{type:"checkbox",name:"notifications.messages",checked:w.notifications.messages,onChange:F}),"New message notifications"]})]})]}),(0,r.jsxs)("div",{className:"form-section",children:[(0,r.jsx)("h3",{children:"Privacy"}),(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{htmlFor:"profileVisibility",children:"Profile Visibility"}),(0,r.jsxs)("select",{id:"profileVisibility",name:"profileVisibility",value:w.profileVisibility,onChange:F,children:[(0,r.jsx)("option",{value:"public",children:"Public"}),(0,r.jsx)("option",{value:"friends",children:"Friends Only"}),(0,r.jsx)("option",{value:"private",children:"Private"})]})]}),(0,r.jsxs)("div",{className:"checkbox-group",children:[(0,r.jsxs)("label",{className:"checkbox-label",children:[(0,r.jsx)("input",{type:"checkbox",name:"showOnlineStatus",checked:w.showOnlineStatus,onChange:F}),"Show online status"]}),(0,r.jsxs)("label",{className:"checkbox-label",children:[(0,r.jsx)("input",{type:"checkbox",name:"allowDirectMessages",checked:w.allowDirectMessages,onChange:F}),"Allow direct messages"]})]})]}),(0,r.jsx)("div",{className:"form-actions",children:(0,r.jsx)("button",{type:"submit",className:"save-button",disabled:E,children:E?"Saving...":"Save Preferences"})})]}),"security"===N&&(0,r.jsxs)("div",{className:"security-tab-content",children:[(0,r.jsxs)("div",{className:"form-section",children:[(0,r.jsx)("h3",{children:"Account Security"}),(0,r.jsx)("div",{className:"security-status-card",children:(0,r.jsxs)("div",{className:"security-score",children:[(0,r.jsx)("div",{className:"score-icon",children:"\ud83d\udee1\ufe0f"}),(0,r.jsxs)("div",{className:"score-info",children:[(0,r.jsx)("div",{className:"score-title",children:"Security Level"}),(0,r.jsx)("div",{className:"score-description",children:"Your account security status"})]}),(0,r.jsx)("button",{type:"button",className:"view-security-btn",onClick:()=>{console.log("Open security dashboard")},children:"View Details"})]})})]}),(0,r.jsxs)("div",{className:"form-section",children:[(0,r.jsx)("h3",{children:"Two-Factor Authentication"}),(0,r.jsxs)("div",{className:"two-factor-status",children:[(0,r.jsxs)("div",{className:"status-indicator",children:[(0,r.jsx)("div",{className:"status-icon",children:(0,r.jsx)("span",{className:"icon-placeholder",children:"\ud83d\udd13"})}),(0,r.jsxs)("div",{className:"status-content",children:[(0,r.jsx)("div",{className:"status-title",children:"Two-Factor Authentication is Off"}),(0,r.jsx)("div",{className:"status-description",children:"Add an extra layer of security to protect your account"})]}),(0,r.jsx)("button",{type:"button",className:"enable-2fa-btn",onClick:()=>{console.log("Enable 2FA")},children:"Enable 2FA"})]}),(0,r.jsxs)("div",{className:"security-benefits",children:[(0,r.jsx)("h4",{children:"Benefits of enabling 2FA:"}),(0,r.jsxs)("ul",{children:[(0,r.jsx)("li",{children:"\ud83d\udee1\ufe0f Protects against password breaches"}),(0,r.jsx)("li",{children:"\ud83d\udd10 Adds an extra layer of security"}),(0,r.jsx)("li",{children:"\ud83d\udcf1 Works with popular authenticator apps"}),(0,r.jsx)("li",{children:"\ud83d\udd11 Includes backup codes for recovery"})]})]})]})]}),(0,r.jsxs)("form",{className:"password-change-form",onSubmit:async e=>{if(e.preventDefault(),_.newPassword===_.confirmPassword)if(_.newPassword.length<8)T("Password must be at least 8 characters long");else{A(!0),T(null),M(null);try{(await i.authService.changeCurrentUserPassword(_.currentPassword,_.newPassword)).success&&(M("Password changed successfully!"),D({currentPassword:"",newPassword:"",confirmPassword:""}))}catch(t){console.error("Password change error:",t),T(t.message||"Failed to change password")}finally{A(!1)}}else T("New passwords do not match")},children:[(0,r.jsxs)("div",{className:"form-section",children:[(0,r.jsx)("h3",{children:"Change Password"}),(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{htmlFor:"currentPassword",children:"Current Password"}),(0,r.jsx)("input",{id:"currentPassword",type:"password",value:_.currentPassword,onChange:e=>D(t=>(0,s.A)((0,s.A)({},t),{},{currentPassword:e.target.value})),required:!0})]}),(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{htmlFor:"newPassword",children:"New Password"}),(0,r.jsx)("input",{id:"newPassword",type:"password",value:_.newPassword,onChange:e=>D(t=>(0,s.A)((0,s.A)({},t),{},{newPassword:e.target.value})),required:!0,minLength:"8"}),(0,r.jsx)("div",{className:"password-requirements",children:"Password must be at least 8 characters long"})]}),(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{htmlFor:"confirmPassword",children:"Confirm New Password"}),(0,r.jsx)("input",{id:"confirmPassword",type:"password",value:_.confirmPassword,onChange:e=>D(t=>(0,s.A)((0,s.A)({},t),{},{confirmPassword:e.target.value})),required:!0})]})]}),(0,r.jsx)("div",{className:"form-actions",children:(0,r.jsx)("button",{type:"submit",className:"save-button",disabled:E,children:E?"Changing...":"Change Password"})})]})]})]});var X};var c=n(61);const d=e=>{let{darkMode:t}=e;const[n,s]=(0,a.useState)(null),[i,o]=(0,a.useState)(!0);(0,a.useEffect)(()=>{l();const e=setInterval(l,6e4);return()=>clearInterval(e)},[]);const l=()=>{o(!0);const e=(0,c.TF)();s(e),o(!1)};return i?(0,r.jsx)("div",{className:"user-analytics-loading",children:"Loading activity data..."}):(0,r.jsxs)("div",{className:"user-analytics ".concat(t?"dark":""),children:[(0,r.jsxs)("div",{className:"analytics-header",children:[(0,r.jsx)("h2",{children:"Activity Overview"}),(0,r.jsx)("button",{className:"refresh-button",onClick:l,"aria-label":"Refresh statistics",children:(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,r.jsx)("path",{d:"M23 4v6h-6"}),(0,r.jsx)("path",{d:"M1 20v-6h6"}),(0,r.jsx)("path",{d:"M3.51 9a9 9 0 0 1 14.85-3.36L23 10"}),(0,r.jsx)("path",{d:"M20.49 15a9 9 0 0 1-14.85 3.36L1 14"})]})})]}),(0,r.jsxs)("div",{className:"analytics-summary",children:[(0,r.jsxs)("div",{className:"analytics-card",children:[(0,r.jsx)("h3",{children:"Today"}),(0,r.jsxs)("div",{className:"stat-item",children:[(0,r.jsx)("span",{className:"stat-label",children:"Messages Sent"}),(0,r.jsx)("span",{className:"stat-value",children:n.today.messagesSent})]}),(0,r.jsxs)("div",{className:"stat-item",children:[(0,r.jsx)("span",{className:"stat-label",children:"Messages Received"}),(0,r.jsx)("span",{className:"stat-value",children:n.today.messagesReceived})]}),(0,r.jsxs)("div",{className:"stat-item",children:[(0,r.jsx)("span",{className:"stat-label",children:"Logins"}),(0,r.jsx)("span",{className:"stat-value",children:n.today.logins})]}),(0,r.jsxs)("div",{className:"stat-item",children:[(0,r.jsx)("span",{className:"stat-label",children:"Total Activity"}),(0,r.jsx)("span",{className:"stat-value",children:n.today.total})]})]}),(0,r.jsxs)("div",{className:"analytics-card",children:[(0,r.jsx)("h3",{children:"This Week"}),(0,r.jsxs)("div",{className:"stat-item",children:[(0,r.jsx)("span",{className:"stat-label",children:"Messages Sent"}),(0,r.jsx)("span",{className:"stat-value",children:n.week.messagesSent})]}),(0,r.jsxs)("div",{className:"stat-item",children:[(0,r.jsx)("span",{className:"stat-label",children:"Messages Received"}),(0,r.jsx)("span",{className:"stat-value",children:n.week.messagesReceived})]}),(0,r.jsxs)("div",{className:"stat-item",children:[(0,r.jsx)("span",{className:"stat-label",children:"Logins"}),(0,r.jsx)("span",{className:"stat-value",children:n.week.logins})]}),(0,r.jsxs)("div",{className:"stat-item",children:[(0,r.jsx)("span",{className:"stat-label",children:"Total Activity"}),(0,r.jsx)("span",{className:"stat-value",children:n.week.total})]})]})]}),(0,r.jsxs)("div",{className:"last-activity",children:[(0,r.jsx)("h3",{children:"Last Activity"}),n.lastActivity?(0,r.jsxs)("div",{className:"last-activity-item",children:[(0,r.jsx)("div",{className:"activity-type",children:(u=n.lastActivity.type,u.replace(/_/g," ").toLowerCase().replace(/\b\w/g,e=>e.toUpperCase()))}),(0,r.jsx)("div",{className:"activity-time",children:(d=n.lastActivity.timestamp,new Date(d).toLocaleString())})]}):(0,r.jsx)("div",{className:"no-activity",children:"No activity recorded"})]}),(0,r.jsx)("div",{className:"analytics-actions",children:(0,r.jsx)("button",{className:"clear-log-button",onClick:()=>{window.confirm("Are you sure you want to clear your activity log? This cannot be undone.")&&((0,c.Tq)(),l())},children:"Clear Activity Log"})})]});var d,u};var u,h=Object.defineProperty,m=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,f=Object.prototype.propertyIsEnumerable,g=(e,t,n)=>t in e?h(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,v=(e,t)=>{for(var n in t||(t={}))p.call(t,n)&&g(e,n,t[n]);if(m)for(var n of m(t))f.call(t,n)&&g(e,n,t[n]);return e},y=(e,t)=>{var n={};for(var a in e)p.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&m)for(var a of m(e))t.indexOf(a)<0&&f.call(e,a)&&(n[a]=e[a]);return n};(e=>{const t=class t{constructor(e,n,a,i){if(this.version=e,this.errorCorrectionLevel=n,this.modules=[],this.isFunction=[],e<t.MIN_VERSION||e>t.MAX_VERSION)throw new RangeError("Version value out of range");if(i<-1||i>7)throw new RangeError("Mask value out of range");this.size=4*e+17;let o=[];for(let t=0;t<this.size;t++)o.push(!1);for(let t=0;t<this.size;t++)this.modules.push(o.slice()),this.isFunction.push(o.slice());this.drawFunctionPatterns();const r=this.addEccAndInterleave(a);if(this.drawCodewords(r),-1==i){let e=1e9;for(let t=0;t<8;t++){this.applyMask(t),this.drawFormatBits(t);const n=this.getPenaltyScore();n<e&&(i=t,e=n),this.applyMask(t)}}s(0<=i&&i<=7),this.mask=i,this.applyMask(i),this.drawFormatBits(i),this.isFunction=[]}static encodeText(n,a){const s=e.QrSegment.makeSegments(n);return t.encodeSegments(s,a)}static encodeBinary(n,a){const s=e.QrSegment.makeBytes(n);return t.encodeSegments([s],a)}static encodeSegments(e,a){let i,r,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:40,d=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-1,u=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];if(!(t.MIN_VERSION<=l&&l<=c&&c<=t.MAX_VERSION)||d<-1||d>7)throw new RangeError("Invalid value");for(i=l;;i++){const n=8*t.getNumDataCodewords(i,a),s=o.getTotalBits(e,i);if(s<=n){r=s;break}if(i>=c)throw new RangeError("Data too long")}for(const n of[t.Ecc.MEDIUM,t.Ecc.QUARTILE,t.Ecc.HIGH])u&&r<=8*t.getNumDataCodewords(i,n)&&(a=n);let h=[];for(const t of e){n(t.mode.modeBits,4,h),n(t.numChars,t.mode.numCharCountBits(i),h);for(const e of t.getData())h.push(e)}s(h.length==r);const m=8*t.getNumDataCodewords(i,a);s(h.length<=m),n(0,Math.min(4,m-h.length),h),n(0,(8-h.length%8)%8,h),s(h.length%8==0);for(let t=236;h.length<m;t^=253)n(t,8,h);let p=[];for(;8*p.length<h.length;)p.push(0);return h.forEach((e,t)=>p[t>>>3]|=e<<7-(7&t)),new t(i,a,p,d)}getModule(e,t){return 0<=e&&e<this.size&&0<=t&&t<this.size&&this.modules[t][e]}getModules(){return this.modules}drawFunctionPatterns(){for(let n=0;n<this.size;n++)this.setFunctionModule(6,n,n%2==0),this.setFunctionModule(n,6,n%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const e=this.getAlignmentPatternPositions(),t=e.length;for(let n=0;n<t;n++)for(let a=0;a<t;a++)0==n&&0==a||0==n&&a==t-1||n==t-1&&0==a||this.drawAlignmentPattern(e[n],e[a]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(e){const t=this.errorCorrectionLevel.formatBits<<3|e;let n=t;for(let a=0;a<10;a++)n=n<<1^1335*(n>>>9);const i=21522^(t<<10|n);s(i>>>15==0);for(let s=0;s<=5;s++)this.setFunctionModule(8,s,a(i,s));this.setFunctionModule(8,7,a(i,6)),this.setFunctionModule(8,8,a(i,7)),this.setFunctionModule(7,8,a(i,8));for(let s=9;s<15;s++)this.setFunctionModule(14-s,8,a(i,s));for(let s=0;s<8;s++)this.setFunctionModule(this.size-1-s,8,a(i,s));for(let s=8;s<15;s++)this.setFunctionModule(8,this.size-15+s,a(i,s));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let e=this.version;for(let n=0;n<12;n++)e=e<<1^7973*(e>>>11);const t=this.version<<12|e;s(t>>>18==0);for(let n=0;n<18;n++){const e=a(t,n),s=this.size-11+n%3,i=Math.floor(n/3);this.setFunctionModule(s,i,e),this.setFunctionModule(i,s,e)}}drawFinderPattern(e,t){for(let n=-4;n<=4;n++)for(let a=-4;a<=4;a++){const s=Math.max(Math.abs(a),Math.abs(n)),i=e+a,o=t+n;0<=i&&i<this.size&&0<=o&&o<this.size&&this.setFunctionModule(i,o,2!=s&&4!=s)}}drawAlignmentPattern(e,t){for(let n=-2;n<=2;n++)for(let a=-2;a<=2;a++)this.setFunctionModule(e+a,t+n,1!=Math.max(Math.abs(a),Math.abs(n)))}setFunctionModule(e,t,n){this.modules[t][e]=n,this.isFunction[t][e]=!0}addEccAndInterleave(e){const n=this.version,a=this.errorCorrectionLevel;if(e.length!=t.getNumDataCodewords(n,a))throw new RangeError("Invalid argument");const i=t.NUM_ERROR_CORRECTION_BLOCKS[a.ordinal][n],o=t.ECC_CODEWORDS_PER_BLOCK[a.ordinal][n],r=Math.floor(t.getNumRawDataModules(n)/8),l=i-r%i,c=Math.floor(r/i);let d=[];const u=t.reedSolomonComputeDivisor(o);for(let s=0,m=0;s<i;s++){let n=e.slice(m,m+c-o+(s<l?0:1));m+=n.length;const a=t.reedSolomonComputeRemainder(n,u);s<l&&n.push(0),d.push(n.concat(a))}let h=[];for(let t=0;t<d[0].length;t++)d.forEach((e,n)=>{(t!=c-o||n>=l)&&h.push(e[t])});return s(h.length==r),h}drawCodewords(e){if(e.length!=Math.floor(t.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let n=0;for(let t=this.size-1;t>=1;t-=2){6==t&&(t=5);for(let s=0;s<this.size;s++)for(let i=0;i<2;i++){const o=t-i,r=0==(t+1&2)?this.size-1-s:s;!this.isFunction[r][o]&&n<8*e.length&&(this.modules[r][o]=a(e[n>>>3],7-(7&n)),n++)}}s(n==8*e.length)}applyMask(e){if(e<0||e>7)throw new RangeError("Mask value out of range");for(let t=0;t<this.size;t++)for(let n=0;n<this.size;n++){let a;switch(e){case 0:a=(n+t)%2==0;break;case 1:a=t%2==0;break;case 2:a=n%3==0;break;case 3:a=(n+t)%3==0;break;case 4:a=(Math.floor(n/3)+Math.floor(t/2))%2==0;break;case 5:a=n*t%2+n*t%3==0;break;case 6:a=(n*t%2+n*t%3)%2==0;break;case 7:a=((n+t)%2+n*t%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[t][n]&&a&&(this.modules[t][n]=!this.modules[t][n])}}getPenaltyScore(){let e=0;for(let s=0;s<this.size;s++){let n=!1,a=0,i=[0,0,0,0,0,0,0];for(let o=0;o<this.size;o++)this.modules[s][o]==n?(a++,5==a?e+=t.PENALTY_N1:a>5&&e++):(this.finderPenaltyAddHistory(a,i),n||(e+=this.finderPenaltyCountPatterns(i)*t.PENALTY_N3),n=this.modules[s][o],a=1);e+=this.finderPenaltyTerminateAndCount(n,a,i)*t.PENALTY_N3}for(let s=0;s<this.size;s++){let n=!1,a=0,i=[0,0,0,0,0,0,0];for(let o=0;o<this.size;o++)this.modules[o][s]==n?(a++,5==a?e+=t.PENALTY_N1:a>5&&e++):(this.finderPenaltyAddHistory(a,i),n||(e+=this.finderPenaltyCountPatterns(i)*t.PENALTY_N3),n=this.modules[o][s],a=1);e+=this.finderPenaltyTerminateAndCount(n,a,i)*t.PENALTY_N3}for(let s=0;s<this.size-1;s++)for(let n=0;n<this.size-1;n++){const a=this.modules[s][n];a==this.modules[s][n+1]&&a==this.modules[s+1][n]&&a==this.modules[s+1][n+1]&&(e+=t.PENALTY_N2)}let n=0;for(const t of this.modules)n=t.reduce((e,t)=>e+(t?1:0),n);const a=this.size*this.size,i=Math.ceil(Math.abs(20*n-10*a)/a)-1;return s(0<=i&&i<=9),e+=i*t.PENALTY_N4,s(0<=e&&e<=2568888),e}getAlignmentPatternPositions(){if(1==this.version)return[];{const e=Math.floor(this.version/7)+2,t=32==this.version?26:2*Math.ceil((4*this.version+4)/(2*e-2));let n=[6];for(let a=this.size-7;n.length<e;a-=t)n.splice(1,0,a);return n}}static getNumRawDataModules(e){if(e<t.MIN_VERSION||e>t.MAX_VERSION)throw new RangeError("Version number out of range");let n=(16*e+128)*e+64;if(e>=2){const t=Math.floor(e/7)+2;n-=(25*t-10)*t-55,e>=7&&(n-=36)}return s(208<=n&&n<=29648),n}static getNumDataCodewords(e,n){return Math.floor(t.getNumRawDataModules(e)/8)-t.ECC_CODEWORDS_PER_BLOCK[n.ordinal][e]*t.NUM_ERROR_CORRECTION_BLOCKS[n.ordinal][e]}static reedSolomonComputeDivisor(e){if(e<1||e>255)throw new RangeError("Degree out of range");let n=[];for(let t=0;t<e-1;t++)n.push(0);n.push(1);let a=1;for(let s=0;s<e;s++){for(let e=0;e<n.length;e++)n[e]=t.reedSolomonMultiply(n[e],a),e+1<n.length&&(n[e]^=n[e+1]);a=t.reedSolomonMultiply(a,2)}return n}static reedSolomonComputeRemainder(e,n){let a=n.map(e=>0);for(const s of e){const e=s^a.shift();a.push(0),n.forEach((n,s)=>a[s]^=t.reedSolomonMultiply(n,e))}return a}static reedSolomonMultiply(e,t){if(e>>>8!=0||t>>>8!=0)throw new RangeError("Byte out of range");let n=0;for(let a=7;a>=0;a--)n=n<<1^285*(n>>>7),n^=(t>>>a&1)*e;return s(n>>>8==0),n}finderPenaltyCountPatterns(e){const t=e[1];s(t<=3*this.size);const n=t>0&&e[2]==t&&e[3]==3*t&&e[4]==t&&e[5]==t;return(n&&e[0]>=4*t&&e[6]>=t?1:0)+(n&&e[6]>=4*t&&e[0]>=t?1:0)}finderPenaltyTerminateAndCount(e,t,n){return e&&(this.finderPenaltyAddHistory(t,n),t=0),t+=this.size,this.finderPenaltyAddHistory(t,n),this.finderPenaltyCountPatterns(n)}finderPenaltyAddHistory(e,t){0==t[0]&&(e+=this.size),t.pop(),t.unshift(e)}};t.MIN_VERSION=1,t.MAX_VERSION=40,t.PENALTY_N1=3,t.PENALTY_N2=3,t.PENALTY_N3=40,t.PENALTY_N4=10,t.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],t.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]];function n(e,t,n){if(t<0||t>31||e>>>t!=0)throw new RangeError("Value out of range");for(let a=t-1;a>=0;a--)n.push(e>>>a&1)}function a(e,t){return 0!=(e>>>t&1)}function s(e){if(!e)throw new Error("Assertion error")}e.QrCode=t;const i=class e{constructor(e,t,n){if(this.mode=e,this.numChars=t,this.bitData=n,t<0)throw new RangeError("Invalid argument");this.bitData=n.slice()}static makeBytes(t){let a=[];for(const e of t)n(e,8,a);return new e(e.Mode.BYTE,t.length,a)}static makeNumeric(t){if(!e.isNumeric(t))throw new RangeError("String contains non-numeric characters");let a=[];for(let e=0;e<t.length;){const s=Math.min(t.length-e,3);n(parseInt(t.substring(e,e+s),10),3*s+1,a),e+=s}return new e(e.Mode.NUMERIC,t.length,a)}static makeAlphanumeric(t){if(!e.isAlphanumeric(t))throw new RangeError("String contains unencodable characters in alphanumeric mode");let a,s=[];for(a=0;a+2<=t.length;a+=2){let i=45*e.ALPHANUMERIC_CHARSET.indexOf(t.charAt(a));i+=e.ALPHANUMERIC_CHARSET.indexOf(t.charAt(a+1)),n(i,11,s)}return a<t.length&&n(e.ALPHANUMERIC_CHARSET.indexOf(t.charAt(a)),6,s),new e(e.Mode.ALPHANUMERIC,t.length,s)}static makeSegments(t){return""==t?[]:e.isNumeric(t)?[e.makeNumeric(t)]:e.isAlphanumeric(t)?[e.makeAlphanumeric(t)]:[e.makeBytes(e.toUtf8ByteArray(t))]}static makeEci(t){let a=[];if(t<0)throw new RangeError("ECI assignment value out of range");if(t<128)n(t,8,a);else if(t<16384)n(2,2,a),n(t,14,a);else{if(!(t<1e6))throw new RangeError("ECI assignment value out of range");n(6,3,a),n(t,21,a)}return new e(e.Mode.ECI,0,a)}static isNumeric(t){return e.NUMERIC_REGEX.test(t)}static isAlphanumeric(t){return e.ALPHANUMERIC_REGEX.test(t)}getData(){return this.bitData.slice()}static getTotalBits(e,t){let n=0;for(const a of e){const e=a.mode.numCharCountBits(t);if(a.numChars>=1<<e)return 1/0;n+=4+e+a.bitData.length}return n}static toUtf8ByteArray(e){e=encodeURI(e);let t=[];for(let n=0;n<e.length;n++)"%"!=e.charAt(n)?t.push(e.charCodeAt(n)):(t.push(parseInt(e.substring(n+1,n+3),16)),n+=2);return t}};i.NUMERIC_REGEX=/^[0-9]*$/,i.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,i.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let o=i;e.QrSegment=i})(u||(u={})),(e=>{let t;(e=>{const t=class{constructor(e,t){this.ordinal=e,this.formatBits=t}};t.LOW=new t(0,1),t.MEDIUM=new t(1,0),t.QUARTILE=new t(2,3),t.HIGH=new t(3,2);e.Ecc=t})(t=e.QrCode||(e.QrCode={}))})(u||(u={})),(e=>{let t;(e=>{const t=class{constructor(e,t){this.modeBits=e,this.numBitsCharCount=t}numCharCountBits(e){return this.numBitsCharCount[Math.floor((e+7)/17)]}};t.NUMERIC=new t(1,[10,12,14]),t.ALPHANUMERIC=new t(2,[9,11,13]),t.BYTE=new t(4,[8,16,16]),t.KANJI=new t(8,[8,10,12]),t.ECI=new t(7,[0,0,0]);e.Mode=t})(t=e.QrSegment||(e.QrSegment={}))})(u||(u={}));var b=u,x={L:b.QrCode.Ecc.LOW,M:b.QrCode.Ecc.MEDIUM,Q:b.QrCode.Ecc.QUARTILE,H:b.QrCode.Ecc.HIGH},w=128,j="L",N="#FFFFFF",S="#000000",C=!1,k=1;function E(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=[];return e.forEach(function(e,a){let s=null;e.forEach(function(i,o){if(!i&&null!==s)return n.push("M".concat(s+t," ").concat(a+t,"h").concat(o-s,"v1H").concat(s+t,"z")),void(s=null);if(o!==e.length-1)i&&null===s&&(s=o);else{if(!i)return;null===s?n.push("M".concat(o+t,",").concat(a+t," h1v1H").concat(o+t,"z")):n.push("M".concat(s+t,",").concat(a+t," h").concat(o+1-s,"v1H").concat(s+t,"z"))}})}),n.join("")}function A(e,t){return e.slice().map((e,n)=>n<t.y||n>=t.y+t.h?e:e.map((e,n)=>(n<t.x||n>=t.x+t.w)&&e))}function P(e){let{value:t,level:n,minVersion:s,includeMargin:i,marginSize:o,imageSettings:r,size:l,boostLevel:c}=e,d=a.useMemo(()=>{const e=(Array.isArray(t)?t:[t]).reduce((e,t)=>(e.push(...b.QrSegment.makeSegments(t)),e),[]);return b.QrCode.encodeSegments(e,x[n],s,void 0,void 0,c)},[t,n,s,c]);const{cells:u,margin:h,numCells:m,calculatedImageSettings:p}=a.useMemo(()=>{let e=d.getModules();const t=function(e,t){return null!=t?Math.max(Math.floor(t),0):e?4:0}(i,o),n=e.length+2*t,a=function(e,t,n,a){if(null==a)return null;const s=e.length+2*n,i=Math.floor(.1*t),o=s/t,r=(a.width||i)*o,l=(a.height||i)*o,c=null==a.x?e.length/2-r/2:a.x*o,d=null==a.y?e.length/2-l/2:a.y*o,u=null==a.opacity?1:a.opacity;let h=null;if(a.excavate){let e=Math.floor(c),t=Math.floor(d);h={x:e,y:t,w:Math.ceil(r+c-e),h:Math.ceil(l+d-t)}}return{x:c,y:d,h:l,w:r,excavation:h,opacity:u,crossOrigin:a.crossOrigin}}(e,l,t,r);return{cells:e,margin:t,numCells:n,calculatedImageSettings:a}},[d,l,r,i,o]);return{qrcode:d,margin:h,cells:u,numCells:m,calculatedImageSettings:p}}var T=function(){try{(new Path2D).addPath(new Path2D)}catch(e){return!1}return!0}();a.forwardRef(function(e,t){const n=e,{value:s,size:i=w,level:o=j,bgColor:r=N,fgColor:l=S,includeMargin:c=C,minVersion:d=k,boostLevel:u,marginSize:h,imageSettings:m}=n,p=y(n,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:f}=p,g=y(p,["style"]),b=null==m?void 0:m.src,x=a.useRef(null),L=a.useRef(null),M=a.useCallback(e=>{x.current=e,"function"===typeof t?t(e):t&&(t.current=e)},[t]),[I,O]=a.useState(!1),{margin:_,cells:D,numCells:R,calculatedImageSettings:F}=P({value:s,level:o,minVersion:d,boostLevel:u,includeMargin:c,marginSize:h,imageSettings:m,size:i});a.useEffect(()=>{if(null!=x.current){const e=x.current,t=e.getContext("2d");if(!t)return;let n=D;const a=L.current,s=null!=F&&null!==a&&a.complete&&0!==a.naturalHeight&&0!==a.naturalWidth;s&&null!=F.excavation&&(n=A(D,F.excavation));const o=window.devicePixelRatio||1;e.height=e.width=i*o;const c=i/R*o;t.scale(c,c),t.fillStyle=r,t.fillRect(0,0,R,R),t.fillStyle=l,T?t.fill(new Path2D(E(n,_))):D.forEach(function(e,n){e.forEach(function(e,a){e&&t.fillRect(a+_,n+_,1,1)})}),F&&(t.globalAlpha=F.opacity),s&&t.drawImage(a,F.x+_,F.y+_,F.w,F.h)}}),a.useEffect(()=>{O(!1)},[b]);const X=v({height:i,width:i},f);let U=null;return null!=b&&(U=a.createElement("img",{src:b,key:b,style:{display:"none"},onLoad:()=>{O(!0)},ref:L,crossOrigin:null==F?void 0:F.crossOrigin})),a.createElement(a.Fragment,null,a.createElement("canvas",v({style:X,height:i,width:i,ref:M,role:"img"},g)),U)}).displayName="QRCodeCanvas";var L=a.forwardRef(function(e,t){const n=e,{value:s,size:i=w,level:o=j,bgColor:r=N,fgColor:l=S,includeMargin:c=C,minVersion:d=k,boostLevel:u,title:h,marginSize:m,imageSettings:p}=n,f=y(n,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:g,cells:b,numCells:x,calculatedImageSettings:T}=P({value:s,level:o,minVersion:d,boostLevel:u,includeMargin:c,marginSize:m,imageSettings:p,size:i});let L=b,M=null;null!=p&&null!=T&&(null!=T.excavation&&(L=A(b,T.excavation)),M=a.createElement("image",{href:p.src,height:T.h,width:T.w,x:T.x+g,y:T.y+g,preserveAspectRatio:"none",opacity:T.opacity,crossOrigin:T.crossOrigin}));const I=E(L,g);return a.createElement("svg",v({height:i,width:i,viewBox:"0 0 ".concat(x," ").concat(x),ref:t,role:"img"},f),!!h&&a.createElement("title",null,h),a.createElement("path",{fill:r,d:"M0,0 h".concat(x,"v").concat(x,"H0z"),shapeRendering:"crispEdges"}),a.createElement("path",{fill:l,d:I,shapeRendering:"crispEdges"}),M)});L.displayName="QRCodeSVG";var M=n(608);const I=e=>{let{onClose:t,onSetupComplete:n}=e;const[s,i]=(0,a.useState)(1),[o,l]=(0,a.useState)(""),[c,d]=(0,a.useState)(""),[u,h]=(0,a.useState)(""),[m,p]=(0,a.useState)(""),[f,g]=(0,a.useState)([]),[v,y]=(0,a.useState)(!1),[b,x]=(0,a.useState)("");(0,a.useEffect)(()=>{w()},[]);const w=async()=>{try{y(!0),x("");const e=await M.A.api.setupTwoFactor();if(!e.success)throw new Error(e.error||"Failed to initialize 2FA setup");l(e.qrCode),d(e.secret),h(e.manualEntryKey)}catch(e){console.error("2FA setup initialization error:",e),x(e.message||"Failed to initialize 2FA setup")}finally{y(!1)}},j=e=>{navigator.clipboard.writeText(e).then(()=>{})};return v&&1===s?(0,r.jsx)("div",{className:"two-factor-setup-overlay",children:(0,r.jsx)("div",{className:"two-factor-setup-container",children:(0,r.jsxs)("div",{className:"loading-state",children:[(0,r.jsx)("div",{className:"loading-spinner"}),(0,r.jsx)("p",{children:"Setting up Two-Factor Authentication..."})]})})}):(0,r.jsx)("div",{className:"two-factor-setup-overlay",children:(0,r.jsxs)("div",{className:"two-factor-setup-container",children:[(0,r.jsxs)("div",{className:"setup-header",children:[(0,r.jsx)("h2",{children:"Enable Two-Factor Authentication"}),(0,r.jsx)("button",{onClick:t,className:"close-button",disabled:v,children:"\xd7"})]}),1===s&&(0,r.jsxs)("div",{className:"setup-step",children:[(0,r.jsxs)("div",{className:"step-indicator",children:[(0,r.jsx)("span",{className:"step active",children:"1"}),(0,r.jsx)("span",{className:"step",children:"2"}),(0,r.jsx)("span",{className:"step",children:"3"})]}),(0,r.jsx)("h3",{children:"Step 1: Install Authenticator App"}),(0,r.jsx)("p",{children:"Download and install an authenticator app on your phone:"}),(0,r.jsxs)("div",{className:"app-recommendations",children:[(0,r.jsxs)("div",{className:"app-option",children:[(0,r.jsx)("span",{className:"app-icon",children:"\ud83d\udcf1"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("strong",{children:"Google Authenticator"}),(0,r.jsx)("p",{children:"Free, simple, and reliable"})]})]}),(0,r.jsxs)("div",{className:"app-option",children:[(0,r.jsx)("span",{className:"app-icon",children:"\ud83d\udd10"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("strong",{children:"Authy"}),(0,r.jsx)("p",{children:"Cross-device sync and backup"})]})]}),(0,r.jsxs)("div",{className:"app-option",children:[(0,r.jsx)("span",{className:"app-icon",children:"\ud83d\udee1\ufe0f"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("strong",{children:"Microsoft Authenticator"}),(0,r.jsx)("p",{children:"Integration with Microsoft services"})]})]})]}),(0,r.jsx)("button",{onClick:()=>i(2),className:"next-button",disabled:v,children:"I have an authenticator app"})]}),2===s&&(0,r.jsxs)("div",{className:"setup-step",children:[(0,r.jsxs)("div",{className:"step-indicator",children:[(0,r.jsx)("span",{className:"step completed",children:"\u2713"}),(0,r.jsx)("span",{className:"step active",children:"2"}),(0,r.jsx)("span",{className:"step",children:"3"})]}),(0,r.jsx)("h3",{children:"Step 2: Scan QR Code"}),(0,r.jsx)("p",{children:"Scan this QR code with your authenticator app:"}),(0,r.jsxs)("div",{className:"qr-code-section",children:[o&&(0,r.jsx)("div",{className:"qr-code-container",children:(0,r.jsx)(L,{value:o,size:200})}),(0,r.jsxs)("div",{className:"manual-entry",children:[(0,r.jsx)("p",{children:"Can't scan? Enter this code manually:"}),(0,r.jsxs)("div",{className:"manual-key",children:[(0,r.jsx)("code",{children:u}),(0,r.jsx)("button",{onClick:()=>j(u),className:"copy-button",title:"Copy to clipboard",children:"\ud83d\udccb"})]})]})]}),(0,r.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),m.trim())try{y(!0),x("");const e=await M.A.api.verifyTwoFactorSetup(m.trim());if(!e.success)throw new Error(e.error||"Verification failed");g(e.backupCodes),i(3)}catch(t){console.error("2FA verification error:",t),x(t.message||"Verification failed. Please try again.")}finally{y(!1)}else x("Please enter the verification code")},className:"verification-form",children:[(0,r.jsx)("h4",{children:"Enter the 6-digit code from your app:"}),(0,r.jsx)("input",{type:"text",inputMode:"numeric",pattern:"[0-9]*",maxLength:"6",value:m,onChange:e=>{p(e.target.value),x("")},placeholder:"000000",className:"verification-input",disabled:v}),b&&(0,r.jsxs)("div",{className:"error-message",children:[(0,r.jsx)("span",{className:"error-icon",children:"\u26a0\ufe0f"}),b]}),(0,r.jsxs)("div",{className:"form-actions",children:[(0,r.jsx)("button",{type:"button",onClick:()=>i(1),className:"back-button",disabled:v,children:"Back"}),(0,r.jsx)("button",{type:"submit",className:"verify-button",disabled:v||6!==m.length,children:v?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{className:"loading-spinner small"}),"Verifying..."]}):"Verify & Enable"})]})]})]}),3===s&&(0,r.jsxs)("div",{className:"setup-step",children:[(0,r.jsxs)("div",{className:"step-indicator",children:[(0,r.jsx)("span",{className:"step completed",children:"\u2713"}),(0,r.jsx)("span",{className:"step completed",children:"\u2713"}),(0,r.jsx)("span",{className:"step active",children:"3"})]}),(0,r.jsxs)("div",{className:"success-message",children:[(0,r.jsx)("span",{className:"success-icon",children:"\ud83c\udf89"}),(0,r.jsx)("h3",{children:"2FA Successfully Enabled!"}),(0,r.jsx)("p",{children:"Your account is now protected with two-factor authentication."})]}),(0,r.jsxs)("div",{className:"backup-codes-section",children:[(0,r.jsx)("h4",{children:"Save Your Backup Codes"}),(0,r.jsx)("p",{children:"These codes can be used to access your account if you lose your phone:"}),(0,r.jsxs)("div",{className:"backup-codes-container",children:[(0,r.jsx)("div",{className:"backup-codes-grid",children:f.map((e,t)=>(0,r.jsx)("div",{className:"backup-code",children:(0,r.jsx)("code",{children:e})},t))}),(0,r.jsxs)("div",{className:"backup-codes-actions",children:[(0,r.jsx)("button",{onClick:()=>{const e="Quibish 2FA Backup Codes\n\nGenerated: ".concat((new Date).toLocaleDateString(),"\n\nBackup Codes:\n").concat(f.join("\n"),"\n\nImportant:\n- Each code can only be used once\n- Keep these codes in a safe place\n- Generate new codes if you lose these"),t=new Blob([e],{type:"text/plain"}),n=URL.createObjectURL(t),a=document.createElement("a");a.href=n,a.download="quibish-2fa-backup-codes.txt",document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(n)},className:"download-button",children:"\ud83d\udce5 Download Codes"}),(0,r.jsx)("button",{onClick:()=>j(f.join("\n")),className:"copy-button",children:"\ud83d\udccb Copy All"})]})]}),(0,r.jsxs)("div",{className:"warning-message",children:[(0,r.jsx)("span",{className:"warning-icon",children:"\u26a0\ufe0f"}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Important:"})," Save these backup codes in a secure location. Each code can only be used once."]})]})]}),(0,r.jsx)("button",{onClick:()=>{n(),t()},className:"complete-button",children:"Complete Setup"})]})]})})},O=()=>{const[e,t]=(0,a.useState)({enabled:!1,method:"totp",setupAt:null,lastUsed:null,unusedBackupCodes:0}),[n,s]=(0,a.useState)(!0),[i,o]=(0,a.useState)(""),[l,c]=(0,a.useState)(!1),[d,u]=(0,a.useState)(!1),[h,m]=(0,a.useState)(""),[p,f]=(0,a.useState)(""),[g,v]=(0,a.useState)(!1),[y,b]=(0,a.useState)(!1),[x,w]=(0,a.useState)([]),[j,N]=(0,a.useState)(!1);(0,a.useEffect)(()=>{S()},[]);const S=async()=>{try{s(!0),o("");const e=await M.A.api.getTwoFactorStatus();if(!e.success)throw new Error(e.error||"Failed to load 2FA status");t(e)}catch(e){console.error("Load 2FA status error:",e),o(e.message||"Failed to load 2FA status")}finally{s(!1)}};return n?(0,r.jsx)("div",{className:"two-factor-settings",children:(0,r.jsxs)("div",{className:"loading-state",children:[(0,r.jsx)("div",{className:"loading-spinner"}),(0,r.jsx)("p",{children:"Loading 2FA settings..."})]})}):(0,r.jsxs)("div",{className:"two-factor-settings",children:[(0,r.jsxs)("div",{className:"settings-header",children:[(0,r.jsx)("h3",{children:"Two-Factor Authentication"}),(0,r.jsx)("p",{children:"Add an extra layer of security to your account"})]}),i&&(0,r.jsxs)("div",{className:"error-message",children:[(0,r.jsx)("span",{className:"error-icon",children:"\u26a0\ufe0f"}),i]}),(0,r.jsx)("div",{className:"settings-content",children:e.enabled?(0,r.jsxs)("div",{className:"two-factor-enabled",children:[(0,r.jsxs)("div",{className:"status-card enabled",children:[(0,r.jsx)("div",{className:"status-icon",children:"\ud83d\udee1\ufe0f"}),(0,r.jsxs)("div",{className:"status-content",children:[(0,r.jsx)("h4",{children:"Two-Factor Authentication is On"}),(0,r.jsxs)("p",{children:["Your account is protected with ",e.method.toUpperCase(),"."]}),(0,r.jsxs)("div",{className:"status-details",children:[e.setupAt&&(0,r.jsxs)("p",{className:"detail",children:[(0,r.jsx)("strong",{children:"Enabled:"})," ",new Date(e.setupAt).toLocaleDateString()]}),e.lastUsed&&(0,r.jsxs)("p",{className:"detail",children:[(0,r.jsx)("strong",{children:"Last Used:"})," ",new Date(e.lastUsed).toLocaleDateString()]}),(0,r.jsxs)("p",{className:"detail",children:[(0,r.jsx)("strong",{children:"Backup Codes:"})," ",e.unusedBackupCodes," remaining"]})]})]})]}),(0,r.jsxs)("div",{className:"management-actions",children:[(0,r.jsxs)("div",{className:"action-group",children:[(0,r.jsx)("h4",{children:"Backup Codes"}),(0,r.jsx)("p",{children:"Generate new backup codes if you've lost your existing ones."}),(0,r.jsx)("button",{onClick:async()=>{try{N(!0),o("");const e=await M.A.api.generateBackupCodes();if(!e.success)throw new Error(e.error||"Failed to generate backup codes");w(e.backupCodes),b(!0),await S()}catch(e){console.error("Generate backup codes error:",e),o(e.message||"Failed to generate backup codes")}finally{N(!1)}},className:"secondary-button",disabled:j,children:j?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{className:"loading-spinner small"}),"Generating..."]}):"Generate New Backup Codes"})]}),(0,r.jsxs)("div",{className:"action-group",children:[(0,r.jsx)("h4",{children:"Disable 2FA"}),(0,r.jsx)("p",{children:"Remove two-factor authentication from your account."}),(0,r.jsx)("button",{onClick:()=>u(!0),className:"danger-button",children:"Disable 2FA"})]})]})]}):(0,r.jsxs)("div",{className:"two-factor-disabled",children:[(0,r.jsxs)("div",{className:"status-card",children:[(0,r.jsx)("div",{className:"status-icon",children:"\ud83d\udd13"}),(0,r.jsxs)("div",{className:"status-content",children:[(0,r.jsx)("h4",{children:"Two-Factor Authentication is Off"}),(0,r.jsx)("p",{children:"Protect your account by requiring a second form of authentication."})]}),(0,r.jsx)("button",{onClick:()=>c(!0),className:"enable-button",children:"Enable 2FA"})]}),(0,r.jsxs)("div",{className:"benefits-section",children:[(0,r.jsx)("h4",{children:"Benefits of 2FA:"}),(0,r.jsxs)("ul",{children:[(0,r.jsx)("li",{children:"\ud83d\udee1\ufe0f Enhanced account security"}),(0,r.jsx)("li",{children:"\ud83d\udd10 Protection against password breaches"}),(0,r.jsx)("li",{children:"\ud83d\udcf1 Works with popular authenticator apps"}),(0,r.jsx)("li",{children:"\ud83d\udd11 Backup codes for recovery"})]})]})]})}),l&&(0,r.jsx)(I,{onClose:()=>c(!1),onSetupComplete:async()=>{c(!1),await S()}}),d&&(0,r.jsx)("div",{className:"modal-overlay",children:(0,r.jsxs)("div",{className:"modal-container",children:[(0,r.jsxs)("div",{className:"modal-header",children:[(0,r.jsx)("h3",{children:"Disable Two-Factor Authentication"}),(0,r.jsx)("button",{onClick:()=>u(!1),className:"close-button",disabled:g,children:"\xd7"})]}),(0,r.jsxs)("div",{className:"modal-content",children:[(0,r.jsxs)("div",{className:"warning-message",children:[(0,r.jsx)("span",{className:"warning-icon",children:"\u26a0\ufe0f"}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Warning:"})," Disabling 2FA will make your account less secure. You'll only need your password to log in."]})]}),(0,r.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),h.trim())if(p.trim())try{v(!0),o("");const e=await M.A.api.disableTwoFactor(h,p);if(!e.success)throw new Error(e.error||"Failed to disable 2FA");u(!1),m(""),f(""),await S()}catch(t){console.error("Disable 2FA error:",t),o(t.message||"Failed to disable 2FA")}finally{v(!1)}else o("2FA code is required to disable 2FA");else o("Password is required to disable 2FA")},className:"disable-form",children:[(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{htmlFor:"disable-password",children:"Current Password"}),(0,r.jsx)("input",{id:"disable-password",type:"password",value:h,onChange:e=>{m(e.target.value),o("")},placeholder:"Enter your password",disabled:g,required:!0})]}),(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{htmlFor:"disable-code",children:"2FA Code"}),(0,r.jsx)("input",{id:"disable-code",type:"text",inputMode:"numeric",pattern:"[0-9]*",maxLength:"6",value:p,onChange:e=>{f(e.target.value),o("")},placeholder:"000000",disabled:g,required:!0})]}),(0,r.jsxs)("div",{className:"form-actions",children:[(0,r.jsx)("button",{type:"button",onClick:()=>u(!1),className:"cancel-button",disabled:g,children:"Cancel"}),(0,r.jsx)("button",{type:"submit",className:"danger-button",disabled:g||!h.trim()||!p.trim(),children:g?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{className:"loading-spinner small"}),"Disabling..."]}):"Disable 2FA"})]})]})]})]})}),y&&(0,r.jsx)("div",{className:"modal-overlay",children:(0,r.jsxs)("div",{className:"modal-container",children:[(0,r.jsxs)("div",{className:"modal-header",children:[(0,r.jsx)("h3",{children:"New Backup Codes Generated"}),(0,r.jsx)("button",{onClick:()=>b(!1),className:"close-button",children:"\xd7"})]}),(0,r.jsxs)("div",{className:"modal-content",children:[(0,r.jsx)("p",{children:"Save these backup codes in a secure location. Each code can only be used once."}),(0,r.jsxs)("div",{className:"backup-codes-container",children:[(0,r.jsx)("div",{className:"backup-codes-grid",children:x.map((e,t)=>(0,r.jsx)("div",{className:"backup-code",children:(0,r.jsx)("code",{children:e})},t))}),(0,r.jsxs)("div",{className:"backup-codes-actions",children:[(0,r.jsx)("button",{onClick:()=>{const e="Quibish 2FA Backup Codes\n\nGenerated: ".concat((new Date).toLocaleDateString(),"\n\nBackup Codes:\n").concat(x.join("\n"),"\n\nImportant:\n- Each code can only be used once\n- Keep these codes in a safe place\n- Generate new codes if you lose these"),t=new Blob([e],{type:"text/plain"}),n=URL.createObjectURL(t),a=document.createElement("a");a.href=n,a.download="quibish-2fa-backup-codes.txt",document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(n)},className:"download-button",children:"\ud83d\udce5 Download"}),(0,r.jsx)("button",{onClick:()=>{navigator.clipboard.writeText(x.join("\n")).then(()=>{})},className:"copy-button",children:"\ud83d\udccb Copy All"})]})]}),(0,r.jsxs)("div",{className:"warning-message",children:[(0,r.jsx)("span",{className:"warning-icon",children:"\u26a0\ufe0f"}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Important:"})," Your old backup codes are no longer valid."]})]}),(0,r.jsx)("button",{onClick:()=>b(!1),className:"primary-button",children:"I've Saved These Codes"})]})]})})]})},_=e=>{var t;let{user:n,onSave:i,darkMode:o}=e;const l=[{id:"blue",name:"Ocean Blue",bg:"#e3f2fd",border:"#2196f3",accent:"#1976d2"},{id:"purple",name:"Royal Purple",bg:"#f3e5f5",border:"#9c27b0",accent:"#7b1fa2"},{id:"green",name:"Forest Green",bg:"#e8f5e8",border:"#4caf50",accent:"#388e3c"},{id:"orange",name:"Sunset Orange",bg:"#fff3e0",border:"#ff9800",accent:"#f57c00"},{id:"pink",name:"Rose Pink",bg:"#fce4ec",border:"#e91e63",accent:"#c2185b"},{id:"teal",name:"Mystic Teal",bg:"#e0f2f1",border:"#009688",accent:"#00695c"},{id:"lightgreen",name:"Spring Green",bg:"#f1f8e9",border:"#8bc34a",accent:"#689f38"},{id:"indigo",name:"Deep Indigo",bg:"#e8eaf6",border:"#3f51b5",accent:"#303f9f"},{id:"amber",name:"Golden Amber",bg:"#fff8e1",border:"#ffc107",accent:"#ffa000"},{id:"peach",name:"Warm Peach",bg:"#ffeaa7",border:"#fdcb6e",accent:"#e17055"},{id:"coral",name:"Coral Reef",bg:"#fab1a0",border:"#e17055",accent:"#d63031"},{id:"lavender",name:"Lavender Dream",bg:"#a29bfe",border:"#6c5ce7",accent:"#5f3dc4"}],[c,d]=(0,a.useState)((null===n||void 0===n||null===(t=n.preferences)||void 0===t?void 0:t.messageColor)||"auto"),[u,h]=(0,a.useState)(!1),[m,p]=(0,a.useState)(!1),f=(()=>{if(null===n||void 0===n||!n.id)return l[0];let e=0;for(let a=0;a<n.id.toString().length;a++){e=(e<<5)-e+n.id.toString().charCodeAt(a),e&=e}const t=Math.abs(e)%l.length;return l[t]})(),g=e=>{d(e)};return(0,r.jsxs)("div",{className:"color-preferences ".concat(o?"dark":""),children:[(0,r.jsxs)("div",{className:"preferences-header",children:[(0,r.jsx)("h3",{children:"Message Card Colors"}),(0,r.jsx)("p",{children:"Customize how your messages appear to other users in conversations"})]}),(0,r.jsxs)("div",{className:"current-preview",children:[(0,r.jsx)("h4",{children:"Current Selection Preview"}),(e=>{const t="auto"===e?f:l.find(t=>t.id===e);return t?(0,r.jsxs)("div",{className:"color-preview-card",style:{backgroundColor:t.bg,borderLeftColor:t.border,borderLeftWidth:"4px",borderLeftStyle:"solid"},children:[(0,r.jsxs)("div",{className:"preview-header",children:[(0,r.jsx)("span",{className:"preview-username",style:{color:t.accent},children:(null===n||void 0===n?void 0:n.name)||"Your Name"}),(0,r.jsx)("span",{className:"preview-time",children:"2:34 PM"})]}),(0,r.jsx)("div",{className:"preview-message",children:"This is how your messages will look with this color theme! \ud83c\udfa8"})]}):null})(c)]}),(0,r.jsxs)("div",{className:"color-options",children:[(0,r.jsx)("h4",{children:"Choose Your Color Theme"}),(0,r.jsxs)("div",{className:"color-grid",children:[(0,r.jsxs)("div",{className:"color-option ".concat("auto"===c?"selected":""),onClick:()=>g("auto"),children:[(0,r.jsx)("div",{className:"color-swatch auto-swatch",style:{background:"linear-gradient(45deg, ".concat(f.bg,", ").concat(f.border,")")},children:(0,r.jsx)("span",{className:"auto-label",children:"AUTO"})}),(0,r.jsx)("span",{className:"color-name",children:"Auto-Assigned"}),(0,r.jsx)("span",{className:"color-description",children:"Based on your unique ID"})]}),l.map(e=>(0,r.jsxs)("div",{className:"color-option ".concat(c===e.id?"selected":""),onClick:()=>g(e.id),children:[(0,r.jsx)("div",{className:"color-swatch",style:{backgroundColor:e.bg,border:"3px solid ".concat(e.border)},children:(0,r.jsx)("div",{className:"swatch-accent",style:{backgroundColor:e.accent}})}),(0,r.jsx)("span",{className:"color-name",children:e.name})]},e.id))]})]}),(0,r.jsxs)("div",{className:"preferences-actions",children:[(0,r.jsx)("button",{className:"reset-button",onClick:()=>{d("auto"),localStorage.removeItem("userColorPreference")},disabled:m,children:"Reset to Auto"}),(0,r.jsx)("button",{className:"save-button",onClick:async()=>{p(!0);try{const e=(0,s.A)((0,s.A)({},n),{},{preferences:(0,s.A)((0,s.A)({},n.preferences),{},{messageColor:c})});localStorage.setItem("userColorPreference",c),window.dispatchEvent(new CustomEvent("userColorChanged",{detail:{colorTheme:c}})),i&&await i(e),alert("Color preference saved successfully!")}catch(e){console.error("Error saving color preference:",e),alert("Failed to save color preference. Please try again.")}finally{p(!1)}},disabled:m,children:m?"Saving...":"Save Changes"})]}),(0,r.jsxs)("div",{className:"preferences-info",children:[(0,r.jsx)("h4",{children:"About Message Colors"}),(0,r.jsxs)("ul",{children:[(0,r.jsxs)("li",{children:["\ud83c\udfa8 ",(0,r.jsx)("strong",{children:"Auto-Assigned:"})," A unique color is automatically chosen based on your user ID"]}),(0,r.jsxs)("li",{children:["\ud83c\udf08 ",(0,r.jsx)("strong",{children:"Custom Colors:"})," Choose your preferred color theme from our curated palette"]}),(0,r.jsxs)("li",{children:["\ud83d\udc65 ",(0,r.jsx)("strong",{children:"Consistency:"})," Your chosen color will appear consistently across all conversations"]}),(0,r.jsxs)("li",{children:["\ud83d\udd04 ",(0,r.jsx)("strong",{children:"Live Updates:"})," Changes are applied immediately to new messages"]})]})]})]})},D=e=>{let{user:t,darkMode:n,onUnsavedChanges:i}=e;const[o,l]=(0,a.useState)({messageNotifications:!0,messageSounds:!0,messagePreview:!0,emailDigest:!0,emailNewMessages:!1,emailSecurityAlerts:!0,pushEnabled:!0,pushMessages:!0,pushMentions:!0,pushGroupActivity:!1,dndEnabled:!1,dndStart:"22:00",dndEnd:"08:00",dndDays:["saturday","sunday"],vibration:!0,ledFlash:!1,notificationGrouping:!0,customTones:!1}),[c,d]=(0,a.useState)(!1);(0,a.useEffect)(()=>{null===i||void 0===i||i(c)},[c,i]);const u=(e,t)=>{l(n=>(0,s.A)((0,s.A)({},n),{},{[e]:t})),d(!0)},h=e=>{let{checked:t,onChange:n,disabled:a=!1}=e;return(0,r.jsxs)("label",{className:"toggle-switch ".concat(a?"disabled":""),children:[(0,r.jsx)("input",{type:"checkbox",checked:t,onChange:e=>n(e.target.checked),disabled:a}),(0,r.jsx)("span",{className:"toggle-slider"})]})};return(0,r.jsxs)("div",{className:"notification-settings ".concat(n?"dark":""),children:[(0,r.jsxs)("div",{className:"settings-group",children:[(0,r.jsxs)("h3",{className:"group-title",children:[(0,r.jsx)("span",{className:"group-icon",children:"\ud83d\udcac"}),"Message Notifications"]}),(0,r.jsxs)("div",{className:"setting-item",children:[(0,r.jsxs)("div",{className:"setting-info",children:[(0,r.jsx)("label",{className:"setting-label",children:"Enable Message Notifications"}),(0,r.jsx)("p",{className:"setting-description",children:"Receive notifications for new messages"})]}),(0,r.jsx)(h,{checked:o.messageNotifications,onChange:e=>u("messageNotifications",e)})]}),(0,r.jsxs)("div",{className:"setting-item",children:[(0,r.jsxs)("div",{className:"setting-info",children:[(0,r.jsx)("label",{className:"setting-label",children:"Notification Sounds"}),(0,r.jsx)("p",{className:"setting-description",children:"Play sound when receiving messages"})]}),(0,r.jsx)(h,{checked:o.messageSounds,onChange:e=>u("messageSounds",e),disabled:!o.messageNotifications})]}),(0,r.jsxs)("div",{className:"setting-item",children:[(0,r.jsxs)("div",{className:"setting-info",children:[(0,r.jsx)("label",{className:"setting-label",children:"Message Preview"}),(0,r.jsx)("p",{className:"setting-description",children:"Show message content in notifications"})]}),(0,r.jsx)(h,{checked:o.messagePreview,onChange:e=>u("messagePreview",e),disabled:!o.messageNotifications})]})]}),(0,r.jsxs)("div",{className:"settings-group",children:[(0,r.jsxs)("h3",{className:"group-title",children:[(0,r.jsx)("span",{className:"group-icon",children:"\ud83d\udce7"}),"Email Notifications"]}),(0,r.jsxs)("div",{className:"setting-item",children:[(0,r.jsxs)("div",{className:"setting-info",children:[(0,r.jsx)("label",{className:"setting-label",children:"Daily Email Digest"}),(0,r.jsx)("p",{className:"setting-description",children:"Daily summary of your activity"})]}),(0,r.jsx)(h,{checked:o.emailDigest,onChange:e=>u("emailDigest",e)})]}),(0,r.jsxs)("div",{className:"setting-item",children:[(0,r.jsxs)("div",{className:"setting-info",children:[(0,r.jsx)("label",{className:"setting-label",children:"New Message Emails"}),(0,r.jsx)("p",{className:"setting-description",children:"Email notifications for new messages"})]}),(0,r.jsx)(h,{checked:o.emailNewMessages,onChange:e=>u("emailNewMessages",e)})]}),(0,r.jsxs)("div",{className:"setting-item",children:[(0,r.jsxs)("div",{className:"setting-info",children:[(0,r.jsx)("label",{className:"setting-label",children:"Security Alerts"}),(0,r.jsx)("p",{className:"setting-description",children:"Important security notifications"})]}),(0,r.jsx)(h,{checked:o.emailSecurityAlerts,onChange:e=>u("emailSecurityAlerts",e)})]})]}),(0,r.jsxs)("div",{className:"settings-group",children:[(0,r.jsxs)("h3",{className:"group-title",children:[(0,r.jsx)("span",{className:"group-icon",children:"\ud83d\udcf1"}),"Push Notifications"]}),(0,r.jsxs)("div",{className:"setting-item",children:[(0,r.jsxs)("div",{className:"setting-info",children:[(0,r.jsx)("label",{className:"setting-label",children:"Enable Push Notifications"}),(0,r.jsx)("p",{className:"setting-description",children:"Receive push notifications on your device"})]}),(0,r.jsx)(h,{checked:o.pushEnabled,onChange:e=>u("pushEnabled",e)})]}),(0,r.jsxs)("div",{className:"setting-item",children:[(0,r.jsxs)("div",{className:"setting-info",children:[(0,r.jsx)("label",{className:"setting-label",children:"Message Notifications"}),(0,r.jsx)("p",{className:"setting-description",children:"Push notifications for new messages"})]}),(0,r.jsx)(h,{checked:o.pushMessages,onChange:e=>u("pushMessages",e),disabled:!o.pushEnabled})]}),(0,r.jsxs)("div",{className:"setting-item",children:[(0,r.jsxs)("div",{className:"setting-info",children:[(0,r.jsx)("label",{className:"setting-label",children:"Mentions & Replies"}),(0,r.jsx)("p",{className:"setting-description",children:"When someone mentions or replies to you"})]}),(0,r.jsx)(h,{checked:o.pushMentions,onChange:e=>u("pushMentions",e),disabled:!o.pushEnabled})]}),(0,r.jsxs)("div",{className:"setting-item",children:[(0,r.jsxs)("div",{className:"setting-info",children:[(0,r.jsx)("label",{className:"setting-label",children:"Group Activity"}),(0,r.jsx)("p",{className:"setting-description",children:"Activity in your groups and channels"})]}),(0,r.jsx)(h,{checked:o.pushGroupActivity,onChange:e=>u("pushGroupActivity",e),disabled:!o.pushEnabled})]})]}),(0,r.jsxs)("div",{className:"settings-group",children:[(0,r.jsxs)("h3",{className:"group-title",children:[(0,r.jsx)("span",{className:"group-icon",children:"\ud83c\udf19"}),"Do Not Disturb"]}),(0,r.jsxs)("div",{className:"setting-item",children:[(0,r.jsxs)("div",{className:"setting-info",children:[(0,r.jsx)("label",{className:"setting-label",children:"Enable Do Not Disturb"}),(0,r.jsx)("p",{className:"setting-description",children:"Quiet hours with no notifications"})]}),(0,r.jsx)(h,{checked:o.dndEnabled,onChange:e=>u("dndEnabled",e)})]}),o.dndEnabled&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"setting-item",children:[(0,r.jsxs)("div",{className:"setting-info",children:[(0,r.jsx)("label",{className:"setting-label",children:"Time Range"}),(0,r.jsx)("p",{className:"setting-description",children:"When do not disturb should be active"})]}),(0,r.jsxs)("div",{className:"time-range",children:[(0,r.jsx)("input",{type:"time",value:o.dndStart,onChange:e=>u("dndStart",e.target.value),className:"time-input"}),(0,r.jsx)("span",{className:"time-separator",children:"to"}),(0,r.jsx)("input",{type:"time",value:o.dndEnd,onChange:e=>u("dndEnd",e.target.value),className:"time-input"})]})]}),(0,r.jsxs)("div",{className:"setting-item",children:[(0,r.jsxs)("div",{className:"setting-info",children:[(0,r.jsx)("label",{className:"setting-label",children:"Active Days"}),(0,r.jsx)("p",{className:"setting-description",children:"Days when do not disturb is active"})]}),(0,r.jsx)("div",{className:"days-selector",children:[{id:"monday",label:"Mon"},{id:"tuesday",label:"Tue"},{id:"wednesday",label:"Wed"},{id:"thursday",label:"Thu"},{id:"friday",label:"Fri"},{id:"saturday",label:"Sat"},{id:"sunday",label:"Sun"}].map(e=>(0,r.jsx)("button",{className:"day-btn ".concat(o.dndDays.includes(e.id)?"active":""),onClick:()=>{return t="dndDays",n=e.id,l(e=>(0,s.A)((0,s.A)({},e),{},{[t]:e[t].includes(n)?e[t].filter(e=>e!==n):[...e[t],n]})),void d(!0);var t,n},children:e.label},e.id))})]})]})]}),(0,r.jsxs)("div",{className:"settings-group",children:[(0,r.jsxs)("h3",{className:"group-title",children:[(0,r.jsx)("span",{className:"group-icon",children:"\u2699\ufe0f"}),"Advanced"]}),(0,r.jsxs)("div",{className:"setting-item",children:[(0,r.jsxs)("div",{className:"setting-info",children:[(0,r.jsx)("label",{className:"setting-label",children:"Vibration"}),(0,r.jsx)("p",{className:"setting-description",children:"Vibrate on notifications"})]}),(0,r.jsx)(h,{checked:o.vibration,onChange:e=>u("vibration",e)})]}),(0,r.jsxs)("div",{className:"setting-item",children:[(0,r.jsxs)("div",{className:"setting-info",children:[(0,r.jsx)("label",{className:"setting-label",children:"LED Flash"}),(0,r.jsx)("p",{className:"setting-description",children:"Flash LED light for notifications"})]}),(0,r.jsx)(h,{checked:o.ledFlash,onChange:e=>u("ledFlash",e)})]}),(0,r.jsxs)("div",{className:"setting-item",children:[(0,r.jsxs)("div",{className:"setting-info",children:[(0,r.jsx)("label",{className:"setting-label",children:"Group Notifications"}),(0,r.jsx)("p",{className:"setting-description",children:"Bundle similar notifications together"})]}),(0,r.jsx)(h,{checked:o.notificationGrouping,onChange:e=>u("notificationGrouping",e)})]})]}),(0,r.jsxs)("div",{className:"settings-actions",children:[(0,r.jsx)("button",{className:"settings-btn secondary",onClick:()=>{window.confirm("Reset all notification settings to default?")&&(l({messageNotifications:!0,messageSounds:!0,messagePreview:!0,emailDigest:!0,emailNewMessages:!1,emailSecurityAlerts:!0,pushEnabled:!0,pushMessages:!0,pushMentions:!0,pushGroupActivity:!1,dndEnabled:!1,dndStart:"22:00",dndEnd:"08:00",dndDays:["saturday","sunday"],vibration:!0,ledFlash:!1,notificationGrouping:!0,customTones:!1}),d(!0))},children:"Reset to Default"}),(0,r.jsx)("button",{className:"settings-btn primary ".concat(c?"has-changes":""),onClick:()=>{console.log("Saving notification settings:",o),d(!1);const e=new CustomEvent("showToast",{detail:{message:"Notification settings saved!",type:"success"}});window.dispatchEvent(e)},disabled:!c,children:c?"Save Changes":"All Saved"})]})]})},R=e=>{let{isOpen:t,onClose:n,initialSection:s="profile",user:i,onSaveProfile:o,darkMode:c}=e;const[u,h]=(0,a.useState)(s),[m,p]=(0,a.useState)(!1),[f,g]=(0,a.useState)(""),[v,y]=(0,a.useState)(!1),[b,x]=(0,a.useState)(-1),[w,j]=(0,a.useState)(!1),[N,S]=(0,a.useState)(""),C=[{id:"profile",title:"Profile",icon:"\ud83d\udc64",description:"Manage your profile information and avatar",keywords:["profile","avatar","personal","info","photo","name","email"],badge:null},{id:"preferences",title:"Preferences",icon:"\ud83c\udfa8",description:"Customize your experience and appearance",keywords:["preferences","appearance","theme","colors","customization","ui"],badge:"NEW"},{id:"notifications",title:"Notifications",icon:"\ud83d\udd14",description:"Control how you receive notifications",keywords:["notifications","alerts","sounds","email","push","messages"],badge:null},{id:"privacy",title:"Privacy & Security",icon:"\ud83d\udd12",description:"Security settings and two-factor authentication",keywords:["privacy","security","2fa","password","authentication","protection"],badge:null},{id:"analytics",title:"Analytics",icon:"\ud83d\udcca",description:"View your usage statistics and insights",keywords:["analytics","statistics","usage","insights","data","metrics"],badge:null}],k=C.filter(e=>{const t=f.toLowerCase();return e.title.toLowerCase().includes(t)||e.description.toLowerCase().includes(t)||e.keywords.some(e=>e.includes(t))}),E=()=>{if(!f)return[];return C.flatMap(e=>e.keywords.map(t=>({keyword:t,section:e.title,sectionId:e.id}))).filter(e=>e.keyword.includes(f.toLowerCase())).slice(0,5)};(0,a.useEffect)(()=>{h(s)},[s]);const A=(0,a.useCallback)(e=>{var t;e!==u&&(p(!0),j(!0),S("Loading ".concat((null===(t=C.find(t=>t.id===e))||void 0===t?void 0:t.title)||"section","...")),setTimeout(()=>{h(e),p(!1),j(!1),S("")},150))},[u,C]);(0,a.useEffect)(()=>{if(!t)return;const e=document.body.style.overflow;document.body.style.overflow="hidden";const a=e=>{switch(e.key){case"Escape":if(v){if(!window.confirm("You have unsaved changes. Are you sure you want to close?"))return}y(!1),n();break;case"ArrowDown":e.target.closest(".settings-navigation")&&(e.preventDefault(),x(e=>e<k.length-1?e+1:0));break;case"ArrowUp":e.target.closest(".settings-navigation")&&(e.preventDefault(),x(e=>e>0?e-1:k.length-1));break;case"Enter":b>=0&&k[b]&&(e.preventDefault(),A(k[b].id),x(-1));break;case"/":var t;if(e.ctrlKey||e.metaKey)e.preventDefault(),null===(t=document.querySelector(".search-input"))||void 0===t||t.focus()}};return window.addEventListener("keydown",a),()=>{document.body.style.overflow=e,window.removeEventListener("keydown",a)}},[t,v,n,b,k,A]);const P=(0,a.useCallback)(e=>{if(!e||e.target===e.currentTarget){if(v){if(!window.confirm("You have unsaved changes. Are you sure you want to close?"))return}y(!1),n()}},[v,n]),T=(0,a.useCallback)(()=>{if(v){if(!window.confirm("You have unsaved changes. Are you sure you want to close?"))return}y(!1),n()},[v,n]),L=[{title:"Export Data",icon:"\ud83d\udcbe",action:()=>{j(!0),S("Preparing data export..."),setTimeout(()=>{const e={user:i,settings:"mock data"},t=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),n=URL.createObjectURL(t),a=document.createElement("a");a.href=n,a.download="quibish-data-".concat((new Date).toISOString().split("T")[0],".json"),a.click(),URL.revokeObjectURL(n),j(!1),S("")},1500)},description:"Download your account data"},{title:"Reset Settings",icon:"\ud83d\udd04",action:()=>{window.confirm("Are you sure you want to reset all settings to default? This cannot be undone.")&&(j(!0),S("Resetting settings..."),setTimeout(()=>{localStorage.removeItem("quibish-settings"),j(!1),S(""),window.location.reload()},1e3))},description:"Reset all settings to default"},{title:"Import Settings",icon:"\ud83d\udce5",action:()=>{const e=document.createElement("input");e.type="file",e.accept=".json",e.onchange=e=>{const t=e.target.files[0];if(t){j(!0),S("Importing settings...");const e=new FileReader;e.onload=e=>{try{const t=JSON.parse(e.target.result);localStorage.setItem("quibish-settings",JSON.stringify(t)),setTimeout(()=>{j(!1),S(""),alert("Settings imported successfully!")},1e3)}catch(t){j(!1),S(""),alert("Invalid settings file format.")}},e.readAsText(t)}},e.click()},description:"Import settings from file"},{title:"Contact Support",icon:"\ud83d\udcac",action:()=>{window.open("mailto:support@quibish.com?subject=Settings Support Request","_blank")},description:"Get help with your account"}];if(!t)return null;const M=C.find(e=>e.id===u)||C[0];return(0,r.jsx)("div",{className:"settings-modal-overlay",onClick:P,children:(0,r.jsxs)("div",{className:"settings-modal ".concat(c?"dark":""),onClick:e=>{e.stopPropagation()},children:[w&&(0,r.jsxs)("div",{className:"loading-overlay",children:[(0,r.jsx)("div",{className:"loading-spinner"}),(0,r.jsx)("div",{className:"loading-message",children:N})]}),(0,r.jsxs)("div",{className:"settings-modal-header",children:[(0,r.jsxs)("div",{className:"header-content",children:[(0,r.jsxs)("div",{className:"header-main",children:[(0,r.jsxs)("h2",{className:"settings-modal-title",children:[(0,r.jsx)("span",{className:"title-icon",children:"\u2699\ufe0f"}),"Settings"]}),(0,r.jsx)("p",{className:"settings-subtitle",children:"Customize your Quibish experience"})]}),(0,r.jsxs)("div",{className:"header-actions",children:[v&&(0,r.jsxs)("div",{className:"unsaved-indicator",title:"You have unsaved changes",children:[(0,r.jsx)("div",{className:"indicator-dot"}),(0,r.jsx)("span",{children:"Unsaved"})]}),(0,r.jsx)("button",{className:"settings-modal-close",onClick:T,"aria-label":"Close settings",children:(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,r.jsx)("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),(0,r.jsx)("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]})]}),(0,r.jsxs)("div",{className:"settings-search",children:[(0,r.jsxs)("div",{className:"search-input-container",children:[(0,r.jsxs)("svg",{className:"search-icon",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,r.jsx)("circle",{cx:"11",cy:"11",r:"8"}),(0,r.jsx)("path",{d:"m21 21-4.35-4.35"})]}),(0,r.jsx)("input",{type:"text",placeholder:"Search settings... (Ctrl+/ to focus)",value:f,onChange:e=>{g(e.target.value),x(-1)},className:"search-input",autoComplete:"off"}),f&&(0,r.jsx)("button",{className:"search-clear",onClick:()=>{g(""),x(-1)},"aria-label":"Clear search",children:"\xd7"})]}),f&&E().length>0&&(0,r.jsxs)("div",{className:"search-suggestions",children:[(0,r.jsx)("div",{className:"suggestions-title",children:"Suggestions:"}),(0,r.jsx)("div",{className:"suggestions-list",children:E().map((e,t)=>(0,r.jsxs)("button",{className:"suggestion-item",onClick:()=>{A(e.sectionId),g(""),x(-1)},children:[(0,r.jsx)("span",{className:"suggestion-keyword",children:e.keyword}),(0,r.jsxs)("span",{className:"suggestion-section",children:["in ",e.section]})]},"".concat(e.sectionId,"-").concat(e.keyword)))})]})]})]}),(0,r.jsxs)("div",{className:"settings-modal-content",children:[(0,r.jsxs)("div",{className:"settings-navigation",children:[f&&(0,r.jsxs)("div",{className:"search-results-info",children:[(0,r.jsxs)("small",{children:[k.length,' results for "',f,'"']}),0===k.length&&(0,r.jsx)("p",{className:"no-results",children:"No settings found. Try a different search term."})]}),k.length>0&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"navigation-section",children:[(0,r.jsx)("h3",{className:"section-title",children:"User Settings"}),(0,r.jsx)("ul",{className:"navigation-items",children:k.filter(e=>["profile","preferences"].includes(e.id)).map((e,t)=>(0,r.jsx)("li",{className:"navigation-item ".concat(u===e.id?"active":""," ").concat(b===t?"focused":""),children:(0,r.jsxs)("button",{onClick:()=>A(e.id),"aria-label":"Go to ".concat(e.title," settings"),onFocus:()=>x(t),onBlur:()=>x(-1),children:[(0,r.jsx)("span",{className:"nav-icon",role:"img","aria-label":e.title,children:e.icon}),(0,r.jsxs)("div",{className:"nav-content",children:[(0,r.jsx)("div",{className:"nav-title",children:e.title}),(0,r.jsx)("p",{className:"nav-description",children:e.description})]}),e.badge&&(0,r.jsx)("span",{className:"nav-badge",children:e.badge})]})},e.id))})]}),(0,r.jsxs)("div",{className:"navigation-section",children:[(0,r.jsx)("h3",{className:"section-title",children:"System & Security"}),(0,r.jsx)("ul",{className:"navigation-items",children:k.filter(e=>["notifications","privacy","analytics"].includes(e.id)).map((e,t)=>{const n=t+k.filter(e=>["profile","preferences"].includes(e.id)).length;return(0,r.jsx)("li",{className:"navigation-item ".concat(u===e.id?"active":""," ").concat(b===n?"focused":""),children:(0,r.jsxs)("button",{onClick:()=>A(e.id),"aria-label":"Go to ".concat(e.title," settings"),onFocus:()=>x(n),onBlur:()=>x(-1),children:[(0,r.jsx)("span",{className:"nav-icon",role:"img","aria-label":e.title,children:e.icon}),(0,r.jsxs)("div",{className:"nav-content",children:[(0,r.jsx)("div",{className:"nav-title",children:e.title}),(0,r.jsx)("p",{className:"nav-description",children:e.description})]}),e.badge&&(0,r.jsx)("span",{className:"nav-badge",children:e.badge})]})},e.id)})})]})]}),(0,r.jsxs)("div",{className:"quick-actions",children:[(0,r.jsx)("h4",{children:"Quick Actions"}),(0,r.jsx)("div",{className:"quick-action-buttons",children:L.map((e,t)=>(0,r.jsx)("button",{className:"quick-action-button",onClick:e.action,title:e.title,"aria-label":e.description,"data-tooltip":e.title,children:(0,r.jsx)("span",{className:"action-icon",role:"img",children:e.icon})},t))}),(0,r.jsx)("div",{className:"current-section-info",children:(0,r.jsxs)("div",{className:"breadcrumb",children:[(0,r.jsx)("span",{className:"breadcrumb-home",children:"Settings"}),(0,r.jsx)("span",{className:"breadcrumb-separator",children:"\u203a"}),(0,r.jsx)("span",{className:"breadcrumb-current",children:M.title})]})})]})]}),(0,r.jsx)("div",{className:"settings-content",children:(0,r.jsx)("div",{className:"content-wrapper",children:(()=>{const e=(()=>{switch(u){case"profile":return(0,r.jsxs)("div",{className:"enhanced-profile-container",children:[(0,r.jsxs)("div",{className:"section-header",children:[(0,r.jsxs)("h2",{children:[(0,r.jsx)("span",{className:"section-icon",children:M.icon}),M.title]}),(0,r.jsx)("p",{children:M.description})]}),(0,r.jsx)(l,{user:i,onUpdate:o,onClose:n,darkMode:c,onUnsavedChanges:y})]});case"analytics":return(0,r.jsxs)("div",{className:"settings-section",children:[(0,r.jsxs)("div",{className:"section-header",children:[(0,r.jsxs)("h2",{children:[(0,r.jsx)("span",{className:"section-icon",children:M.icon}),M.title]}),(0,r.jsx)("p",{children:M.description})]}),(0,r.jsx)(d,{userId:null===i||void 0===i?void 0:i.id,darkMode:c})]});case"preferences":return(0,r.jsxs)("div",{className:"settings-section",children:[(0,r.jsxs)("div",{className:"section-header",children:[(0,r.jsxs)("h2",{children:[(0,r.jsx)("span",{className:"section-icon",children:M.icon}),M.title]}),(0,r.jsx)("p",{children:M.description}),M.badge&&(0,r.jsx)("span",{className:"section-badge",children:M.badge})]}),(0,r.jsx)(_,{user:i,onSave:o,darkMode:c,onUnsavedChanges:y})]});case"notifications":return(0,r.jsxs)("div",{className:"settings-section",children:[(0,r.jsxs)("div",{className:"section-header",children:[(0,r.jsxs)("h2",{children:[(0,r.jsx)("span",{className:"section-icon",children:M.icon}),M.title]}),(0,r.jsx)("p",{children:M.description})]}),(0,r.jsx)(D,{user:i,darkMode:c,onUnsavedChanges:y})]});case"privacy":return(0,r.jsxs)("div",{className:"settings-section",children:[(0,r.jsxs)("div",{className:"section-header",children:[(0,r.jsxs)("h2",{children:[(0,r.jsx)("span",{className:"section-icon",children:M.icon}),M.title]}),(0,r.jsx)("p",{children:M.description})]}),(0,r.jsx)(O,{onUnsavedChanges:y})]});default:return(0,r.jsx)("div",{className:"settings-section",children:(0,r.jsxs)("div",{className:"section-header",children:[(0,r.jsxs)("h2",{children:[(0,r.jsx)("span",{className:"section-icon",children:"\u2699\ufe0f"}),"Settings"]}),(0,r.jsx)("p",{children:"Select a section from the navigation above."})]})})}})();return(0,r.jsx)("div",{className:"section-content ".concat(m?"animating":""),children:e})})()})})]}),(0,r.jsxs)("div",{className:"settings-modal-footer",children:[(0,r.jsxs)("div",{className:"footer-info",children:[(0,r.jsx)("span",{className:"app-version",children:"Quibish v2.0.0"}),(0,r.jsxs)("span",{children:["Logged in as ",(null===i||void 0===i?void 0:i.name)||"User"]})]}),(0,r.jsxs)("div",{className:"footer-actions",children:[(0,r.jsx)("button",{className:"footer-button",onClick:()=>g(""),children:"Reset Search"}),(0,r.jsx)("button",{className:"footer-button primary",onClick:P,children:"Done"})]})]})]})})}},61:(e,t,n)=>{n.d(t,{Mx:()=>i,TF:()=>l,Tq:()=>r,gI:()=>s});const a="quibish_user_activity_log",s={LOGIN:"login",LOGOUT:"logout",MESSAGE_SENT:"message_sent",MESSAGE_RECEIVED:"message_received",PROFILE_UPDATE:"profile_update",CONVERSATION_CREATED:"conversation_created",CONVERSATION_DELETED:"conversation_deleted",STATUS_CHANGE:"status_change"},i=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{const n=o(),s={timestamp:Date.now(),type:e,data:t};return n.push(s),n.length>100&&n.shift(),localStorage.setItem(a,JSON.stringify(n)),!0}catch(n){return console.error("Failed to log activity:",n),!1}},o=()=>{try{const e=localStorage.getItem(a);return e?JSON.parse(e):[]}catch(e){return console.error("Failed to retrieve activity log:",e),[]}},r=()=>{try{return localStorage.removeItem(a),!0}catch(e){return console.error("Failed to clear activity log:",e),!1}},l=()=>{const e=o(),t=Date.now(),n=864e5,a=7*n,i=e.filter(e=>t-e.timestamp<n),r=e.filter(e=>t-e.timestamp<a),l=(e,t)=>e.filter(e=>e.type===t).length;return{totalActivities:e.length,today:{total:i.length,messagesSent:l(i,s.MESSAGE_SENT),messagesReceived:l(i,s.MESSAGE_RECEIVED),logins:l(i,s.LOGIN)},week:{total:r.length,messagesSent:l(r,s.MESSAGE_SENT),messagesReceived:l(r,s.MESSAGE_RECEIVED),logins:l(r,s.LOGIN)},lastActivity:e.length>0?e[e.length-1]:null}}},69:(e,t,n)=>{n.r(t),n.d(t,{default:()=>o});var a=n(950),s=n(414);const i=[{id:"user2",name:"Alice Johnson",email:"alice@example.com",avatar:"https://images.unsplash.com/photo-1494790108755-2616b612b47c?w=40&h=40&fit=crop&crop=face",status:"online"},{id:"user3",name:"Bob Smith",email:"bob@example.com",avatar:"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=40&h=40&fit=crop&crop=face",status:"away"},{id:"user4",name:"Carol White",email:"carol@example.com",avatar:"https://images.unsplash.com/photo-1438761681033-6461ffad8d80?w=40&h=40&fit=crop&crop=face",status:"offline"},{id:"user5",name:"David Brown",email:"david@example.com",avatar:"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=40&h=40&fit=crop&crop=face",status:"online"},{id:"user6",name:"Eva Green",email:"eva@example.com",avatar:"https://images.unsplash.com/photo-1517841905240-472988babdf9?w=40&h=40&fit=crop&crop=face",status:"busy"}],o=e=>{let{isOpen:t,onClose:o,onCreateChat:r,currentUser:l,darkMode:c=!1}=e;const[d,u]=(0,a.useState)(""),[h,m]=(0,a.useState)([]),[p,f]=(0,a.useState)([]),[g,v]=(0,a.useState)([]),[y,b]=(0,a.useState)(!1),[x,w]=(0,a.useState)(""),[j,N]=(0,a.useState)(!1),[S,C]=(0,a.useState)(null),k=(0,a.useRef)(null),E=(0,a.useCallback)(()=>{u(""),m([]),v([]),b(!1),w(""),C(null),N(!1),o()},[o]),A=(0,a.useCallback)(async()=>{try{N(!0);const{userService:e}=await Promise.resolve().then(n.bind(n,589)),t=await e.getAllUsers(5);if(t.success){const e=t.users.filter(e=>e.id!==(null===l||void 0===l?void 0:l.id));f(e.slice(0,3))}else{const e=i.filter(e=>e.id!==(null===l||void 0===l?void 0:l.id));f(e.slice(0,3))}}catch(S){console.error("Error loading recent contacts:",S);const t=i.filter(e=>e.id!==(null===l||void 0===l?void 0:l.id));f(t.slice(0,3))}finally{N(!1)}},[l]);(0,a.useEffect)(()=>{t&&k.current&&setTimeout(()=>{k.current.focus()},100)},[t]),(0,a.useEffect)(()=>{t&&A()},[t,A]);const P=(0,a.useCallback)(async e=>{if(e.trim()){N(!0),C(null);try{const{userService:t}=await Promise.resolve().then(n.bind(n,589)),a=await t.searchUsers(e);a.success?m(a.users):(C(a.error||"Search failed"),m([]))}catch(t){C("Failed to search users"),console.error("Search error:",t),m([])}finally{N(!1)}}else m([])},[]),T=(0,a.useCallback)(e=>{const t=e.target.value;u(t),P(t)},[P]),L=(0,a.useCallback)(e=>{v(t=>t.find(t=>t.id===e.id)?t.filter(t=>t.id!==e.id):[...t,e])},[]),M=(0,a.useCallback)(e=>{v(t=>t.filter(t=>t.id!==e))},[]),I=(0,a.useCallback)(async()=>{if(0!==g.length)if(!y||x.trim()){N(!0),C(null);try{const{authService:e}=await Promise.resolve().then(n.bind(n,589));if(!e.getToken())return C("You need to be logged in to create conversations. Please refresh the page and log in again."),void N(!1);const{conversationService:t}=await Promise.resolve().then(n.bind(n,589)),a=[l,...g],s=await t.createConversation(a,y?"group":"direct",y?x:null);s.success?(r&&await r(s.conversation),E()):C(s.error||"Failed to create chat")}catch(e){e.message&&e.message.includes("Access token is required")?C("Authentication required. Please refresh the page and log in again."):e.message&&e.message.includes("Invalid or expired token")?C("Your session has expired. Please refresh the page and log in again."):C(e.message||"Failed to create chat"),console.error("Create chat error:",e)}finally{N(!1)}}else C("Please enter a group name");else C("Please select at least one user")},[g,y,x,l,r,E]);if((0,a.useEffect)(()=>{const e=e=>{"Escape"===e.key&&t&&E()};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[t,E]),!t)return null;const O=d?h:p;return(0,s.jsx)("div",{className:"new-chat-modal-overlay ".concat(c?"dark":""),onClick:E,children:(0,s.jsxs)("div",{className:"new-chat-modal",onClick:e=>e.stopPropagation(),children:[(0,s.jsxs)("div",{className:"modal-header",children:[(0,s.jsx)("h2",{children:"New Chat"}),(0,s.jsx)("button",{className:"close-button",onClick:E,children:(0,s.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,s.jsx)("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),(0,s.jsx)("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),(0,s.jsxs)("div",{className:"modal-content",children:[(0,s.jsxs)("div",{className:"chat-type-toggle",children:[(0,s.jsx)("button",{className:"toggle-btn ".concat(y?"":"active"),onClick:()=>b(!1),children:"Direct Chat"}),(0,s.jsx)("button",{className:"toggle-btn ".concat(y?"active":""),onClick:()=>b(!0),children:"Group Chat"})]}),y&&(0,s.jsxs)("div",{className:"group-name-section",children:[(0,s.jsx)("label",{htmlFor:"groupName",children:"Group Name"}),(0,s.jsx)("input",{id:"groupName",type:"text",value:x,onChange:e=>w(e.target.value),placeholder:"Enter group name...",maxLength:"50"})]}),g.length>0&&(0,s.jsxs)("div",{className:"selected-users",children:[(0,s.jsxs)("h3",{children:["Selected Users (",g.length,")"]}),(0,s.jsx)("div",{className:"selected-users-list",children:g.map(e=>(0,s.jsxs)("div",{className:"selected-user",children:[(0,s.jsx)("img",{src:e.avatar,alt:e.name,className:"user-avatar"}),(0,s.jsx)("span",{className:"user-name",children:e.name}),(0,s.jsx)("button",{className:"remove-user",onClick:()=>M(e.id),title:"Remove user",children:"\xd7"})]},e.id))})]}),(0,s.jsx)("div",{className:"search-section",children:(0,s.jsxs)("div",{className:"search-input-container",children:[(0,s.jsxs)("svg",{className:"search-icon",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,s.jsx)("circle",{cx:"11",cy:"11",r:"8"}),(0,s.jsx)("path",{d:"m21 21-4.35-4.35"})]}),(0,s.jsx)("input",{ref:k,type:"text",value:d,onChange:T,placeholder:"Search users by name or email...",className:"search-input"}),j&&(0,s.jsx)("div",{className:"search-loading",children:"\ud83d\udd04"})]})}),(0,s.jsxs)("div",{className:"users-section",children:[(0,s.jsx)("h3",{children:d?"Search Results":"Recent Contacts"}),O.length>0?(0,s.jsx)("div",{className:"users-list",children:O.map(e=>{const t=g.find(t=>t.id===e.id);return(0,s.jsxs)("div",{className:"user-item ".concat(t?"selected":""),onClick:()=>L(e),children:[(0,s.jsx)("img",{src:e.avatar,alt:e.name,className:"user-avatar"}),(0,s.jsxs)("div",{className:"user-info",children:[(0,s.jsx)("div",{className:"user-name",children:e.name}),(0,s.jsx)("div",{className:"user-email",children:e.email})]}),(0,s.jsx)("div",{className:"user-status ".concat(e.status)}),t&&(0,s.jsx)("div",{className:"selection-indicator",children:"\u2713"})]},e.id)})}):(0,s.jsx)("div",{className:"no-users",children:d?"No users found":"No recent contacts"})]}),S&&(0,s.jsxs)("div",{className:"error-message",children:[S,(S.includes("Authentication required")||S.includes("session has expired")||S.includes("Access token is required"))&&(0,s.jsxs)("div",{className:"auth-helper",children:[(0,s.jsx)("p",{children:"Try logging in with demo credentials:"}),(0,s.jsx)("button",{className:"demo-login-btn",onClick:async()=>{try{const{authService:e}=await Promise.resolve().then(n.bind(n,589));(await e.login("admin","admin")).success&&window.location.reload()}catch(e){console.error("Demo login failed:",e)}},children:"Quick Login (admin/admin)"})]})]})]}),(0,s.jsxs)("div",{className:"modal-footer",children:[(0,s.jsx)("button",{className:"cancel-button",onClick:E,disabled:j,children:"Cancel"}),(0,s.jsx)("button",{className:"create-button",onClick:I,disabled:j||0===g.length,children:j?"Creating...":"Create ".concat(y?"Group":"Chat")})]})]})})}},85:(e,t,n)=>{var a=n(340),s=n(950),i=n(119);function o(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function l(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function c(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function d(e){if(l(e)!==e)throw Error(o(188))}function u(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=u(e)))return t;e=e.sibling}return null}var h=Object.assign,m=Symbol.for("react.element"),p=Symbol.for("react.transitional.element"),f=Symbol.for("react.portal"),g=Symbol.for("react.fragment"),v=Symbol.for("react.strict_mode"),y=Symbol.for("react.profiler"),b=Symbol.for("react.provider"),x=Symbol.for("react.consumer"),w=Symbol.for("react.context"),j=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),S=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),k=Symbol.for("react.lazy");Symbol.for("react.scope");var E=Symbol.for("react.activity");Symbol.for("react.legacy_hidden"),Symbol.for("react.tracing_marker");var A=Symbol.for("react.memo_cache_sentinel");Symbol.for("react.view_transition");var P=Symbol.iterator;function T(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=P&&e[P]||e["@@iterator"])?e:null}var L=Symbol.for("react.client.reference");function M(e){if(null==e)return null;if("function"===typeof e)return e.$$typeof===L?null:e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case g:return"Fragment";case y:return"Profiler";case v:return"StrictMode";case N:return"Suspense";case S:return"SuspenseList";case E:return"Activity"}if("object"===typeof e)switch(e.$$typeof){case f:return"Portal";case w:return(e.displayName||"Context")+".Provider";case x:return(e._context.displayName||"Context")+".Consumer";case j:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case C:return null!==(t=e.displayName||null)?t:M(e.type)||"Memo";case k:t=e._payload,e=e._init;try{return M(e(t))}catch(n){}}return null}var I=Array.isArray,O=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,_=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,D={pending:!1,data:null,method:null,action:null},R=[],F=-1;function X(e){return{current:e}}function U(e){0>F||(e.current=R[F],R[F]=null,F--)}function z(e,t){F++,R[F]=e.current,e.current=t}var B=X(null),H=X(null),V=X(null),q=X(null);function G(e,t){switch(z(V,t),z(H,e),z(B,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?su(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)e=iu(t=su(t),e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}U(B),z(B,e)}function W(){U(B),U(H),U(V)}function K(e){null!==e.memoizedState&&z(q,e);var t=B.current,n=iu(t,e.type);t!==n&&(z(H,e),z(B,n))}function Q(e){H.current===e&&(U(B),U(H)),q.current===e&&(U(q),Ku._currentValue=D)}var J=Object.prototype.hasOwnProperty,Y=a.unstable_scheduleCallback,$=a.unstable_cancelCallback,Z=a.unstable_shouldYield,ee=a.unstable_requestPaint,te=a.unstable_now,ne=a.unstable_getCurrentPriorityLevel,ae=a.unstable_ImmediatePriority,se=a.unstable_UserBlockingPriority,ie=a.unstable_NormalPriority,oe=a.unstable_LowPriority,re=a.unstable_IdlePriority,le=a.log,ce=a.unstable_setDisableYieldValue,de=null,ue=null;function he(e){if("function"===typeof le&&ce(e),ue&&"function"===typeof ue.setStrictMode)try{ue.setStrictMode(de,e)}catch(t){}}var me=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(pe(e)/fe|0)|0},pe=Math.log,fe=Math.LN2;var ge=256,ve=4194304;function ye(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194048&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function be(e,t,n){var a=e.pendingLanes;if(0===a)return 0;var s=0,i=e.suspendedLanes,o=e.pingedLanes;e=e.warmLanes;var r=134217727&a;return 0!==r?0!==(a=r&~i)?s=ye(a):0!==(o&=r)?s=ye(o):n||0!==(n=r&~e)&&(s=ye(n)):0!==(r=a&~i)?s=ye(r):0!==o?s=ye(o):n||0!==(n=a&~e)&&(s=ye(n)),0===s?0:0!==t&&t!==s&&0===(t&i)&&((i=s&-s)>=(n=t&-t)||32===i&&0!==(4194048&n))?t:s}function xe(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function we(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function je(){var e=ge;return 0===(4194048&(ge<<=1))&&(ge=256),e}function Ne(){var e=ve;return 0===(62914560&(ve<<=1))&&(ve=4194304),e}function Se(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Ce(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function ke(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var a=31-me(t);e.entangledLanes|=t,e.entanglements[a]=1073741824|e.entanglements[a]|4194090&n}function Ee(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var a=31-me(n),s=1<<a;s&t|e[a]&t&&(e[a]|=t),n&=~s}}function Ae(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Pe(e){return 2<(e&=-e)?8<e?0!==(134217727&e)?32:268435456:8:2}function Te(){var e=_.p;return 0!==e?e:void 0===(e=window.event)?32:ch(e.type)}var Le=Math.random().toString(36).slice(2),Me="__reactFiber$"+Le,Ie="__reactProps$"+Le,Oe="__reactContainer$"+Le,_e="__reactEvents$"+Le,De="__reactListeners$"+Le,Re="__reactHandles$"+Le,Fe="__reactResources$"+Le,Xe="__reactMarker$"+Le;function Ue(e){delete e[Me],delete e[Ie],delete e[_e],delete e[De],delete e[Re]}function ze(e){var t=e[Me];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Oe]||n[Me]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=bu(e);null!==e;){if(n=e[Me])return n;e=bu(e)}return t}n=(e=n).parentNode}return null}function Be(e){if(e=e[Me]||e[Oe]){var t=e.tag;if(5===t||6===t||13===t||26===t||27===t||3===t)return e}return null}function He(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(o(33))}function Ve(e){var t=e[Fe];return t||(t=e[Fe]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function qe(e){e[Xe]=!0}var Ge=new Set,We={};function Ke(e,t){Qe(e,t),Qe(e+"Capture",t)}function Qe(e,t){for(We[e]=t,e=0;e<t.length;e++)Ge.add(t[e])}var Je,Ye,$e=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ze={},et={};function tt(e,t,n){if(s=t,J.call(et,s)||!J.call(Ze,s)&&($e.test(s)?et[s]=!0:(Ze[s]=!0,0)))if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":return void e.removeAttribute(t);case"boolean":var a=t.toLowerCase().slice(0,5);if("data-"!==a&&"aria-"!==a)return void e.removeAttribute(t)}e.setAttribute(t,""+n)}var s}function nt(e,t,n){if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(t)}e.setAttribute(t,""+n)}}function at(e,t,n,a){if(null===a)e.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(n)}e.setAttributeNS(t,n,""+a)}}function st(e){if(void 0===Je)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Je=t&&t[1]||"",Ye=-1<n.stack.indexOf("\n    at")?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+Je+e+Ye}var it=!1;function ot(e,t){if(!e||it)return"";it=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var a={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(s){var a=s}Reflect.construct(e,[],n)}else{try{n.call()}catch(i){a=i}e.call(n.prototype)}}else{try{throw Error()}catch(o){a=o}(n=e())&&"function"===typeof n.catch&&n.catch(function(){})}}catch(r){if(r&&a&&"string"===typeof r.stack)return[r.stack,a.stack]}return[null,null]}};a.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var s=Object.getOwnPropertyDescriptor(a.DetermineComponentFrameRoot,"name");s&&s.configurable&&Object.defineProperty(a.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var i=a.DetermineComponentFrameRoot(),o=i[0],r=i[1];if(o&&r){var l=o.split("\n"),c=r.split("\n");for(s=a=0;a<l.length&&!l[a].includes("DetermineComponentFrameRoot");)a++;for(;s<c.length&&!c[s].includes("DetermineComponentFrameRoot");)s++;if(a===l.length||s===c.length)for(a=l.length-1,s=c.length-1;1<=a&&0<=s&&l[a]!==c[s];)s--;for(;1<=a&&0<=s;a--,s--)if(l[a]!==c[s]){if(1!==a||1!==s)do{if(a--,0>--s||l[a]!==c[s]){var d="\n"+l[a].replace(" at new "," at ");return e.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",e.displayName)),d}}while(1<=a&&0<=s);break}}}finally{it=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?st(n):""}function rt(e){switch(e.tag){case 26:case 27:case 5:return st(e.type);case 16:return st("Lazy");case 13:return st("Suspense");case 19:return st("SuspenseList");case 0:case 15:return ot(e.type,!1);case 11:return ot(e.type.render,!1);case 1:return ot(e.type,!0);case 31:return st("Activity");default:return""}}function lt(e){try{var t="";do{t+=rt(e),e=e.return}while(e);return t}catch(n){return"\nError generating stack: "+n.message+"\n"+n.stack}}function ct(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function dt(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function ut(e){e._valueTracker||(e._valueTracker=function(e){var t=dt(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),a=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var s=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(e){a=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return a},setValue:function(e){a=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function ht(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),a="";return e&&(a=dt(e)?e.checked?"true":"false":e.value),(e=a)!==n&&(t.setValue(e),!0)}function mt(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}var pt=/[\n"\\]/g;function ft(e){return e.replace(pt,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function gt(e,t,n,a,s,i,o,r){e.name="",null!=o&&"function"!==typeof o&&"symbol"!==typeof o&&"boolean"!==typeof o?e.type=o:e.removeAttribute("type"),null!=t?"number"===o?(0===t&&""===e.value||e.value!=t)&&(e.value=""+ct(t)):e.value!==""+ct(t)&&(e.value=""+ct(t)):"submit"!==o&&"reset"!==o||e.removeAttribute("value"),null!=t?yt(e,o,ct(t)):null!=n?yt(e,o,ct(n)):null!=a&&e.removeAttribute("value"),null==s&&null!=i&&(e.defaultChecked=!!i),null!=s&&(e.checked=s&&"function"!==typeof s&&"symbol"!==typeof s),null!=r&&"function"!==typeof r&&"symbol"!==typeof r&&"boolean"!==typeof r?e.name=""+ct(r):e.removeAttribute("name")}function vt(e,t,n,a,s,i,o,r){if(null!=i&&"function"!==typeof i&&"symbol"!==typeof i&&"boolean"!==typeof i&&(e.type=i),null!=t||null!=n){if(!("submit"!==i&&"reset"!==i||void 0!==t&&null!==t))return;n=null!=n?""+ct(n):"",t=null!=t?""+ct(t):n,r||t===e.value||(e.value=t),e.defaultValue=t}a="function"!==typeof(a=null!=a?a:s)&&"symbol"!==typeof a&&!!a,e.checked=r?e.checked:!!a,e.defaultChecked=!!a,null!=o&&"function"!==typeof o&&"symbol"!==typeof o&&"boolean"!==typeof o&&(e.name=o)}function yt(e,t,n){"number"===t&&mt(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function bt(e,t,n,a){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&a&&(e[n].defaultSelected=!0)}else{for(n=""+ct(n),t=null,s=0;s<e.length;s++){if(e[s].value===n)return e[s].selected=!0,void(a&&(e[s].defaultSelected=!0));null!==t||e[s].disabled||(t=e[s])}null!==t&&(t.selected=!0)}}function xt(e,t,n){null==t||((t=""+ct(t))!==e.value&&(e.value=t),null!=n)?e.defaultValue=null!=n?""+ct(n):"":e.defaultValue!==t&&(e.defaultValue=t)}function wt(e,t,n,a){if(null==t){if(null!=a){if(null!=n)throw Error(o(92));if(I(a)){if(1<a.length)throw Error(o(93));a=a[0]}n=a}null==n&&(n=""),t=n}n=ct(t),e.defaultValue=n,(a=e.textContent)===n&&""!==a&&null!==a&&(e.value=a)}function jt(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var Nt=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function St(e,t,n){var a=0===t.indexOf("--");null==n||"boolean"===typeof n||""===n?a?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":a?e.setProperty(t,n):"number"!==typeof n||0===n||Nt.has(t)?"float"===t?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function Ct(e,t,n){if(null!=t&&"object"!==typeof t)throw Error(o(62));if(e=e.style,null!=n){for(var a in n)!n.hasOwnProperty(a)||null!=t&&t.hasOwnProperty(a)||(0===a.indexOf("--")?e.setProperty(a,""):"float"===a?e.cssFloat="":e[a]="");for(var s in t)a=t[s],t.hasOwnProperty(s)&&n[s]!==a&&St(e,s,a)}else for(var i in t)t.hasOwnProperty(i)&&St(e,i,t[i])}function kt(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Et=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),At=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Pt(e){return At.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var Tt=null;function Lt(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Mt=null,It=null;function Ot(e){var t=Be(e);if(t&&(e=t.stateNode)){var n=e[Ie]||null;e:switch(e=t.stateNode,t.type){case"input":if(gt(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+ft(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var a=n[t];if(a!==e&&a.form===e.form){var s=a[Ie]||null;if(!s)throw Error(o(90));gt(a,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name)}}for(t=0;t<n.length;t++)(a=n[t]).form===e.form&&ht(a)}break e;case"textarea":xt(e,n.value,n.defaultValue);break e;case"select":null!=(t=n.value)&&bt(e,!!n.multiple,t,!1)}}}var _t=!1;function Dt(e,t,n){if(_t)return e(t,n);_t=!0;try{return e(t)}finally{if(_t=!1,(null!==Mt||null!==It)&&(zc(),Mt&&(t=Mt,e=It,It=Mt=null,Ot(t),e)))for(t=0;t<e.length;t++)Ot(e[t])}}function Rt(e,t){var n=e.stateNode;if(null===n)return null;var a=n[Ie]||null;if(null===a)return null;n=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(a=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!a;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var Ft=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),Xt=!1;if(Ft)try{var Ut={};Object.defineProperty(Ut,"passive",{get:function(){Xt=!0}}),window.addEventListener("test",Ut,Ut),window.removeEventListener("test",Ut,Ut)}catch(Ih){Xt=!1}var zt=null,Bt=null,Ht=null;function Vt(){if(Ht)return Ht;var e,t,n=Bt,a=n.length,s="value"in zt?zt.value:zt.textContent,i=s.length;for(e=0;e<a&&n[e]===s[e];e++);var o=a-e;for(t=1;t<=o&&n[a-t]===s[i-t];t++);return Ht=s.slice(e,1<t?1-t:void 0)}function qt(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Gt(){return!0}function Wt(){return!1}function Kt(e){function t(t,n,a,s,i){for(var o in this._reactName=t,this._targetInst=a,this.type=n,this.nativeEvent=s,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(s):s[o]);return this.isDefaultPrevented=(null!=s.defaultPrevented?s.defaultPrevented:!1===s.returnValue)?Gt:Wt,this.isPropagationStopped=Wt,this}return h(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Gt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Gt)},persist:function(){},isPersistent:Gt}),t}var Qt,Jt,Yt,$t={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Zt=Kt($t),en=h({},$t,{view:0,detail:0}),tn=Kt(en),nn=h({},en,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:pn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Yt&&(Yt&&"mousemove"===e.type?(Qt=e.screenX-Yt.screenX,Jt=e.screenY-Yt.screenY):Jt=Qt=0,Yt=e),Qt)},movementY:function(e){return"movementY"in e?e.movementY:Jt}}),an=Kt(nn),sn=Kt(h({},nn,{dataTransfer:0})),on=Kt(h({},en,{relatedTarget:0})),rn=Kt(h({},$t,{animationName:0,elapsedTime:0,pseudoElement:0})),ln=Kt(h({},$t,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),cn=Kt(h({},$t,{data:0})),dn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},un={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function mn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=hn[e])&&!!t[e]}function pn(){return mn}var fn=Kt(h({},en,{key:function(e){if(e.key){var t=dn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=qt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?un[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:pn,charCode:function(e){return"keypress"===e.type?qt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?qt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),gn=Kt(h({},nn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),vn=Kt(h({},en,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:pn})),yn=Kt(h({},$t,{propertyName:0,elapsedTime:0,pseudoElement:0})),bn=Kt(h({},nn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),xn=Kt(h({},$t,{newState:0,oldState:0})),wn=[9,13,27,32],jn=Ft&&"CompositionEvent"in window,Nn=null;Ft&&"documentMode"in document&&(Nn=document.documentMode);var Sn=Ft&&"TextEvent"in window&&!Nn,Cn=Ft&&(!jn||Nn&&8<Nn&&11>=Nn),kn=String.fromCharCode(32),En=!1;function An(e,t){switch(e){case"keyup":return-1!==wn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Pn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Tn=!1;var Ln={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Mn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Ln[e.type]:"textarea"===t}function In(e,t,n,a){Mt?It?It.push(a):It=[a]:Mt=a,0<(t=Vd(t,"onChange")).length&&(n=new Zt("onChange","change",null,n,a),e.push({event:n,listeners:t}))}var On=null,_n=null;function Dn(e){Dd(e,0)}function Rn(e){if(ht(He(e)))return e}function Fn(e,t){if("change"===e)return t}var Xn=!1;if(Ft){var Un;if(Ft){var zn="oninput"in document;if(!zn){var Bn=document.createElement("div");Bn.setAttribute("oninput","return;"),zn="function"===typeof Bn.oninput}Un=zn}else Un=!1;Xn=Un&&(!document.documentMode||9<document.documentMode)}function Hn(){On&&(On.detachEvent("onpropertychange",Vn),_n=On=null)}function Vn(e){if("value"===e.propertyName&&Rn(_n)){var t=[];In(t,_n,e,Lt(e)),Dt(Dn,t)}}function qn(e,t,n){"focusin"===e?(Hn(),_n=n,(On=t).attachEvent("onpropertychange",Vn)):"focusout"===e&&Hn()}function Gn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Rn(_n)}function Wn(e,t){if("click"===e)return Rn(t)}function Kn(e,t){if("input"===e||"change"===e)return Rn(t)}var Qn="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function Jn(e,t){if(Qn(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),a=Object.keys(t);if(n.length!==a.length)return!1;for(a=0;a<n.length;a++){var s=n[a];if(!J.call(t,s)||!Qn(e[s],t[s]))return!1}return!0}function Yn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function $n(e,t){var n,a=Yn(e);for(e=0;a;){if(3===a.nodeType){if(n=e+a.textContent.length,e<=t&&n>=t)return{node:a,offset:t-e};e=n}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Yn(a)}}function Zn(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?Zn(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function ea(e){for(var t=mt((e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window).document);t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(a){n=!1}if(!n)break;t=mt((e=t.contentWindow).document)}return t}function ta(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var na=Ft&&"documentMode"in document&&11>=document.documentMode,aa=null,sa=null,ia=null,oa=!1;function ra(e,t,n){var a=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;oa||null==aa||aa!==mt(a)||("selectionStart"in(a=aa)&&ta(a)?a={start:a.selectionStart,end:a.selectionEnd}:a={anchorNode:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset},ia&&Jn(ia,a)||(ia=a,0<(a=Vd(sa,"onSelect")).length&&(t=new Zt("onSelect","select",null,t,n),e.push({event:t,listeners:a}),t.target=aa)))}function la(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var ca={animationend:la("Animation","AnimationEnd"),animationiteration:la("Animation","AnimationIteration"),animationstart:la("Animation","AnimationStart"),transitionrun:la("Transition","TransitionRun"),transitionstart:la("Transition","TransitionStart"),transitioncancel:la("Transition","TransitionCancel"),transitionend:la("Transition","TransitionEnd")},da={},ua={};function ha(e){if(da[e])return da[e];if(!ca[e])return e;var t,n=ca[e];for(t in n)if(n.hasOwnProperty(t)&&t in ua)return da[e]=n[t];return e}Ft&&(ua=document.createElement("div").style,"AnimationEvent"in window||(delete ca.animationend.animation,delete ca.animationiteration.animation,delete ca.animationstart.animation),"TransitionEvent"in window||delete ca.transitionend.transition);var ma=ha("animationend"),pa=ha("animationiteration"),fa=ha("animationstart"),ga=ha("transitionrun"),va=ha("transitionstart"),ya=ha("transitioncancel"),ba=ha("transitionend"),xa=new Map,wa="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ja(e,t){xa.set(e,t),Ke(t,[e])}wa.push("scrollEnd");var Na=new WeakMap;function Sa(e,t){if("object"===typeof e&&null!==e){var n=Na.get(e);return void 0!==n?n:(t={value:e,source:t,stack:lt(t)},Na.set(e,t),t)}return{value:e,source:t,stack:lt(t)}}var Ca=[],ka=0,Ea=0;function Aa(){for(var e=ka,t=Ea=ka=0;t<e;){var n=Ca[t];Ca[t++]=null;var a=Ca[t];Ca[t++]=null;var s=Ca[t];Ca[t++]=null;var i=Ca[t];if(Ca[t++]=null,null!==a&&null!==s){var o=a.pending;null===o?s.next=s:(s.next=o.next,o.next=s),a.pending=s}0!==i&&Ma(n,s,i)}}function Pa(e,t,n,a){Ca[ka++]=e,Ca[ka++]=t,Ca[ka++]=n,Ca[ka++]=a,Ea|=a,e.lanes|=a,null!==(e=e.alternate)&&(e.lanes|=a)}function Ta(e,t,n,a){return Pa(e,t,n,a),Ia(e)}function La(e,t){return Pa(e,null,null,t),Ia(e)}function Ma(e,t,n){e.lanes|=n;var a=e.alternate;null!==a&&(a.lanes|=n);for(var s=!1,i=e.return;null!==i;)i.childLanes|=n,null!==(a=i.alternate)&&(a.childLanes|=n),22===i.tag&&(null===(e=i.stateNode)||1&e._visibility||(s=!0)),e=i,i=i.return;return 3===e.tag?(i=e.stateNode,s&&null!==t&&(s=31-me(n),null===(a=(e=i.hiddenUpdates)[s])?e[s]=[t]:a.push(t),t.lane=536870912|n),i):null}function Ia(e){if(50<Mc)throw Mc=0,Ic=null,Error(o(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var Oa={};function _a(e,t,n,a){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Da(e,t,n,a){return new _a(e,t,n,a)}function Ra(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Fa(e,t){var n=e.alternate;return null===n?((n=Da(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=65011712&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function Xa(e,t){e.flags&=65011714;var n=e.alternate;return null===n?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Ua(e,t,n,a,s,i){var r=0;if(a=e,"function"===typeof e)Ra(e)&&(r=1);else if("string"===typeof e)r=function(e,t,n){if(1===n||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!==typeof t.precedence||"string"!==typeof t.href||""===t.href)break;return!0;case"link":if("string"!==typeof t.rel||"string"!==typeof t.href||""===t.href||t.onLoad||t.onError)break;return"stylesheet"!==t.rel||(e=t.disabled,"string"===typeof t.precedence&&null==e);case"script":if(t.async&&"function"!==typeof t.async&&"symbol"!==typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"===typeof t.src)return!0}return!1}(e,n,B.current)?26:"html"===e||"head"===e||"body"===e?27:5;else e:switch(e){case E:return(e=Da(31,n,t,s)).elementType=E,e.lanes=i,e;case g:return za(n.children,s,i,t);case v:r=8,s|=24;break;case y:return(e=Da(12,n,t,2|s)).elementType=y,e.lanes=i,e;case N:return(e=Da(13,n,t,s)).elementType=N,e.lanes=i,e;case S:return(e=Da(19,n,t,s)).elementType=S,e.lanes=i,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case b:case w:r=10;break e;case x:r=9;break e;case j:r=11;break e;case C:r=14;break e;case k:r=16,a=null;break e}r=29,n=Error(o(130,null===e?"null":typeof e,"")),a=null}return(t=Da(r,n,t,s)).elementType=e,t.type=a,t.lanes=i,t}function za(e,t,n,a){return(e=Da(7,e,a,t)).lanes=n,e}function Ba(e,t,n){return(e=Da(6,e,null,t)).lanes=n,e}function Ha(e,t,n){return(t=Da(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Va=[],qa=0,Ga=null,Wa=0,Ka=[],Qa=0,Ja=null,Ya=1,$a="";function Za(e,t){Va[qa++]=Wa,Va[qa++]=Ga,Ga=e,Wa=t}function es(e,t,n){Ka[Qa++]=Ya,Ka[Qa++]=$a,Ka[Qa++]=Ja,Ja=e;var a=Ya;e=$a;var s=32-me(a)-1;a&=~(1<<s),n+=1;var i=32-me(t)+s;if(30<i){var o=s-s%5;i=(a&(1<<o)-1).toString(32),a>>=o,s-=o,Ya=1<<32-me(t)+s|n<<s|a,$a=i+e}else Ya=1<<i|n<<s|a,$a=e}function ts(e){null!==e.return&&(Za(e,1),es(e,1,0))}function ns(e){for(;e===Ga;)Ga=Va[--qa],Va[qa]=null,Wa=Va[--qa],Va[qa]=null;for(;e===Ja;)Ja=Ka[--Qa],Ka[Qa]=null,$a=Ka[--Qa],Ka[Qa]=null,Ya=Ka[--Qa],Ka[Qa]=null}var as=null,ss=null,is=!1,os=null,rs=!1,ls=Error(o(519));function cs(e){throw fs(Sa(Error(o(418,"")),e)),ls}function ds(e){var t=e.stateNode,n=e.type,a=e.memoizedProps;switch(t[Me]=e,t[Ie]=a,n){case"dialog":Rd("cancel",t),Rd("close",t);break;case"iframe":case"object":case"embed":Rd("load",t);break;case"video":case"audio":for(n=0;n<Od.length;n++)Rd(Od[n],t);break;case"source":Rd("error",t);break;case"img":case"image":case"link":Rd("error",t),Rd("load",t);break;case"details":Rd("toggle",t);break;case"input":Rd("invalid",t),vt(t,a.value,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name,!0),ut(t);break;case"select":Rd("invalid",t);break;case"textarea":Rd("invalid",t),wt(t,a.value,a.defaultValue,a.children),ut(t)}"string"!==typeof(n=a.children)&&"number"!==typeof n&&"bigint"!==typeof n||t.textContent===""+n||!0===a.suppressHydrationWarning||Jd(t.textContent,n)?(null!=a.popover&&(Rd("beforetoggle",t),Rd("toggle",t)),null!=a.onScroll&&Rd("scroll",t),null!=a.onScrollEnd&&Rd("scrollend",t),null!=a.onClick&&(t.onclick=Yd),t=!0):t=!1,t||cs(e)}function us(e){for(as=e.return;as;)switch(as.tag){case 5:case 13:return void(rs=!1);case 27:case 3:return void(rs=!0);default:as=as.return}}function hs(e){if(e!==as)return!1;if(!is)return us(e),is=!0,!1;var t,n=e.tag;if((t=3!==n&&27!==n)&&((t=5===n)&&(t=!("form"!==(t=e.type)&&"button"!==t)||ou(e.type,e.memoizedProps)),t=!t),t&&ss&&cs(e),us(e),13===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,n=0;e;){if(8===e.nodeType)if("/$"===(t=e.data)){if(0===n){ss=vu(e.nextSibling);break e}n--}else"$"!==t&&"$!"!==t&&"$?"!==t||n++;e=e.nextSibling}ss=null}}else 27===n?(n=ss,mu(e.type)?(e=yu,yu=null,ss=e):ss=n):ss=as?vu(e.stateNode.nextSibling):null;return!0}function ms(){ss=as=null,is=!1}function ps(){var e=os;return null!==e&&(null===bc?bc=e:bc.push.apply(bc,e),os=null),e}function fs(e){null===os?os=[e]:os.push(e)}var gs=X(null),vs=null,ys=null;function bs(e,t,n){z(gs,t._currentValue),t._currentValue=n}function xs(e){e._currentValue=gs.current,U(gs)}function ws(e,t,n){for(;null!==e;){var a=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==a&&(a.childLanes|=t)):null!==a&&(a.childLanes&t)!==t&&(a.childLanes|=t),e===n)break;e=e.return}}function js(e,t,n,a){var s=e.child;for(null!==s&&(s.return=e);null!==s;){var i=s.dependencies;if(null!==i){var r=s.child;i=i.firstContext;e:for(;null!==i;){var l=i;i=s;for(var c=0;c<t.length;c++)if(l.context===t[c]){i.lanes|=n,null!==(l=i.alternate)&&(l.lanes|=n),ws(i.return,n,e),a||(r=null);break e}i=l.next}}else if(18===s.tag){if(null===(r=s.return))throw Error(o(341));r.lanes|=n,null!==(i=r.alternate)&&(i.lanes|=n),ws(r,n,e),r=null}else r=s.child;if(null!==r)r.return=s;else for(r=s;null!==r;){if(r===e){r=null;break}if(null!==(s=r.sibling)){s.return=r.return,r=s;break}r=r.return}s=r}}function Ns(e,t,n,a){e=null;for(var s=t,i=!1;null!==s;){if(!i)if(0!==(524288&s.flags))i=!0;else if(0!==(262144&s.flags))break;if(10===s.tag){var r=s.alternate;if(null===r)throw Error(o(387));if(null!==(r=r.memoizedProps)){var l=s.type;Qn(s.pendingProps.value,r.value)||(null!==e?e.push(l):e=[l])}}else if(s===q.current){if(null===(r=s.alternate))throw Error(o(387));r.memoizedState.memoizedState!==s.memoizedState.memoizedState&&(null!==e?e.push(Ku):e=[Ku])}s=s.return}null!==e&&js(t,e,n,a),t.flags|=262144}function Ss(e){for(e=e.firstContext;null!==e;){if(!Qn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Cs(e){vs=e,ys=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function ks(e){return As(vs,e)}function Es(e,t){return null===vs&&Cs(e),As(e,t)}function As(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},null===ys){if(null===e)throw Error(o(308));ys=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else ys=ys.next=t;return n}var Ps="undefined"!==typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},Ts=a.unstable_scheduleCallback,Ls=a.unstable_NormalPriority,Ms={$$typeof:w,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Is(){return{controller:new Ps,data:new Map,refCount:0}}function Os(e){e.refCount--,0===e.refCount&&Ts(Ls,function(){e.controller.abort()})}var _s=null,Ds=0,Rs=0,Fs=null;function Xs(){if(0===--Ds&&null!==_s){null!==Fs&&(Fs.status="fulfilled");var e=_s;_s=null,Rs=0,Fs=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var Us=O.S;O.S=function(e,t){"object"===typeof t&&null!==t&&"function"===typeof t.then&&function(e,t){if(null===_s){var n=_s=[];Ds=0,Rs=Pd(),Fs={status:"pending",value:void 0,then:function(e){n.push(e)}}}Ds++,t.then(Xs,Xs)}(0,t),null!==Us&&Us(e,t)};var zs=X(null);function Bs(){var e=zs.current;return null!==e?e:ac.pooledCache}function Hs(e,t){z(zs,null===t?zs.current:t.pool)}function Vs(){var e=Bs();return null===e?null:{parent:Ms._currentValue,pool:e}}var qs=Error(o(460)),Gs=Error(o(474)),Ws=Error(o(542)),Ks={then:function(){}};function Qs(e){return"fulfilled"===(e=e.status)||"rejected"===e}function Js(){}function Ys(e,t,n){switch(void 0===(n=e[n])?e.push(t):n!==t&&(t.then(Js,Js),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw ei(e=t.reason),e;default:if("string"===typeof t.status)t.then(Js,Js);else{if(null!==(e=ac)&&100<e.shellSuspendCounter)throw Error(o(482));(e=t).status="pending",e.then(function(e){if("pending"===t.status){var n=t;n.status="fulfilled",n.value=e}},function(e){if("pending"===t.status){var n=t;n.status="rejected",n.reason=e}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw ei(e=t.reason),e}throw $s=t,qs}}var $s=null;function Zs(){if(null===$s)throw Error(o(459));var e=$s;return $s=null,e}function ei(e){if(e===qs||e===Ws)throw Error(o(483))}var ti=!1;function ni(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ai(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function si(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function ii(e,t,n){var a=e.updateQueue;if(null===a)return null;if(a=a.shared,0!==(2&nc)){var s=a.pending;return null===s?t.next=t:(t.next=s.next,s.next=t),a.pending=t,t=Ia(e),Ma(e,null,n),t}return Pa(e,a,t,n),Ia(e)}function oi(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194048&n))){var a=t.lanes;n|=a&=e.pendingLanes,t.lanes=n,Ee(e,n)}}function ri(e,t){var n=e.updateQueue,a=e.alternate;if(null!==a&&n===(a=a.updateQueue)){var s=null,i=null;if(null!==(n=n.firstBaseUpdate)){do{var o={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};null===i?s=i=o:i=i.next=o,n=n.next}while(null!==n);null===i?s=i=t:i=i.next=t}else s=i=t;return n={baseState:a.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:a.shared,callbacks:a.callbacks},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var li=!1;function ci(){if(li){if(null!==Fs)throw Fs}}function di(e,t,n,a){li=!1;var s=e.updateQueue;ti=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,r=s.shared.pending;if(null!==r){s.shared.pending=null;var l=r,c=l.next;l.next=null,null===o?i=c:o.next=c,o=l;var d=e.alternate;null!==d&&((r=(d=d.updateQueue).lastBaseUpdate)!==o&&(null===r?d.firstBaseUpdate=c:r.next=c,d.lastBaseUpdate=l))}if(null!==i){var u=s.baseState;for(o=0,d=c=l=null,r=i;;){var m=-536870913&r.lane,p=m!==r.lane;if(p?(ic&m)===m:(a&m)===m){0!==m&&m===Rs&&(li=!0),null!==d&&(d=d.next={lane:0,tag:r.tag,payload:r.payload,callback:null,next:null});e:{var f=e,g=r;m=t;var v=n;switch(g.tag){case 1:if("function"===typeof(f=g.payload)){u=f.call(v,u,m);break e}u=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null===(m="function"===typeof(f=g.payload)?f.call(v,u,m):f)||void 0===m)break e;u=h({},u,m);break e;case 2:ti=!0}}null!==(m=r.callback)&&(e.flags|=64,p&&(e.flags|=8192),null===(p=s.callbacks)?s.callbacks=[m]:p.push(m))}else p={lane:m,tag:r.tag,payload:r.payload,callback:r.callback,next:null},null===d?(c=d=p,l=u):d=d.next=p,o|=m;if(null===(r=r.next)){if(null===(r=s.shared.pending))break;r=(p=r).next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}null===d&&(l=u),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=d,null===i&&(s.shared.lanes=0),mc|=o,e.lanes=o,e.memoizedState=u}}function ui(e,t){if("function"!==typeof e)throw Error(o(191,e));e.call(t)}function hi(e,t){var n=e.callbacks;if(null!==n)for(e.callbacks=null,e=0;e<n.length;e++)ui(n[e],t)}var mi=X(null),pi=X(0);function fi(e,t){z(pi,e=uc),z(mi,t),uc=e|t.baseLanes}function gi(){z(pi,uc),z(mi,mi.current)}function vi(){uc=pi.current,U(mi),U(pi)}var yi=0,bi=null,xi=null,wi=null,ji=!1,Ni=!1,Si=!1,Ci=0,ki=0,Ei=null,Ai=0;function Pi(){throw Error(o(321))}function Ti(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Qn(e[n],t[n]))return!1;return!0}function Li(e,t,n,a,s,i){return yi=i,bi=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,O.H=null===e||null===e.memoizedState?Go:Wo,Si=!1,i=n(a,s),Si=!1,Ni&&(i=Ii(t,n,a,s)),Mi(e),i}function Mi(e){O.H=qo;var t=null!==xi&&null!==xi.next;if(yi=0,wi=xi=bi=null,ji=!1,ki=0,Ei=null,t)throw Error(o(300));null===e||Er||null!==(e=e.dependencies)&&Ss(e)&&(Er=!0)}function Ii(e,t,n,a){bi=e;var s=0;do{if(Ni&&(Ei=null),ki=0,Ni=!1,25<=s)throw Error(o(301));if(s+=1,wi=xi=null,null!=e.updateQueue){var i=e.updateQueue;i.lastEffect=null,i.events=null,i.stores=null,null!=i.memoCache&&(i.memoCache.index=0)}O.H=Ko,i=t(n,a)}while(Ni);return i}function Oi(){var e=O.H,t=e.useState()[0];return t="function"===typeof t.then?Ui(t):t,e=e.useState()[0],(null!==xi?xi.memoizedState:null)!==e&&(bi.flags|=1024),t}function _i(){var e=0!==Ci;return Ci=0,e}function Di(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function Ri(e){if(ji){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}ji=!1}yi=0,wi=xi=bi=null,Ni=!1,ki=Ci=0,Ei=null}function Fi(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===wi?bi.memoizedState=wi=e:wi=wi.next=e,wi}function Xi(){if(null===xi){var e=bi.alternate;e=null!==e?e.memoizedState:null}else e=xi.next;var t=null===wi?bi.memoizedState:wi.next;if(null!==t)wi=t,xi=e;else{if(null===e){if(null===bi.alternate)throw Error(o(467));throw Error(o(310))}e={memoizedState:(xi=e).memoizedState,baseState:xi.baseState,baseQueue:xi.baseQueue,queue:xi.queue,next:null},null===wi?bi.memoizedState=wi=e:wi=wi.next=e}return wi}function Ui(e){var t=ki;return ki+=1,null===Ei&&(Ei=[]),e=Ys(Ei,e,t),t=bi,null===(null===wi?t.memoizedState:wi.next)&&(t=t.alternate,O.H=null===t||null===t.memoizedState?Go:Wo),e}function zi(e){if(null!==e&&"object"===typeof e){if("function"===typeof e.then)return Ui(e);if(e.$$typeof===w)return ks(e)}throw Error(o(438,String(e)))}function Bi(e){var t=null,n=bi.updateQueue;if(null!==n&&(t=n.memoCache),null==t){var a=bi.alternate;null!==a&&(null!==(a=a.updateQueue)&&(null!=(a=a.memoCache)&&(t={data:a.data.map(function(e){return e.slice()}),index:0})))}if(null==t&&(t={data:[],index:0}),null===n&&(n={lastEffect:null,events:null,stores:null,memoCache:null},bi.updateQueue=n),n.memoCache=t,void 0===(n=t.data[t.index]))for(n=t.data[t.index]=Array(e),a=0;a<e;a++)n[a]=A;return t.index++,n}function Hi(e,t){return"function"===typeof t?t(e):t}function Vi(e){return qi(Xi(),xi,e)}function qi(e,t,n){var a=e.queue;if(null===a)throw Error(o(311));a.lastRenderedReducer=n;var s=e.baseQueue,i=a.pending;if(null!==i){if(null!==s){var r=s.next;s.next=i.next,i.next=r}t.baseQueue=s=i,a.pending=null}if(i=e.baseState,null===s)e.memoizedState=i;else{var l=r=null,c=null,d=t=s.next,u=!1;do{var h=-536870913&d.lane;if(h!==d.lane?(ic&h)===h:(yi&h)===h){var m=d.revertLane;if(0===m)null!==c&&(c=c.next={lane:0,revertLane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),h===Rs&&(u=!0);else{if((yi&m)===m){d=d.next,m===Rs&&(u=!0);continue}h={lane:0,revertLane:d.revertLane,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null},null===c?(l=c=h,r=i):c=c.next=h,bi.lanes|=m,mc|=m}h=d.action,Si&&n(i,h),i=d.hasEagerState?d.eagerState:n(i,h)}else m={lane:h,revertLane:d.revertLane,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null},null===c?(l=c=m,r=i):c=c.next=m,bi.lanes|=h,mc|=h;d=d.next}while(null!==d&&d!==t);if(null===c?r=i:c.next=l,!Qn(i,e.memoizedState)&&(Er=!0,u&&null!==(n=Fs)))throw n;e.memoizedState=i,e.baseState=r,e.baseQueue=c,a.lastRenderedState=i}return null===s&&(a.lanes=0),[e.memoizedState,a.dispatch]}function Gi(e){var t=Xi(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var a=n.dispatch,s=n.pending,i=t.memoizedState;if(null!==s){n.pending=null;var r=s=s.next;do{i=e(i,r.action),r=r.next}while(r!==s);Qn(i,t.memoizedState)||(Er=!0),t.memoizedState=i,null===t.baseQueue&&(t.baseState=i),n.lastRenderedState=i}return[i,a]}function Wi(e,t,n){var a=bi,s=Xi(),i=is;if(i){if(void 0===n)throw Error(o(407));n=n()}else n=t();var r=!Qn((xi||s).memoizedState,n);if(r&&(s.memoizedState=n,Er=!0),s=s.queue,vo(2048,8,Ji.bind(null,a,s,e),[e]),s.getSnapshot!==t||r||null!==wi&&1&wi.memoizedState.tag){if(a.flags|=2048,po(9,{destroy:void 0,resource:void 0},Qi.bind(null,a,s,n,t),null),null===ac)throw Error(o(349));i||0!==(124&yi)||Ki(a,t,n)}return n}function Ki(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=bi.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},bi.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Qi(e,t,n,a){t.value=n,t.getSnapshot=a,Yi(t)&&$i(e)}function Ji(e,t,n){return n(function(){Yi(t)&&$i(e)})}function Yi(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Qn(e,n)}catch(a){return!0}}function $i(e){var t=La(e,2);null!==t&&Dc(t,e,2)}function Zi(e){var t=Fi();if("function"===typeof e){var n=e;if(e=n(),Si){he(!0);try{n()}finally{he(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hi,lastRenderedState:e},t}function eo(e,t,n,a){return e.baseState=n,qi(e,xi,"function"===typeof a?a:Hi)}function to(e,t,n,a,s){if(Bo(e))throw Error(o(485));if(null!==(e=t.action)){var i={payload:s,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){i.listeners.push(e)}};null!==O.T?n(!0):i.isTransition=!1,a(i),null===(n=t.pending)?(i.next=t.pending=i,no(t,i)):(i.next=n.next,t.pending=n.next=i)}}function no(e,t){var n=t.action,a=t.payload,s=e.state;if(t.isTransition){var i=O.T,o={};O.T=o;try{var r=n(s,a),l=O.S;null!==l&&l(o,r),ao(e,t,r)}catch(c){io(e,t,c)}finally{O.T=i}}else try{ao(e,t,i=n(s,a))}catch(d){io(e,t,d)}}function ao(e,t,n){null!==n&&"object"===typeof n&&"function"===typeof n.then?n.then(function(n){so(e,t,n)},function(n){return io(e,t,n)}):so(e,t,n)}function so(e,t,n){t.status="fulfilled",t.value=n,oo(t),e.state=n,null!==(t=e.pending)&&((n=t.next)===t?e.pending=null:(n=n.next,t.next=n,no(e,n)))}function io(e,t,n){var a=e.pending;if(e.pending=null,null!==a){a=a.next;do{t.status="rejected",t.reason=n,oo(t),t=t.next}while(t!==a)}e.action=null}function oo(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function ro(e,t){return t}function lo(e,t){if(is){var n=ac.formState;if(null!==n){e:{var a=bi;if(is){if(ss){t:{for(var s=ss,i=rs;8!==s.nodeType;){if(!i){s=null;break t}if(null===(s=vu(s.nextSibling))){s=null;break t}}s="F!"===(i=s.data)||"F"===i?s:null}if(s){ss=vu(s.nextSibling),a="F!"===s.data;break e}}cs(a)}a=!1}a&&(t=n[0])}}return(n=Fi()).memoizedState=n.baseState=t,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ro,lastRenderedState:t},n.queue=a,n=Xo.bind(null,bi,a),a.dispatch=n,a=Zi(!1),i=zo.bind(null,bi,!1,a.queue),s={state:t,dispatch:null,action:e,pending:null},(a=Fi()).queue=s,n=to.bind(null,bi,s,i,n),s.dispatch=n,a.memoizedState=e,[t,n,!1]}function co(e){return uo(Xi(),xi,e)}function uo(e,t,n){if(t=qi(e,t,ro)[0],e=Vi(Hi)[0],"object"===typeof t&&null!==t&&"function"===typeof t.then)try{var a=Ui(t)}catch(o){if(o===qs)throw Ws;throw o}else a=t;var s=(t=Xi()).queue,i=s.dispatch;return n!==t.memoizedState&&(bi.flags|=2048,po(9,{destroy:void 0,resource:void 0},ho.bind(null,s,n),null)),[a,i,e]}function ho(e,t){e.action=t}function mo(e){var t=Xi(),n=xi;if(null!==n)return uo(t,n,e);Xi(),t=t.memoizedState;var a=(n=Xi()).queue.dispatch;return n.memoizedState=e,[t,a,!1]}function po(e,t,n,a){return e={tag:e,create:n,deps:a,inst:t,next:null},null===(t=bi.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},bi.updateQueue=t),null===(n=t.lastEffect)?t.lastEffect=e.next=e:(a=n.next,n.next=e,e.next=a,t.lastEffect=e),e}function fo(){return Xi().memoizedState}function go(e,t,n,a){var s=Fi();a=void 0===a?null:a,bi.flags|=e,s.memoizedState=po(1|t,{destroy:void 0,resource:void 0},n,a)}function vo(e,t,n,a){var s=Xi();a=void 0===a?null:a;var i=s.memoizedState.inst;null!==xi&&null!==a&&Ti(a,xi.memoizedState.deps)?s.memoizedState=po(t,i,n,a):(bi.flags|=e,s.memoizedState=po(1|t,i,n,a))}function yo(e,t){go(8390656,8,e,t)}function bo(e,t){vo(2048,8,e,t)}function xo(e,t){return vo(4,2,e,t)}function wo(e,t){return vo(4,4,e,t)}function jo(e,t){if("function"===typeof t){e=e();var n=t(e);return function(){"function"===typeof n?n():t(null)}}if(null!==t&&void 0!==t)return e=e(),t.current=e,function(){t.current=null}}function No(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,vo(4,4,jo.bind(null,t,e),n)}function So(){}function Co(e,t){var n=Xi();t=void 0===t?null:t;var a=n.memoizedState;return null!==t&&Ti(t,a[1])?a[0]:(n.memoizedState=[e,t],e)}function ko(e,t){var n=Xi();t=void 0===t?null:t;var a=n.memoizedState;if(null!==t&&Ti(t,a[1]))return a[0];if(a=e(),Si){he(!0);try{e()}finally{he(!1)}}return n.memoizedState=[a,t],a}function Eo(e,t,n){return void 0===n||0!==(1073741824&yi)?e.memoizedState=t:(e.memoizedState=n,e=_c(),bi.lanes|=e,mc|=e,n)}function Ao(e,t,n,a){return Qn(n,t)?n:null!==mi.current?(e=Eo(e,n,a),Qn(e,t)||(Er=!0),e):0===(42&yi)?(Er=!0,e.memoizedState=n):(e=_c(),bi.lanes|=e,mc|=e,t)}function Po(e,t,n,a,s){var i=_.p;_.p=0!==i&&8>i?i:8;var o=O.T,r={};O.T=r,zo(e,!1,t,n);try{var l=s(),c=O.S;if(null!==c&&c(r,l),null!==l&&"object"===typeof l&&"function"===typeof l.then)Uo(e,t,function(e,t){var n=[],a={status:"pending",value:null,reason:null,then:function(e){n.push(e)}};return e.then(function(){a.status="fulfilled",a.value=t;for(var e=0;e<n.length;e++)(0,n[e])(t)},function(e){for(a.status="rejected",a.reason=e,e=0;e<n.length;e++)(0,n[e])(void 0)}),a}(l,a),Oc());else Uo(e,t,a,Oc())}catch(d){Uo(e,t,{then:function(){},status:"rejected",reason:d},Oc())}finally{_.p=i,O.T=o}}function To(){}function Lo(e,t,n,a){if(5!==e.tag)throw Error(o(476));var s=Mo(e).queue;Po(e,s,t,D,null===n?To:function(){return Io(e),n(a)})}function Mo(e){var t=e.memoizedState;if(null!==t)return t;var n={};return(t={memoizedState:D,baseState:D,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hi,lastRenderedState:D},next:null}).next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hi,lastRenderedState:n},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function Io(e){Uo(e,Mo(e).next.queue,{},Oc())}function Oo(){return ks(Ku)}function _o(){return Xi().memoizedState}function Do(){return Xi().memoizedState}function Ro(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var n=Oc(),a=ii(t,e=si(n),n);return null!==a&&(Dc(a,t,n),oi(a,t,n)),t={cache:Is()},void(e.payload=t)}t=t.return}}function Fo(e,t,n){var a=Oc();n={lane:a,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},Bo(e)?Ho(t,n):null!==(n=Ta(e,t,n,a))&&(Dc(n,e,a),Vo(n,t,a))}function Xo(e,t,n){Uo(e,t,n,Oc())}function Uo(e,t,n,a){var s={lane:a,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(Bo(e))Ho(t,s);else{var i=e.alternate;if(0===e.lanes&&(null===i||0===i.lanes)&&null!==(i=t.lastRenderedReducer))try{var o=t.lastRenderedState,r=i(o,n);if(s.hasEagerState=!0,s.eagerState=r,Qn(r,o))return Pa(e,t,s,0),null===ac&&Aa(),!1}catch(l){}if(null!==(n=Ta(e,t,s,a)))return Dc(n,e,a),Vo(n,t,a),!0}return!1}function zo(e,t,n,a){if(a={lane:2,revertLane:Pd(),action:a,hasEagerState:!1,eagerState:null,next:null},Bo(e)){if(t)throw Error(o(479))}else null!==(t=Ta(e,n,a,2))&&Dc(t,e,2)}function Bo(e){var t=e.alternate;return e===bi||null!==t&&t===bi}function Ho(e,t){Ni=ji=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Vo(e,t,n){if(0!==(4194048&n)){var a=t.lanes;n|=a&=e.pendingLanes,t.lanes=n,Ee(e,n)}}var qo={readContext:ks,use:zi,useCallback:Pi,useContext:Pi,useEffect:Pi,useImperativeHandle:Pi,useLayoutEffect:Pi,useInsertionEffect:Pi,useMemo:Pi,useReducer:Pi,useRef:Pi,useState:Pi,useDebugValue:Pi,useDeferredValue:Pi,useTransition:Pi,useSyncExternalStore:Pi,useId:Pi,useHostTransitionStatus:Pi,useFormState:Pi,useActionState:Pi,useOptimistic:Pi,useMemoCache:Pi,useCacheRefresh:Pi},Go={readContext:ks,use:zi,useCallback:function(e,t){return Fi().memoizedState=[e,void 0===t?null:t],e},useContext:ks,useEffect:yo,useImperativeHandle:function(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,go(4194308,4,jo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return go(4194308,4,e,t)},useInsertionEffect:function(e,t){go(4,2,e,t)},useMemo:function(e,t){var n=Fi();t=void 0===t?null:t;var a=e();if(Si){he(!0);try{e()}finally{he(!1)}}return n.memoizedState=[a,t],a},useReducer:function(e,t,n){var a=Fi();if(void 0!==n){var s=n(t);if(Si){he(!0);try{n(t)}finally{he(!1)}}}else s=t;return a.memoizedState=a.baseState=s,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:s},a.queue=e,e=e.dispatch=Fo.bind(null,bi,e),[a.memoizedState,e]},useRef:function(e){return e={current:e},Fi().memoizedState=e},useState:function(e){var t=(e=Zi(e)).queue,n=Xo.bind(null,bi,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:So,useDeferredValue:function(e,t){return Eo(Fi(),e,t)},useTransition:function(){var e=Zi(!1);return e=Po.bind(null,bi,e.queue,!0,!1),Fi().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var a=bi,s=Fi();if(is){if(void 0===n)throw Error(o(407));n=n()}else{if(n=t(),null===ac)throw Error(o(349));0!==(124&ic)||Ki(a,t,n)}s.memoizedState=n;var i={value:n,getSnapshot:t};return s.queue=i,yo(Ji.bind(null,a,i,e),[e]),a.flags|=2048,po(9,{destroy:void 0,resource:void 0},Qi.bind(null,a,i,n,t),null),n},useId:function(){var e=Fi(),t=ac.identifierPrefix;if(is){var n=$a;t="\xab"+t+"R"+(n=(Ya&~(1<<32-me(Ya)-1)).toString(32)+n),0<(n=Ci++)&&(t+="H"+n.toString(32)),t+="\xbb"}else t="\xab"+t+"r"+(n=Ai++).toString(32)+"\xbb";return e.memoizedState=t},useHostTransitionStatus:Oo,useFormState:lo,useActionState:lo,useOptimistic:function(e){var t=Fi();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=zo.bind(null,bi,!0,n),n.dispatch=t,[e,t]},useMemoCache:Bi,useCacheRefresh:function(){return Fi().memoizedState=Ro.bind(null,bi)}},Wo={readContext:ks,use:zi,useCallback:Co,useContext:ks,useEffect:bo,useImperativeHandle:No,useInsertionEffect:xo,useLayoutEffect:wo,useMemo:ko,useReducer:Vi,useRef:fo,useState:function(){return Vi(Hi)},useDebugValue:So,useDeferredValue:function(e,t){return Ao(Xi(),xi.memoizedState,e,t)},useTransition:function(){var e=Vi(Hi)[0],t=Xi().memoizedState;return["boolean"===typeof e?e:Ui(e),t]},useSyncExternalStore:Wi,useId:_o,useHostTransitionStatus:Oo,useFormState:co,useActionState:co,useOptimistic:function(e,t){return eo(Xi(),0,e,t)},useMemoCache:Bi,useCacheRefresh:Do},Ko={readContext:ks,use:zi,useCallback:Co,useContext:ks,useEffect:bo,useImperativeHandle:No,useInsertionEffect:xo,useLayoutEffect:wo,useMemo:ko,useReducer:Gi,useRef:fo,useState:function(){return Gi(Hi)},useDebugValue:So,useDeferredValue:function(e,t){var n=Xi();return null===xi?Eo(n,e,t):Ao(n,xi.memoizedState,e,t)},useTransition:function(){var e=Gi(Hi)[0],t=Xi().memoizedState;return["boolean"===typeof e?e:Ui(e),t]},useSyncExternalStore:Wi,useId:_o,useHostTransitionStatus:Oo,useFormState:mo,useActionState:mo,useOptimistic:function(e,t){var n=Xi();return null!==xi?eo(n,0,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:Bi,useCacheRefresh:Do},Qo=null,Jo=0;function Yo(e){var t=Jo;return Jo+=1,null===Qo&&(Qo=[]),Ys(Qo,e,t)}function $o(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function Zo(e,t){if(t.$$typeof===m)throw Error(o(525));throw e=Object.prototype.toString.call(t),Error(o(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function er(e){return(0,e._init)(e._payload)}function tr(e){function t(t,n){if(e){var a=t.deletions;null===a?(t.deletions=[n],t.flags|=16):a.push(n)}}function n(n,a){if(!e)return null;for(;null!==a;)t(n,a),a=a.sibling;return null}function a(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function s(e,t){return(e=Fa(e,t)).index=0,e.sibling=null,e}function i(t,n,a){return t.index=a,e?null!==(a=t.alternate)?(a=a.index)<n?(t.flags|=67108866,n):a:(t.flags|=67108866,n):(t.flags|=1048576,n)}function r(t){return e&&null===t.alternate&&(t.flags|=67108866),t}function l(e,t,n,a){return null===t||6!==t.tag?((t=Ba(n,e.mode,a)).return=e,t):((t=s(t,n)).return=e,t)}function c(e,t,n,a){var i=n.type;return i===g?u(e,t,n.props.children,a,n.key):null!==t&&(t.elementType===i||"object"===typeof i&&null!==i&&i.$$typeof===k&&er(i)===t.type)?($o(t=s(t,n.props),n),t.return=e,t):($o(t=Ua(n.type,n.key,n.props,null,e.mode,a),n),t.return=e,t)}function d(e,t,n,a){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Ha(n,e.mode,a)).return=e,t):((t=s(t,n.children||[])).return=e,t)}function u(e,t,n,a,i){return null===t||7!==t.tag?((t=za(n,e.mode,a,i)).return=e,t):((t=s(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t||"bigint"===typeof t)return(t=Ba(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case p:return $o(n=Ua(t.type,t.key,t.props,null,e.mode,n),t),n.return=e,n;case f:return(t=Ha(t,e.mode,n)).return=e,t;case k:return h(e,t=(0,t._init)(t._payload),n)}if(I(t)||T(t))return(t=za(t,e.mode,n,null)).return=e,t;if("function"===typeof t.then)return h(e,Yo(t),n);if(t.$$typeof===w)return h(e,Es(e,t),n);Zo(e,t)}return null}function m(e,t,n,a){var s=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n||"bigint"===typeof n)return null!==s?null:l(e,t,""+n,a);if("object"===typeof n&&null!==n){switch(n.$$typeof){case p:return n.key===s?c(e,t,n,a):null;case f:return n.key===s?d(e,t,n,a):null;case k:return m(e,t,n=(s=n._init)(n._payload),a)}if(I(n)||T(n))return null!==s?null:u(e,t,n,a,null);if("function"===typeof n.then)return m(e,t,Yo(n),a);if(n.$$typeof===w)return m(e,t,Es(e,n),a);Zo(e,n)}return null}function v(e,t,n,a,s){if("string"===typeof a&&""!==a||"number"===typeof a||"bigint"===typeof a)return l(t,e=e.get(n)||null,""+a,s);if("object"===typeof a&&null!==a){switch(a.$$typeof){case p:return c(t,e=e.get(null===a.key?n:a.key)||null,a,s);case f:return d(t,e=e.get(null===a.key?n:a.key)||null,a,s);case k:return v(e,t,n,a=(0,a._init)(a._payload),s)}if(I(a)||T(a))return u(t,e=e.get(n)||null,a,s,null);if("function"===typeof a.then)return v(e,t,n,Yo(a),s);if(a.$$typeof===w)return v(e,t,n,Es(t,a),s);Zo(t,a)}return null}function y(l,c,d,u){if("object"===typeof d&&null!==d&&d.type===g&&null===d.key&&(d=d.props.children),"object"===typeof d&&null!==d){switch(d.$$typeof){case p:e:{for(var b=d.key;null!==c;){if(c.key===b){if((b=d.type)===g){if(7===c.tag){n(l,c.sibling),(u=s(c,d.props.children)).return=l,l=u;break e}}else if(c.elementType===b||"object"===typeof b&&null!==b&&b.$$typeof===k&&er(b)===c.type){n(l,c.sibling),$o(u=s(c,d.props),d),u.return=l,l=u;break e}n(l,c);break}t(l,c),c=c.sibling}d.type===g?((u=za(d.props.children,l.mode,u,d.key)).return=l,l=u):($o(u=Ua(d.type,d.key,d.props,null,l.mode,u),d),u.return=l,l=u)}return r(l);case f:e:{for(b=d.key;null!==c;){if(c.key===b){if(4===c.tag&&c.stateNode.containerInfo===d.containerInfo&&c.stateNode.implementation===d.implementation){n(l,c.sibling),(u=s(c,d.children||[])).return=l,l=u;break e}n(l,c);break}t(l,c),c=c.sibling}(u=Ha(d,l.mode,u)).return=l,l=u}return r(l);case k:return y(l,c,d=(b=d._init)(d._payload),u)}if(I(d))return function(s,o,r,l){for(var c=null,d=null,u=o,p=o=0,f=null;null!==u&&p<r.length;p++){u.index>p?(f=u,u=null):f=u.sibling;var g=m(s,u,r[p],l);if(null===g){null===u&&(u=f);break}e&&u&&null===g.alternate&&t(s,u),o=i(g,o,p),null===d?c=g:d.sibling=g,d=g,u=f}if(p===r.length)return n(s,u),is&&Za(s,p),c;if(null===u){for(;p<r.length;p++)null!==(u=h(s,r[p],l))&&(o=i(u,o,p),null===d?c=u:d.sibling=u,d=u);return is&&Za(s,p),c}for(u=a(u);p<r.length;p++)null!==(f=v(u,s,p,r[p],l))&&(e&&null!==f.alternate&&u.delete(null===f.key?p:f.key),o=i(f,o,p),null===d?c=f:d.sibling=f,d=f);return e&&u.forEach(function(e){return t(s,e)}),is&&Za(s,p),c}(l,c,d,u);if(T(d)){if("function"!==typeof(b=T(d)))throw Error(o(150));return function(s,r,l,c){if(null==l)throw Error(o(151));for(var d=null,u=null,p=r,f=r=0,g=null,y=l.next();null!==p&&!y.done;f++,y=l.next()){p.index>f?(g=p,p=null):g=p.sibling;var b=m(s,p,y.value,c);if(null===b){null===p&&(p=g);break}e&&p&&null===b.alternate&&t(s,p),r=i(b,r,f),null===u?d=b:u.sibling=b,u=b,p=g}if(y.done)return n(s,p),is&&Za(s,f),d;if(null===p){for(;!y.done;f++,y=l.next())null!==(y=h(s,y.value,c))&&(r=i(y,r,f),null===u?d=y:u.sibling=y,u=y);return is&&Za(s,f),d}for(p=a(p);!y.done;f++,y=l.next())null!==(y=v(p,s,f,y.value,c))&&(e&&null!==y.alternate&&p.delete(null===y.key?f:y.key),r=i(y,r,f),null===u?d=y:u.sibling=y,u=y);return e&&p.forEach(function(e){return t(s,e)}),is&&Za(s,f),d}(l,c,d=b.call(d),u)}if("function"===typeof d.then)return y(l,c,Yo(d),u);if(d.$$typeof===w)return y(l,c,Es(l,d),u);Zo(l,d)}return"string"===typeof d&&""!==d||"number"===typeof d||"bigint"===typeof d?(d=""+d,null!==c&&6===c.tag?(n(l,c.sibling),(u=s(c,d)).return=l,l=u):(n(l,c),(u=Ba(d,l.mode,u)).return=l,l=u),r(l)):n(l,c)}return function(e,t,n,a){try{Jo=0;var s=y(e,t,n,a);return Qo=null,s}catch(o){if(o===qs||o===Ws)throw o;var i=Da(29,o,null,e.mode);return i.lanes=a,i.return=e,i}}}var nr=tr(!0),ar=tr(!1),sr=X(null),ir=null;function or(e){var t=e.alternate;z(dr,1&dr.current),z(sr,e),null===ir&&(null===t||null!==mi.current||null!==t.memoizedState)&&(ir=e)}function rr(e){if(22===e.tag){if(z(dr,dr.current),z(sr,e),null===ir){var t=e.alternate;null!==t&&null!==t.memoizedState&&(ir=e)}}else lr()}function lr(){z(dr,dr.current),z(sr,sr.current)}function cr(e){U(sr),ir===e&&(ir=null),U(dr)}var dr=X(0);function ur(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||gu(n)))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function hr(e,t,n,a){n=null===(n=n(a,t=e.memoizedState))||void 0===n?t:h({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var mr={enqueueSetState:function(e,t,n){e=e._reactInternals;var a=Oc(),s=si(a);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=ii(e,s,a))&&(Dc(t,e,a),oi(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var a=Oc(),s=si(a);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=ii(e,s,a))&&(Dc(t,e,a),oi(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Oc(),a=si(n);a.tag=2,void 0!==t&&null!==t&&(a.callback=t),null!==(t=ii(e,a,n))&&(Dc(t,e,n),oi(t,e,n))}};function pr(e,t,n,a,s,i,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(a,i,o):!t.prototype||!t.prototype.isPureReactComponent||(!Jn(n,a)||!Jn(s,i))}function fr(e,t,n,a){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,a),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,a),t.state!==e&&mr.enqueueReplaceState(t,t.state,null)}function gr(e,t){var n=t;if("ref"in t)for(var a in n={},t)"ref"!==a&&(n[a]=t[a]);if(e=e.defaultProps)for(var s in n===t&&(n=h({},n)),e)void 0===n[s]&&(n[s]=e[s]);return n}var vr="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function yr(e){vr(e)}function br(e){console.error(e)}function xr(e){vr(e)}function wr(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(n){setTimeout(function(){throw n})}}function jr(e,t,n){try{(0,e.onCaughtError)(n.value,{componentStack:n.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(a){setTimeout(function(){throw a})}}function Nr(e,t,n){return(n=si(n)).tag=3,n.payload={element:null},n.callback=function(){wr(e,t)},n}function Sr(e){return(e=si(e)).tag=3,e}function Cr(e,t,n,a){var s=n.type.getDerivedStateFromError;if("function"===typeof s){var i=a.value;e.payload=function(){return s(i)},e.callback=function(){jr(t,n,a)}}var o=n.stateNode;null!==o&&"function"===typeof o.componentDidCatch&&(e.callback=function(){jr(t,n,a),"function"!==typeof s&&(null===Sc?Sc=new Set([this]):Sc.add(this));var e=a.stack;this.componentDidCatch(a.value,{componentStack:null!==e?e:""})})}var kr=Error(o(461)),Er=!1;function Ar(e,t,n,a){t.child=null===e?ar(t,null,n,a):nr(t,e.child,n,a)}function Pr(e,t,n,a,s){n=n.render;var i=t.ref;if("ref"in a){var o={};for(var r in a)"ref"!==r&&(o[r]=a[r])}else o=a;return Cs(t),a=Li(e,t,n,o,i,s),r=_i(),null===e||Er?(is&&r&&ts(t),t.flags|=1,Ar(e,t,a,s),t.child):(Di(e,t,s),Qr(e,t,s))}function Tr(e,t,n,a,s){if(null===e){var i=n.type;return"function"!==typeof i||Ra(i)||void 0!==i.defaultProps||null!==n.compare?((e=Ua(n.type,null,a,t,t.mode,s)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=i,Lr(e,t,i,a,s))}if(i=e.child,!Jr(e,s)){var o=i.memoizedProps;if((n=null!==(n=n.compare)?n:Jn)(o,a)&&e.ref===t.ref)return Qr(e,t,s)}return t.flags|=1,(e=Fa(i,a)).ref=t.ref,e.return=t,t.child=e}function Lr(e,t,n,a,s){if(null!==e){var i=e.memoizedProps;if(Jn(i,a)&&e.ref===t.ref){if(Er=!1,t.pendingProps=a=i,!Jr(e,s))return t.lanes=e.lanes,Qr(e,t,s);0!==(131072&e.flags)&&(Er=!0)}}return _r(e,t,n,a,s)}function Mr(e,t,n){var a=t.pendingProps,s=a.children,i=null!==e?e.memoizedState:null;if("hidden"===a.mode){if(0!==(128&t.flags)){if(a=null!==i?i.baseLanes|n:n,null!==e){for(s=t.child=e.child,i=0;null!==s;)i=i|s.lanes|s.childLanes,s=s.sibling;t.childLanes=i&~a}else t.childLanes=0,t.child=null;return Ir(e,t,a,n)}if(0===(536870912&n))return t.lanes=t.childLanes=536870912,Ir(e,t,null!==i?i.baseLanes|n:n,n);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&Hs(0,null!==i?i.cachePool:null),null!==i?fi(t,i):gi(),rr(t)}else null!==i?(Hs(0,i.cachePool),fi(t,i),lr(),t.memoizedState=null):(null!==e&&Hs(0,null),gi(),lr());return Ar(e,t,s,n),t.child}function Ir(e,t,n,a){var s=Bs();return s=null===s?null:{parent:Ms._currentValue,pool:s},t.memoizedState={baseLanes:n,cachePool:s},null!==e&&Hs(0,null),gi(),rr(t),null!==e&&Ns(e,t,a,!0),null}function Or(e,t){var n=t.ref;if(null===n)null!==e&&null!==e.ref&&(t.flags|=4194816);else{if("function"!==typeof n&&"object"!==typeof n)throw Error(o(284));null!==e&&e.ref===n||(t.flags|=4194816)}}function _r(e,t,n,a,s){return Cs(t),n=Li(e,t,n,a,void 0,s),a=_i(),null===e||Er?(is&&a&&ts(t),t.flags|=1,Ar(e,t,n,s),t.child):(Di(e,t,s),Qr(e,t,s))}function Dr(e,t,n,a,s,i){return Cs(t),t.updateQueue=null,n=Ii(t,a,n,s),Mi(e),a=_i(),null===e||Er?(is&&a&&ts(t),t.flags|=1,Ar(e,t,n,i),t.child):(Di(e,t,i),Qr(e,t,i))}function Rr(e,t,n,a,s){if(Cs(t),null===t.stateNode){var i=Oa,o=n.contextType;"object"===typeof o&&null!==o&&(i=ks(o)),i=new n(a,i),t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,i.updater=mr,t.stateNode=i,i._reactInternals=t,(i=t.stateNode).props=a,i.state=t.memoizedState,i.refs={},ni(t),o=n.contextType,i.context="object"===typeof o&&null!==o?ks(o):Oa,i.state=t.memoizedState,"function"===typeof(o=n.getDerivedStateFromProps)&&(hr(t,n,o,a),i.state=t.memoizedState),"function"===typeof n.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(o=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),o!==i.state&&mr.enqueueReplaceState(i,i.state,null),di(t,a,i,s),ci(),i.state=t.memoizedState),"function"===typeof i.componentDidMount&&(t.flags|=4194308),a=!0}else if(null===e){i=t.stateNode;var r=t.memoizedProps,l=gr(n,r);i.props=l;var c=i.context,d=n.contextType;o=Oa,"object"===typeof d&&null!==d&&(o=ks(d));var u=n.getDerivedStateFromProps;d="function"===typeof u||"function"===typeof i.getSnapshotBeforeUpdate,r=t.pendingProps!==r,d||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(r||c!==o)&&fr(t,i,a,o),ti=!1;var h=t.memoizedState;i.state=h,di(t,a,i,s),ci(),c=t.memoizedState,r||h!==c||ti?("function"===typeof u&&(hr(t,n,u,a),c=t.memoizedState),(l=ti||pr(t,n,l,a,h,c,o))?(d||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||("function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount()),"function"===typeof i.componentDidMount&&(t.flags|=4194308)):("function"===typeof i.componentDidMount&&(t.flags|=4194308),t.memoizedProps=a,t.memoizedState=c),i.props=a,i.state=c,i.context=o,a=l):("function"===typeof i.componentDidMount&&(t.flags|=4194308),a=!1)}else{i=t.stateNode,ai(e,t),d=gr(n,o=t.memoizedProps),i.props=d,u=t.pendingProps,h=i.context,c=n.contextType,l=Oa,"object"===typeof c&&null!==c&&(l=ks(c)),(c="function"===typeof(r=n.getDerivedStateFromProps)||"function"===typeof i.getSnapshotBeforeUpdate)||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(o!==u||h!==l)&&fr(t,i,a,l),ti=!1,h=t.memoizedState,i.state=h,di(t,a,i,s),ci();var m=t.memoizedState;o!==u||h!==m||ti||null!==e&&null!==e.dependencies&&Ss(e.dependencies)?("function"===typeof r&&(hr(t,n,r,a),m=t.memoizedState),(d=ti||pr(t,n,d,a,h,m,l)||null!==e&&null!==e.dependencies&&Ss(e.dependencies))?(c||"function"!==typeof i.UNSAFE_componentWillUpdate&&"function"!==typeof i.componentWillUpdate||("function"===typeof i.componentWillUpdate&&i.componentWillUpdate(a,m,l),"function"===typeof i.UNSAFE_componentWillUpdate&&i.UNSAFE_componentWillUpdate(a,m,l)),"function"===typeof i.componentDidUpdate&&(t.flags|=4),"function"===typeof i.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof i.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=a,t.memoizedState=m),i.props=a,i.state=m,i.context=l,a=d):("function"!==typeof i.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),a=!1)}return i=a,Or(e,t),a=0!==(128&t.flags),i||a?(i=t.stateNode,n=a&&"function"!==typeof n.getDerivedStateFromError?null:i.render(),t.flags|=1,null!==e&&a?(t.child=nr(t,e.child,null,s),t.child=nr(t,null,n,s)):Ar(e,t,n,s),t.memoizedState=i.state,e=t.child):e=Qr(e,t,s),e}function Fr(e,t,n,a){return ms(),t.flags|=256,Ar(e,t,n,a),t.child}var Xr={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ur(e){return{baseLanes:e,cachePool:Vs()}}function zr(e,t,n){return e=null!==e?e.childLanes&~n:0,t&&(e|=gc),e}function Br(e,t,n){var a,s=t.pendingProps,i=!1,r=0!==(128&t.flags);if((a=r)||(a=(null===e||null!==e.memoizedState)&&0!==(2&dr.current)),a&&(i=!0,t.flags&=-129),a=0!==(32&t.flags),t.flags&=-33,null===e){if(is){if(i?or(t):lr(),is){var l,c=ss;if(l=c){e:{for(l=c,c=rs;8!==l.nodeType;){if(!c){c=null;break e}if(null===(l=vu(l.nextSibling))){c=null;break e}}c=l}null!==c?(t.memoizedState={dehydrated:c,treeContext:null!==Ja?{id:Ya,overflow:$a}:null,retryLane:536870912,hydrationErrors:null},(l=Da(18,null,null,0)).stateNode=c,l.return=t,t.child=l,as=t,ss=null,l=!0):l=!1}l||cs(t)}if(null!==(c=t.memoizedState)&&null!==(c=c.dehydrated))return gu(c)?t.lanes=32:t.lanes=536870912,null;cr(t)}return c=s.children,s=s.fallback,i?(lr(),c=Vr({mode:"hidden",children:c},i=t.mode),s=za(s,i,n,null),c.return=t,s.return=t,c.sibling=s,t.child=c,(i=t.child).memoizedState=Ur(n),i.childLanes=zr(e,a,n),t.memoizedState=Xr,s):(or(t),Hr(t,c))}if(null!==(l=e.memoizedState)&&null!==(c=l.dehydrated)){if(r)256&t.flags?(or(t),t.flags&=-257,t=qr(e,t,n)):null!==t.memoizedState?(lr(),t.child=e.child,t.flags|=128,t=null):(lr(),i=s.fallback,c=t.mode,s=Vr({mode:"visible",children:s.children},c),(i=za(i,c,n,null)).flags|=2,s.return=t,i.return=t,s.sibling=i,t.child=s,nr(t,e.child,null,n),(s=t.child).memoizedState=Ur(n),s.childLanes=zr(e,a,n),t.memoizedState=Xr,t=i);else if(or(t),gu(c)){if(a=c.nextSibling&&c.nextSibling.dataset)var d=a.dgst;a=d,(s=Error(o(419))).stack="",s.digest=a,fs({value:s,source:null,stack:null}),t=qr(e,t,n)}else if(Er||Ns(e,t,n,!1),a=0!==(n&e.childLanes),Er||a){if(null!==(a=ac)&&(0!==(s=0!==((s=0!==(42&(s=n&-n))?1:Ae(s))&(a.suspendedLanes|n))?0:s)&&s!==l.retryLane))throw l.retryLane=s,La(e,s),Dc(a,e,s),kr;"$?"===c.data||Wc(),t=qr(e,t,n)}else"$?"===c.data?(t.flags|=192,t.child=e.child,t=null):(e=l.treeContext,ss=vu(c.nextSibling),as=t,is=!0,os=null,rs=!1,null!==e&&(Ka[Qa++]=Ya,Ka[Qa++]=$a,Ka[Qa++]=Ja,Ya=e.id,$a=e.overflow,Ja=t),(t=Hr(t,s.children)).flags|=4096);return t}return i?(lr(),i=s.fallback,c=t.mode,d=(l=e.child).sibling,(s=Fa(l,{mode:"hidden",children:s.children})).subtreeFlags=65011712&l.subtreeFlags,null!==d?i=Fa(d,i):(i=za(i,c,n,null)).flags|=2,i.return=t,s.return=t,s.sibling=i,t.child=s,s=i,i=t.child,null===(c=e.child.memoizedState)?c=Ur(n):(null!==(l=c.cachePool)?(d=Ms._currentValue,l=l.parent!==d?{parent:d,pool:d}:l):l=Vs(),c={baseLanes:c.baseLanes|n,cachePool:l}),i.memoizedState=c,i.childLanes=zr(e,a,n),t.memoizedState=Xr,s):(or(t),e=(n=e.child).sibling,(n=Fa(n,{mode:"visible",children:s.children})).return=t,n.sibling=null,null!==e&&(null===(a=t.deletions)?(t.deletions=[e],t.flags|=16):a.push(e)),t.child=n,t.memoizedState=null,n)}function Hr(e,t){return(t=Vr({mode:"visible",children:t},e.mode)).return=e,e.child=t}function Vr(e,t){return(e=Da(22,e,null,t)).lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function qr(e,t,n){return nr(t,e.child,null,n),(e=Hr(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Gr(e,t,n){e.lanes|=t;var a=e.alternate;null!==a&&(a.lanes|=t),ws(e.return,t,n)}function Wr(e,t,n,a,s){var i=e.memoizedState;null===i?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:a,tail:n,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=a,i.tail=n,i.tailMode=s)}function Kr(e,t,n){var a=t.pendingProps,s=a.revealOrder,i=a.tail;if(Ar(e,t,a.children,n),0!==(2&(a=dr.current)))a=1&a|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Gr(e,n,t);else if(19===e.tag)Gr(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}a&=1}switch(z(dr,a),s){case"forwards":for(n=t.child,s=null;null!==n;)null!==(e=n.alternate)&&null===ur(e)&&(s=n),n=n.sibling;null===(n=s)?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),Wr(t,!1,s,n,i);break;case"backwards":for(n=null,s=t.child,t.child=null;null!==s;){if(null!==(e=s.alternate)&&null===ur(e)){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}Wr(t,!0,n,null,i);break;case"together":Wr(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Qr(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),mc|=t.lanes,0===(n&t.childLanes)){if(null===e)return null;if(Ns(e,t,n,!1),0===(n&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Fa(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Fa(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Jr(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!Ss(e))}function Yr(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps)Er=!0;else{if(!Jr(e,n)&&0===(128&t.flags))return Er=!1,function(e,t,n){switch(t.tag){case 3:G(t,t.stateNode.containerInfo),bs(0,Ms,e.memoizedState.cache),ms();break;case 27:case 5:K(t);break;case 4:G(t,t.stateNode.containerInfo);break;case 10:bs(0,t.type,t.memoizedProps.value);break;case 13:var a=t.memoizedState;if(null!==a)return null!==a.dehydrated?(or(t),t.flags|=128,null):0!==(n&t.child.childLanes)?Br(e,t,n):(or(t),null!==(e=Qr(e,t,n))?e.sibling:null);or(t);break;case 19:var s=0!==(128&e.flags);if((a=0!==(n&t.childLanes))||(Ns(e,t,n,!1),a=0!==(n&t.childLanes)),s){if(a)return Kr(e,t,n);t.flags|=128}if(null!==(s=t.memoizedState)&&(s.rendering=null,s.tail=null,s.lastEffect=null),z(dr,dr.current),a)break;return null;case 22:case 23:return t.lanes=0,Mr(e,t,n);case 24:bs(0,Ms,e.memoizedState.cache)}return Qr(e,t,n)}(e,t,n);Er=0!==(131072&e.flags)}else Er=!1,is&&0!==(1048576&t.flags)&&es(t,Wa,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var a=t.elementType,s=a._init;if(a=s(a._payload),t.type=a,"function"!==typeof a){if(void 0!==a&&null!==a){if((s=a.$$typeof)===j){t.tag=11,t=Pr(null,t,a,e,n);break e}if(s===C){t.tag=14,t=Tr(null,t,a,e,n);break e}}throw t=M(a)||a,Error(o(306,t,""))}Ra(a)?(e=gr(a,e),t.tag=1,t=Rr(null,t,a,e,n)):(t.tag=0,t=_r(null,t,a,e,n))}return t;case 0:return _r(e,t,t.type,t.pendingProps,n);case 1:return Rr(e,t,a=t.type,s=gr(a,t.pendingProps),n);case 3:e:{if(G(t,t.stateNode.containerInfo),null===e)throw Error(o(387));a=t.pendingProps;var i=t.memoizedState;s=i.element,ai(e,t),di(t,a,null,n);var r=t.memoizedState;if(a=r.cache,bs(0,Ms,a),a!==i.cache&&js(t,[Ms],n,!0),ci(),a=r.element,i.isDehydrated){if(i={element:a,isDehydrated:!1,cache:r.cache},t.updateQueue.baseState=i,t.memoizedState=i,256&t.flags){t=Fr(e,t,a,n);break e}if(a!==s){fs(s=Sa(Error(o(424)),t)),t=Fr(e,t,a,n);break e}if(9===(e=t.stateNode.containerInfo).nodeType)e=e.body;else e="HTML"===e.nodeName?e.ownerDocument.body:e;for(ss=vu(e.firstChild),as=t,is=!0,os=null,rs=!0,n=ar(t,null,a,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(ms(),a===s){t=Qr(e,t,n);break e}Ar(e,t,a,n)}t=t.child}return t;case 26:return Or(e,t),null===e?(n=Au(t.type,null,t.pendingProps,null))?t.memoizedState=n:is||(n=t.type,e=t.pendingProps,(a=au(V.current).createElement(n))[Me]=t,a[Ie]=e,eu(a,n,e),qe(a),t.stateNode=a):t.memoizedState=Au(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return K(t),null===e&&is&&(a=t.stateNode=xu(t.type,t.pendingProps,V.current),as=t,rs=!0,s=ss,mu(t.type)?(yu=s,ss=vu(a.firstChild)):ss=s),Ar(e,t,t.pendingProps.children,n),Or(e,t),null===e&&(t.flags|=4194304),t.child;case 5:return null===e&&is&&((s=a=ss)&&(null!==(a=function(e,t,n,a){for(;1===e.nodeType;){var s=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!a&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(a){if(!e[Xe])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(i=e.getAttribute("rel"))&&e.hasAttribute("data-precedence"))break;if(i!==s.rel||e.getAttribute("href")!==(null==s.href||""===s.href?null:s.href)||e.getAttribute("crossorigin")!==(null==s.crossOrigin?null:s.crossOrigin)||e.getAttribute("title")!==(null==s.title?null:s.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((i=e.getAttribute("src"))!==(null==s.src?null:s.src)||e.getAttribute("type")!==(null==s.type?null:s.type)||e.getAttribute("crossorigin")!==(null==s.crossOrigin?null:s.crossOrigin))&&i&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var i=null==s.name?null:""+s.name;if("hidden"===s.type&&e.getAttribute("name")===i)return e}if(null===(e=vu(e.nextSibling)))break}return null}(a,t.type,t.pendingProps,rs))?(t.stateNode=a,as=t,ss=vu(a.firstChild),rs=!1,s=!0):s=!1),s||cs(t)),K(t),s=t.type,i=t.pendingProps,r=null!==e?e.memoizedProps:null,a=i.children,ou(s,i)?a=null:null!==r&&ou(s,r)&&(t.flags|=32),null!==t.memoizedState&&(s=Li(e,t,Oi,null,null,n),Ku._currentValue=s),Or(e,t),Ar(e,t,a,n),t.child;case 6:return null===e&&is&&((e=n=ss)&&(null!==(n=function(e,t,n){if(""===t)return null;for(;3!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!n)return null;if(null===(e=vu(e.nextSibling)))return null}return e}(n,t.pendingProps,rs))?(t.stateNode=n,as=t,ss=null,e=!0):e=!1),e||cs(t)),null;case 13:return Br(e,t,n);case 4:return G(t,t.stateNode.containerInfo),a=t.pendingProps,null===e?t.child=nr(t,null,a,n):Ar(e,t,a,n),t.child;case 11:return Pr(e,t,t.type,t.pendingProps,n);case 7:return Ar(e,t,t.pendingProps,n),t.child;case 8:case 12:return Ar(e,t,t.pendingProps.children,n),t.child;case 10:return a=t.pendingProps,bs(0,t.type,a.value),Ar(e,t,a.children,n),t.child;case 9:return s=t.type._context,a=t.pendingProps.children,Cs(t),a=a(s=ks(s)),t.flags|=1,Ar(e,t,a,n),t.child;case 14:return Tr(e,t,t.type,t.pendingProps,n);case 15:return Lr(e,t,t.type,t.pendingProps,n);case 19:return Kr(e,t,n);case 31:return a=t.pendingProps,n=t.mode,a={mode:a.mode,children:a.children},null===e?((n=Vr(a,n)).ref=t.ref,t.child=n,n.return=t,t=n):((n=Fa(e.child,a)).ref=t.ref,t.child=n,n.return=t,t=n),t;case 22:return Mr(e,t,n);case 24:return Cs(t),a=ks(Ms),null===e?(null===(s=Bs())&&(s=ac,i=Is(),s.pooledCache=i,i.refCount++,null!==i&&(s.pooledCacheLanes|=n),s=i),t.memoizedState={parent:a,cache:s},ni(t),bs(0,Ms,s)):(0!==(e.lanes&n)&&(ai(e,t),di(t,null,null,n),ci()),s=e.memoizedState,i=t.memoizedState,s.parent!==a?(s={parent:a,cache:a},t.memoizedState=s,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=s),bs(0,Ms,a)):(a=i.cache,bs(0,Ms,a),a!==s.cache&&js(t,[Ms],n,!0))),Ar(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(o(156,t.tag))}function $r(e){e.flags|=4}function Zr(e,t){if("stylesheet"!==t.type||0!==(4&t.state.loading))e.flags&=-16777217;else if(e.flags|=16777216,!zu(t)){if(null!==(t=sr.current)&&((4194048&ic)===ic?null!==ir:(62914560&ic)!==ic&&0===(536870912&ic)||t!==ir))throw $s=Ks,Gs;e.flags|=8192}}function el(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?Ne():536870912,e.lanes|=t,vc|=t)}function tl(e,t){if(!is)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var a=null;null!==n;)null!==n.alternate&&(a=n),n=n.sibling;null===a?t||null===e.tail?e.tail=null:e.tail.sibling=null:a.sibling=null}}function nl(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,a=0;if(t)for(var s=e.child;null!==s;)n|=s.lanes|s.childLanes,a|=65011712&s.subtreeFlags,a|=65011712&s.flags,s.return=e,s=s.sibling;else for(s=e.child;null!==s;)n|=s.lanes|s.childLanes,a|=s.subtreeFlags,a|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=a,e.childLanes=n,t}function al(e,t,n){var a=t.pendingProps;switch(ns(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return nl(t),null;case 3:return n=t.stateNode,a=null,null!==e&&(a=e.memoizedState.cache),t.memoizedState.cache!==a&&(t.flags|=2048),xs(Ms),W(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(hs(t)?$r(t):null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,ps())),nl(t),null;case 26:return n=t.memoizedState,null===e?($r(t),null!==n?(nl(t),Zr(t,n)):(nl(t),t.flags&=-16777217)):n?n!==e.memoizedState?($r(t),nl(t),Zr(t,n)):(nl(t),t.flags&=-16777217):(e.memoizedProps!==a&&$r(t),nl(t),t.flags&=-16777217),null;case 27:Q(t),n=V.current;var s=t.type;if(null!==e&&null!=t.stateNode)e.memoizedProps!==a&&$r(t);else{if(!a){if(null===t.stateNode)throw Error(o(166));return nl(t),null}e=B.current,hs(t)?ds(t):(e=xu(s,a,n),t.stateNode=e,$r(t))}return nl(t),null;case 5:if(Q(t),n=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==a&&$r(t);else{if(!a){if(null===t.stateNode)throw Error(o(166));return nl(t),null}if(e=B.current,hs(t))ds(t);else{switch(s=au(V.current),e){case 1:e=s.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:e=s.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":e=s.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":e=s.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":(e=s.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e="string"===typeof a.is?s.createElement("select",{is:a.is}):s.createElement("select"),a.multiple?e.multiple=!0:a.size&&(e.size=a.size);break;default:e="string"===typeof a.is?s.createElement(n,{is:a.is}):s.createElement(n)}}e[Me]=t,e[Ie]=a;e:for(s=t.child;null!==s;){if(5===s.tag||6===s.tag)e.appendChild(s.stateNode);else if(4!==s.tag&&27!==s.tag&&null!==s.child){s.child.return=s,s=s.child;continue}if(s===t)break e;for(;null===s.sibling;){if(null===s.return||s.return===t)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}t.stateNode=e;e:switch(eu(e,n,a),n){case"button":case"input":case"select":case"textarea":e=!!a.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&$r(t)}}return nl(t),t.flags&=-16777217,null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==a&&$r(t);else{if("string"!==typeof a&&null===t.stateNode)throw Error(o(166));if(e=V.current,hs(t)){if(e=t.stateNode,n=t.memoizedProps,a=null,null!==(s=as))switch(s.tag){case 27:case 5:a=s.memoizedProps}e[Me]=t,(e=!!(e.nodeValue===n||null!==a&&!0===a.suppressHydrationWarning||Jd(e.nodeValue,n)))||cs(t)}else(e=au(e).createTextNode(a))[Me]=t,t.stateNode=e}return nl(t),null;case 13:if(a=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(s=hs(t),null!==a&&null!==a.dehydrated){if(null===e){if(!s)throw Error(o(318));if(!(s=null!==(s=t.memoizedState)?s.dehydrated:null))throw Error(o(317));s[Me]=t}else ms(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;nl(t),s=!1}else s=ps(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=s),s=!0;if(!s)return 256&t.flags?(cr(t),t):(cr(t),null)}if(cr(t),0!==(128&t.flags))return t.lanes=n,t;if(n=null!==a,e=null!==e&&null!==e.memoizedState,n){s=null,null!==(a=t.child).alternate&&null!==a.alternate.memoizedState&&null!==a.alternate.memoizedState.cachePool&&(s=a.alternate.memoizedState.cachePool.pool);var i=null;null!==a.memoizedState&&null!==a.memoizedState.cachePool&&(i=a.memoizedState.cachePool.pool),i!==s&&(a.flags|=2048)}return n!==e&&n&&(t.child.flags|=8192),el(t,t.updateQueue),nl(t),null;case 4:return W(),null===e&&Ud(t.stateNode.containerInfo),nl(t),null;case 10:return xs(t.type),nl(t),null;case 19:if(U(dr),null===(s=t.memoizedState))return nl(t),null;if(a=0!==(128&t.flags),null===(i=s.rendering))if(a)tl(s,!1);else{if(0!==hc||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(i=ur(e))){for(t.flags|=128,tl(s,!1),e=i.updateQueue,t.updateQueue=e,el(t,e),t.subtreeFlags=0,e=n,n=t.child;null!==n;)Xa(n,e),n=n.sibling;return z(dr,1&dr.current|2),t.child}e=e.sibling}null!==s.tail&&te()>jc&&(t.flags|=128,a=!0,tl(s,!1),t.lanes=4194304)}else{if(!a)if(null!==(e=ur(i))){if(t.flags|=128,a=!0,e=e.updateQueue,t.updateQueue=e,el(t,e),tl(s,!0),null===s.tail&&"hidden"===s.tailMode&&!i.alternate&&!is)return nl(t),null}else 2*te()-s.renderingStartTime>jc&&536870912!==n&&(t.flags|=128,a=!0,tl(s,!1),t.lanes=4194304);s.isBackwards?(i.sibling=t.child,t.child=i):(null!==(e=s.last)?e.sibling=i:t.child=i,s.last=i)}return null!==s.tail?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=te(),t.sibling=null,e=dr.current,z(dr,a?1&e|2:1&e),t):(nl(t),null);case 22:case 23:return cr(t),vi(),a=null!==t.memoizedState,null!==e?null!==e.memoizedState!==a&&(t.flags|=8192):a&&(t.flags|=8192),a?0!==(536870912&n)&&0===(128&t.flags)&&(nl(t),6&t.subtreeFlags&&(t.flags|=8192)):nl(t),null!==(n=t.updateQueue)&&el(t,n.retryQueue),n=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),a=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(a=t.memoizedState.cachePool.pool),a!==n&&(t.flags|=2048),null!==e&&U(zs),null;case 24:return n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),xs(Ms),nl(t),null;case 25:case 30:return null}throw Error(o(156,t.tag))}function sl(e,t){switch(ns(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return xs(Ms),W(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return Q(t),null;case 13:if(cr(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(o(340));ms()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return U(dr),null;case 4:return W(),null;case 10:return xs(t.type),null;case 22:case 23:return cr(t),vi(),null!==e&&U(zs),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return xs(Ms),null;default:return null}}function il(e,t){switch(ns(t),t.tag){case 3:xs(Ms),W();break;case 26:case 27:case 5:Q(t);break;case 4:W();break;case 13:cr(t);break;case 19:U(dr);break;case 10:xs(t.type);break;case 22:case 23:cr(t),vi(),null!==e&&U(zs);break;case 24:xs(Ms)}}function ol(e,t){try{var n=t.updateQueue,a=null!==n?n.lastEffect:null;if(null!==a){var s=a.next;n=s;do{if((n.tag&e)===e){a=void 0;var i=n.create,o=n.inst;a=i(),o.destroy=a}n=n.next}while(n!==s)}}catch(r){dd(t,t.return,r)}}function rl(e,t,n){try{var a=t.updateQueue,s=null!==a?a.lastEffect:null;if(null!==s){var i=s.next;a=i;do{if((a.tag&e)===e){var o=a.inst,r=o.destroy;if(void 0!==r){o.destroy=void 0,s=t;var l=n,c=r;try{c()}catch(d){dd(s,l,d)}}}a=a.next}while(a!==i)}}catch(d){dd(t,t.return,d)}}function ll(e){var t=e.updateQueue;if(null!==t){var n=e.stateNode;try{hi(t,n)}catch(a){dd(e,e.return,a)}}}function cl(e,t,n){n.props=gr(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(a){dd(e,t,a)}}function dl(e,t){try{var n=e.ref;if(null!==n){switch(e.tag){case 26:case 27:case 5:var a=e.stateNode;break;default:a=e.stateNode}"function"===typeof n?e.refCleanup=n(a):n.current=a}}catch(s){dd(e,t,s)}}function ul(e,t){var n=e.ref,a=e.refCleanup;if(null!==n)if("function"===typeof a)try{a()}catch(s){dd(e,t,s)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"===typeof n)try{n(null)}catch(i){dd(e,t,i)}else n.current=null}function hl(e){var t=e.type,n=e.memoizedProps,a=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&a.focus();break e;case"img":n.src?a.src=n.src:n.srcSet&&(a.srcset=n.srcSet)}}catch(s){dd(e,e.return,s)}}function ml(e,t,n){try{var a=e.stateNode;!function(e,t,n,a){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var s=null,i=null,r=null,l=null,c=null,d=null,u=null;for(p in n){var h=n[p];if(n.hasOwnProperty(p)&&null!=h)switch(p){case"checked":case"value":break;case"defaultValue":c=h;default:a.hasOwnProperty(p)||$d(e,t,p,null,a,h)}}for(var m in a){var p=a[m];if(h=n[m],a.hasOwnProperty(m)&&(null!=p||null!=h))switch(m){case"type":i=p;break;case"name":s=p;break;case"checked":d=p;break;case"defaultChecked":u=p;break;case"value":r=p;break;case"defaultValue":l=p;break;case"children":case"dangerouslySetInnerHTML":if(null!=p)throw Error(o(137,t));break;default:p!==h&&$d(e,t,m,p,a,h)}}return void gt(e,r,l,c,d,u,i,s);case"select":for(i in p=r=l=m=null,n)if(c=n[i],n.hasOwnProperty(i)&&null!=c)switch(i){case"value":break;case"multiple":p=c;default:a.hasOwnProperty(i)||$d(e,t,i,null,a,c)}for(s in a)if(i=a[s],c=n[s],a.hasOwnProperty(s)&&(null!=i||null!=c))switch(s){case"value":m=i;break;case"defaultValue":l=i;break;case"multiple":r=i;default:i!==c&&$d(e,t,s,i,a,c)}return t=l,n=r,a=p,void(null!=m?bt(e,!!n,m,!1):!!a!==!!n&&(null!=t?bt(e,!!n,t,!0):bt(e,!!n,n?[]:"",!1)));case"textarea":for(l in p=m=null,n)if(s=n[l],n.hasOwnProperty(l)&&null!=s&&!a.hasOwnProperty(l))switch(l){case"value":case"children":break;default:$d(e,t,l,null,a,s)}for(r in a)if(s=a[r],i=n[r],a.hasOwnProperty(r)&&(null!=s||null!=i))switch(r){case"value":m=s;break;case"defaultValue":p=s;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=s)throw Error(o(91));break;default:s!==i&&$d(e,t,r,s,a,i)}return void xt(e,m,p);case"option":for(var f in n)if(m=n[f],n.hasOwnProperty(f)&&null!=m&&!a.hasOwnProperty(f))if("selected"===f)e.selected=!1;else $d(e,t,f,null,a,m);for(c in a)if(m=a[c],p=n[c],a.hasOwnProperty(c)&&m!==p&&(null!=m||null!=p))if("selected"===c)e.selected=m&&"function"!==typeof m&&"symbol"!==typeof m;else $d(e,t,c,m,a,p);return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var g in n)m=n[g],n.hasOwnProperty(g)&&null!=m&&!a.hasOwnProperty(g)&&$d(e,t,g,null,a,m);for(d in a)if(m=a[d],p=n[d],a.hasOwnProperty(d)&&m!==p&&(null!=m||null!=p))switch(d){case"children":case"dangerouslySetInnerHTML":if(null!=m)throw Error(o(137,t));break;default:$d(e,t,d,m,a,p)}return;default:if(kt(t)){for(var v in n)m=n[v],n.hasOwnProperty(v)&&void 0!==m&&!a.hasOwnProperty(v)&&Zd(e,t,v,void 0,a,m);for(u in a)m=a[u],p=n[u],!a.hasOwnProperty(u)||m===p||void 0===m&&void 0===p||Zd(e,t,u,m,a,p);return}}for(var y in n)m=n[y],n.hasOwnProperty(y)&&null!=m&&!a.hasOwnProperty(y)&&$d(e,t,y,null,a,m);for(h in a)m=a[h],p=n[h],!a.hasOwnProperty(h)||m===p||null==m&&null==p||$d(e,t,h,m,a,p)}(a,e.type,n,t),a[Ie]=t}catch(s){dd(e,e.return,s)}}function pl(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag&&mu(e.type)||4===e.tag}function fl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||pl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(27===e.tag&&mu(e.type))continue e;if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function gl(e,t,n){var a=e.tag;if(5===a||6===a)e=e.stateNode,t?(9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).insertBefore(e,t):((t=9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Yd));else if(4!==a&&(27===a&&mu(e.type)&&(n=e.stateNode,t=null),null!==(e=e.child)))for(gl(e,t,n),e=e.sibling;null!==e;)gl(e,t,n),e=e.sibling}function vl(e,t,n){var a=e.tag;if(5===a||6===a)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==a&&(27===a&&mu(e.type)&&(n=e.stateNode),null!==(e=e.child)))for(vl(e,t,n),e=e.sibling;null!==e;)vl(e,t,n),e=e.sibling}function yl(e){var t=e.stateNode,n=e.memoizedProps;try{for(var a=e.type,s=t.attributes;s.length;)t.removeAttributeNode(s[0]);eu(t,a,n),t[Me]=e,t[Ie]=n}catch(i){dd(e,e.return,i)}}var bl=!1,xl=!1,wl=!1,jl="function"===typeof WeakSet?WeakSet:Set,Nl=null;function Sl(e,t,n){var a=n.flags;switch(n.tag){case 0:case 11:case 15:Rl(e,n),4&a&&ol(5,n);break;case 1:if(Rl(e,n),4&a)if(e=n.stateNode,null===t)try{e.componentDidMount()}catch(o){dd(n,n.return,o)}else{var s=gr(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(s,t,e.__reactInternalSnapshotBeforeUpdate)}catch(r){dd(n,n.return,r)}}64&a&&ll(n),512&a&&dl(n,n.return);break;case 3:if(Rl(e,n),64&a&&null!==(e=n.updateQueue)){if(t=null,null!==n.child)switch(n.child.tag){case 27:case 5:case 1:t=n.child.stateNode}try{hi(e,t)}catch(o){dd(n,n.return,o)}}break;case 27:null===t&&4&a&&yl(n);case 26:case 5:Rl(e,n),null===t&&4&a&&hl(n),512&a&&dl(n,n.return);break;case 12:Rl(e,n);break;case 13:Rl(e,n),4&a&&Tl(e,n),64&a&&(null!==(e=n.memoizedState)&&(null!==(e=e.dehydrated)&&function(e,t){var n=e.ownerDocument;if("$?"!==e.data||"complete"===n.readyState)t();else{var a=function(){t(),n.removeEventListener("DOMContentLoaded",a)};n.addEventListener("DOMContentLoaded",a),e._reactRetry=a}}(e,n=pd.bind(null,n))));break;case 22:if(!(a=null!==n.memoizedState||bl)){t=null!==t&&null!==t.memoizedState||xl,s=bl;var i=xl;bl=a,(xl=t)&&!i?Xl(e,n,0!==(8772&n.subtreeFlags)):Rl(e,n),bl=s,xl=i}break;case 30:break;default:Rl(e,n)}}function Cl(e){var t=e.alternate;null!==t&&(e.alternate=null,Cl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&Ue(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var kl=null,El=!1;function Al(e,t,n){for(n=n.child;null!==n;)Pl(e,t,n),n=n.sibling}function Pl(e,t,n){if(ue&&"function"===typeof ue.onCommitFiberUnmount)try{ue.onCommitFiberUnmount(de,n)}catch(i){}switch(n.tag){case 26:xl||ul(n,t),Al(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode).parentNode.removeChild(n);break;case 27:xl||ul(n,t);var a=kl,s=El;mu(n.type)&&(kl=n.stateNode,El=!1),Al(e,t,n),wu(n.stateNode),kl=a,El=s;break;case 5:xl||ul(n,t);case 6:if(a=kl,s=El,kl=null,Al(e,t,n),El=s,null!==(kl=a))if(El)try{(9===kl.nodeType?kl.body:"HTML"===kl.nodeName?kl.ownerDocument.body:kl).removeChild(n.stateNode)}catch(o){dd(n,t,o)}else try{kl.removeChild(n.stateNode)}catch(o){dd(n,t,o)}break;case 18:null!==kl&&(El?(pu(9===(e=kl).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e,n.stateNode),Eh(e)):pu(kl,n.stateNode));break;case 4:a=kl,s=El,kl=n.stateNode.containerInfo,El=!0,Al(e,t,n),kl=a,El=s;break;case 0:case 11:case 14:case 15:xl||rl(2,n,t),xl||rl(4,n,t),Al(e,t,n);break;case 1:xl||(ul(n,t),"function"===typeof(a=n.stateNode).componentWillUnmount&&cl(n,t,a)),Al(e,t,n);break;case 21:Al(e,t,n);break;case 22:xl=(a=xl)||null!==n.memoizedState,Al(e,t,n),xl=a;break;default:Al(e,t,n)}}function Tl(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&(null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))))try{Eh(e)}catch(n){dd(t,t.return,n)}}function Ll(e,t){var n=function(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new jl),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new jl),t;default:throw Error(o(435,e.tag))}}(e);t.forEach(function(t){var a=fd.bind(null,e,t);n.has(t)||(n.add(t),t.then(a,a))})}function Ml(e,t){var n=t.deletions;if(null!==n)for(var a=0;a<n.length;a++){var s=n[a],i=e,r=t,l=r;e:for(;null!==l;){switch(l.tag){case 27:if(mu(l.type)){kl=l.stateNode,El=!1;break e}break;case 5:kl=l.stateNode,El=!1;break e;case 3:case 4:kl=l.stateNode.containerInfo,El=!0;break e}l=l.return}if(null===kl)throw Error(o(160));Pl(i,r,s),kl=null,El=!1,null!==(i=s.alternate)&&(i.return=null),s.return=null}if(13878&t.subtreeFlags)for(t=t.child;null!==t;)Ol(t,e),t=t.sibling}var Il=null;function Ol(e,t){var n=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Ml(t,e),_l(e),4&a&&(rl(3,e,e.return),ol(3,e),rl(5,e,e.return));break;case 1:Ml(t,e),_l(e),512&a&&(xl||null===n||ul(n,n.return)),64&a&&bl&&(null!==(e=e.updateQueue)&&(null!==(a=e.callbacks)&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===n?a:n.concat(a))));break;case 26:var s=Il;if(Ml(t,e),_l(e),512&a&&(xl||null===n||ul(n,n.return)),4&a){var i=null!==n?n.memoizedState:null;if(a=e.memoizedState,null===n)if(null===a)if(null===e.stateNode){e:{a=e.type,n=e.memoizedProps,s=s.ownerDocument||s;t:switch(a){case"title":(!(i=s.getElementsByTagName("title")[0])||i[Xe]||i[Me]||"http://www.w3.org/2000/svg"===i.namespaceURI||i.hasAttribute("itemprop"))&&(i=s.createElement(a),s.head.insertBefore(i,s.querySelector("head > title"))),eu(i,a,n),i[Me]=e,qe(i),a=i;break e;case"link":var r=Xu("link","href",s).get(a+(n.href||""));if(r)for(var l=0;l<r.length;l++)if((i=r[l]).getAttribute("href")===(null==n.href||""===n.href?null:n.href)&&i.getAttribute("rel")===(null==n.rel?null:n.rel)&&i.getAttribute("title")===(null==n.title?null:n.title)&&i.getAttribute("crossorigin")===(null==n.crossOrigin?null:n.crossOrigin)){r.splice(l,1);break t}eu(i=s.createElement(a),a,n),s.head.appendChild(i);break;case"meta":if(r=Xu("meta","content",s).get(a+(n.content||"")))for(l=0;l<r.length;l++)if((i=r[l]).getAttribute("content")===(null==n.content?null:""+n.content)&&i.getAttribute("name")===(null==n.name?null:n.name)&&i.getAttribute("property")===(null==n.property?null:n.property)&&i.getAttribute("http-equiv")===(null==n.httpEquiv?null:n.httpEquiv)&&i.getAttribute("charset")===(null==n.charSet?null:n.charSet)){r.splice(l,1);break t}eu(i=s.createElement(a),a,n),s.head.appendChild(i);break;default:throw Error(o(468,a))}i[Me]=e,qe(i),a=i}e.stateNode=a}else Uu(s,e.type,e.stateNode);else e.stateNode=Ou(s,a,e.memoizedProps);else i!==a?(null===i?null!==n.stateNode&&(n=n.stateNode).parentNode.removeChild(n):i.count--,null===a?Uu(s,e.type,e.stateNode):Ou(s,a,e.memoizedProps)):null===a&&null!==e.stateNode&&ml(e,e.memoizedProps,n.memoizedProps)}break;case 27:Ml(t,e),_l(e),512&a&&(xl||null===n||ul(n,n.return)),null!==n&&4&a&&ml(e,e.memoizedProps,n.memoizedProps);break;case 5:if(Ml(t,e),_l(e),512&a&&(xl||null===n||ul(n,n.return)),32&e.flags){s=e.stateNode;try{jt(s,"")}catch(p){dd(e,e.return,p)}}4&a&&null!=e.stateNode&&ml(e,s=e.memoizedProps,null!==n?n.memoizedProps:s),1024&a&&(wl=!0);break;case 6:if(Ml(t,e),_l(e),4&a){if(null===e.stateNode)throw Error(o(162));a=e.memoizedProps,n=e.stateNode;try{n.nodeValue=a}catch(p){dd(e,e.return,p)}}break;case 3:if(Fu=null,s=Il,Il=Su(t.containerInfo),Ml(t,e),Il=s,_l(e),4&a&&null!==n&&n.memoizedState.isDehydrated)try{Eh(t.containerInfo)}catch(p){dd(e,e.return,p)}wl&&(wl=!1,Dl(e));break;case 4:a=Il,Il=Su(e.stateNode.containerInfo),Ml(t,e),_l(e),Il=a;break;case 12:default:Ml(t,e),_l(e);break;case 13:Ml(t,e),_l(e),8192&e.child.flags&&null!==e.memoizedState!==(null!==n&&null!==n.memoizedState)&&(wc=te()),4&a&&(null!==(a=e.updateQueue)&&(e.updateQueue=null,Ll(e,a)));break;case 22:s=null!==e.memoizedState;var c=null!==n&&null!==n.memoizedState,d=bl,u=xl;if(bl=d||s,xl=u||c,Ml(t,e),xl=u,bl=d,_l(e),8192&a)e:for(t=e.stateNode,t._visibility=s?-2&t._visibility:1|t._visibility,s&&(null===n||c||bl||xl||Fl(e)),n=null,t=e;;){if(5===t.tag||26===t.tag){if(null===n){c=n=t;try{if(i=c.stateNode,s)"function"===typeof(r=i.style).setProperty?r.setProperty("display","none","important"):r.display="none";else{l=c.stateNode;var h=c.memoizedProps.style,m=void 0!==h&&null!==h&&h.hasOwnProperty("display")?h.display:null;l.style.display=null==m||"boolean"===typeof m?"":(""+m).trim()}}catch(p){dd(c,c.return,p)}}}else if(6===t.tag){if(null===n){c=t;try{c.stateNode.nodeValue=s?"":c.memoizedProps}catch(p){dd(c,c.return,p)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}4&a&&(null!==(a=e.updateQueue)&&(null!==(n=a.retryQueue)&&(a.retryQueue=null,Ll(e,n))));break;case 19:Ml(t,e),_l(e),4&a&&(null!==(a=e.updateQueue)&&(e.updateQueue=null,Ll(e,a)));case 30:case 21:}}function _l(e){var t=e.flags;if(2&t){try{for(var n,a=e.return;null!==a;){if(pl(a)){n=a;break}a=a.return}if(null==n)throw Error(o(160));switch(n.tag){case 27:var s=n.stateNode;vl(e,fl(e),s);break;case 5:var i=n.stateNode;32&n.flags&&(jt(i,""),n.flags&=-33),vl(e,fl(e),i);break;case 3:case 4:var r=n.stateNode.containerInfo;gl(e,fl(e),r);break;default:throw Error(o(161))}}catch(l){dd(e,e.return,l)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function Dl(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;Dl(t),5===t.tag&&1024&t.flags&&t.stateNode.reset(),e=e.sibling}}function Rl(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)Sl(e,t.alternate,t),t=t.sibling}function Fl(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:rl(4,t,t.return),Fl(t);break;case 1:ul(t,t.return);var n=t.stateNode;"function"===typeof n.componentWillUnmount&&cl(t,t.return,n),Fl(t);break;case 27:wu(t.stateNode);case 26:case 5:ul(t,t.return),Fl(t);break;case 22:null===t.memoizedState&&Fl(t);break;default:Fl(t)}e=e.sibling}}function Xl(e,t,n){for(n=n&&0!==(8772&t.subtreeFlags),t=t.child;null!==t;){var a=t.alternate,s=e,i=t,o=i.flags;switch(i.tag){case 0:case 11:case 15:Xl(s,i,n),ol(4,i);break;case 1:if(Xl(s,i,n),"function"===typeof(s=(a=i).stateNode).componentDidMount)try{s.componentDidMount()}catch(c){dd(a,a.return,c)}if(null!==(s=(a=i).updateQueue)){var r=a.stateNode;try{var l=s.shared.hiddenCallbacks;if(null!==l)for(s.shared.hiddenCallbacks=null,s=0;s<l.length;s++)ui(l[s],r)}catch(c){dd(a,a.return,c)}}n&&64&o&&ll(i),dl(i,i.return);break;case 27:yl(i);case 26:case 5:Xl(s,i,n),n&&null===a&&4&o&&hl(i),dl(i,i.return);break;case 12:Xl(s,i,n);break;case 13:Xl(s,i,n),n&&4&o&&Tl(s,i);break;case 22:null===i.memoizedState&&Xl(s,i,n),dl(i,i.return);break;case 30:break;default:Xl(s,i,n)}t=t.sibling}}function Ul(e,t){var n=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==n&&(null!=e&&e.refCount++,null!=n&&Os(n))}function zl(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Os(e))}function Bl(e,t,n,a){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)Hl(e,t,n,a),t=t.sibling}function Hl(e,t,n,a){var s=t.flags;switch(t.tag){case 0:case 11:case 15:Bl(e,t,n,a),2048&s&&ol(9,t);break;case 1:case 13:default:Bl(e,t,n,a);break;case 3:Bl(e,t,n,a),2048&s&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Os(e)));break;case 12:if(2048&s){Bl(e,t,n,a),e=t.stateNode;try{var i=t.memoizedProps,o=i.id,r=i.onPostCommit;"function"===typeof r&&r(o,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(l){dd(t,t.return,l)}}else Bl(e,t,n,a);break;case 23:break;case 22:i=t.stateNode,o=t.alternate,null!==t.memoizedState?2&i._visibility?Bl(e,t,n,a):ql(e,t):2&i._visibility?Bl(e,t,n,a):(i._visibility|=2,Vl(e,t,n,a,0!==(10256&t.subtreeFlags))),2048&s&&Ul(o,t);break;case 24:Bl(e,t,n,a),2048&s&&zl(t.alternate,t)}}function Vl(e,t,n,a,s){for(s=s&&0!==(10256&t.subtreeFlags),t=t.child;null!==t;){var i=e,o=t,r=n,l=a,c=o.flags;switch(o.tag){case 0:case 11:case 15:Vl(i,o,r,l,s),ol(8,o);break;case 23:break;case 22:var d=o.stateNode;null!==o.memoizedState?2&d._visibility?Vl(i,o,r,l,s):ql(i,o):(d._visibility|=2,Vl(i,o,r,l,s)),s&&2048&c&&Ul(o.alternate,o);break;case 24:Vl(i,o,r,l,s),s&&2048&c&&zl(o.alternate,o);break;default:Vl(i,o,r,l,s)}t=t.sibling}}function ql(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var n=e,a=t,s=a.flags;switch(a.tag){case 22:ql(n,a),2048&s&&Ul(a.alternate,a);break;case 24:ql(n,a),2048&s&&zl(a.alternate,a);break;default:ql(n,a)}t=t.sibling}}var Gl=8192;function Wl(e){if(e.subtreeFlags&Gl)for(e=e.child;null!==e;)Kl(e),e=e.sibling}function Kl(e){switch(e.tag){case 26:Wl(e),e.flags&Gl&&null!==e.memoizedState&&function(e,t,n){if(null===Bu)throw Error(o(475));var a=Bu;if("stylesheet"===t.type&&("string"!==typeof n.media||!1!==matchMedia(n.media).matches)&&0===(4&t.state.loading)){if(null===t.instance){var s=Pu(n.href),i=e.querySelector(Tu(s));if(i)return null!==(e=i._p)&&"object"===typeof e&&"function"===typeof e.then&&(a.count++,a=Vu.bind(a),e.then(a,a)),t.state.loading|=4,t.instance=i,void qe(i);i=e.ownerDocument||e,n=Lu(n),(s=ju.get(s))&&Du(n,s),qe(i=i.createElement("link"));var r=i;r._p=new Promise(function(e,t){r.onload=e,r.onerror=t}),eu(i,"link",n),t.instance=i}null===a.stylesheets&&(a.stylesheets=new Map),a.stylesheets.set(t,e),(e=t.state.preload)&&0===(3&t.state.loading)&&(a.count++,t=Vu.bind(a),e.addEventListener("load",t),e.addEventListener("error",t))}}(Il,e.memoizedState,e.memoizedProps);break;case 5:default:Wl(e);break;case 3:case 4:var t=Il;Il=Su(e.stateNode.containerInfo),Wl(e),Il=t;break;case 22:null===e.memoizedState&&(null!==(t=e.alternate)&&null!==t.memoizedState?(t=Gl,Gl=16777216,Wl(e),Gl=t):Wl(e))}}function Ql(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function Jl(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var a=t[n];Nl=a,Zl(a,e)}Ql(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)Yl(e),e=e.sibling}function Yl(e){switch(e.tag){case 0:case 11:case 15:Jl(e),2048&e.flags&&rl(9,e,e.return);break;case 3:case 12:default:Jl(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&2&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-3,$l(e)):Jl(e)}}function $l(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var a=t[n];Nl=a,Zl(a,e)}Ql(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:rl(8,t,t.return),$l(t);break;case 22:2&(n=t.stateNode)._visibility&&(n._visibility&=-3,$l(t));break;default:$l(t)}e=e.sibling}}function Zl(e,t){for(;null!==Nl;){var n=Nl;switch(n.tag){case 0:case 11:case 15:rl(8,n,t);break;case 23:case 22:if(null!==n.memoizedState&&null!==n.memoizedState.cachePool){var a=n.memoizedState.cachePool.pool;null!=a&&a.refCount++}break;case 24:Os(n.memoizedState.cache)}if(null!==(a=n.child))a.return=n,Nl=a;else e:for(n=e;null!==Nl;){var s=(a=Nl).sibling,i=a.return;if(Cl(a),a===n){Nl=null;break e}if(null!==s){s.return=i,Nl=s;break e}Nl=i}}}var ec={getCacheForType:function(e){var t=ks(Ms),n=t.data.get(e);return void 0===n&&(n=e(),t.data.set(e,n)),n}},tc="function"===typeof WeakMap?WeakMap:Map,nc=0,ac=null,sc=null,ic=0,oc=0,rc=null,lc=!1,cc=!1,dc=!1,uc=0,hc=0,mc=0,pc=0,fc=0,gc=0,vc=0,yc=null,bc=null,xc=!1,wc=0,jc=1/0,Nc=null,Sc=null,Cc=0,kc=null,Ec=null,Ac=0,Pc=0,Tc=null,Lc=null,Mc=0,Ic=null;function Oc(){if(0!==(2&nc)&&0!==ic)return ic&-ic;if(null!==O.T){return 0!==Rs?Rs:Pd()}return Te()}function _c(){0===gc&&(gc=0===(536870912&ic)||is?je():536870912);var e=sr.current;return null!==e&&(e.flags|=32),gc}function Dc(e,t,n){(e!==ac||2!==oc&&9!==oc)&&null===e.cancelPendingCommit||(Hc(e,0),Uc(e,ic,gc,!1)),Ce(e,n),0!==(2&nc)&&e===ac||(e===ac&&(0===(2&nc)&&(pc|=n),4===hc&&Uc(e,ic,gc,!1)),jd(e))}function Rc(e,t,n){if(0!==(6&nc))throw Error(o(327));for(var a=!n&&0===(124&t)&&0===(t&e.expiredLanes)||xe(e,t),s=a?function(e,t){var n=nc;nc|=2;var a=qc(),s=Gc();ac!==e||ic!==t?(Nc=null,jc=te()+500,Hc(e,t)):cc=xe(e,t);e:for(;;)try{if(0!==oc&&null!==sc){t=sc;var i=rc;t:switch(oc){case 1:oc=0,rc=null,Zc(e,t,i,1);break;case 2:case 9:if(Qs(i)){oc=0,rc=null,$c(t);break}t=function(){2!==oc&&9!==oc||ac!==e||(oc=7),jd(e)},i.then(t,t);break e;case 3:oc=7;break e;case 4:oc=5;break e;case 7:Qs(i)?(oc=0,rc=null,$c(t)):(oc=0,rc=null,Zc(e,t,i,7));break;case 5:var r=null;switch(sc.tag){case 26:r=sc.memoizedState;case 5:case 27:var l=sc;if(!r||zu(r)){oc=0,rc=null;var c=l.sibling;if(null!==c)sc=c;else{var d=l.return;null!==d?(sc=d,ed(d)):sc=null}break t}}oc=0,rc=null,Zc(e,t,i,5);break;case 6:oc=0,rc=null,Zc(e,t,i,6);break;case 8:Bc(),hc=6;break e;default:throw Error(o(462))}}Jc();break}catch(u){Vc(e,u)}return ys=vs=null,O.H=a,O.A=s,nc=n,null!==sc?0:(ac=null,ic=0,Aa(),hc)}(e,t):Kc(e,t,!0),i=a;;){if(0===s){cc&&!a&&Uc(e,t,0,!1);break}if(n=e.current.alternate,!i||Xc(n)){if(2===s){if(i=t,e.errorRecoveryDisabledLanes&i)var r=0;else r=0!==(r=-536870913&e.pendingLanes)?r:536870912&r?536870912:0;if(0!==r){t=r;e:{var l=e;s=yc;var c=l.current.memoizedState.isDehydrated;if(c&&(Hc(l,r).flags|=256),2!==(r=Kc(l,r,!1))){if(dc&&!c){l.errorRecoveryDisabledLanes|=i,pc|=i,s=4;break e}i=bc,bc=s,null!==i&&(null===bc?bc=i:bc.push.apply(bc,i))}s=r}if(i=!1,2!==s)continue}}if(1===s){Hc(e,0),Uc(e,t,0,!0);break}e:{switch(a=e,i=s){case 0:case 1:throw Error(o(345));case 4:if((4194048&t)!==t)break;case 6:Uc(a,t,gc,!lc);break e;case 2:bc=null;break;case 3:case 5:break;default:throw Error(o(329))}if((62914560&t)===t&&10<(s=wc+300-te())){if(Uc(a,t,gc,!lc),0!==be(a,0,!0))break e;a.timeoutHandle=lu(Fc.bind(null,a,n,bc,Nc,xc,t,gc,pc,vc,lc,i,2,-0,0),s)}else Fc(a,n,bc,Nc,xc,t,gc,pc,vc,lc,i,0,-0,0)}break}s=Kc(e,t,!1),i=!1}jd(e)}function Fc(e,t,n,a,s,i,r,l,c,d,u,h,m,p){if(e.timeoutHandle=-1,(8192&(h=t.subtreeFlags)||16785408===(16785408&h))&&(Bu={stylesheets:null,count:0,unsuspend:Hu},Kl(t),null!==(h=function(){if(null===Bu)throw Error(o(475));var e=Bu;return e.stylesheets&&0===e.count&&Gu(e,e.stylesheets),0<e.count?function(t){var n=setTimeout(function(){if(e.stylesheets&&Gu(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(n)}}:null}())))return e.cancelPendingCommit=h(nd.bind(null,e,t,i,n,a,s,r,l,c,u,1,m,p)),void Uc(e,i,r,!d);nd(e,t,i,n,a,s,r,l,c)}function Xc(e){for(var t=e;;){var n=t.tag;if((0===n||11===n||15===n)&&16384&t.flags&&(null!==(n=t.updateQueue)&&null!==(n=n.stores)))for(var a=0;a<n.length;a++){var s=n[a],i=s.getSnapshot;s=s.value;try{if(!Qn(i(),s))return!1}catch(o){return!1}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Uc(e,t,n,a){t&=~fc,t&=~pc,e.suspendedLanes|=t,e.pingedLanes&=~t,a&&(e.warmLanes|=t),a=e.expirationTimes;for(var s=t;0<s;){var i=31-me(s),o=1<<i;a[i]=-1,s&=~o}0!==n&&ke(e,n,t)}function zc(){return 0!==(6&nc)||(Nd(0,!1),!1)}function Bc(){if(null!==sc){if(0===oc)var e=sc.return;else ys=vs=null,Ri(e=sc),Qo=null,Jo=0,e=sc;for(;null!==e;)il(e.alternate,e),e=e.return;sc=null}}function Hc(e,t){var n=e.timeoutHandle;-1!==n&&(e.timeoutHandle=-1,cu(n)),null!==(n=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,n()),Bc(),ac=e,sc=n=Fa(e.current,null),ic=t,oc=0,rc=null,lc=!1,cc=xe(e,t),dc=!1,vc=gc=fc=pc=mc=hc=0,bc=yc=null,xc=!1,0!==(8&t)&&(t|=32&t);var a=e.entangledLanes;if(0!==a)for(e=e.entanglements,a&=t;0<a;){var s=31-me(a),i=1<<s;t|=e[s],a&=~i}return uc=t,Aa(),n}function Vc(e,t){bi=null,O.H=qo,t===qs||t===Ws?(t=Zs(),oc=3):t===Gs?(t=Zs(),oc=4):oc=t===kr?8:null!==t&&"object"===typeof t&&"function"===typeof t.then?6:1,rc=t,null===sc&&(hc=1,wr(e,Sa(t,e.current)))}function qc(){var e=O.H;return O.H=qo,null===e?qo:e}function Gc(){var e=O.A;return O.A=ec,e}function Wc(){hc=4,lc||(4194048&ic)!==ic&&null!==sr.current||(cc=!0),0===(134217727&mc)&&0===(134217727&pc)||null===ac||Uc(ac,ic,gc,!1)}function Kc(e,t,n){var a=nc;nc|=2;var s=qc(),i=Gc();ac===e&&ic===t||(Nc=null,Hc(e,t)),t=!1;var o=hc;e:for(;;)try{if(0!==oc&&null!==sc){var r=sc,l=rc;switch(oc){case 8:Bc(),o=6;break e;case 3:case 2:case 9:case 6:null===sr.current&&(t=!0);var c=oc;if(oc=0,rc=null,Zc(e,r,l,c),n&&cc){o=0;break e}break;default:c=oc,oc=0,rc=null,Zc(e,r,l,c)}}Qc(),o=hc;break}catch(d){Vc(e,d)}return t&&e.shellSuspendCounter++,ys=vs=null,nc=a,O.H=s,O.A=i,null===sc&&(ac=null,ic=0,Aa()),o}function Qc(){for(;null!==sc;)Yc(sc)}function Jc(){for(;null!==sc&&!Z();)Yc(sc)}function Yc(e){var t=Yr(e.alternate,e,uc);e.memoizedProps=e.pendingProps,null===t?ed(e):sc=t}function $c(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Dr(n,t,t.pendingProps,t.type,void 0,ic);break;case 11:t=Dr(n,t,t.pendingProps,t.type.render,t.ref,ic);break;case 5:Ri(t);default:il(n,t),t=Yr(n,t=sc=Xa(t,uc),uc)}e.memoizedProps=e.pendingProps,null===t?ed(e):sc=t}function Zc(e,t,n,a){ys=vs=null,Ri(t),Qo=null,Jo=0;var s=t.return;try{if(function(e,t,n,a,s){if(n.flags|=32768,null!==a&&"object"===typeof a&&"function"===typeof a.then){if(null!==(t=n.alternate)&&Ns(t,n,s,!0),null!==(n=sr.current)){switch(n.tag){case 13:return null===ir?Wc():null===n.alternate&&0===hc&&(hc=3),n.flags&=-257,n.flags|=65536,n.lanes=s,a===Ks?n.flags|=16384:(null===(t=n.updateQueue)?n.updateQueue=new Set([a]):t.add(a),ud(e,a,s)),!1;case 22:return n.flags|=65536,a===Ks?n.flags|=16384:(null===(t=n.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([a])},n.updateQueue=t):null===(n=t.retryQueue)?t.retryQueue=new Set([a]):n.add(a),ud(e,a,s)),!1}throw Error(o(435,n.tag))}return ud(e,a,s),Wc(),!1}if(is)return null!==(t=sr.current)?(0===(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=s,a!==ls&&fs(Sa(e=Error(o(422),{cause:a}),n))):(a!==ls&&fs(Sa(t=Error(o(423),{cause:a}),n)),(e=e.current.alternate).flags|=65536,s&=-s,e.lanes|=s,a=Sa(a,n),ri(e,s=Nr(e.stateNode,a,s)),4!==hc&&(hc=2)),!1;var i=Error(o(520),{cause:a});if(i=Sa(i,n),null===yc?yc=[i]:yc.push(i),4!==hc&&(hc=2),null===t)return!0;a=Sa(a,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=s&-s,n.lanes|=e,ri(n,e=Nr(n.stateNode,a,e)),!1;case 1:if(t=n.type,i=n.stateNode,0===(128&n.flags)&&("function"===typeof t.getDerivedStateFromError||null!==i&&"function"===typeof i.componentDidCatch&&(null===Sc||!Sc.has(i))))return n.flags|=65536,s&=-s,n.lanes|=s,Cr(s=Sr(s),e,n,a),ri(n,s),!1}n=n.return}while(null!==n);return!1}(e,s,t,n,ic))return hc=1,wr(e,Sa(n,e.current)),void(sc=null)}catch(i){if(null!==s)throw sc=s,i;return hc=1,wr(e,Sa(n,e.current)),void(sc=null)}32768&t.flags?(is||1===a?e=!0:cc||0!==(536870912&ic)?e=!1:(lc=e=!0,(2===a||9===a||3===a||6===a)&&(null!==(a=sr.current)&&13===a.tag&&(a.flags|=16384))),td(t,e)):ed(t)}function ed(e){var t=e;do{if(0!==(32768&t.flags))return void td(t,lc);e=t.return;var n=al(t.alternate,t,uc);if(null!==n)return void(sc=n);if(null!==(t=t.sibling))return void(sc=t);sc=t=e}while(null!==t);0===hc&&(hc=5)}function td(e,t){do{var n=sl(e.alternate,e);if(null!==n)return n.flags&=32767,void(sc=n);if(null!==(n=e.return)&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&null!==(e=e.sibling))return void(sc=e);sc=e=n}while(null!==e);hc=6,sc=null}function nd(e,t,n,a,s,i,r,l,c){e.cancelPendingCommit=null;do{rd()}while(0!==Cc);if(0!==(6&nc))throw Error(o(327));if(null!==t){if(t===e.current)throw Error(o(177));if(i=t.lanes|t.childLanes,function(e,t,n,a,s,i){var o=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var r=e.entanglements,l=e.expirationTimes,c=e.hiddenUpdates;for(n=o&~n;0<n;){var d=31-me(n),u=1<<d;r[d]=0,l[d]=-1;var h=c[d];if(null!==h)for(c[d]=null,d=0;d<h.length;d++){var m=h[d];null!==m&&(m.lane&=-536870913)}n&=~u}0!==a&&ke(e,a,0),0!==i&&0===s&&0!==e.tag&&(e.suspendedLanes|=i&~(o&~t))}(e,n,i|=Ea,r,l,c),e===ac&&(sc=ac=null,ic=0),Ec=t,kc=e,Ac=n,Pc=i,Tc=s,Lc=a,0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?(e.callbackNode=null,e.callbackPriority=0,Y(ie,function(){return ld(),null})):(e.callbackNode=null,e.callbackPriority=0),a=0!==(13878&t.flags),0!==(13878&t.subtreeFlags)||a){a=O.T,O.T=null,s=_.p,_.p=2,r=nc,nc|=4;try{!function(e,t){if(e=e.containerInfo,tu=nh,ta(e=ea(e))){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var a=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(a&&0!==a.rangeCount){n=a.anchorNode;var s=a.anchorOffset,i=a.focusNode;a=a.focusOffset;try{n.nodeType,i.nodeType}catch(g){n=null;break e}var r=0,l=-1,c=-1,d=0,u=0,h=e,m=null;t:for(;;){for(var p;h!==n||0!==s&&3!==h.nodeType||(l=r+s),h!==i||0!==a&&3!==h.nodeType||(c=r+a),3===h.nodeType&&(r+=h.nodeValue.length),null!==(p=h.firstChild);)m=h,h=p;for(;;){if(h===e)break t;if(m===n&&++d===s&&(l=r),m===i&&++u===a&&(c=r),null!==(p=h.nextSibling))break;m=(h=m).parentNode}h=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(nu={focusedElem:e,selectionRange:n},nh=!1,Nl=t;null!==Nl;)if(e=(t=Nl).child,0!==(1024&t.subtreeFlags)&&null!==e)e.return=t,Nl=e;else for(;null!==Nl;){switch(i=(t=Nl).alternate,e=t.flags,t.tag){case 0:case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(0!==(1024&e)&&null!==i){e=void 0,n=t,s=i.memoizedProps,i=i.memoizedState,a=n.stateNode;try{var f=gr(n.type,s,(n.elementType,n.type));e=a.getSnapshotBeforeUpdate(f,i),a.__reactInternalSnapshotBeforeUpdate=e}catch(v){dd(n,n.return,v)}}break;case 3:if(0!==(1024&e))if(9===(n=(e=t.stateNode.containerInfo).nodeType))fu(e);else if(1===n)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":fu(e);break;default:e.textContent=""}break;default:if(0!==(1024&e))throw Error(o(163))}if(null!==(e=t.sibling)){e.return=t.return,Nl=e;break}Nl=t.return}}(e,t)}finally{nc=r,_.p=s,O.T=a}}Cc=1,ad(),sd(),id()}}function ad(){if(1===Cc){Cc=0;var e=kc,t=Ec,n=0!==(13878&t.flags);if(0!==(13878&t.subtreeFlags)||n){n=O.T,O.T=null;var a=_.p;_.p=2;var s=nc;nc|=4;try{Ol(t,e);var i=nu,o=ea(e.containerInfo),r=i.focusedElem,l=i.selectionRange;if(o!==r&&r&&r.ownerDocument&&Zn(r.ownerDocument.documentElement,r)){if(null!==l&&ta(r)){var c=l.start,d=l.end;if(void 0===d&&(d=c),"selectionStart"in r)r.selectionStart=c,r.selectionEnd=Math.min(d,r.value.length);else{var u=r.ownerDocument||document,h=u&&u.defaultView||window;if(h.getSelection){var m=h.getSelection(),p=r.textContent.length,f=Math.min(l.start,p),g=void 0===l.end?f:Math.min(l.end,p);!m.extend&&f>g&&(o=g,g=f,f=o);var v=$n(r,f),y=$n(r,g);if(v&&y&&(1!==m.rangeCount||m.anchorNode!==v.node||m.anchorOffset!==v.offset||m.focusNode!==y.node||m.focusOffset!==y.offset)){var b=u.createRange();b.setStart(v.node,v.offset),m.removeAllRanges(),f>g?(m.addRange(b),m.extend(y.node,y.offset)):(b.setEnd(y.node,y.offset),m.addRange(b))}}}}for(u=[],m=r;m=m.parentNode;)1===m.nodeType&&u.push({element:m,left:m.scrollLeft,top:m.scrollTop});for("function"===typeof r.focus&&r.focus(),r=0;r<u.length;r++){var x=u[r];x.element.scrollLeft=x.left,x.element.scrollTop=x.top}}nh=!!tu,nu=tu=null}finally{nc=s,_.p=a,O.T=n}}e.current=t,Cc=2}}function sd(){if(2===Cc){Cc=0;var e=kc,t=Ec,n=0!==(8772&t.flags);if(0!==(8772&t.subtreeFlags)||n){n=O.T,O.T=null;var a=_.p;_.p=2;var s=nc;nc|=4;try{Sl(e,t.alternate,t)}finally{nc=s,_.p=a,O.T=n}}Cc=3}}function id(){if(4===Cc||3===Cc){Cc=0,ee();var e=kc,t=Ec,n=Ac,a=Lc;0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?Cc=5:(Cc=0,Ec=kc=null,od(e,e.pendingLanes));var s=e.pendingLanes;if(0===s&&(Sc=null),Pe(n),t=t.stateNode,ue&&"function"===typeof ue.onCommitFiberRoot)try{ue.onCommitFiberRoot(de,t,void 0,128===(128&t.current.flags))}catch(l){}if(null!==a){t=O.T,s=_.p,_.p=2,O.T=null;try{for(var i=e.onRecoverableError,o=0;o<a.length;o++){var r=a[o];i(r.value,{componentStack:r.stack})}}finally{O.T=t,_.p=s}}0!==(3&Ac)&&rd(),jd(e),s=e.pendingLanes,0!==(4194090&n)&&0!==(42&s)?e===Ic?Mc++:(Mc=0,Ic=e):Mc=0,Nd(0,!1)}}function od(e,t){0===(e.pooledCacheLanes&=t)&&(null!=(t=e.pooledCache)&&(e.pooledCache=null,Os(t)))}function rd(e){return ad(),sd(),id(),ld()}function ld(){if(5!==Cc)return!1;var e=kc,t=Pc;Pc=0;var n=Pe(Ac),a=O.T,s=_.p;try{_.p=32>n?32:n,O.T=null,n=Tc,Tc=null;var i=kc,r=Ac;if(Cc=0,Ec=kc=null,Ac=0,0!==(6&nc))throw Error(o(331));var l=nc;if(nc|=4,Yl(i.current),Hl(i,i.current,r,n),nc=l,Nd(0,!1),ue&&"function"===typeof ue.onPostCommitFiberRoot)try{ue.onPostCommitFiberRoot(de,i)}catch(c){}return!0}finally{_.p=s,O.T=a,od(e,t)}}function cd(e,t,n){t=Sa(n,t),null!==(e=ii(e,t=Nr(e.stateNode,t,2),2))&&(Ce(e,2),jd(e))}function dd(e,t,n){if(3===e.tag)cd(e,e,n);else for(;null!==t;){if(3===t.tag){cd(t,e,n);break}if(1===t.tag){var a=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof a.componentDidCatch&&(null===Sc||!Sc.has(a))){e=Sa(n,e),null!==(a=ii(t,n=Sr(2),2))&&(Cr(n,a,t,e),Ce(a,2),jd(a));break}}t=t.return}}function ud(e,t,n){var a=e.pingCache;if(null===a){a=e.pingCache=new tc;var s=new Set;a.set(t,s)}else void 0===(s=a.get(t))&&(s=new Set,a.set(t,s));s.has(n)||(dc=!0,s.add(n),e=hd.bind(null,e,t,n),t.then(e,e))}function hd(e,t,n){var a=e.pingCache;null!==a&&a.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,ac===e&&(ic&n)===n&&(4===hc||3===hc&&(62914560&ic)===ic&&300>te()-wc?0===(2&nc)&&Hc(e,0):fc|=n,vc===ic&&(vc=0)),jd(e)}function md(e,t){0===t&&(t=Ne()),null!==(e=La(e,t))&&(Ce(e,t),jd(e))}function pd(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),md(e,n)}function fd(e,t){var n=0;switch(e.tag){case 13:var a=e.stateNode,s=e.memoizedState;null!==s&&(n=s.retryLane);break;case 19:a=e.stateNode;break;case 22:a=e.stateNode._retryCache;break;default:throw Error(o(314))}null!==a&&a.delete(t),md(e,n)}var gd=null,vd=null,yd=!1,bd=!1,xd=!1,wd=0;function jd(e){e!==vd&&null===e.next&&(null===vd?gd=vd=e:vd=vd.next=e),bd=!0,yd||(yd=!0,uu(function(){0!==(6&nc)?Y(ae,Sd):Cd()}))}function Nd(e,t){if(!xd&&bd){xd=!0;do{for(var n=!1,a=gd;null!==a;){if(!t)if(0!==e){var s=a.pendingLanes;if(0===s)var i=0;else{var o=a.suspendedLanes,r=a.pingedLanes;i=(1<<31-me(42|e)+1)-1,i=201326741&(i&=s&~(o&~r))?201326741&i|1:i?2|i:0}0!==i&&(n=!0,Ad(a,i))}else i=ic,0===(3&(i=be(a,a===ac?i:0,null!==a.cancelPendingCommit||-1!==a.timeoutHandle)))||xe(a,i)||(n=!0,Ad(a,i));a=a.next}}while(n);xd=!1}}function Sd(){Cd()}function Cd(){bd=yd=!1;var e=0;0!==wd&&(function(){var e=window.event;if(e&&"popstate"===e.type)return e!==ru&&(ru=e,!0);return ru=null,!1}()&&(e=wd),wd=0);for(var t=te(),n=null,a=gd;null!==a;){var s=a.next,i=kd(a,t);0===i?(a.next=null,null===n?gd=s:n.next=s,null===s&&(vd=n)):(n=a,(0!==e||0!==(3&i))&&(bd=!0)),a=s}Nd(e,!1)}function kd(e,t){for(var n=e.suspendedLanes,a=e.pingedLanes,s=e.expirationTimes,i=-62914561&e.pendingLanes;0<i;){var o=31-me(i),r=1<<o,l=s[o];-1===l?0!==(r&n)&&0===(r&a)||(s[o]=we(r,t)):l<=t&&(e.expiredLanes|=r),i&=~r}if(n=ic,n=be(e,e===(t=ac)?n:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle),a=e.callbackNode,0===n||e===t&&(2===oc||9===oc)||null!==e.cancelPendingCommit)return null!==a&&null!==a&&$(a),e.callbackNode=null,e.callbackPriority=0;if(0===(3&n)||xe(e,n)){if((t=n&-n)===e.callbackPriority)return t;switch(null!==a&&$(a),Pe(n)){case 2:case 8:n=se;break;case 32:default:n=ie;break;case 268435456:n=re}return a=Ed.bind(null,e),n=Y(n,a),e.callbackPriority=t,e.callbackNode=n,t}return null!==a&&null!==a&&$(a),e.callbackPriority=2,e.callbackNode=null,2}function Ed(e,t){if(0!==Cc&&5!==Cc)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(rd()&&e.callbackNode!==n)return null;var a=ic;return 0===(a=be(e,e===ac?a:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle))?null:(Rc(e,a,t),kd(e,te()),null!=e.callbackNode&&e.callbackNode===n?Ed.bind(null,e):null)}function Ad(e,t){if(rd())return null;Rc(e,t,!0)}function Pd(){return 0===wd&&(wd=je()),wd}function Td(e){return null==e||"symbol"===typeof e||"boolean"===typeof e?null:"function"===typeof e?e:Pt(""+e)}function Ld(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}for(var Md=0;Md<wa.length;Md++){var Id=wa[Md];ja(Id.toLowerCase(),"on"+(Id[0].toUpperCase()+Id.slice(1)))}ja(ma,"onAnimationEnd"),ja(pa,"onAnimationIteration"),ja(fa,"onAnimationStart"),ja("dblclick","onDoubleClick"),ja("focusin","onFocus"),ja("focusout","onBlur"),ja(ga,"onTransitionRun"),ja(va,"onTransitionStart"),ja(ya,"onTransitionCancel"),ja(ba,"onTransitionEnd"),Qe("onMouseEnter",["mouseout","mouseover"]),Qe("onMouseLeave",["mouseout","mouseover"]),Qe("onPointerEnter",["pointerout","pointerover"]),Qe("onPointerLeave",["pointerout","pointerover"]),Ke("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ke("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ke("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ke("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ke("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ke("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Od="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),_d=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Od));function Dd(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var a=e[n],s=a.event;a=a.listeners;e:{var i=void 0;if(t)for(var o=a.length-1;0<=o;o--){var r=a[o],l=r.instance,c=r.currentTarget;if(r=r.listener,l!==i&&s.isPropagationStopped())break e;i=r,s.currentTarget=c;try{i(s)}catch(d){vr(d)}s.currentTarget=null,i=l}else for(o=0;o<a.length;o++){if(l=(r=a[o]).instance,c=r.currentTarget,r=r.listener,l!==i&&s.isPropagationStopped())break e;i=r,s.currentTarget=c;try{i(s)}catch(d){vr(d)}s.currentTarget=null,i=l}}}}function Rd(e,t){var n=t[_e];void 0===n&&(n=t[_e]=new Set);var a=e+"__bubble";n.has(a)||(zd(t,e,2,!1),n.add(a))}function Fd(e,t,n){var a=0;t&&(a|=4),zd(n,e,a,t)}var Xd="_reactListening"+Math.random().toString(36).slice(2);function Ud(e){if(!e[Xd]){e[Xd]=!0,Ge.forEach(function(t){"selectionchange"!==t&&(_d.has(t)||Fd(t,!1,e),Fd(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Xd]||(t[Xd]=!0,Fd("selectionchange",!1,t))}}function zd(e,t,n,a){switch(ch(t)){case 2:var s=ah;break;case 8:s=sh;break;default:s=ih}n=s.bind(null,t,n,e),s=void 0,!Xt||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(s=!0),a?void 0!==s?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):void 0!==s?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function Bd(e,t,n,a,s){var i=a;if(0===(1&t)&&0===(2&t)&&null!==a)e:for(;;){if(null===a)return;var o=a.tag;if(3===o||4===o){var r=a.stateNode.containerInfo;if(r===s)break;if(4===o)for(o=a.return;null!==o;){var c=o.tag;if((3===c||4===c)&&o.stateNode.containerInfo===s)return;o=o.return}for(;null!==r;){if(null===(o=ze(r)))return;if(5===(c=o.tag)||6===c||26===c||27===c){a=i=o;continue e}r=r.parentNode}}a=a.return}Dt(function(){var a=i,s=Lt(n),o=[];e:{var r=xa.get(e);if(void 0!==r){var c=Zt,d=e;switch(e){case"keypress":if(0===qt(n))break e;case"keydown":case"keyup":c=fn;break;case"focusin":d="focus",c=on;break;case"focusout":d="blur",c=on;break;case"beforeblur":case"afterblur":c=on;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=an;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=sn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=vn;break;case ma:case pa:case fa:c=rn;break;case ba:c=yn;break;case"scroll":case"scrollend":c=tn;break;case"wheel":c=bn;break;case"copy":case"cut":case"paste":c=ln;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=gn;break;case"toggle":case"beforetoggle":c=xn}var u=0!==(4&t),h=!u&&("scroll"===e||"scrollend"===e),m=u?null!==r?r+"Capture":null:r;u=[];for(var p,f=a;null!==f;){var g=f;if(p=g.stateNode,5!==(g=g.tag)&&26!==g&&27!==g||null===p||null===m||null!=(g=Rt(f,m))&&u.push(Hd(f,g,p)),h)break;f=f.return}0<u.length&&(r=new c(r,d,null,n,s),o.push({event:r,listeners:u}))}}if(0===(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(r="mouseover"===e||"pointerover"===e)||n===Tt||!(d=n.relatedTarget||n.fromElement)||!ze(d)&&!d[Oe])&&(c||r)&&(r=s.window===s?s:(r=s.ownerDocument)?r.defaultView||r.parentWindow:window,c?(c=a,null!==(d=(d=n.relatedTarget||n.toElement)?ze(d):null)&&(h=l(d),u=d.tag,d!==h||5!==u&&27!==u&&6!==u)&&(d=null)):(c=null,d=a),c!==d)){if(u=an,g="onMouseLeave",m="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(u=gn,g="onPointerLeave",m="onPointerEnter",f="pointer"),h=null==c?r:He(c),p=null==d?r:He(d),(r=new u(g,f+"leave",c,n,s)).target=h,r.relatedTarget=p,g=null,ze(s)===a&&((u=new u(m,f+"enter",d,n,s)).target=p,u.relatedTarget=h,g=u),h=g,c&&d)e:{for(m=d,f=0,p=u=c;p;p=qd(p))f++;for(p=0,g=m;g;g=qd(g))p++;for(;0<f-p;)u=qd(u),f--;for(;0<p-f;)m=qd(m),p--;for(;f--;){if(u===m||null!==m&&u===m.alternate)break e;u=qd(u),m=qd(m)}u=null}else u=null;null!==c&&Gd(o,r,c,u,!1),null!==d&&null!==h&&Gd(o,h,d,u,!0)}if("select"===(c=(r=a?He(a):window).nodeName&&r.nodeName.toLowerCase())||"input"===c&&"file"===r.type)var v=Fn;else if(Mn(r))if(Xn)v=Kn;else{v=Gn;var y=qn}else!(c=r.nodeName)||"input"!==c.toLowerCase()||"checkbox"!==r.type&&"radio"!==r.type?a&&kt(a.elementType)&&(v=Fn):v=Wn;switch(v&&(v=v(e,a))?In(o,v,n,s):(y&&y(e,r,a),"focusout"===e&&a&&"number"===r.type&&null!=a.memoizedProps.value&&yt(r,"number",r.value)),y=a?He(a):window,e){case"focusin":(Mn(y)||"true"===y.contentEditable)&&(aa=y,sa=a,ia=null);break;case"focusout":ia=sa=aa=null;break;case"mousedown":oa=!0;break;case"contextmenu":case"mouseup":case"dragend":oa=!1,ra(o,n,s);break;case"selectionchange":if(na)break;case"keydown":case"keyup":ra(o,n,s)}var b;if(jn)e:{switch(e){case"compositionstart":var x="onCompositionStart";break e;case"compositionend":x="onCompositionEnd";break e;case"compositionupdate":x="onCompositionUpdate";break e}x=void 0}else Tn?An(e,n)&&(x="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(x="onCompositionStart");x&&(Cn&&"ko"!==n.locale&&(Tn||"onCompositionStart"!==x?"onCompositionEnd"===x&&Tn&&(b=Vt()):(Bt="value"in(zt=s)?zt.value:zt.textContent,Tn=!0)),0<(y=Vd(a,x)).length&&(x=new cn(x,e,null,n,s),o.push({event:x,listeners:y}),b?x.data=b:null!==(b=Pn(n))&&(x.data=b))),(b=Sn?function(e,t){switch(e){case"compositionend":return Pn(t);case"keypress":return 32!==t.which?null:(En=!0,kn);case"textInput":return(e=t.data)===kn&&En?null:e;default:return null}}(e,n):function(e,t){if(Tn)return"compositionend"===e||!jn&&An(e,t)?(e=Vt(),Ht=Bt=zt=null,Tn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Cn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(x=Vd(a,"onBeforeInput")).length&&(y=new cn("onBeforeInput","beforeinput",null,n,s),o.push({event:y,listeners:x}),y.data=b)),function(e,t,n,a,s){if("submit"===t&&n&&n.stateNode===s){var i=Td((s[Ie]||null).action),o=a.submitter;o&&null!==(t=(t=o[Ie]||null)?Td(t.formAction):o.getAttribute("formAction"))&&(i=t,o=null);var r=new Zt("action","action",null,a,s);e.push({event:r,listeners:[{instance:null,listener:function(){if(a.defaultPrevented){if(0!==wd){var e=o?Ld(s,o):new FormData(s);Lo(n,{pending:!0,data:e,method:s.method,action:i},null,e)}}else"function"===typeof i&&(r.preventDefault(),e=o?Ld(s,o):new FormData(s),Lo(n,{pending:!0,data:e,method:s.method,action:i},i,e))},currentTarget:s}]})}}(o,e,a,n,s)}Dd(o,t)})}function Hd(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Vd(e,t){for(var n=t+"Capture",a=[];null!==e;){var s=e,i=s.stateNode;if(5!==(s=s.tag)&&26!==s&&27!==s||null===i||(null!=(s=Rt(e,n))&&a.unshift(Hd(e,s,i)),null!=(s=Rt(e,t))&&a.push(Hd(e,s,i))),3===e.tag)return a;e=e.return}return[]}function qd(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag&&27!==e.tag);return e||null}function Gd(e,t,n,a,s){for(var i=t._reactName,o=[];null!==n&&n!==a;){var r=n,l=r.alternate,c=r.stateNode;if(r=r.tag,null!==l&&l===a)break;5!==r&&26!==r&&27!==r||null===c||(l=c,s?null!=(c=Rt(n,i))&&o.unshift(Hd(n,c,l)):s||null!=(c=Rt(n,i))&&o.push(Hd(n,c,l))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Wd=/\r\n?/g,Kd=/\u0000|\uFFFD/g;function Qd(e){return("string"===typeof e?e:""+e).replace(Wd,"\n").replace(Kd,"")}function Jd(e,t){return t=Qd(t),Qd(e)===t}function Yd(){}function $d(e,t,n,a,s,i){switch(n){case"children":"string"===typeof a?"body"===t||"textarea"===t&&""===a||jt(e,a):("number"===typeof a||"bigint"===typeof a)&&"body"!==t&&jt(e,""+a);break;case"className":nt(e,"class",a);break;case"tabIndex":nt(e,"tabindex",a);break;case"dir":case"role":case"viewBox":case"width":case"height":nt(e,n,a);break;case"style":Ct(e,a,i);break;case"data":if("object"!==t){nt(e,"data",a);break}case"src":case"href":if(""===a&&("a"!==t||"href"!==n)){e.removeAttribute(n);break}if(null==a||"function"===typeof a||"symbol"===typeof a||"boolean"===typeof a){e.removeAttribute(n);break}a=Pt(""+a),e.setAttribute(n,a);break;case"action":case"formAction":if("function"===typeof a){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"===typeof i&&("formAction"===n?("input"!==t&&$d(e,t,"name",s.name,s,null),$d(e,t,"formEncType",s.formEncType,s,null),$d(e,t,"formMethod",s.formMethod,s,null),$d(e,t,"formTarget",s.formTarget,s,null)):($d(e,t,"encType",s.encType,s,null),$d(e,t,"method",s.method,s,null),$d(e,t,"target",s.target,s,null))),null==a||"symbol"===typeof a||"boolean"===typeof a){e.removeAttribute(n);break}a=Pt(""+a),e.setAttribute(n,a);break;case"onClick":null!=a&&(e.onclick=Yd);break;case"onScroll":null!=a&&Rd("scroll",e);break;case"onScrollEnd":null!=a&&Rd("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=a){if("object"!==typeof a||!("__html"in a))throw Error(o(61));if(null!=(n=a.__html)){if(null!=s.children)throw Error(o(60));e.innerHTML=n}}break;case"multiple":e.multiple=a&&"function"!==typeof a&&"symbol"!==typeof a;break;case"muted":e.muted=a&&"function"!==typeof a&&"symbol"!==typeof a;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==a||"function"===typeof a||"boolean"===typeof a||"symbol"===typeof a){e.removeAttribute("xlink:href");break}n=Pt(""+a),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=a&&"function"!==typeof a&&"symbol"!==typeof a?e.setAttribute(n,""+a):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":a&&"function"!==typeof a&&"symbol"!==typeof a?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":!0===a?e.setAttribute(n,""):!1!==a&&null!=a&&"function"!==typeof a&&"symbol"!==typeof a?e.setAttribute(n,a):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":null!=a&&"function"!==typeof a&&"symbol"!==typeof a&&!isNaN(a)&&1<=a?e.setAttribute(n,a):e.removeAttribute(n);break;case"rowSpan":case"start":null==a||"function"===typeof a||"symbol"===typeof a||isNaN(a)?e.removeAttribute(n):e.setAttribute(n,a);break;case"popover":Rd("beforetoggle",e),Rd("toggle",e),tt(e,"popover",a);break;case"xlinkActuate":at(e,"http://www.w3.org/1999/xlink","xlink:actuate",a);break;case"xlinkArcrole":at(e,"http://www.w3.org/1999/xlink","xlink:arcrole",a);break;case"xlinkRole":at(e,"http://www.w3.org/1999/xlink","xlink:role",a);break;case"xlinkShow":at(e,"http://www.w3.org/1999/xlink","xlink:show",a);break;case"xlinkTitle":at(e,"http://www.w3.org/1999/xlink","xlink:title",a);break;case"xlinkType":at(e,"http://www.w3.org/1999/xlink","xlink:type",a);break;case"xmlBase":at(e,"http://www.w3.org/XML/1998/namespace","xml:base",a);break;case"xmlLang":at(e,"http://www.w3.org/XML/1998/namespace","xml:lang",a);break;case"xmlSpace":at(e,"http://www.w3.org/XML/1998/namespace","xml:space",a);break;case"is":tt(e,"is",a);break;case"innerText":case"textContent":break;default:(!(2<n.length)||"o"!==n[0]&&"O"!==n[0]||"n"!==n[1]&&"N"!==n[1])&&tt(e,n=Et.get(n)||n,a)}}function Zd(e,t,n,a,s,i){switch(n){case"style":Ct(e,a,i);break;case"dangerouslySetInnerHTML":if(null!=a){if("object"!==typeof a||!("__html"in a))throw Error(o(61));if(null!=(n=a.__html)){if(null!=s.children)throw Error(o(60));e.innerHTML=n}}break;case"children":"string"===typeof a?jt(e,a):("number"===typeof a||"bigint"===typeof a)&&jt(e,""+a);break;case"onScroll":null!=a&&Rd("scroll",e);break;case"onScrollEnd":null!=a&&Rd("scrollend",e);break;case"onClick":null!=a&&(e.onclick=Yd);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:We.hasOwnProperty(n)||("o"!==n[0]||"n"!==n[1]||(s=n.endsWith("Capture"),t=n.slice(2,s?n.length-7:void 0),"function"===typeof(i=null!=(i=e[Ie]||null)?i[n]:null)&&e.removeEventListener(t,i,s),"function"!==typeof a)?n in e?e[n]=a:!0===a?e.setAttribute(n,""):tt(e,n,a):("function"!==typeof i&&null!==i&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,a,s)))}}function eu(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Rd("error",e),Rd("load",e);var a,s=!1,i=!1;for(a in n)if(n.hasOwnProperty(a)){var r=n[a];if(null!=r)switch(a){case"src":s=!0;break;case"srcSet":i=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:$d(e,t,a,r,n,null)}}return i&&$d(e,t,"srcSet",n.srcSet,n,null),void(s&&$d(e,t,"src",n.src,n,null));case"input":Rd("invalid",e);var l=a=r=i=null,c=null,d=null;for(s in n)if(n.hasOwnProperty(s)){var u=n[s];if(null!=u)switch(s){case"name":i=u;break;case"type":r=u;break;case"checked":c=u;break;case"defaultChecked":d=u;break;case"value":a=u;break;case"defaultValue":l=u;break;case"children":case"dangerouslySetInnerHTML":if(null!=u)throw Error(o(137,t));break;default:$d(e,t,s,u,n,null)}}return vt(e,a,l,c,d,r,i,!1),void ut(e);case"select":for(i in Rd("invalid",e),s=r=a=null,n)if(n.hasOwnProperty(i)&&null!=(l=n[i]))switch(i){case"value":a=l;break;case"defaultValue":r=l;break;case"multiple":s=l;default:$d(e,t,i,l,n,null)}return t=a,n=r,e.multiple=!!s,void(null!=t?bt(e,!!s,t,!1):null!=n&&bt(e,!!s,n,!0));case"textarea":for(r in Rd("invalid",e),a=i=s=null,n)if(n.hasOwnProperty(r)&&null!=(l=n[r]))switch(r){case"value":s=l;break;case"defaultValue":i=l;break;case"children":a=l;break;case"dangerouslySetInnerHTML":if(null!=l)throw Error(o(91));break;default:$d(e,t,r,l,n,null)}return wt(e,s,i,a),void ut(e);case"option":for(c in n)if(n.hasOwnProperty(c)&&null!=(s=n[c]))if("selected"===c)e.selected=s&&"function"!==typeof s&&"symbol"!==typeof s;else $d(e,t,c,s,n,null);return;case"dialog":Rd("beforetoggle",e),Rd("toggle",e),Rd("cancel",e),Rd("close",e);break;case"iframe":case"object":Rd("load",e);break;case"video":case"audio":for(s=0;s<Od.length;s++)Rd(Od[s],e);break;case"image":Rd("error",e),Rd("load",e);break;case"details":Rd("toggle",e);break;case"embed":case"source":case"link":Rd("error",e),Rd("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(d in n)if(n.hasOwnProperty(d)&&null!=(s=n[d]))switch(d){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:$d(e,t,d,s,n,null)}return;default:if(kt(t)){for(u in n)n.hasOwnProperty(u)&&(void 0!==(s=n[u])&&Zd(e,t,u,s,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(null!=(s=n[l])&&$d(e,t,l,s,n,null))}var tu=null,nu=null;function au(e){return 9===e.nodeType?e:e.ownerDocument}function su(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function iu(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function ou(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"bigint"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ru=null;var lu="function"===typeof setTimeout?setTimeout:void 0,cu="function"===typeof clearTimeout?clearTimeout:void 0,du="function"===typeof Promise?Promise:void 0,uu="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof du?function(e){return du.resolve(null).then(e).catch(hu)}:lu;function hu(e){setTimeout(function(){throw e})}function mu(e){return"head"===e}function pu(e,t){var n=t,a=0,s=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0<a&&8>a){n=a;var o=e.ownerDocument;if(1&n&&wu(o.documentElement),2&n&&wu(o.body),4&n)for(wu(n=o.head),o=n.firstChild;o;){var r=o.nextSibling,l=o.nodeName;o[Xe]||"SCRIPT"===l||"STYLE"===l||"LINK"===l&&"stylesheet"===o.rel.toLowerCase()||n.removeChild(o),o=r}}if(0===s)return e.removeChild(i),void Eh(t);s--}else"$"===n||"$?"===n||"$!"===n?s++:a=n.charCodeAt(0)-48;else a=0;n=i}while(n);Eh(t)}function fu(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":fu(n),Ue(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===n.rel.toLowerCase())continue}e.removeChild(n)}}function gu(e){return"$!"===e.data||"$?"===e.data&&"complete"===e.ownerDocument.readyState}function vu(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"F!"===t||"F"===t)break;if("/$"===t)return null}}return e}var yu=null;function bu(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}function xu(e,t,n){switch(t=au(n),e){case"html":if(!(e=t.documentElement))throw Error(o(452));return e;case"head":if(!(e=t.head))throw Error(o(453));return e;case"body":if(!(e=t.body))throw Error(o(454));return e;default:throw Error(o(451))}}function wu(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Ue(e)}var ju=new Map,Nu=new Set;function Su(e){return"function"===typeof e.getRootNode?e.getRootNode():9===e.nodeType?e:e.ownerDocument}var Cu=_.d;_.d={f:function(){var e=Cu.f(),t=zc();return e||t},r:function(e){var t=Be(e);null!==t&&5===t.tag&&"form"===t.type?Io(t):Cu.r(e)},D:function(e){Cu.D(e),Eu("dns-prefetch",e,null)},C:function(e,t){Cu.C(e,t),Eu("preconnect",e,t)},L:function(e,t,n){Cu.L(e,t,n);var a=ku;if(a&&e&&t){var s='link[rel="preload"][as="'+ft(t)+'"]';"image"===t&&n&&n.imageSrcSet?(s+='[imagesrcset="'+ft(n.imageSrcSet)+'"]',"string"===typeof n.imageSizes&&(s+='[imagesizes="'+ft(n.imageSizes)+'"]')):s+='[href="'+ft(e)+'"]';var i=s;switch(t){case"style":i=Pu(e);break;case"script":i=Mu(e)}ju.has(i)||(e=h({rel:"preload",href:"image"===t&&n&&n.imageSrcSet?void 0:e,as:t},n),ju.set(i,e),null!==a.querySelector(s)||"style"===t&&a.querySelector(Tu(i))||"script"===t&&a.querySelector(Iu(i))||(eu(t=a.createElement("link"),"link",e),qe(t),a.head.appendChild(t)))}},m:function(e,t){Cu.m(e,t);var n=ku;if(n&&e){var a=t&&"string"===typeof t.as?t.as:"script",s='link[rel="modulepreload"][as="'+ft(a)+'"][href="'+ft(e)+'"]',i=s;switch(a){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":i=Mu(e)}if(!ju.has(i)&&(e=h({rel:"modulepreload",href:e},t),ju.set(i,e),null===n.querySelector(s))){switch(a){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Iu(i)))return}eu(a=n.createElement("link"),"link",e),qe(a),n.head.appendChild(a)}}},X:function(e,t){Cu.X(e,t);var n=ku;if(n&&e){var a=Ve(n).hoistableScripts,s=Mu(e),i=a.get(s);i||((i=n.querySelector(Iu(s)))||(e=h({src:e,async:!0},t),(t=ju.get(s))&&Ru(e,t),qe(i=n.createElement("script")),eu(i,"link",e),n.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},a.set(s,i))}},S:function(e,t,n){Cu.S(e,t,n);var a=ku;if(a&&e){var s=Ve(a).hoistableStyles,i=Pu(e);t=t||"default";var o=s.get(i);if(!o){var r={loading:0,preload:null};if(o=a.querySelector(Tu(i)))r.loading=5;else{e=h({rel:"stylesheet",href:e,"data-precedence":t},n),(n=ju.get(i))&&Du(e,n);var l=o=a.createElement("link");qe(l),eu(l,"link",e),l._p=new Promise(function(e,t){l.onload=e,l.onerror=t}),l.addEventListener("load",function(){r.loading|=1}),l.addEventListener("error",function(){r.loading|=2}),r.loading|=4,_u(o,t,a)}o={type:"stylesheet",instance:o,count:1,state:r},s.set(i,o)}}},M:function(e,t){Cu.M(e,t);var n=ku;if(n&&e){var a=Ve(n).hoistableScripts,s=Mu(e),i=a.get(s);i||((i=n.querySelector(Iu(s)))||(e=h({src:e,async:!0,type:"module"},t),(t=ju.get(s))&&Ru(e,t),qe(i=n.createElement("script")),eu(i,"link",e),n.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},a.set(s,i))}}};var ku="undefined"===typeof document?null:document;function Eu(e,t,n){var a=ku;if(a&&"string"===typeof t&&t){var s=ft(t);s='link[rel="'+e+'"][href="'+s+'"]',"string"===typeof n&&(s+='[crossorigin="'+n+'"]'),Nu.has(s)||(Nu.add(s),e={rel:e,crossOrigin:n,href:t},null===a.querySelector(s)&&(eu(t=a.createElement("link"),"link",e),qe(t),a.head.appendChild(t)))}}function Au(e,t,n,a){var s,i,r,l,c=(c=V.current)?Su(c):null;if(!c)throw Error(o(446));switch(e){case"meta":case"title":return null;case"style":return"string"===typeof n.precedence&&"string"===typeof n.href?(t=Pu(n.href),(a=(n=Ve(c).hoistableStyles).get(t))||(a={type:"style",instance:null,count:0,state:null},n.set(t,a)),a):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===n.rel&&"string"===typeof n.href&&"string"===typeof n.precedence){e=Pu(n.href);var d=Ve(c).hoistableStyles,u=d.get(e);if(u||(c=c.ownerDocument||c,u={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(e,u),(d=c.querySelector(Tu(e)))&&!d._p&&(u.instance=d,u.state.loading=5),ju.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},ju.set(e,n),d||(s=c,i=e,r=n,l=u.state,s.querySelector('link[rel="preload"][as="style"]['+i+"]")?l.loading=1:(i=s.createElement("link"),l.preload=i,i.addEventListener("load",function(){return l.loading|=1}),i.addEventListener("error",function(){return l.loading|=2}),eu(i,"link",r),qe(i),s.head.appendChild(i))))),t&&null===a)throw Error(o(528,""));return u}if(t&&null!==a)throw Error(o(529,""));return null;case"script":return t=n.async,"string"===typeof(n=n.src)&&t&&"function"!==typeof t&&"symbol"!==typeof t?(t=Mu(n),(a=(n=Ve(c).hoistableScripts).get(t))||(a={type:"script",instance:null,count:0,state:null},n.set(t,a)),a):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,e))}}function Pu(e){return'href="'+ft(e)+'"'}function Tu(e){return'link[rel="stylesheet"]['+e+"]"}function Lu(e){return h({},e,{"data-precedence":e.precedence,precedence:null})}function Mu(e){return'[src="'+ft(e)+'"]'}function Iu(e){return"script[async]"+e}function Ou(e,t,n){if(t.count++,null===t.instance)switch(t.type){case"style":var a=e.querySelector('style[data-href~="'+ft(n.href)+'"]');if(a)return t.instance=a,qe(a),a;var s=h({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return qe(a=(e.ownerDocument||e).createElement("style")),eu(a,"style",s),_u(a,n.precedence,e),t.instance=a;case"stylesheet":s=Pu(n.href);var i=e.querySelector(Tu(s));if(i)return t.state.loading|=4,t.instance=i,qe(i),i;a=Lu(n),(s=ju.get(s))&&Du(a,s),qe(i=(e.ownerDocument||e).createElement("link"));var r=i;return r._p=new Promise(function(e,t){r.onload=e,r.onerror=t}),eu(i,"link",a),t.state.loading|=4,_u(i,n.precedence,e),t.instance=i;case"script":return i=Mu(n.src),(s=e.querySelector(Iu(i)))?(t.instance=s,qe(s),s):(a=n,(s=ju.get(i))&&Ru(a=h({},n),s),qe(s=(e=e.ownerDocument||e).createElement("script")),eu(s,"link",a),e.head.appendChild(s),t.instance=s);case"void":return null;default:throw Error(o(443,t.type))}else"stylesheet"===t.type&&0===(4&t.state.loading)&&(a=t.instance,t.state.loading|=4,_u(a,n.precedence,e));return t.instance}function _u(e,t,n){for(var a=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),s=a.length?a[a.length-1]:null,i=s,o=0;o<a.length;o++){var r=a[o];if(r.dataset.precedence===t)i=r;else if(i!==s)break}i?i.parentNode.insertBefore(e,i.nextSibling):(t=9===n.nodeType?n.head:n).insertBefore(e,t.firstChild)}function Du(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function Ru(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var Fu=null;function Xu(e,t,n){if(null===Fu){var a=new Map,s=Fu=new Map;s.set(n,a)}else(a=(s=Fu).get(n))||(a=new Map,s.set(n,a));if(a.has(e))return a;for(a.set(e,null),n=n.getElementsByTagName(e),s=0;s<n.length;s++){var i=n[s];if(!(i[Xe]||i[Me]||"link"===e&&"stylesheet"===i.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==i.namespaceURI){var o=i.getAttribute(t)||"";o=e+o;var r=a.get(o);r?r.push(i):a.set(o,[i])}}return a}function Uu(e,t,n){(e=e.ownerDocument||e).head.insertBefore(n,"title"===t?e.querySelector("head > title"):null)}function zu(e){return"stylesheet"!==e.type||0!==(3&e.state.loading)}var Bu=null;function Hu(){}function Vu(){if(this.count--,0===this.count)if(this.stylesheets)Gu(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}var qu=null;function Gu(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,qu=new Map,t.forEach(Wu,e),qu=null,Vu.call(e))}function Wu(e,t){if(!(4&t.state.loading)){var n=qu.get(e);if(n)var a=n.get(null);else{n=new Map,qu.set(e,n);for(var s=e.querySelectorAll("link[data-precedence],style[data-precedence]"),i=0;i<s.length;i++){var o=s[i];"LINK"!==o.nodeName&&"not all"===o.getAttribute("media")||(n.set(o.dataset.precedence,o),a=o)}a&&n.set(null,a)}o=(s=t.instance).getAttribute("data-precedence"),(i=n.get(o)||a)===a&&n.set(null,s),n.set(o,s),this.count++,a=Vu.bind(this),s.addEventListener("load",a),s.addEventListener("error",a),i?i.parentNode.insertBefore(s,i.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(s,e.firstChild),t.state.loading|=4}}var Ku={$$typeof:w,Provider:null,Consumer:null,_currentValue:D,_currentValue2:D,_threadCount:0};function Qu(e,t,n,a,s,i,o,r){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Se(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Se(0),this.hiddenUpdates=Se(null),this.identifierPrefix=a,this.onUncaughtError=s,this.onCaughtError=i,this.onRecoverableError=o,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=r,this.incompleteTransitions=new Map}function Ju(e,t,n,a,s,i,o,r,l,c,d,u){return e=new Qu(e,t,n,o,r,l,c,u),t=1,!0===i&&(t|=24),i=Da(3,null,null,t),e.current=i,i.stateNode=e,(t=Is()).refCount++,e.pooledCache=t,t.refCount++,i.memoizedState={element:a,isDehydrated:n,cache:t},ni(i),e}function Yu(e){return e?e=Oa:Oa}function $u(e,t,n,a,s,i){s=Yu(s),null===a.context?a.context=s:a.pendingContext=s,(a=si(t)).payload={element:n},null!==(i=void 0===i?null:i)&&(a.callback=i),null!==(n=ii(e,a,t))&&(Dc(n,0,t),oi(n,e,t))}function Zu(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function eh(e,t){Zu(e,t),(e=e.alternate)&&Zu(e,t)}function th(e){if(13===e.tag){var t=La(e,67108864);null!==t&&Dc(t,0,67108864),eh(e,67108864)}}var nh=!0;function ah(e,t,n,a){var s=O.T;O.T=null;var i=_.p;try{_.p=2,ih(e,t,n,a)}finally{_.p=i,O.T=s}}function sh(e,t,n,a){var s=O.T;O.T=null;var i=_.p;try{_.p=8,ih(e,t,n,a)}finally{_.p=i,O.T=s}}function ih(e,t,n,a){if(nh){var s=oh(a);if(null===s)Bd(e,t,a,rh,n),yh(e,a);else if(function(e,t,n,a,s){switch(t){case"focusin":return uh=bh(uh,e,t,n,a,s),!0;case"dragenter":return hh=bh(hh,e,t,n,a,s),!0;case"mouseover":return mh=bh(mh,e,t,n,a,s),!0;case"pointerover":var i=s.pointerId;return ph.set(i,bh(ph.get(i)||null,e,t,n,a,s)),!0;case"gotpointercapture":return i=s.pointerId,fh.set(i,bh(fh.get(i)||null,e,t,n,a,s)),!0}return!1}(s,e,t,n,a))a.stopPropagation();else if(yh(e,a),4&t&&-1<vh.indexOf(e)){for(;null!==s;){var i=Be(s);if(null!==i)switch(i.tag){case 3:if((i=i.stateNode).current.memoizedState.isDehydrated){var o=ye(i.pendingLanes);if(0!==o){var r=i;for(r.pendingLanes|=2,r.entangledLanes|=2;o;){var l=1<<31-me(o);r.entanglements[1]|=l,o&=~l}jd(i),0===(6&nc)&&(jc=te()+500,Nd(0,!1))}}break;case 13:null!==(r=La(i,2))&&Dc(r,0,2),zc(),eh(i,2)}if(null===(i=oh(a))&&Bd(e,t,a,rh,n),i===s)break;s=i}null!==s&&a.stopPropagation()}else Bd(e,t,a,null,n)}}function oh(e){return lh(e=Lt(e))}var rh=null;function lh(e){if(rh=null,null!==(e=ze(e))){var t=l(e);if(null===t)e=null;else{var n=t.tag;if(13===n){if(null!==(e=c(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return rh=e,null}function ch(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ne()){case ae:return 2;case se:return 8;case ie:case oe:return 32;case re:return 268435456;default:return 32}default:return 32}}var dh=!1,uh=null,hh=null,mh=null,ph=new Map,fh=new Map,gh=[],vh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function yh(e,t){switch(e){case"focusin":case"focusout":uh=null;break;case"dragenter":case"dragleave":hh=null;break;case"mouseover":case"mouseout":mh=null;break;case"pointerover":case"pointerout":ph.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":fh.delete(t.pointerId)}}function bh(e,t,n,a,s,i){return null===e||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:a,nativeEvent:i,targetContainers:[s]},null!==t&&(null!==(t=Be(t))&&th(t)),e):(e.eventSystemFlags|=a,t=e.targetContainers,null!==s&&-1===t.indexOf(s)&&t.push(s),e)}function xh(e){var t=ze(e.target);if(null!==t){var n=l(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=c(n)))return e.blockedOn=t,void function(e,t){var n=_.p;try{return _.p=e,t()}finally{_.p=n}}(e.priority,function(){if(13===n.tag){var e=Oc();e=Ae(e);var t=La(n,e);null!==t&&Dc(t,0,e),eh(n,e)}})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function wh(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=oh(e.nativeEvent);if(null!==n)return null!==(t=Be(n))&&th(t),e.blockedOn=n,!1;var a=new(n=e.nativeEvent).constructor(n.type,n);Tt=a,n.target.dispatchEvent(a),Tt=null,t.shift()}return!0}function jh(e,t,n){wh(e)&&n.delete(t)}function Nh(){dh=!1,null!==uh&&wh(uh)&&(uh=null),null!==hh&&wh(hh)&&(hh=null),null!==mh&&wh(mh)&&(mh=null),ph.forEach(jh),fh.forEach(jh)}function Sh(e,t){e.blockedOn===t&&(e.blockedOn=null,dh||(dh=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,Nh)))}var Ch=null;function kh(e){Ch!==e&&(Ch=e,a.unstable_scheduleCallback(a.unstable_NormalPriority,function(){Ch===e&&(Ch=null);for(var t=0;t<e.length;t+=3){var n=e[t],a=e[t+1],s=e[t+2];if("function"!==typeof a){if(null===lh(a||n))continue;break}var i=Be(n);null!==i&&(e.splice(t,3),t-=3,Lo(i,{pending:!0,data:s,method:n.method,action:a},a,s))}}))}function Eh(e){function t(t){return Sh(t,e)}null!==uh&&Sh(uh,e),null!==hh&&Sh(hh,e),null!==mh&&Sh(mh,e),ph.forEach(t),fh.forEach(t);for(var n=0;n<gh.length;n++){var a=gh[n];a.blockedOn===e&&(a.blockedOn=null)}for(;0<gh.length&&null===(n=gh[0]).blockedOn;)xh(n),null===n.blockedOn&&gh.shift();if(null!=(n=(e.ownerDocument||e).$$reactFormReplay))for(a=0;a<n.length;a+=3){var s=n[a],i=n[a+1],o=s[Ie]||null;if("function"===typeof i)o||kh(n);else if(o){var r=null;if(i&&i.hasAttribute("formAction")){if(s=i,o=i[Ie]||null)r=o.formAction;else if(null!==lh(s))continue}else r=o.action;"function"===typeof r?n[a+1]=r:(n.splice(a,3),a-=3),kh(n)}}}function Ah(e){this._internalRoot=e}function Ph(e){this._internalRoot=e}Ph.prototype.render=Ah.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(o(409));$u(t.current,Oc(),e,t,null,null)},Ph.prototype.unmount=Ah.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;$u(e.current,2,null,e,null,null),zc(),t[Oe]=null}},Ph.prototype.unstable_scheduleHydration=function(e){if(e){var t=Te();e={blockedOn:null,target:e,priority:t};for(var n=0;n<gh.length&&0!==t&&t<gh[n].priority;n++);gh.splice(n,0,e),0===n&&xh(e)}};var Th=s.version;if("19.1.1"!==Th)throw Error(o(527,Th,"19.1.1"));_.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw e=Object.keys(e).join(","),Error(o(268,e))}return e=function(e){var t=e.alternate;if(!t){if(null===(t=l(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,a=t;;){var s=n.return;if(null===s)break;var i=s.alternate;if(null===i){if(null!==(a=s.return)){n=a;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return d(s),e;if(i===a)return d(s),t;i=i.sibling}throw Error(o(188))}if(n.return!==a.return)n=s,a=i;else{for(var r=!1,c=s.child;c;){if(c===n){r=!0,n=s,a=i;break}if(c===a){r=!0,a=s,n=i;break}c=c.sibling}if(!r){for(c=i.child;c;){if(c===n){r=!0,n=i,a=s;break}if(c===a){r=!0,a=i,n=s;break}c=c.sibling}if(!r)throw Error(o(189))}}if(n.alternate!==a)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(t),e=null===(e=null!==e?u(e):null)?null:e.stateNode};var Lh={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:O,reconcilerVersion:"19.1.1"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Mh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Mh.isDisabled&&Mh.supportsFiber)try{de=Mh.inject(Lh),ue=Mh}catch(Oh){}}t.createRoot=function(e,t){if(!r(e))throw Error(o(299));var n=!1,a="",s=yr,i=br,l=xr;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(a=t.identifierPrefix),void 0!==t.onUncaughtError&&(s=t.onUncaughtError),void 0!==t.onCaughtError&&(i=t.onCaughtError),void 0!==t.onRecoverableError&&(l=t.onRecoverableError),void 0!==t.unstable_transitionCallbacks&&t.unstable_transitionCallbacks),t=Ju(e,1,!1,null,0,n,a,s,i,l,0,null),e[Oe]=t.current,Ud(e),new Ah(t)},t.hydrateRoot=function(e,t,n){if(!r(e))throw Error(o(299));var a=!1,s="",i=yr,l=br,c=xr,d=null;return null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(a=!0),void 0!==n.identifierPrefix&&(s=n.identifierPrefix),void 0!==n.onUncaughtError&&(i=n.onUncaughtError),void 0!==n.onCaughtError&&(l=n.onCaughtError),void 0!==n.onRecoverableError&&(c=n.onRecoverableError),void 0!==n.unstable_transitionCallbacks&&n.unstable_transitionCallbacks,void 0!==n.formState&&(d=n.formState)),(t=Ju(e,1,!0,t,0,a,s,i,l,c,0,d)).context=Yu(null),n=t.current,(s=si(a=Ae(a=Oc()))).callback=null,ii(n,s,a),n=a,t.current.lanes=n,Ce(t,n),jd(t),e[Oe]=t.current,Ud(e),new Ph(t)},t.version="19.1.1"},119:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(863)},261:(e,t,n)=>{n.r(t),n.d(t,{default:()=>i});var a=n(950),s=n(414);const i=e=>{let{onGifSelect:t,onClose:n,isOpen:i}=e;const[o,r]=(0,a.useState)(""),[l,c]=(0,a.useState)("trending"),d={trending:[{id:1,url:"https://media.giphy.com/media/3o7TKF1fSIs1R19B8Y/giphy.gif",preview:"https://media.giphy.com/media/3o7TKF1fSIs1R19B8Y/200w_d.gif",title:"Success Dance"},{id:2,url:"https://media.giphy.com/media/26u4lOMA8JKSnL9Uk/giphy.gif",preview:"https://media.giphy.com/media/26u4lOMA8JKSnL9Uk/200w_d.gif",title:"Celebration"},{id:3,url:"https://media.giphy.com/media/l0MYt5jPR6QX5pnqM/giphy.gif",preview:"https://media.giphy.com/media/l0MYt5jPR6QX5pnqM/200w_d.gif",title:"Mind Blown"},{id:4,url:"https://media.giphy.com/media/3o6Zt6KHxJTbXCnSvu/giphy.gif",preview:"https://media.giphy.com/media/3o6Zt6KHxJTbXCnSvu/200w_d.gif",title:"Thumbs Up"}],reactions:[{id:5,url:"https://media.giphy.com/media/3o7aCSPqXE5C6T8tBC/giphy.gif",preview:"https://media.giphy.com/media/3o7aCSPqXE5C6T8tBC/200w_d.gif",title:"Shocked"},{id:6,url:"https://media.giphy.com/media/26ufdipQqU2lhNA4g/giphy.gif",preview:"https://media.giphy.com/media/26ufdipQqU2lhNA4g/200w_d.gif",title:"Laughing"}],emotions:[{id:7,url:"https://media.giphy.com/media/3o6ZtpvPW6fqxkE1xu/giphy.gif",preview:"https://media.giphy.com/media/3o6ZtpvPW6fqxkE1xu/200w_d.gif",title:"Love Heart"}],animals:[{id:8,url:"https://media.giphy.com/media/JIX9t2j0ZTN9S/giphy.gif",preview:"https://media.giphy.com/media/JIX9t2j0ZTN9S/200w_d.gif",title:"Cute Cat"}]},u=(0,a.useCallback)(e=>{t({name:"".concat(e.title,".gif"),url:e.url,size:0,type:"image/gif",isGif:!0}),n()},[t,n]),h=()=>{const e=d[l]||d.trending;return o?e.filter(e=>e.title.toLowerCase().includes(o.toLowerCase())):e};return i?(0,s.jsx)("div",{className:"gif-picker-overlay",children:(0,s.jsxs)("div",{className:"gif-picker",children:[(0,s.jsxs)("div",{className:"gif-picker-header",children:[(0,s.jsx)("h3",{children:"Choose a GIF"}),(0,s.jsx)("button",{className:"close-btn",onClick:n,children:"\xd7"})]}),(0,s.jsx)("div",{className:"gif-search",children:(0,s.jsx)("input",{type:"text",placeholder:"Search GIFs...",value:o,onChange:e=>r(e.target.value),className:"gif-search-input"})}),(0,s.jsx)("div",{className:"gif-categories",children:[{id:"trending",name:"Trending",emoji:"\ud83d\udd25"},{id:"reactions",name:"Reactions",emoji:"\ud83d\ude02"},{id:"emotions",name:"Emotions",emoji:"\u2764\ufe0f"},{id:"animals",name:"Animals",emoji:"\ud83d\udc31"},{id:"sports",name:"Sports",emoji:"\u26bd"},{id:"entertainment",name:"Entertainment",emoji:"\ud83c\udfac"}].map(e=>(0,s.jsxs)("button",{className:"category-btn ".concat(l===e.id?"active":""),onClick:()=>c(e.id),children:[(0,s.jsx)("span",{className:"category-emoji",children:e.emoji}),(0,s.jsx)("span",{className:"category-name",children:e.name})]},e.id))}),(0,s.jsx)("div",{className:"gif-grid",children:h().map(e=>(0,s.jsxs)("div",{className:"gif-item",onClick:()=>u(e),children:[(0,s.jsx)("img",{src:e.preview,alt:e.title,className:"gif-preview"}),(0,s.jsx)("div",{className:"gif-overlay",children:(0,s.jsx)("span",{className:"gif-title",children:e.title})})]},e.id))}),0===h().length&&(0,s.jsxs)("div",{className:"no-gifs",children:[(0,s.jsxs)("p",{children:['No GIFs found for "',o,'"']}),(0,s.jsx)("p",{children:"Try a different search term"})]})]})}):null}},340:(e,t,n)=>{e.exports=n(487)},352:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(85)},373:(e,t,n)=>{n.d(t,{A:()=>c});var a=n(555),s=n(950),i=n(473),o=n(955),r=n(719),l=n(414);const c=e=>{var t;let{isOpen:n,contact:c,onClose:d,onSave:u,darkMode:h=!1,allContacts:m=[]}=e;const[p,f]=(0,s.useState)({name:"",nickname:"",emails:[{type:"personal",value:""}],phones:[{type:"mobile",value:""}],company:"",jobTitle:"",website:"",location:"",notes:"",category:"friends",tags:[],avatar:null,birthdate:"",relationship:"",linkedContacts:[],importance:"normal",socialLinks:{twitter:"",linkedin:"",instagram:"",facebook:"",github:"",discord:""}}),[g,v]=(0,s.useState)({}),[y,b]=(0,s.useState)(!1),[x,w]=(0,s.useState)(""),[j,N]=(0,s.useState)("basic"),[S,C]=(0,s.useState)(null),[k,E]=(0,s.useState)([]),[A,P]=(0,s.useState)(!1),[T,L]=(0,s.useState)(!1);(0,s.useEffect)(()=>{var e,t,n,a,s,i;c?f({name:c.name||"",nickname:c.nickname||"",emails:c.emails||(c.email?[{type:"personal",value:c.email}]:[{type:"personal",value:""}]),phones:c.phones||(c.phone?[{type:"mobile",value:c.phone}]:[{type:"mobile",value:""}]),company:c.company||"",jobTitle:c.jobTitle||"",website:c.website||"",location:c.location||"",notes:c.notes||"",category:c.category||"friends",tags:c.tags||[],avatar:c.avatar||null,birthdate:c.birthdate||"",relationship:c.relationship||"",linkedContacts:c.linkedContacts||[],importance:c.importance||"normal",socialLinks:{twitter:(null===(e=c.socialLinks)||void 0===e?void 0:e.twitter)||"",linkedin:(null===(t=c.socialLinks)||void 0===t?void 0:t.linkedin)||"",instagram:(null===(n=c.socialLinks)||void 0===n?void 0:n.instagram)||"",facebook:(null===(a=c.socialLinks)||void 0===a?void 0:a.facebook)||"",github:(null===(s=c.socialLinks)||void 0===s?void 0:s.github)||"",discord:(null===(i=c.socialLinks)||void 0===i?void 0:i.discord)||""}}):f({name:"",nickname:"",emails:[{type:"personal",value:""}],phones:[{type:"mobile",value:""}],company:"",jobTitle:"",website:"",location:"",notes:"",category:"friends",tags:[],avatar:null,birthdate:"",relationship:"",linkedContacts:[],importance:"normal",socialLinks:{twitter:"",linkedin:"",instagram:"",facebook:"",github:"",discord:""}});v({})},[c,n]);const M=(0,s.useCallback)((e,t)=>{f(n=>(0,a.A)((0,a.A)({},n),{},{[e]:t})),g[e]&&v(t=>(0,a.A)((0,a.A)({},t),{},{[e]:null}))},[g]),I=(0,s.useCallback)((e,t)=>{f(n=>(0,a.A)((0,a.A)({},n),{},{socialLinks:(0,a.A)((0,a.A)({},n.socialLinks),{},{[e]:t})}))},[]),O=(0,s.useCallback)((e,t,n)=>{f(s=>(0,a.A)((0,a.A)({},s),{},{phones:s.phones.map((s,i)=>i===e?(0,a.A)((0,a.A)({},s),{},{[t]:n}):s)}))},[]),_=(0,s.useCallback)(()=>{var e;f(e=>(0,a.A)((0,a.A)({},e),{},{phones:[...e.phones,{type:"mobile",value:""}]})),null===i.G||void 0===i.G||null===(e=i.G.haptic)||void 0===e||e.call(i.G,"light")},[]),D=(0,s.useCallback)(e=>{var t;p.phones.length>1&&(f(t=>(0,a.A)((0,a.A)({},t),{},{phones:t.phones.filter((t,n)=>n!==e)})),null===i.G||void 0===i.G||null===(t=i.G.haptic)||void 0===t||t.call(i.G,"light"))},[p.phones.length]),R=(0,s.useCallback)((e,t,n)=>{f(s=>(0,a.A)((0,a.A)({},s),{},{emails:s.emails.map((s,i)=>i===e?(0,a.A)((0,a.A)({},s),{},{[t]:n}):s)}))},[]),F=(0,s.useCallback)(()=>{var e;f(e=>(0,a.A)((0,a.A)({},e),{},{emails:[...e.emails,{type:"personal",value:""}]})),null===i.G||void 0===i.G||null===(e=i.G.haptic)||void 0===e||e.call(i.G,"light")},[]),X=(0,s.useCallback)(e=>{var t;p.emails.length>1&&(f(t=>(0,a.A)((0,a.A)({},t),{},{emails:t.emails.filter((t,n)=>n!==e)})),null===i.G||void 0===i.G||null===(t=i.G.haptic)||void 0===t||t.call(i.G,"light"))},[p.emails.length]),U=(0,s.useCallback)(()=>{var e;x.trim()&&!p.tags.includes(x.trim())&&(f(e=>(0,a.A)((0,a.A)({},e),{},{tags:[...e.tags,x.trim()]})),w(""),null===i.G||void 0===i.G||null===(e=i.G.haptic)||void 0===e||e.call(i.G,"light"))},[x,p.tags]),z=(0,s.useCallback)(e=>{var t;f(t=>(0,a.A)((0,a.A)({},t),{},{tags:t.tags.filter(t=>t!==e)})),null===i.G||void 0===i.G||null===(t=i.G.haptic)||void 0===t||t.call(i.G,"light")},[]),B=(0,s.useCallback)(e=>{var t;f(t=>{const n=t.linkedContacts.includes(e);return(0,a.A)((0,a.A)({},t),{},{linkedContacts:n?t.linkedContacts.filter(t=>t!==e):[...t.linkedContacts,e]})}),null===i.G||void 0===i.G||null===(t=i.G.haptic)||void 0===t||t.call(i.G,"light")},[]),H=(0,s.useCallback)(async()=>{const e={};if(p.name.trim()?p.name.trim().length<2&&(e.name="Name must be at least 2 characters"):e.name="Name is required",p.emails.forEach((t,n)=>{t.value&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t.value)&&(e["email_".concat(n)]="Invalid email format")}),p.phones.forEach((t,n)=>{if(t.value){const a=t.value.replace(/[\s\-()\\+]/g,"");/^[0-9]{7,15}$/.test(a)||(e["phone_".concat(n)]="Invalid phone number (7-15 digits)")}}),p.website&&!/^https?:\/\/.+\..+/.test(p.website)&&(e.website="Website must be a valid URL (http:// or https://)"),p.birthdate){const t=new Date(p.birthdate),n=new Date,a=new Date("1900-01-01");t>n?e.birthdate="Birthdate cannot be in the future":t<a&&(e.birthdate="Please enter a valid birthdate")}Object.entries(p.socialLinks).forEach(t=>{let[n,a]=t;if(a){let t=!0;switch(n){case"twitter":t=/^@?[A-Za-z0-9_]{1,15}$/.test(a);break;case"linkedin":t=/^(linkedin\.com\/in\/[A-Za-z0-9_-]+|[A-Za-z0-9_-]+)$/.test(a);break;case"instagram":t=/^@?[A-Za-z0-9_.]{1,30}$/.test(a);break;case"github":t=/^[A-Za-z0-9_-]{1,39}$/.test(a);break;case"discord":t=/^.{2,32}#[0-9]{4}$/.test(a)}t||(e["social_".concat(n)]="Invalid ".concat(n," format"))}});try{const e=await o.e.findDuplicates(p,null===c||void 0===c?void 0:c.id);e.length>0?C({message:"Similar contact found: ".concat(e[0].name),duplicates:e}):C(null);const t=await o.e.getPotentialDuplicates(p,.6);E(t.filter(e=>e.contact.id!==(null===c||void 0===c?void 0:c.id)))}catch(t){console.error("Error checking duplicates:",t)}return v(e),0===Object.keys(e).length},[p,null===c||void 0===c?void 0:c.id]),V=(0,s.useCallback)(async e=>{e.preventDefault();if(await H()){b(!0);try{var t,n,s;const e=Object.fromEntries(Object.entries(p.socialLinks).filter(e=>{let[t,n]=e;return n.trim()})),o=p.emails.filter(e=>e.value.trim()),r=p.phones.filter(e=>e.value.trim()),l=(0,a.A)((0,a.A)({},p),{},{emails:o,phones:r,socialLinks:e,email:(null===(t=o[0])||void 0===t?void 0:t.value)||"",phone:(null===(n=r[0])||void 0===n?void 0:n.value)||"",updatedAt:(new Date).toISOString()});c||(l.createdAt=(new Date).toISOString(),l.id="contact_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9))),await u(l),null===i.G||void 0===i.G||null===(s=i.G.haptic)||void 0===s||s.call(i.G,"success")}catch(l){var o;console.error("Failed to save contact:",l),l.message.includes("Duplicate contact found")&&C({message:l.message,duplicates:[]}),null===i.G||void 0===i.G||null===(o=i.G.haptic)||void 0===o||o.call(i.G,"error")}finally{b(!1)}}else{var r;null===i.G||void 0===i.G||null===(r=i.G.haptic)||void 0===r||r.call(i.G,"error")}},[p,c,u,H]),q=(0,s.useCallback)(e=>{var t;const n=null===(t=e.target.files)||void 0===t?void 0:t[0];if(n){var s;const e=new FileReader;e.onload=e=>{f(t=>(0,a.A)((0,a.A)({},t),{},{avatar:e.target.result}))},e.readAsDataURL(n),null===i.G||void 0===i.G||null===(s=i.G.haptic)||void 0===s||s.call(i.G,"light")}},[]),G=async e=>{try{var t;b(!0);const n=(0,a.A)((0,a.A)((0,a.A)({},e),p),{},{emails:[...e.emails||[],...p.emails.filter(t=>!(e.emails||[]).some(e=>e.value.toLowerCase()===t.value.toLowerCase()))],phones:[...e.phones||[],...p.phones.filter(t=>!(e.phones||[]).some(e=>o.e.normalizePhone(e.value)===o.e.normalizePhone(t.value)))],tags:[...new Set([...e.tags||[],...p.tags||[]])],socialLinks:(0,a.A)((0,a.A)({},e.socialLinks),p.socialLinks)});await u(n),P(!1),C(null),E([]),null===i.G||void 0===i.G||null===(t=i.G.haptic)||void 0===t||t.call(i.G,"success")}catch(s){var n;console.error("Failed to merge contacts:",s),null===i.G||void 0===i.G||null===(n=i.G.haptic)||void 0===n||n.call(i.G,"error")}finally{b(!1)}};return n?(0,l.jsxs)("div",{className:"contact-modal-overlay ".concat(h?"dark":""),children:[(0,l.jsxs)("div",{className:"contact-modal",children:[(0,l.jsxs)("div",{className:"modal-header",children:[(0,l.jsx)("h2",{children:c?"Edit Contact":"Add New Contact"}),(0,l.jsx)("button",{className:"close-btn",onClick:d,disabled:y,children:"\u2715"})]}),(0,l.jsxs)("form",{onSubmit:V,className:"contact-form",children:[(0,l.jsxs)("div",{className:"tab-navigation",children:[(0,l.jsx)("button",{type:"button",className:"tab-btn ".concat("basic"===j?"active":""),onClick:()=>N("basic"),children:"\ud83d\udcdd Basic Info"}),(0,l.jsx)("button",{type:"button",className:"tab-btn ".concat("contact"===j?"active":""),onClick:()=>N("contact"),children:"\ud83d\udcde Contact Details"}),(0,l.jsx)("button",{type:"button",className:"tab-btn ".concat("social"===j?"active":""),onClick:()=>N("social"),children:"\ud83c\udf10 Social & More"})]}),(0,l.jsxs)("div",{className:"form-content",children:[S&&(0,l.jsxs)("div",{className:"duplicate-warning",children:[(0,l.jsxs)("div",{className:"warning-header",children:[(0,l.jsx)("span",{className:"warning-icon",children:"\u26a0\ufe0f"}),(0,l.jsx)("span",{className:"warning-text",children:S.message})]}),S.duplicates.length>0&&(0,l.jsx)("div",{className:"duplicate-actions",children:(0,l.jsx)("button",{type:"button",className:"view-duplicates-btn",onClick:()=>P(!0),children:"View Similar Contacts"})})]}),k.length>0&&!S&&(0,l.jsxs)("div",{className:"potential-duplicates-info",children:[(0,l.jsx)("span",{className:"info-icon",children:"\ud83d\udca1"}),(0,l.jsxs)("span",{children:["Found ",k.length," potentially similar contact",k.length>1?"s":""]}),(0,l.jsx)("button",{type:"button",className:"view-potential-btn",onClick:()=>P(!0),children:"Review"})]}),"basic"===j&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"avatar-section",children:(0,l.jsxs)("div",{className:"avatar-container",children:[(0,l.jsx)("div",{className:"contact-avatar-preview",children:p.avatar?(0,l.jsx)("img",{src:p.avatar,alt:"Avatar"}):(0,l.jsx)("span",{className:"avatar-placeholder",children:p.name.charAt(0).toUpperCase()||"?"})}),(0,l.jsxs)("label",{className:"avatar-upload-btn",children:["\ud83d\udcf7",(0,l.jsx)("input",{type:"file",accept:"image/*",onChange:q,style:{display:"none"}})]})]})}),(0,l.jsxs)("div",{className:"form-section",children:[(0,l.jsx)("h3",{children:"Basic Information"}),(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsx)("label",{children:"Full Name *"}),(0,l.jsx)("input",{type:"text",value:p.name,onChange:e=>M("name",e.target.value),placeholder:"John Doe",className:g.name?"error":"",required:!0}),g.name&&(0,l.jsx)("span",{className:"error-text",children:g.name})]}),(0,l.jsxs)("div",{className:"form-row",children:[(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsx)("label",{children:"Nickname"}),(0,l.jsx)("input",{type:"text",value:p.nickname,onChange:e=>M("nickname",e.target.value),placeholder:"Johnny"})]}),(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsx)("label",{children:"Importance"}),(0,l.jsxs)("select",{value:p.importance,onChange:e=>M("importance",e.target.value),children:[(0,l.jsx)("option",{value:"low",children:"\ud83d\udd39 Low"}),(0,l.jsx)("option",{value:"normal",children:"\u26aa Normal"}),(0,l.jsx)("option",{value:"high",children:"\ud83d\udd38 High"}),(0,l.jsx)("option",{value:"critical",children:"\ud83d\udd34 Critical"})]})]})]}),(0,l.jsxs)("div",{className:"form-row",children:[(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsx)("label",{children:"Birthdate"}),(0,l.jsx)("input",{type:"date",value:p.birthdate,onChange:e=>M("birthdate",e.target.value),className:g.birthdate?"error":""}),g.birthdate&&(0,l.jsx)("span",{className:"error-text",children:g.birthdate})]}),(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsx)("label",{children:"Relationship"}),(0,l.jsxs)("select",{value:p.relationship,onChange:e=>M("relationship",e.target.value),children:[(0,l.jsx)("option",{value:"",children:"Select relationship..."}),(0,l.jsx)("option",{value:"spouse",children:"\ud83d\udc91 Spouse"}),(0,l.jsx)("option",{value:"partner",children:"\ud83d\udc95 Partner"}),(0,l.jsx)("option",{value:"parent",children:"\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d\udc66 Parent"}),(0,l.jsx)("option",{value:"child",children:"\ud83d\udc76 Child"}),(0,l.jsx)("option",{value:"sibling",children:"\ud83d\udc6b Sibling"}),(0,l.jsx)("option",{value:"friend",children:"\ud83d\udc6c Friend"}),(0,l.jsx)("option",{value:"colleague",children:"\ud83d\udcbc Colleague"}),(0,l.jsx)("option",{value:"boss",children:"\ud83d\udc54 Boss"}),(0,l.jsx)("option",{value:"employee",children:"\ud83d\udc77 Employee"}),(0,l.jsx)("option",{value:"client",children:"\ud83e\udd1d Client"}),(0,l.jsx)("option",{value:"other",children:"\ud83d\udccb Other"})]})]})]}),(0,l.jsxs)("div",{className:"form-row",children:[(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsx)("label",{children:"Location"}),(0,l.jsx)("input",{type:"text",value:p.location,onChange:e=>M("location",e.target.value),placeholder:"San Francisco, CA"})]}),(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsx)("label",{children:"Category"}),(0,l.jsxs)("select",{value:p.category,onChange:e=>M("category",e.target.value),children:[(0,l.jsx)("option",{value:"friends",children:"\ud83d\udc6b Friends"}),(0,l.jsx)("option",{value:"family",children:"\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d\udc66 Family"}),(0,l.jsx)("option",{value:"work",children:"\ud83d\udcbc Work"}),(0,l.jsx)("option",{value:"business",children:"\ud83e\udd1d Business"}),(0,l.jsx)("option",{value:"other",children:"\ud83d\udccb Other"})]})]})]})]})]}),"contact"===j&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"form-section",children:[(0,l.jsxs)("div",{className:"section-header",children:[(0,l.jsx)("h3",{children:"\ud83d\udce7 Email Addresses"}),(0,l.jsx)("button",{type:"button",className:"add-field-btn",onClick:F,disabled:p.emails.length>=5,children:"\u2795 Add Email"})]}),p.emails.map((e,t)=>(0,l.jsxs)("div",{className:"field-group",children:[(0,l.jsxs)("div",{className:"field-row",children:[(0,l.jsxs)("select",{value:e.type,onChange:e=>R(t,"type",e.target.value),className:"field-type-select",children:[(0,l.jsx)("option",{value:"personal",children:"Personal"}),(0,l.jsx)("option",{value:"work",children:"Work"}),(0,l.jsx)("option",{value:"other",children:"Other"})]}),(0,l.jsx)("input",{type:"email",value:e.value,onChange:e=>R(t,"value",e.target.value),placeholder:"john@example.com",className:g["email_".concat(t)]?"error":""}),p.emails.length>1&&(0,l.jsx)("button",{type:"button",className:"remove-field-btn",onClick:()=>X(t),children:"\u2715"})]}),g["email_".concat(t)]&&(0,l.jsx)("span",{className:"error-text",children:g["email_".concat(t)]})]},t))]}),(0,l.jsxs)("div",{className:"form-section",children:[(0,l.jsxs)("div",{className:"section-header",children:[(0,l.jsx)("h3",{children:"\ud83d\udcf1 Phone Numbers"}),(0,l.jsx)("button",{type:"button",className:"add-field-btn",onClick:_,disabled:p.phones.length>=5,children:"\u2795 Add Phone"})]}),p.phones.map((e,t)=>(0,l.jsxs)("div",{className:"field-group",children:[(0,l.jsxs)("div",{className:"field-row",children:[(0,l.jsxs)("select",{value:e.type,onChange:e=>O(t,"type",e.target.value),className:"field-type-select",children:[(0,l.jsx)("option",{value:"mobile",children:"\ud83d\udcf1 Mobile"}),(0,l.jsx)("option",{value:"home",children:"\ud83c\udfe0 Home"}),(0,l.jsx)("option",{value:"work",children:"\ud83d\udcbc Work"}),(0,l.jsx)("option",{value:"fax",children:"\ud83d\udce0 Fax"}),(0,l.jsx)("option",{value:"other",children:"\ud83d\udcde Other"})]}),(0,l.jsx)("input",{type:"tel",value:e.value,onChange:e=>O(t,"value",e.target.value),placeholder:"+1 (555) 123-4567",className:g["phone_".concat(t)]?"error":""}),e.value&&e.value.trim()&&(0,l.jsx)("button",{type:"button",className:"call-phone-btn",onClick:()=>L(!0),title:"Call this number",children:"\ud83d\udcde"}),p.phones.length>1&&(0,l.jsx)("button",{type:"button",className:"remove-field-btn",onClick:()=>D(t),children:"\u2715"})]}),g["phone_".concat(t)]&&(0,l.jsx)("span",{className:"error-text",children:g["phone_".concat(t)]})]},t))]}),(0,l.jsxs)("div",{className:"form-section",children:[(0,l.jsx)("h3",{children:"\ud83d\udcbc Work Information"}),(0,l.jsxs)("div",{className:"form-row",children:[(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsx)("label",{children:"Company"}),(0,l.jsx)("input",{type:"text",value:p.company,onChange:e=>M("company",e.target.value),placeholder:"Acme Corp"})]}),(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsx)("label",{children:"Job Title"}),(0,l.jsx)("input",{type:"text",value:p.jobTitle,onChange:e=>M("jobTitle",e.target.value),placeholder:"Software Engineer"})]})]}),(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsx)("label",{children:"Website"}),(0,l.jsx)("input",{type:"url",value:p.website,onChange:e=>M("website",e.target.value),placeholder:"https://example.com",className:g.website?"error":""}),g.website&&(0,l.jsx)("span",{className:"error-text",children:g.website})]})]})]}),"social"===j&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"form-section",children:[(0,l.jsx)("h3",{children:"\ud83c\udf10 Social Media"}),(0,l.jsxs)("div",{className:"form-row",children:[(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsx)("label",{children:"\ud83d\udc26 Twitter"}),(0,l.jsx)("input",{type:"text",value:p.socialLinks.twitter,onChange:e=>I("twitter",e.target.value),placeholder:"@username",className:g.social_twitter?"error":""}),g.social_twitter&&(0,l.jsx)("span",{className:"error-text",children:g.social_twitter})]}),(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsx)("label",{children:"\ud83d\udcbc LinkedIn"}),(0,l.jsx)("input",{type:"text",value:p.socialLinks.linkedin,onChange:e=>I("linkedin",e.target.value),placeholder:"linkedin.com/in/username",className:g.social_linkedin?"error":""}),g.social_linkedin&&(0,l.jsx)("span",{className:"error-text",children:g.social_linkedin})]})]}),(0,l.jsxs)("div",{className:"form-row",children:[(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsx)("label",{children:"\ud83d\udcf7 Instagram"}),(0,l.jsx)("input",{type:"text",value:p.socialLinks.instagram,onChange:e=>I("instagram",e.target.value),placeholder:"@username",className:g.social_instagram?"error":""}),g.social_instagram&&(0,l.jsx)("span",{className:"error-text",children:g.social_instagram})]}),(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsx)("label",{children:"\ud83d\udc64 Facebook"}),(0,l.jsx)("input",{type:"text",value:p.socialLinks.facebook,onChange:e=>I("facebook",e.target.value),placeholder:"facebook.com/username"})]})]}),(0,l.jsxs)("div",{className:"form-row",children:[(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsx)("label",{children:"\ud83d\udcbb GitHub"}),(0,l.jsx)("input",{type:"text",value:p.socialLinks.github,onChange:e=>I("github",e.target.value),placeholder:"username",className:g.social_github?"error":""}),g.social_github&&(0,l.jsx)("span",{className:"error-text",children:g.social_github})]}),(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsx)("label",{children:"\ud83c\udfae Discord"}),(0,l.jsx)("input",{type:"text",value:p.socialLinks.discord,onChange:e=>I("discord",e.target.value),placeholder:"username#1234",className:g.social_discord?"error":""}),g.social_discord&&(0,l.jsx)("span",{className:"error-text",children:g.social_discord})]})]})]}),m.length>0&&(0,l.jsxs)("div",{className:"form-section",children:[(0,l.jsx)("h3",{children:"\ud83d\udd17 Linked Contacts"}),(0,l.jsx)("p",{className:"section-description",children:"Link this contact to related people (family, colleagues, etc.)"}),(0,l.jsx)("div",{className:"linked-contacts-grid",children:m.filter(e=>e.id!==(null===c||void 0===c?void 0:c.id)).slice(0,8).map(e=>(0,l.jsxs)("label",{className:"linked-contact-item",children:[(0,l.jsx)("input",{type:"checkbox",checked:p.linkedContacts.includes(e.id),onChange:()=>B(e.id)}),(0,l.jsxs)("div",{className:"linked-contact-info",children:[(0,l.jsx)("div",{className:"linked-contact-avatar",children:e.avatar?(0,l.jsx)("img",{src:e.avatar,alt:e.name}):(0,l.jsx)("span",{children:e.name.charAt(0).toUpperCase()})}),(0,l.jsx)("span",{className:"linked-contact-name",children:e.name})]})]},e.id))})]}),(0,l.jsxs)("div",{className:"form-section",children:[(0,l.jsx)("h3",{children:"\ud83c\udff7\ufe0f Tags"}),(0,l.jsxs)("div",{className:"tags-input",children:[(0,l.jsx)("div",{className:"current-tags",children:p.tags.map((e,t)=>(0,l.jsxs)("span",{className:"tag",children:[e,(0,l.jsx)("button",{type:"button",className:"remove-tag",onClick:()=>z(e),children:"\u2715"})]},t))}),(0,l.jsxs)("div",{className:"add-tag-section",children:[(0,l.jsx)("input",{type:"text",value:x,onChange:e=>w(e.target.value),placeholder:"Add a tag...",onKeyPress:e=>{"Enter"===e.key&&(e.preventDefault(),U())}}),(0,l.jsx)("button",{type:"button",className:"add-tag-btn",onClick:U,disabled:!x.trim(),children:"+"})]})]})]}),(0,l.jsxs)("div",{className:"form-section",children:[(0,l.jsx)("h3",{children:"\ud83d\udcdd Notes"}),(0,l.jsx)("textarea",{value:p.notes,onChange:e=>M("notes",e.target.value),placeholder:"Additional notes about this contact...",rows:"4"})]})]})]}),(0,l.jsxs)("div",{className:"modal-footer",children:[(0,l.jsx)("button",{type:"button",className:"cancel-btn",onClick:d,disabled:y,children:"Cancel"}),(0,l.jsx)("button",{type:"submit",className:"save-btn",disabled:y||!p.name.trim(),children:y?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"loading-spinner small"}),"Saving..."]}):(0,l.jsx)(l.Fragment,{children:c?"\ud83d\udcbe Update Contact":"\u2795 Add Contact"})})]})]})]}),A&&(0,l.jsx)("div",{className:"duplicate-modal-overlay",children:(0,l.jsxs)("div",{className:"duplicate-modal",children:[(0,l.jsxs)("div",{className:"duplicate-modal-header",children:[(0,l.jsx)("h3",{children:"Similar Contacts Found"}),(0,l.jsx)("button",{className:"close-btn",onClick:()=>P(!1),children:"\u2715"})]}),(0,l.jsxs)("div",{className:"duplicate-modal-content",children:[(null===S||void 0===S||null===(t=S.duplicates)||void 0===t?void 0:t.length)>0&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("h4",{children:"\ud83d\udeab Exact Duplicates"}),(0,l.jsx)("div",{className:"duplicate-list",children:S.duplicates.map((e,t)=>{var n,a,s,i;return(0,l.jsxs)("div",{className:"duplicate-item exact",children:[(0,l.jsxs)("div",{className:"duplicate-info",children:[(0,l.jsx)("div",{className:"duplicate-avatar",children:e.avatar?(0,l.jsx)("img",{src:e.avatar,alt:e.name}):(0,l.jsx)("span",{children:e.name.charAt(0).toUpperCase()})}),(0,l.jsxs)("div",{className:"duplicate-details",children:[(0,l.jsx)("div",{className:"duplicate-name",children:e.name}),(0,l.jsx)("div",{className:"duplicate-contact",children:(null===(n=e.emails)||void 0===n||null===(a=n[0])||void 0===a?void 0:a.value)||e.email||(null===(s=e.phones)||void 0===s||null===(i=s[0])||void 0===i?void 0:i.value)||e.phone})]})]}),(0,l.jsx)("div",{className:"duplicate-actions",children:(0,l.jsx)("button",{className:"merge-btn",onClick:()=>G(e),children:"Merge"})})]},t)})})]}),k.length>0&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("h4",{children:"\ud83d\udd0d Potential Duplicates"}),(0,l.jsx)("div",{className:"duplicate-list",children:k.map((e,t)=>{var n,a,s,i;return(0,l.jsxs)("div",{className:"duplicate-item potential",children:[(0,l.jsxs)("div",{className:"duplicate-info",children:[(0,l.jsx)("div",{className:"duplicate-avatar",children:e.contact.avatar?(0,l.jsx)("img",{src:e.contact.avatar,alt:e.contact.name}):(0,l.jsx)("span",{children:e.contact.name.charAt(0).toUpperCase()})}),(0,l.jsxs)("div",{className:"duplicate-details",children:[(0,l.jsx)("div",{className:"duplicate-name",children:e.contact.name}),(0,l.jsx)("div",{className:"duplicate-contact",children:(null===(n=e.contact.emails)||void 0===n||null===(a=n[0])||void 0===a?void 0:a.value)||e.contact.email||(null===(s=e.contact.phones)||void 0===s||null===(i=s[0])||void 0===i?void 0:i.value)||e.contact.phone}),(0,l.jsxs)("div",{className:"similarity-score",children:[Math.round(100*e.score),"% similar"]}),(0,l.jsx)("div",{className:"similarity-reasons",children:e.reasons.join(", ")})]})]}),(0,l.jsx)("div",{className:"duplicate-actions",children:(0,l.jsx)("button",{className:"merge-btn",onClick:()=>G(e.contact),children:"Merge"})})]},t)})})]})]}),(0,l.jsx)("div",{className:"duplicate-modal-footer",children:(0,l.jsx)("button",{className:"cancel-btn",onClick:()=>P(!1),children:"Keep Separate"})})]})}),(0,l.jsx)(r.A,{isOpen:T,onClose:()=>L(!1),contact:p.phones.length>0&&p.phones[0].value?{name:p.name||"Contact",phone:p.phones[0].value}:null,darkMode:h})]}):null}},398:(e,t,n)=>{n.d(t,{A:()=>s});var a=n(555);const s=new class{constructor(){this.keyPairs=new Map,this.publicKeys=new Map,this.sessionKeys=new Map,this.isInitialized=!1}async initialize(e){try{this.userId=e;let t=await this.loadUserKeys(e);return t?console.log("\ud83d\udd11 Loaded existing encryption keys for user:",e):(t=await this.generateKeyPair(),await this.saveUserKeys(e,t),console.log("\ud83d\udd11 Generated new encryption keys for user:",e)),this.keyPairs.set(e,t),this.isInitialized=!0,!0}catch(t){return console.error("\u274c Failed to initialize encryption:",t),!1}}async generateKeyPair(){try{return await window.crypto.subtle.generateKey({name:"RSA-OAEP",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:"SHA-256"},!0,["encrypt","decrypt"])}catch(e){throw console.error("\u274c Failed to generate key pair:",e),e}}async exportPublicKey(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.userId;try{const t=this.keyPairs.get(e);if(!t)throw new Error("No key pair found for user");const n=await window.crypto.subtle.exportKey("spki",t.publicKey);return this.arrayBufferToBase64(n)}catch(t){throw console.error("\u274c Failed to export public key:",t),t}}async importPublicKey(e,t){try{const n=this.base64ToArrayBuffer(t),a=await window.crypto.subtle.importKey("spki",n,{name:"RSA-OAEP",hash:"SHA-256"},!1,["encrypt"]);return this.publicKeys.set(e,a),console.log("\ud83d\udd11 Imported public key for user:",e),!0}catch(n){return console.error("\u274c Failed to import public key:",n),!1}}async encryptMessage(e,t){try{if(!this.isInitialized)throw new Error("Encryption service not initialized");const n=this.publicKeys.get(t);if(!n)throw new Error("No public key found for user: ".concat(t));const a=(new TextEncoder).encode(e),s=await window.crypto.subtle.encrypt({name:"RSA-OAEP"},n,a);return{encryptedContent:this.arrayBufferToBase64(s),senderId:this.userId,recipientId:t,timestamp:(new Date).toISOString(),isEncrypted:!0}}catch(n){throw console.error("\u274c Failed to encrypt message:",n),n}}async decryptMessage(e){try{if(!this.isInitialized)throw new Error("Encryption service not initialized");const t=this.keyPairs.get(this.userId);if(!t)throw new Error("No private key found for decryption");const n=this.base64ToArrayBuffer(e.encryptedContent),s=await window.crypto.subtle.decrypt({name:"RSA-OAEP"},t.privateKey,n),i=(new TextDecoder).decode(s);return(0,a.A)((0,a.A)({},e),{},{content:i,isDecrypted:!0})}catch(t){return console.error("\u274c Failed to decrypt message:",t),(0,a.A)((0,a.A)({},e),{},{content:"[Decryption Failed]",decryptionError:!0})}}async encryptForGroup(e,t){try{const n={};for(const a of t)if(a!==this.userId){const t=await this.encryptMessage(e,a);n[a]=t.encryptedContent}return{senderId:this.userId,encryptedPayloads:n,timestamp:(new Date).toISOString(),isGroupEncrypted:!0}}catch(n){throw console.error("\u274c Failed to encrypt for group:",n),n}}async generateKeyFingerprint(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.userId;try{const t=await this.exportPublicKey(e),n=this.base64ToArrayBuffer(t),a=await window.crypto.subtle.digest("SHA-256",n),s=Array.from(new Uint8Array(a));return s.map(e=>e.toString(16).padStart(2,"0")).join("").match(/.{1,4}/g).join(" ").toUpperCase()}catch(t){throw console.error("\u274c Failed to generate fingerprint:",t),t}}async saveUserKeys(e,t){try{const n=await window.crypto.subtle.exportKey("spki",t.publicKey),a=await window.crypto.subtle.exportKey("pkcs8",t.privateKey),s={publicKey:this.arrayBufferToBase64(n),privateKey:this.arrayBufferToBase64(a),createdAt:(new Date).toISOString()};return localStorage.setItem("e2e_keys_".concat(e),JSON.stringify(s)),localStorage.setItem("public_key_".concat(e),s.publicKey),!0}catch(n){return console.error("\u274c Failed to save keys:",n),!1}}async loadUserKeys(e){try{const t=localStorage.getItem("e2e_keys_".concat(e));if(!t)return null;const n=JSON.parse(t),a=await window.crypto.subtle.importKey("spki",this.base64ToArrayBuffer(n.publicKey),{name:"RSA-OAEP",hash:"SHA-256"},!0,["encrypt"]);return{publicKey:a,privateKey:await window.crypto.subtle.importKey("pkcs8",this.base64ToArrayBuffer(n.privateKey),{name:"RSA-OAEP",hash:"SHA-256"},!0,["decrypt"])}}catch(t){return console.error("\u274c Failed to load keys:",t),null}}async getPublicKeyForSharing(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.userId;try{return localStorage.getItem("public_key_".concat(e))}catch(t){return console.error("\u274c Failed to get public key for sharing:",t),null}}canEncryptForUser(e){return this.publicKeys.has(e)}arrayBufferToBase64(e){const t=new Uint8Array(e);let n="";for(let a=0;a<t.byteLength;a++)n+=String.fromCharCode(t[a]);return window.btoa(n)}base64ToArrayBuffer(e){const t=window.atob(e),n=new Uint8Array(t.length);for(let a=0;a<t.length;a++)n[a]=t.charCodeAt(a);return n.buffer}clearEncryptionData(){this.keyPairs.clear(),this.publicKeys.clear(),this.sessionKeys.clear(),this.isInitialized=!1,this.userId=null,console.log("\ud83e\uddf9 Cleared all encryption data")}getStatus(){return{isInitialized:this.isInitialized,userId:this.userId,hasKeyPair:this.keyPairs.has(this.userId),publicKeysCount:this.publicKeys.size,canEncrypt:this.isInitialized&&this.keyPairs.has(this.userId)}}}},414:(e,t,n)=>{e.exports=n(916)},446:(e,t,n)=>{n.r(t),n.d(t,{default:()=>r});var a=n(950),s=n(835),i=n(473),o=n(414);const r=e=>{let{onContactSelect:t,onClose:n,multiple:r=!1}=e;const[l,c]=(0,a.useState)(!1),[d,u]=(0,a.useState)(null),[h,m]=(0,a.useState)([]),[p,f]=(0,a.useState)(s.m.isSupported("contacts")),g=async()=>{c(!0),u(null),i.G.haptic("light");try{const e=await s.m.pickContacts({multiple:r,properties:["name","email","tel"]});console.log("\u2705 Contacts selected:",e),e&&e.length>0&&(m(e),t(r?e:e[0]),r||n())}catch(e){console.error("\u274c Contact selection failed:",e),"AbortError"===e.name?u("Contact selection was cancelled"):u("Failed to access contacts. Please check permissions.")}finally{c(!1)}};return(0,o.jsx)("div",{className:"native-contact-picker-overlay",children:(0,o.jsxs)("div",{className:"native-contact-picker",children:[(0,o.jsxs)("div",{className:"contact-picker-header",children:[(0,o.jsx)("h3",{children:r?"Select Contacts":"Select Contact"}),(0,o.jsx)("button",{className:"close-btn touch-target touch-ripple",onClick:n,"aria-label":"Close",children:"\u2715"})]}),(0,o.jsx)("div",{className:"contact-picker-content",children:p?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"contact-picker-info",children:[(0,o.jsx)("div",{className:"info-icon",children:"\ud83d\udcde"}),(0,o.jsx)("p",{children:r?"Select multiple contacts from your device contacts":"Select a contact from your device contacts"})]}),d&&(0,o.jsxs)("div",{className:"contact-picker-error",children:[(0,o.jsx)("p",{children:d}),(0,o.jsx)("button",{className:"retry-btn touch-target",onClick:g,children:"Try Again"})]}),h.length>0&&(0,o.jsxs)("div",{className:"selected-contacts",children:[(0,o.jsxs)("h4",{children:["Selected Contacts (",h.length,")"]}),(0,o.jsx)("div",{className:"contact-list",children:h.map((e,t)=>{const{name:n,phone:a,email:s}=(e=>{var t,n,a;return{name:(null===(t=e.name)||void 0===t?void 0:t[0])||"Unknown",phone:(null===(n=e.tel)||void 0===n?void 0:n[0])||"",email:(null===(a=e.email)||void 0===a?void 0:a[0])||""}})(e);return(0,o.jsxs)("div",{className:"contact-item",children:[(0,o.jsx)("div",{className:"contact-avatar",children:n.charAt(0).toUpperCase()}),(0,o.jsxs)("div",{className:"contact-info",children:[(0,o.jsx)("div",{className:"contact-name",children:n}),a&&(0,o.jsx)("div",{className:"contact-phone",children:a}),s&&(0,o.jsx)("div",{className:"contact-email",children:s})]}),(0,o.jsx)("button",{className:"remove-contact-btn touch-target",onClick:()=>(e=>{m(t=>t.filter((t,n)=>n!==e)),i.G.haptic("light")})(t),"aria-label":"Remove contact",children:"\u2715"})]},t)})})]}),(0,o.jsxs)("div",{className:"contact-picker-actions",children:[(0,o.jsx)("button",{className:"pick-contacts-btn touch-target touch-ripple haptic-medium",onClick:g,disabled:l,children:l?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:"loading-spinner small"}),"Loading..."]}):(0,o.jsxs)(o.Fragment,{children:["\ud83d\udcf1 ",r?"Add Contacts":"Pick Contact"]})}),r&&h.length>0&&(0,o.jsxs)("button",{className:"confirm-btn touch-target touch-ripple",onClick:()=>{h.length>0&&(t(h),n())},children:["Confirm Selection (",h.length,")"]})]})]}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"contact-picker-info",children:[(0,o.jsx)("div",{className:"info-icon",children:"\u26a0\ufe0f"}),(0,o.jsx)("p",{children:"Contact Picker is not supported on this device. You can manually enter contact information."})]}),(0,o.jsx)("div",{className:"contact-picker-actions",children:(0,o.jsx)("button",{className:"manual-input-btn touch-target touch-ripple",onClick:()=>{const e=prompt("Enter contact name:"),a=prompt("Enter phone number:"),s=prompt("Enter email (optional):");if(e&&a){t({name:[e],tel:[a],email:s?[s]:[]}),n()}},children:"\u270f\ufe0f Enter Contact Manually"})})]})}),(0,o.jsx)("div",{className:"contact-picker-footer",children:(0,o.jsx)("small",{children:p?"Contacts are accessed securely through your device's native contact picker":"Manual entry allows you to share contact information"})})]})})}},465:(e,t,n)=>{n.r(t),n.d(t,{default:()=>i});var a=n(950),s=n(414);const i=()=>{const[e,t]=(0,a.useState)(!1),[n,i]=(0,a.useState)(null),[o,r]=(0,a.useState)(!1),[l,c]=(0,a.useState)({});(0,a.useEffect)(()=>{if(c({serviceWorker:"serviceWorker"in navigator,pushNotifications:"PushManager"in window,fileSystemAccess:"showOpenFilePicker"in window,shareTarget:"share"in navigator,shortcuts:"shortcuts"in navigator,badging:"setAppBadge"in navigator,webShare:"share"in navigator,contactPicker:"contacts"in navigator}),(()=>{const e=window.matchMedia("(display-mode: standalone)").matches||!0===window.navigator.standalone;return r(e),e})())return;const e=e=>{e.preventDefault(),i(e),setTimeout(()=>{const e=localStorage.getItem("quibish-install-prompt-shown"),n=localStorage.getItem("quibish-install-prompt-last-shown"),a=Date.now()-864e5;(!e||n&&parseInt(n)<a)&&t(!0)},5e3)},n=()=>{r(!0),t(!1),i(null),localStorage.setItem("quibish-installed","true"),console.log("\ud83d\udcf1 Quibish PWA was installed")};return window.addEventListener("beforeinstallprompt",e),window.addEventListener("appinstalled",n),()=>{window.removeEventListener("beforeinstallprompt",e),window.removeEventListener("appinstalled",n)}},[]);return!o&&e&&n?(0,s.jsx)("div",{className:"install-prompt-overlay",children:(0,s.jsxs)("div",{className:"install-prompt",children:[(0,s.jsxs)("div",{className:"install-prompt-header",children:[(0,s.jsx)("div",{className:"install-prompt-icon",children:(0,s.jsx)("img",{src:"/logo192.png",alt:"Quibish",className:"install-app-icon"})}),(0,s.jsx)("button",{className:"install-prompt-close",onClick:()=>{t(!1),localStorage.setItem("quibish-install-prompt-shown","true"),localStorage.setItem("quibish-install-prompt-last-shown",Date.now().toString())},"aria-label":"Close",children:"\xd7"})]}),(0,s.jsxs)("div",{className:"install-prompt-content",children:[(0,s.jsx)("h3",{children:"Install Quibish"}),(0,s.jsx)("p",{children:"Get the full experience with our app! Install Quibish for:"}),(0,s.jsxs)("div",{className:"install-features",children:[(0,s.jsxs)("div",{className:"install-feature",children:[(0,s.jsx)("span",{className:"install-feature-icon",children:"\ud83d\ude80"}),(0,s.jsx)("span",{children:"Faster loading and better performance"})]}),(0,s.jsxs)("div",{className:"install-feature",children:[(0,s.jsx)("span",{className:"install-feature-icon",children:"\ud83d\udcf1"}),(0,s.jsx)("span",{children:"Easy access from your home screen"})]}),(0,s.jsxs)("div",{className:"install-feature",children:[(0,s.jsx)("span",{className:"install-feature-icon",children:"\ud83d\udd14"}),(0,s.jsx)("span",{children:"Push notifications for new messages"})]}),(0,s.jsxs)("div",{className:"install-feature",children:[(0,s.jsx)("span",{className:"install-feature-icon",children:"\ud83d\udcc2"}),(0,s.jsx)("span",{children:"Share files directly to Quibish"})]}),l.shortcuts&&(0,s.jsxs)("div",{className:"install-feature",children:[(0,s.jsx)("span",{className:"install-feature-icon",children:"\u26a1"}),(0,s.jsx)("span",{children:"Quick actions and shortcuts"})]}),(0,s.jsxs)("div",{className:"install-feature",children:[(0,s.jsx)("span",{className:"install-feature-icon",children:"\ud83d\udcab"}),(0,s.jsx)("span",{children:"Works offline with your cached chats"})]})]})]}),(0,s.jsxs)("div",{className:"install-prompt-actions",children:[(0,s.jsx)("button",{className:"install-btn-secondary",onClick:()=>{t(!1),localStorage.setItem("quibish-install-prompt-last-shown",Date.now().toString())},children:"Not Now"}),(0,s.jsx)("button",{className:"install-btn-primary",onClick:async()=>{if(n)try{n.prompt();const{outcome:e}=await n.userChoice;localStorage.setItem("quibish-install-prompt-shown","true"),localStorage.setItem("quibish-install-prompt-last-shown",Date.now().toString()),"accepted"===e?(console.log("\ud83d\udcf1 User accepted the install prompt"),t(!1)):(console.log("\ud83d\udcf1 User dismissed the install prompt"),t(!1)),i(null)}catch(e){console.error("\u274c Failed to install PWA:",e)}},children:"Install App"})]}),(0,s.jsx)("div",{className:"install-prompt-footer",children:(0,s.jsx)("small",{children:"Free \u2022 No ads \u2022 Secure"})})]})}):null}},473:(e,t,n)=>{n.d(t,{G:()=>i});const a=document.createElement("style");a.textContent="\n  @keyframes ripple-animation {\n    to {\n      width: 300px;\n      height: 300px;\n      opacity: 0;\n    }\n  }\n  \n  .touch-active {\n    opacity: 0.7 !important;\n    transform: scale(0.95) !important;\n  }\n",document.head.appendChild(a);const s=new class{constructor(){this.isTouch="ontouchstart"in window||navigator.maxTouchPoints>0,this.isIOS=/iPad|iPhone|iPod/.test(navigator.userAgent),this.isAndroid=/Android/.test(navigator.userAgent),this.hasHaptic="vibrate"in navigator,this.gestureHandlers=new Map,this.scrollDirection="down",this.lastScrollY=0,this.keyboardHeight=0,this.init()}init(){this.setupViewportHeight(),this.setupTouchFeedback(),this.setupGestureHandlers(),this.setupKeyboardHandling(),this.setupScrollHandling(),this.setupPullToRefresh(),console.log("\u2705 Mobile Interaction Service initialized",{isTouch:this.isTouch,isIOS:this.isIOS,isAndroid:this.isAndroid,hasHaptic:this.hasHaptic})}setupViewportHeight(){const e=()=>{const e=.01*window.innerHeight;document.documentElement.style.setProperty("--vh","".concat(e,"px")),document.documentElement.style.setProperty("--app-height","".concat(window.innerHeight,"px"))};e(),window.addEventListener("resize",e),window.addEventListener("orientationchange",()=>{setTimeout(e,100)})}setupTouchFeedback(){this.isTouch&&(document.addEventListener("touchstart",e=>{const t=e.target.closest(".touch-target, .mobile-action-button, button");t&&(t.classList.add("touch-active"),this.triggerHapticFeedback("light"))},{passive:!0}),document.addEventListener("touchend",e=>{const t=e.target.closest(".touch-target, .mobile-action-button, button");t&&setTimeout(()=>{t.classList.remove("touch-active")},150)},{passive:!0}),document.addEventListener("touchstart",this.createRippleEffect.bind(this),{passive:!0}))}createRippleEffect(e){const t=e.target.closest(".touch-ripple");if(!t)return;const n=t.getBoundingClientRect(),a=e.touches[0],s=a.clientX-n.left,i=a.clientY-n.top,o=document.createElement("div");o.className="ripple",o.style.cssText="\n      position: absolute;\n      border-radius: 50%;\n      background: rgba(255, 255, 255, 0.3);\n      pointer-events: none;\n      left: ".concat(s,"px;\n      top: ").concat(i,"px;\n      width: 0;\n      height: 0;\n      transform: translate(-50%, -50%);\n      animation: ripple-animation 0.6s ease-out;\n    "),t.appendChild(o),setTimeout(()=>{o.remove()},600)}setupGestureHandlers(){let e=0,t=0,n=0,a=0,s=null;document.addEventListener("touchstart",n=>{e=n.touches[0].clientY,t=n.touches[0].clientX,s=null},{passive:!0}),document.addEventListener("touchmove",i=>{if(n=i.touches[0].clientY,a=i.touches[0].clientX,null===s&&(s=Math.abs(n-e)>Math.abs(a-t)),!s){const e=a-t,n=i.target.closest(".swipeable");n&&Math.abs(e)>30&&this.handleSwipeGesture(n,e)}},{passive:!0}),document.addEventListener("touchend",s=>{const i=n-e,o=a-t;if(Math.abs(o)>Math.abs(i)&&Math.abs(o)>50){const e=o>0?"right":"left";this.triggerGestureEvent("swipe",{direction:e,deltaX:o,target:s.target})}else if(Math.abs(i)>50){const e=i>0?"down":"up";this.triggerGestureEvent("swipe",{direction:e,deltaY:i,target:s.target})}},{passive:!0})}handleSwipeGesture(e,t){Math.abs(t)>80?t>0?(e.classList.add("swiped-right"),this.triggerHapticFeedback("medium")):(e.classList.add("swiped-left"),this.triggerHapticFeedback("medium")):e.classList.remove("swiped-right","swiped-left")}setupKeyboardHandling(){if(this.isTouch){if(window.visualViewport)window.visualViewport.addEventListener("resize",()=>{const e=window.innerHeight-window.visualViewport.height;this.keyboardHeight=e,e>150?(document.body.classList.add("keyboard-open"),document.documentElement.style.setProperty("--keyboard-height","".concat(e,"px"))):(document.body.classList.remove("keyboard-open"),document.documentElement.style.setProperty("--keyboard-height","0px"))});else{let e=window.innerHeight;window.addEventListener("resize",()=>{e-window.innerHeight>150?document.body.classList.add("keyboard-open"):document.body.classList.remove("keyboard-open")})}this.isIOS&&document.addEventListener("focusin",e=>{"INPUT"!==e.target.tagName&&"TEXTAREA"!==e.target.tagName||(e.target.style.fontSize="16px")})}}setupScrollHandling(){let e=!1;window.addEventListener("scroll",()=>{e||(requestAnimationFrame(()=>{const t=window.pageYOffset,n=t>this.lastScrollY?"down":"up";n!==this.scrollDirection&&(this.scrollDirection=n,this.handleScrollDirection(n)),this.lastScrollY=t,e=!1}),e=!0)},{passive:!0})}handleScrollDirection(e){const t=document.querySelector(".mobile-navigation");t&&("down"===e&&this.lastScrollY>100?t.classList.add("hidden"):"up"===e&&t.classList.remove("hidden"))}setupPullToRefresh(){let e=0,t=0,n=!1;document.querySelectorAll(".pull-to-refresh").forEach(a=>{a.addEventListener("touchstart",t=>{0===a.scrollTop&&(e=t.touches[0].clientY,n=!0)},{passive:!0}),a.addEventListener("touchmove",s=>{if(!n)return;t=s.touches[0].clientY;const i=t-e;i>0&&0===a.scrollTop&&(s.preventDefault(),i>60?(a.classList.add("pulling"),this.triggerHapticFeedback("light")):a.classList.remove("pulling"))}),a.addEventListener("touchend",s=>{if(!n)return;n=!1;t-e>80?(a.classList.add("refreshing"),this.triggerHapticFeedback("medium"),this.triggerGestureEvent("pullToRefresh",{element:a}),setTimeout(()=>{a.classList.remove("refreshing","pulling")},2e3)):a.classList.remove("pulling")})})}triggerHapticFeedback(){let e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light";if(this.hasHaptic){switch(t){case"light":default:e=[10];break;case"medium":e=[20];break;case"heavy":e=[40];break;case"success":e=[10,50,10];break;case"error":e=[20,100,20,100,20]}try{navigator.vibrate(e)}catch(n){console.warn("Haptic feedback failed:",n)}}}triggerGestureEvent(e,t){const n=new CustomEvent("mobile-".concat(e),{detail:t,bubbles:!0,cancelable:!0});(t.target||document).dispatchEvent(n)}addGestureHandler(e,t,n){this.gestureHandlers.has(e)||this.gestureHandlers.set(e,new Map),this.gestureHandlers.get(e).set(t,n),e.addEventListener("mobile-".concat(t),n)}removeGestureHandler(e,t){const n=this.gestureHandlers.get(e);if(n){const a=n.get(t);a&&(e.removeEventListener("mobile-".concat(t),a),n.delete(t))}}optimizeScrollPerformance(e){e&&(e.style.overflowScrolling="touch",e.style.willChange="scroll-position",e.style.transform="translateZ(0)")}getDeviceInfo(){var e;return{isTouch:this.isTouch,isIOS:this.isIOS,isAndroid:this.isAndroid,hasHaptic:this.hasHaptic,screenWidth:window.screen.width,screenHeight:window.screen.height,devicePixelRatio:window.devicePixelRatio,orientation:(null===(e=window.screen.orientation)||void 0===e?void 0:e.type)||"portrait-primary",keyboardHeight:this.keyboardHeight}}preventDefaultTouch(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{preventScroll:n=!1,preventZoom:a=!0,preventDoubleTap:s=!0}=t;n&&e.addEventListener("touchmove",e=>e.preventDefault(),{passive:!1}),a&&this.isIOS&&(e.addEventListener("gesturestart",e=>e.preventDefault()),e.addEventListener("gesturechange",e=>e.preventDefault()),e.addEventListener("gestureend",e=>e.preventDefault())),s&&(e.style.touchAction="manipulation")}},i={haptic:e=>s.triggerHapticFeedback(e),addGesture:(e,t,n)=>s.addGestureHandler(e,t,n),removeGesture:(e,t)=>s.removeGestureHandler(e,t),optimizeScroll:e=>s.optimizeScrollPerformance(e),getDeviceInfo:()=>s.getDeviceInfo(),preventTouch:(e,t)=>s.preventDefaultTouch(e,t),isTouch:()=>s.isTouch,isIOS:()=>s.isIOS,isAndroid:()=>s.isAndroid}},487:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var a=n-1>>>1,s=e[a];if(!(0<i(s,t)))break e;e[a]=t,e[n]=s,n=a}}function a(e){return 0===e.length?null:e[0]}function s(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var a=0,s=e.length,o=s>>>1;a<o;){var r=2*(a+1)-1,l=e[r],c=r+1,d=e[c];if(0>i(l,n))c<s&&0>i(d,l)?(e[a]=d,e[c]=n,a=c):(e[a]=l,e[r]=n,a=r);else{if(!(c<s&&0>i(d,n)))break e;e[a]=d,e[c]=n,a=c}}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if(t.unstable_now=void 0,"object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var r=Date,l=r.now();t.unstable_now=function(){return r.now()-l}}var c=[],d=[],u=1,h=null,m=3,p=!1,f=!1,g=!1,v=!1,y="function"===typeof setTimeout?setTimeout:null,b="function"===typeof clearTimeout?clearTimeout:null,x="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=a(d);null!==t;){if(null===t.callback)s(d);else{if(!(t.startTime<=e))break;s(d),t.sortIndex=t.expirationTime,n(c,t)}t=a(d)}}function j(e){if(g=!1,w(e),!f)if(null!==a(c))f=!0,S||(S=!0,N());else{var t=a(d);null!==t&&M(j,t.startTime-e)}}var N,S=!1,C=-1,k=5,E=-1;function A(){return!!v||!(t.unstable_now()-E<k)}function P(){if(v=!1,S){var e=t.unstable_now();E=e;var n=!0;try{e:{f=!1,g&&(g=!1,b(C),C=-1),p=!0;var i=m;try{t:{for(w(e),h=a(c);null!==h&&!(h.expirationTime>e&&A());){var o=h.callback;if("function"===typeof o){h.callback=null,m=h.priorityLevel;var r=o(h.expirationTime<=e);if(e=t.unstable_now(),"function"===typeof r){h.callback=r,w(e),n=!0;break t}h===a(c)&&s(c),w(e)}else s(c);h=a(c)}if(null!==h)n=!0;else{var l=a(d);null!==l&&M(j,l.startTime-e),n=!1}}break e}finally{h=null,m=i,p=!1}n=void 0}}finally{n?N():S=!1}}}if("function"===typeof x)N=function(){x(P)};else if("undefined"!==typeof MessageChannel){var T=new MessageChannel,L=T.port2;T.port1.onmessage=P,N=function(){L.postMessage(null)}}else N=function(){y(P,0)};function M(e,n){C=y(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_next=function(e){switch(m){case 1:case 2:case 3:var t=3;break;default:t=m}var n=m;m=t;try{return e()}finally{m=n}},t.unstable_requestPaint=function(){v=!0},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=m;m=e;try{return t()}finally{m=n}},t.unstable_scheduleCallback=function(e,s,i){var o=t.unstable_now();switch("object"===typeof i&&null!==i?i="number"===typeof(i=i.delay)&&0<i?o+i:o:i=o,e){case 1:var r=-1;break;case 2:r=250;break;case 5:r=1073741823;break;case 4:r=1e4;break;default:r=5e3}return e={id:u++,callback:s,priorityLevel:e,startTime:i,expirationTime:r=i+r,sortIndex:-1},i>o?(e.sortIndex=i,n(d,e),null===a(c)&&e===a(d)&&(g?(b(C),C=-1):g=!0,M(j,i-o))):(e.sortIndex=r,n(c,e),f||p||(f=!0,S||(S=!0,N()))),e},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(e){var t=m;return function(){var n=m;m=t;try{return e.apply(this,arguments)}finally{m=n}}}},503:(e,t,n)=>{n.r(t),n.d(t,{default:()=>o});var a=n(950),s=(n(835),n(473)),i=n(414);const o=e=>{let{onCapture:t,onClose:n,mode:o="photo"}=e;const[r,l]=(0,a.useState)(!1),[c,d]=(0,a.useState)("user"),[u,h]=(0,a.useState)(!1),[m,p]=(0,a.useState)(0),[f,g]=(0,a.useState)(null),[v,y]=(0,a.useState)(null),[b,x]=(0,a.useState)(!1),w=(0,a.useRef)(null),j=(0,a.useRef)(null),N=(0,a.useRef)(null);(0,a.useEffect)(()=>(r?S():C(),()=>{C()}),[r,c]),(0,a.useEffect)(()=>{l(!0)},[]);const S=async()=>{x(!0),y(null);try{const e={video:{facingMode:c,width:{ideal:1920,max:1920},height:{ideal:1080,max:1080}},audio:"video"===o},t=await navigator.mediaDevices.getUserMedia(e);g(t),w.current&&(w.current.srcObject=t),console.log("\u2705 Camera started")}catch(e){console.error("\u274c Camera access failed:",e),y("Camera access denied. Please check permissions.")}finally{x(!1)}},C=()=>{f&&(f.getTracks().forEach(e=>e.stop()),g(null)),N.current&&(clearInterval(N.current),N.current=null)},k=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.currentMediaRecorder;e&&"recording"===e.state&&(e.stop(),s.G.haptic("light")),N.current&&(clearInterval(N.current),N.current=null)},E=()=>{C(),l(!1),n()};return r?(0,i.jsx)("div",{className:"native-camera-overlay",children:(0,i.jsxs)("div",{className:"native-camera-container",children:[(0,i.jsxs)("div",{className:"camera-header",children:[(0,i.jsx)("button",{className:"camera-btn close-btn touch-target touch-ripple",onClick:E,"aria-label":"Close camera",children:"\u2715"}),(0,i.jsx)("div",{className:"camera-mode",children:"photo"===o?"\ud83d\udcf7 Photo":"\ud83c\udfa5 Video"}),(0,i.jsx)("button",{className:"camera-btn switch-btn touch-target touch-ripple",onClick:()=>{d(e=>"user"===e?"environment":"user"),s.G.haptic("light")},"aria-label":"Switch camera",disabled:b,children:"\ud83d\udd04"})]}),(0,i.jsxs)("div",{className:"camera-preview",children:[b&&(0,i.jsxs)("div",{className:"camera-loading",children:[(0,i.jsx)("div",{className:"loading-spinner"}),(0,i.jsx)("p",{children:"Starting camera..."})]}),v&&(0,i.jsxs)("div",{className:"camera-error",children:[(0,i.jsx)("p",{children:v}),(0,i.jsx)("button",{className:"retry-btn touch-target",onClick:S,children:"Retry"})]}),(0,i.jsx)("video",{ref:w,autoPlay:!0,playsInline:!0,muted:!0,className:"camera-video",style:{display:v?"none":"block"}}),(0,i.jsx)("canvas",{ref:j,style:{display:"none"}}),u&&(0,i.jsxs)("div",{className:"recording-indicator",children:[(0,i.jsx)("div",{className:"recording-dot"}),(0,i.jsx)("span",{children:(e=>{const t=Math.floor(e/60),n=e%60;return"".concat(t,":").concat(n.toString().padStart(2,"0"))})(m)})]}),(0,i.jsxs)("div",{className:"camera-guidelines",children:[(0,i.jsx)("div",{className:"guideline horizontal"}),(0,i.jsx)("div",{className:"guideline vertical"})]})]}),(0,i.jsx)("div",{className:"camera-controls",children:"photo"===o?(0,i.jsx)("button",{className:"capture-btn photo-btn touch-target touch-ripple haptic-medium",onClick:async()=>{if(w.current&&j.current){s.G.haptic("medium"),x(!0);try{const e=w.current,n=j.current,a=n.getContext("2d");n.width=e.videoWidth,n.height=e.videoHeight,a.drawImage(e,0,0,n.width,n.height),n.toBlob(e=>{if(e){const a={blob:e,dataUrl:n.toDataURL("image/jpeg",.9),width:n.width,height:n.height,timestamp:Date.now(),type:"photo"};t(a),E()}},"image/jpeg",.9)}catch(e){console.error("\u274c Photo capture failed:",e),y("Failed to capture photo")}finally{x(!1)}}},disabled:b||!f,"aria-label":"Take photo",children:(0,i.jsx)("div",{className:"capture-inner"})}):(0,i.jsx)("button",{className:"capture-btn video-btn touch-target touch-ripple haptic-medium ".concat(u?"recording":""),onClick:u?()=>k():async()=>{if(f){s.G.haptic("medium"),h(!0),p(0);try{const e=new MediaRecorder(f),n=[];e.ondataavailable=e=>{e.data.size>0&&n.push(e.data)},e.onstop=()=>{const e=new Blob(n,{type:"video/webm"}),a={blob:e,url:URL.createObjectURL(e),duration:m,timestamp:Date.now(),type:"video"};t(a),h(!1),E()},e.start(),N.current=setInterval(()=>{p(e=>e+1)},1e3),setTimeout(()=>{"recording"===e.state&&k(e)},3e4),window.currentMediaRecorder=e}catch(e){console.error("\u274c Video recording failed:",e),y("Failed to start recording"),h(!1)}}},disabled:b||!f,"aria-label":u?"Stop recording":"Start recording",children:(0,i.jsx)("div",{className:"capture-inner"})})}),(0,i.jsx)("div",{className:"camera-tips",children:"photo"===o?(0,i.jsx)("p",{children:"Tap the circle to take a photo"}):(0,i.jsx)("p",{children:u?"Tap to stop recording":"Tap to start recording (max 30s)"})})]})}):null}},514:(e,t,n)=>{n.d(t,{A:()=>d});var a=n(555);const s="wss://ws.quibish.com/ws",i=(parseInt("3"),parseInt("3000"),2e3),o=3e4,r=3e4,l=1e4,c=15e3;const d=new class{constructor(){this.socket=null,this.listeners=new Map,this.connectionListeners=[],this.reconnectAttempts=0,this.reconnectTimer=null,this.pingTimer=null,this.pongTimer=null,this.connectionTimer=null,this.isConnected=!1,this.isConnecting=!1,this.intentionallyClosed=!1,this.lastPingSent=null,this.lastPongReceived=null,this.pingHistory=[],this.connectionMetrics={latency:0,stability:100,disconnects:0,lastConnectionTime:null,reconnectAttempts:0,failedPings:0}}connect(){if(!this.isConnecting&&!this.isConnected){if(this.intentionallyClosed=!1,this.isConnecting=!0,!s)return console.info("WebSocket URL not configured; skipping connection"),void(this.isConnecting=!1);try{this.socket=new WebSocket(s),this.connectionTimer&&clearTimeout(this.connectionTimer),this.connectionTimer=setTimeout(()=>{this.isConnected||(console.warn("WebSocket connection timeout"),this.socket&&this.socket.close(),this.handleDisconnect(new Error("Connection timeout")))},c),this.socket.onopen=this.handleOpen.bind(this),this.socket.onmessage=this.handleMessage.bind(this),this.socket.onerror=this.handleError.bind(this),this.socket.onclose=this.handleClose.bind(this)}catch(e){console.error("WebSocket connection error:",e),this.handleDisconnect(e)}}}disconnect(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.intentionallyClosed=e,this.clearTimers(),this.socket){try{this.socket.close()}catch(t){console.error("Error closing WebSocket:",t)}this.socket=null}this.isConnected&&(this.isConnected=!1,this.notifyConnectionChange(!1,{reason:e?"User disconnected":"Connection closed"}))}async reconnect(){if(console.log("Manual reconnection initiated"),this.intentionallyClosed=!1,this.isConnected=!1,this.isConnecting=!1,this.clearTimers(),this.socket){try{this.socket.close()}catch(e){console.error("Error closing previous WebSocket connection:",e)}this.socket=null}return new Promise((e,t)=>{const n=t=>{t&&(clearTimeout(a),this.removeConnectionListener(n),this.reconnectAttempts=0,e(!0))};this.addConnectionListener(n);const a=setTimeout(()=>{this.removeConnectionListener(n),t(new Error("Reconnection timeout"))},1.5*c);this.connect()})}handleOpen(){console.log("WebSocket connected"),this.isConnected=!0,this.isConnecting=!1,this.reconnectAttempts=0,this.intentionallyClosed=!1,this.connectionMetrics.lastConnectionTime=new Date,this.connectionTimer&&(clearTimeout(this.connectionTimer),this.connectionTimer=null),this.startPingInterval(),this.notifyConnectionChange(!0,{reconnected:this.connectionMetrics.disconnects>0})}handleMessage(e){try{const t=JSON.parse(e.data);if("pong"===t.type)return void this.handlePong(t);t.type&&this.listeners.has(t.type)&&this.listeners.get(t.type).forEach(e=>{try{e(t.payload)}catch(n){console.error("Error in ".concat(t.type," event handler:"),n)}}),this.listeners.has("all")&&this.listeners.get("all").forEach(e=>{try{e(t)}catch(n){console.error('Error in "all" event handler:',n)}})}catch(t){console.error("Error parsing WebSocket message:",t)}}handleError(e){console.error("WebSocket error:",e),this.connectionMetrics.stability=Math.max(0,this.connectionMetrics.stability-10)}handleClose(e){const t=e.reason||"No reason provided",n=e.code;console.log("WebSocket closed: [".concat(n,"] ").concat(t)),this.handleDisconnect(new Error("Connection closed: [".concat(n,"] ").concat(t)))}handleDisconnect(e){if(!this.isConnected&&!this.isConnecting)return;if(this.isConnected=!1,this.isConnecting=!1,this.connectionMetrics.disconnects++,this.clearTimers(),this.socket){try{this.socket.close()}catch(n){console.error("Error closing socket during disconnect:",n)}this.socket=null}if(this.notifyConnectionChange(!1,{reason:(null===e||void 0===e?void 0:e.message)||"Connection lost",reconnecting:!this.intentionallyClosed,code:e.code}),this.intentionallyClosed)return void console.log("Not reconnecting because connection was intentionally closed");this.reconnectAttempts++,this.connectionMetrics.reconnectAttempts=this.reconnectAttempts;const t=Math.min(i*Math.pow(1.5,this.reconnectAttempts-1),o)+1e3*Math.random();console.log("Scheduling reconnect attempt in ".concat(Math.round(t/1e3),"s (attempt ").concat(this.reconnectAttempts,")")),this.reconnectTimer&&clearTimeout(this.reconnectTimer),this.reconnectTimer=setTimeout(()=>{console.log("Reconnecting (attempt ".concat(this.reconnectAttempts,")...")),this.connect()},t)}ping(){if(this.isConnected&&this.socket)try{const e=Date.now();this.lastPingSent=e,this.send("ping",{time:e}),this.pongTimer=setTimeout(()=>{console.warn("WebSocket pong timeout"),this.connectionMetrics.failedPings++,this.connectionMetrics.stability=Math.max(0,this.connectionMetrics.stability-5),this.connectionMetrics.failedPings>=3&&(console.error("Multiple ping failures, reconnecting..."),this.socket.close(),this.handleDisconnect(new Error("Ping timeout")))},l)}catch(e){console.error("Error sending ping:",e)}}handlePong(e){if(this.pongTimer&&(clearTimeout(this.pongTimer),this.pongTimer=null),this.lastPingSent&&e.pingTime){const e=Date.now()-this.lastPingSent;this.connectionMetrics.latency=e,this.lastPongReceived=Date.now(),this.connectionMetrics.failedPings=0,this.pingHistory.push(e),this.pingHistory.length>5&&this.pingHistory.shift(),this.updateStabilityMetric()}}startPingInterval(){this.pingTimer&&clearInterval(this.pingTimer),this.pingTimer=setInterval(()=>{this.ping()},r)}clearTimers(){this.connectionTimer&&(clearTimeout(this.connectionTimer),this.connectionTimer=null),this.reconnectTimer&&(clearTimeout(this.reconnectTimer),this.reconnectTimer=null),this.pingTimer&&(clearInterval(this.pingTimer),this.pingTimer=null),this.pongTimer&&(clearTimeout(this.pongTimer),this.pongTimer=null)}updateStabilityMetric(){if(this.pingHistory.length<2)return;const e=this.pingHistory.reduce((e,t)=>e+t,0)/this.pingHistory.length,t=this.pingHistory.reduce((t,n)=>t+Math.pow(n-e,2),0)/this.pingHistory.length,n=100-50*Math.min(t/1e4,1)-30*Math.min(e/1e3,1);this.connectionMetrics.stability=Math.max(0,Math.min(100,.7*this.connectionMetrics.stability+.3*n))}send(e,t){if(!this.isConnected||!this.socket)return!1;try{const n=JSON.stringify({type:e,payload:t,timestamp:(new Date).toISOString()});return this.socket.send(n),!0}catch(n){return console.error("Error sending WebSocket message:",n),!1}}addEventListener(e,t){return this.listeners.has(e)||this.listeners.set(e,new Set),this.listeners.get(e).add(t),()=>{const n=this.listeners.get(e);n&&n.delete(t)}}removeEventListener(e,t){const n=this.listeners.get(e);n&&n.delete(t)}addConnectionListener(e){return this.connectionListeners.push(e),()=>this.removeConnectionListener(e)}removeConnectionListener(e){this.connectionListeners=this.connectionListeners.filter(t=>t!==e)}notifyConnectionChange(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};[...this.connectionListeners].forEach(n=>{try{n(e,t)}catch(a){console.error("Error in connection state listener:",a)}})}getConnectionQuality(){if(!this.isConnected)return"offline";const{latency:e,stability:t}=this.connectionMetrics;return t>90&&e<100?"excellent":t>70&&e<300?"good":t>40&&e<1e3?"poor":"critical"}getConnectionMetrics(){return(0,a.A)((0,a.A)({},this.connectionMetrics),{},{quality:this.getConnectionQuality(),connected:this.isConnected,pingHistory:[...this.pingHistory]})}}},523:(e,t,n)=>{n.r(t),n.d(t,{default:()=>v});var a=n(950),s=n(555),i=n(608),o=n(630),r=n(414);const l=e=>{var t,n,o,l,c,d,u,h,m,p,f,g,v,y,b,x,w,j,N,S,C,k;let{userProfile:E,onClose:A,onSave:P}=e;const[T,L]=(0,a.useState)({profileVisibility:(null===E||void 0===E||null===(t=E.privacy)||void 0===t?void 0:t.profileVisibility)||"public",lastSeenVisibility:(null===E||void 0===E||null===(n=E.privacy)||void 0===n?void 0:n.lastSeenVisibility)||"everyone",onlineStatusVisibility:(null===E||void 0===E||null===(o=E.privacy)||void 0===o?void 0:o.onlineStatusVisibility)||"everyone",phoneVisibility:(null===E||void 0===E||null===(l=E.privacy)||void 0===l?void 0:l.phoneVisibility)||"contacts",emailVisibility:(null===E||void 0===E||null===(c=E.privacy)||void 0===c?void 0:c.emailVisibility)||"contacts",locationVisibility:(null===E||void 0===E||null===(d=E.privacy)||void 0===d?void 0:d.locationVisibility)||"contacts"}),[M,I]=(0,a.useState)({email:null===(u=null===E||void 0===E||null===(h=E.notifications)||void 0===h?void 0:h.email)||void 0===u||u,push:null===(m=null===E||void 0===E||null===(p=E.notifications)||void 0===p?void 0:p.push)||void 0===m||m,desktop:null===(f=null===E||void 0===E||null===(g=E.notifications)||void 0===g?void 0:g.desktop)||void 0===f||f,sound:null===(v=null===E||void 0===E||null===(y=E.notifications)||void 0===y?void 0:y.sound)||void 0===v||v,mentions:null===(b=null===E||void 0===E||null===(x=E.notifications)||void 0===x?void 0:x.mentions)||void 0===b||b,directMessages:null===(w=null===E||void 0===E||null===(j=E.notifications)||void 0===j?void 0:j.directMessages)||void 0===w||w,groupMessages:null===(N=null===E||void 0===E||null===(S=E.notifications)||void 0===S?void 0:S.groupMessages)||void 0===N||N,marketing:null!==(C=null===E||void 0===E||null===(k=E.notifications)||void 0===k?void 0:k.marketing)&&void 0!==C&&C}),[O,_]=(0,a.useState)(!1),D=[{value:"everyone",label:"Everyone",icon:"\ud83c\udf0d",description:"Visible to all users"},{value:"contacts",label:"Contacts Only",icon:"\ud83d\udc65",description:"Only your connections can see this"},{value:"nobody",label:"Nobody",icon:"\ud83d\udd12",description:"Keep this information private"}],R=e=>{let{setting:t,value:n,options:a=D,title:i,description:o}=e;return(0,r.jsxs)("div",{className:"privacy-setting",children:[(0,r.jsxs)("div",{className:"setting-header",children:[(0,r.jsx)("h4",{children:i}),(0,r.jsx)("p",{className:"setting-description",children:o})]}),(0,r.jsx)("div",{className:"visibility-options",children:a.map(e=>(0,r.jsxs)("button",{className:"visibility-option ".concat(n===e.value?"active":""),onClick:()=>((e,t)=>{L(n=>(0,s.A)((0,s.A)({},n),{},{[e]:t}))})(t,e.value),children:[(0,r.jsx)("div",{className:"option-icon",children:e.icon}),(0,r.jsxs)("div",{className:"option-content",children:[(0,r.jsx)("span",{className:"option-label",children:e.label}),(0,r.jsx)("span",{className:"option-desc",children:e.description})]})]},e.value))})]})},F=e=>{let{setting:t,value:n,title:a,description:i}=e;return(0,r.jsxs)("div",{className:"notification-setting",children:[(0,r.jsxs)("div",{className:"setting-info",children:[(0,r.jsx)("h4",{children:a}),(0,r.jsx)("p",{className:"setting-description",children:i})]}),(0,r.jsxs)("label",{className:"toggle-switch",children:[(0,r.jsx)("input",{type:"checkbox",checked:n,onChange:e=>((e,t)=>{I(n=>(0,s.A)((0,s.A)({},n),{},{[e]:t}))})(t,e.target.checked)}),(0,r.jsx)("span",{className:"toggle-slider"})]})]})};return(0,r.jsx)("div",{className:"privacy-settings-overlay",onClick:A,children:(0,r.jsxs)("div",{className:"privacy-settings-modal",onClick:e=>e.stopPropagation(),children:[(0,r.jsxs)("div",{className:"privacy-settings-header",children:[(0,r.jsx)("h2",{children:"Privacy & Notifications"}),(0,r.jsx)("button",{className:"close-btn",onClick:A,children:"\xd7"})]}),(0,r.jsxs)("div",{className:"privacy-settings-content",children:[(0,r.jsxs)("div",{className:"settings-section",children:[(0,r.jsx)("h3",{children:"\ud83d\udc41\ufe0f Privacy Settings"}),(0,r.jsx)(R,{setting:"profileVisibility",value:T.profileVisibility,options:[{value:"public",label:"Public",icon:"\ud83c\udf0d",description:"Anyone can view your profile"},{value:"contacts",label:"Contacts Only",icon:"\ud83d\udc65",description:"Only connections can view your profile"},{value:"private",label:"Private",icon:"\ud83d\udd12",description:"Profile is completely private"}],title:"Profile Visibility",description:"Who can view your profile information"}),(0,r.jsx)(R,{setting:"onlineStatusVisibility",value:T.onlineStatusVisibility,title:"Online Status",description:"Who can see when you're online"}),(0,r.jsx)(R,{setting:"lastSeenVisibility",value:T.lastSeenVisibility,title:"Last Seen",description:"Who can see when you were last active"}),(0,r.jsx)(R,{setting:"phoneVisibility",value:T.phoneVisibility,title:"Phone Number",description:"Who can see your phone number"}),(0,r.jsx)(R,{setting:"emailVisibility",value:T.emailVisibility,title:"Email Address",description:"Who can see your email address"}),(0,r.jsx)(R,{setting:"locationVisibility",value:T.locationVisibility,title:"Location",description:"Who can see your location information"})]}),(0,r.jsxs)("div",{className:"settings-section",children:[(0,r.jsx)("h3",{children:"\ud83d\udd14 Notification Preferences"}),(0,r.jsxs)("div",{className:"notification-group",children:[(0,r.jsx)("h4",{children:"Communication"}),(0,r.jsx)(F,{setting:"directMessages",value:M.directMessages,title:"Direct Messages",description:"Get notified when someone sends you a direct message"}),(0,r.jsx)(F,{setting:"groupMessages",value:M.groupMessages,title:"Group Messages",description:"Receive notifications for group conversations"}),(0,r.jsx)(F,{setting:"mentions",value:M.mentions,title:"Mentions",description:"Get notified when someone mentions you"})]}),(0,r.jsxs)("div",{className:"notification-group",children:[(0,r.jsx)("h4",{children:"Delivery Methods"}),(0,r.jsx)(F,{setting:"push",value:M.push,title:"Push Notifications",description:"Receive push notifications on your device"}),(0,r.jsx)(F,{setting:"email",value:M.email,title:"Email Notifications",description:"Get notifications via email"}),(0,r.jsx)(F,{setting:"desktop",value:M.desktop,title:"Desktop Notifications",description:"Show notifications on your desktop"}),(0,r.jsx)(F,{setting:"sound",value:M.sound,title:"Sound Alerts",description:"Play sounds for notifications"})]}),(0,r.jsxs)("div",{className:"notification-group",children:[(0,r.jsx)("h4",{children:"Marketing"}),(0,r.jsx)(F,{setting:"marketing",value:M.marketing,title:"Marketing Emails",description:"Receive promotional content and updates"})]})]})]}),(0,r.jsxs)("div",{className:"privacy-settings-footer",children:[(0,r.jsx)("button",{className:"cancel-btn",onClick:A,disabled:O,children:"Cancel"}),(0,r.jsx)("button",{className:"save-btn",onClick:async()=>{_(!0);try{const e={privacy:T,notifications:M};await i.A.updateUserProfile(E.id,e),P(e),A()}catch(e){console.error("Error saving privacy settings:",e)}finally{_(!1)}},disabled:O,children:O?"Saving...":"Save Settings"})]})]})})},c=e=>{let{userProfile:t,onClose:n}=e;const[s,o]=(0,a.useState)({profileViews:0,monthlyViews:0,topViewers:[],uploadStats:{totalUploads:0,totalViews:0,totalLikes:0,mostViewedContent:null},activityStats:{messagesCount:0,reactionsGiven:0,connectionsCount:0,joinDate:null}}),[l,c]=(0,a.useState)(!0),[d,u]=(0,a.useState)("month");(0,a.useEffect)(()=>{(async()=>{try{c(!0);const e=await i.A.fetchUserAnalytics(t.id,d);o(e)}catch(e){console.error("Error loading analytics:",e)}finally{c(!1)}})()},[t.id,d]);const h=e=>e>=1e6?(e/1e6).toFixed(1)+"M":e>=1e3?(e/1e3).toFixed(1)+"K":e.toString(),m=e=>{let{icon:t,title:n,value:a,subtitle:s,trend:i}=e;return(0,r.jsxs)("div",{className:"stat-card",children:[(0,r.jsx)("div",{className:"stat-icon",children:t}),(0,r.jsxs)("div",{className:"stat-content",children:[(0,r.jsx)("h3",{children:h(a)}),(0,r.jsx)("p",{className:"stat-title",children:n}),s&&(0,r.jsx)("p",{className:"stat-subtitle",children:s}),i&&(0,r.jsxs)("div",{className:"stat-trend ".concat(i>0?"positive":"negative"),children:[i>0?"\u2197\ufe0f":"\u2198\ufe0f"," ",Math.abs(i),"%"]})]})]})};return(0,r.jsx)("div",{className:"analytics-overlay",onClick:n,children:(0,r.jsxs)("div",{className:"analytics-modal",onClick:e=>e.stopPropagation(),children:[(0,r.jsxs)("div",{className:"analytics-header",children:[(0,r.jsx)("h2",{children:"\ud83d\udcca Profile Analytics"}),(0,r.jsx)("div",{className:"timeframe-selector",children:(0,r.jsxs)("select",{value:d,onChange:e=>u(e.target.value),children:[(0,r.jsx)("option",{value:"week",children:"Last 7 days"}),(0,r.jsx)("option",{value:"month",children:"Last 30 days"}),(0,r.jsx)("option",{value:"quarter",children:"Last 3 months"}),(0,r.jsx)("option",{value:"year",children:"Last year"})]})}),(0,r.jsx)("button",{className:"close-btn",onClick:n,children:"\xd7"})]}),(0,r.jsx)("div",{className:"analytics-content",children:l?(0,r.jsx)("div",{className:"loading-spinner",children:"Loading analytics..."}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"stats-grid",children:[(0,r.jsx)(m,{icon:"\ud83d\udc41\ufe0f",title:"Profile Views",value:s.profileViews,subtitle:"Total views",trend:12}),(0,r.jsx)(m,{icon:"\ud83d\udcc8",title:"Monthly Growth",value:s.monthlyViews,subtitle:"Views this month",trend:8}),(0,r.jsx)(m,{icon:"\ud83d\udcc1",title:"Total Uploads",value:s.uploadStats.totalUploads,subtitle:"Content shared"}),(0,r.jsx)(m,{icon:"\ud83d\udc65",title:"Connections",value:s.activityStats.connectionsCount,subtitle:"People connected",trend:5})]}),(0,r.jsxs)("div",{className:"verification-section",children:[(0,r.jsx)("h3",{children:"\ud83d\udee1\ufe0f Profile Verification"}),(0,r.jsxs)("div",{className:"verification-badges",children:[(0,r.jsxs)("div",{className:"verification-badge ".concat(t.email?"verified":"pending"),children:[(0,r.jsx)("span",{className:"badge-icon",children:"\u2709\ufe0f"}),(0,r.jsxs)("div",{className:"badge-content",children:[(0,r.jsx)("span",{className:"badge-title",children:"Email Verified"}),(0,r.jsx)("span",{className:"badge-status",children:t.email?"Verified":"Pending verification"})]})]}),(0,r.jsxs)("div",{className:"verification-badge ".concat(t.phone?"verified":"pending"),children:[(0,r.jsx)("span",{className:"badge-icon",children:"\ud83d\udcf1"}),(0,r.jsxs)("div",{className:"badge-content",children:[(0,r.jsx)("span",{className:"badge-title",children:"Phone Verified"}),(0,r.jsx)("span",{className:"badge-status",children:t.phone?"Verified":"Add phone number"})]})]}),(0,r.jsxs)("div",{className:"verification-badge ".concat(t.socialLinks&&Object.values(t.socialLinks).some(e=>e)?"verified":"pending"),children:[(0,r.jsx)("span",{className:"badge-icon",children:"\ud83d\udd17"}),(0,r.jsxs)("div",{className:"badge-content",children:[(0,r.jsx)("span",{className:"badge-title",children:"Social Links"}),(0,r.jsx)("span",{className:"badge-status",children:t.socialLinks&&Object.values(t.socialLinks).some(e=>e)?"Connected":"Add social links"})]})]})]})]}),(0,r.jsxs)("div",{className:"content-section",children:[(0,r.jsx)("h3",{children:"\ud83d\udcca Content Performance"}),(0,r.jsxs)("div",{className:"content-stats",children:[(0,r.jsxs)("div",{className:"content-stat",children:[(0,r.jsx)("span",{className:"content-icon",children:"\ud83d\udc40"}),(0,r.jsxs)("div",{className:"content-info",children:[(0,r.jsx)("span",{className:"content-value",children:h(s.uploadStats.totalViews)}),(0,r.jsx)("span",{className:"content-label",children:"Total Views"})]})]}),(0,r.jsxs)("div",{className:"content-stat",children:[(0,r.jsx)("span",{className:"content-icon",children:"\u2764\ufe0f"}),(0,r.jsxs)("div",{className:"content-info",children:[(0,r.jsx)("span",{className:"content-value",children:h(s.uploadStats.totalLikes)}),(0,r.jsx)("span",{className:"content-label",children:"Reactions Received"})]})]}),(0,r.jsxs)("div",{className:"content-stat",children:[(0,r.jsx)("span",{className:"content-icon",children:"\ud83d\udcac"}),(0,r.jsxs)("div",{className:"content-info",children:[(0,r.jsx)("span",{className:"content-value",children:h(s.activityStats.messagesCount)}),(0,r.jsx)("span",{className:"content-label",children:"Messages Sent"})]})]})]}),s.uploadStats.mostViewedContent&&(0,r.jsxs)("div",{className:"most-viewed",children:[(0,r.jsx)("h4",{children:"\ud83c\udfc6 Most Viewed Content"}),(0,r.jsxs)("div",{className:"content-preview",children:[(0,r.jsx)("img",{src:s.uploadStats.mostViewedContent.thumbnail,alt:"Most viewed content"}),(0,r.jsxs)("div",{className:"content-details",children:[(0,r.jsx)("span",{className:"content-name",children:s.uploadStats.mostViewedContent.name}),(0,r.jsxs)("span",{className:"content-views",children:[h(s.uploadStats.mostViewedContent.views)," views"]})]})]})]})]}),s.topViewers.length>0&&(0,r.jsxs)("div",{className:"viewers-section",children:[(0,r.jsx)("h3",{children:"\ud83d\udd25 Top Profile Viewers"}),(0,r.jsx)("div",{className:"viewers-list",children:s.topViewers.slice(0,5).map((e,t)=>(0,r.jsxs)("div",{className:"viewer-item",children:[(0,r.jsxs)("div",{className:"viewer-rank",children:["#",t+1]}),(0,r.jsx)("img",{src:e.avatar,alt:e.name,className:"viewer-avatar"}),(0,r.jsxs)("div",{className:"viewer-info",children:[(0,r.jsx)("span",{className:"viewer-name",children:e.name}),(0,r.jsxs)("span",{className:"viewer-views",children:[e.viewCount," views"]})]})]},e.id))})]}),(0,r.jsxs)("div",{className:"account-section",children:[(0,r.jsx)("h3",{children:"\ud83d\udcc5 Account Information"}),(0,r.jsxs)("div",{className:"account-info",children:[(0,r.jsxs)("div",{className:"info-item",children:[(0,r.jsx)("span",{className:"info-label",children:"Member since:"}),(0,r.jsx)("span",{className:"info-value",children:s.activityStats.joinDate?(p=s.activityStats.joinDate,new Date(p).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})):"N/A"})]}),(0,r.jsxs)("div",{className:"info-item",children:[(0,r.jsx)("span",{className:"info-label",children:"Account type:"}),(0,r.jsx)("span",{className:"info-value",children:t.role||"Standard"})]}),(0,r.jsxs)("div",{className:"info-item",children:[(0,r.jsx)("span",{className:"info-label",children:"Status:"}),(0,r.jsx)("span",{className:"status-badge ".concat(t.isOnline?"online":"offline"),children:t.isOnline?"Online":"Offline"})]})]})]})]})})]})});var p},d=e=>{if(!e||isNaN(e))return"0:00";const t=Math.floor(e/60),n=Math.floor(e%60);return"".concat(t,":").concat(n.toString().padStart(2,"0"))},u=e=>{let{userUploads:t,userId:n,isOwnProfile:s,onRefresh:o}=e;const[l,c]=(0,a.useState)(t||[]),[u,h]=(0,a.useState)("all"),[m,p]=(0,a.useState)("date"),[f,g]=(0,a.useState)("desc"),[v,y]=(0,a.useState)(""),[b,x]=(0,a.useState)(new Set),[w,j]=(0,a.useState)("grid"),[N,S]=(0,a.useState)(!1),[C,k]=(0,a.useState)(!1),[E,A]=(0,a.useState)(null);console.log("\ud83c\udfa8 EnhancedMediaGallery props:",{userUploadsLength:(null===t||void 0===t?void 0:t.length)||0,userId:n,isOwnProfile:s,userUploads:t}),(0,a.useEffect)(()=>{let e=[...t||[]];"all"!==u&&(e=e.filter(e=>e.type===u)),v&&(e=e.filter(e=>e.name.toLowerCase().includes(v.toLowerCase()))),e.sort((e,t)=>{let n=e[m],a=t[m];return"date"===m?(n=new Date(n),a=new Date(a)):"size"===m&&(n=parseInt(n)||0,a=parseInt(a)||0),"asc"===f?n>a?1:-1:n<a?1:-1}),c(e)},[t,u,v,m,f]);const P=[{value:"all",label:"All Files",icon:"\ud83d\udcc1",count:(null===t||void 0===t?void 0:t.length)||0},{value:"image",label:"Images",icon:"\ud83d\uddbc\ufe0f",count:(null===t||void 0===t?void 0:t.filter(e=>"image"===e.type).length)||0},{value:"video",label:"Videos",icon:"\ud83c\udfa5",count:(null===t||void 0===t?void 0:t.filter(e=>"video"===e.type).length)||0},{value:"gif",label:"GIFs",icon:"\u2728",count:(null===t||void 0===t?void 0:t.filter(e=>"gif"===e.type).length)||0},{value:"document",label:"Documents",icon:"\ud83d\udcc4",count:(null===t||void 0===t?void 0:t.filter(e=>"document"===e.type).length)||0}],T=e=>{x(t=>{const n=new Set(t);return n.has(e)?n.delete(e):n.add(e),n})},L=e=>{if(0===e)return"0 Bytes";const t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB"][t]},M=e=>{switch(e){case"image":return"\ud83d\uddbc\ufe0f";case"video":return"\ud83c\udfa5";case"gif":return"\u2728";case"document":case"pdf":return"\ud83d\udcc4";default:return"\ud83d\udcc1"}},I=(()=>{const e=(null===t||void 0===t?void 0:t.reduce((e,t)=>e+(t.size||0),0))||0,n=(null===t||void 0===t?void 0:t.reduce((e,t)=>(e[t.type]=(e[t.type]||0)+1,e),{}))||{};return{totalFiles:(null===t||void 0===t?void 0:t.length)||0,totalSize:L(e),types:n,averageSize:null!==t&&void 0!==t&&t.length?L(e/t.length):"0 Bytes"}})(),O=e=>{var t;let{item:n,isSelected:a,onSelect:i,onView:o}=e;return(0,r.jsxs)("div",{className:"media-item ".concat(a?"selected":""," ").concat(w),"data-item-id":n.id,children:[s&&(0,r.jsx)("div",{className:"item-checkbox",children:(0,r.jsx)("input",{type:"checkbox",checked:a,onChange:()=>i(n.id)})}),(0,r.jsxs)("div",{className:"item-preview",onClick:e=>{e.preventDefault(),e.stopPropagation(),console.log("\ud83d\uddb1\ufe0f Click detected on item:",n.name,n.type),o(n)},style:{cursor:"pointer"},children:["image"===n.type&&(0,r.jsx)("img",{src:n.url,alt:n.name,loading:"lazy"}),"video"===n.type&&(0,r.jsxs)("div",{className:"video-preview",children:[n.thumbnailUrl?(0,r.jsx)("img",{src:n.thumbnailUrl,alt:n.name,loading:"lazy"}):(0,r.jsx)("div",{className:"video-placeholder",children:"\ud83c\udfa5"}),(0,r.jsx)("div",{className:"video-overlay",children:"\u25b6\ufe0f"})]}),"gif"===n.type&&(0,r.jsx)("img",{src:n.url,alt:n.name,loading:"lazy"}),("document"===n.type||"pdf"===n.type)&&(0,r.jsxs)("div",{className:"document-preview",children:[(0,r.jsx)("span",{className:"file-icon",children:M(n.type)}),(0,r.jsx)("span",{className:"file-extension",children:"PDF"})]}),"document"===n.type&&n.name&&!n.name.toLowerCase().endsWith(".pdf")&&(0,r.jsxs)("div",{className:"document-preview",children:[(0,r.jsx)("span",{className:"file-icon",children:M(n.type)}),(0,r.jsx)("span",{className:"file-extension",children:null===(t=n.name.split(".").pop())||void 0===t?void 0:t.toUpperCase()})]})]}),(0,r.jsxs)("div",{className:"item-info",children:[(0,r.jsx)("span",{className:"item-name",title:n.name,children:n.name}),(0,r.jsxs)("div",{className:"item-meta",children:[(0,r.jsx)("span",{className:"item-size",children:L(n.size)}),(0,r.jsx)("span",{className:"item-date",children:(l=n.date,new Date(l).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}))})]})]})]});var l};return(0,r.jsxs)("div",{className:"enhanced-media-gallery",children:[(0,r.jsxs)("div",{className:"gallery-controls",children:[(0,r.jsx)("div",{className:"search-section",children:(0,r.jsxs)("div",{className:"search-input-wrapper",children:[(0,r.jsx)("input",{type:"text",placeholder:"Search files...",value:v,onChange:e=>y(e.target.value),className:"search-input"}),(0,r.jsx)("span",{className:"search-icon",children:"\ud83d\udd0d"})]})}),(0,r.jsx)("div",{className:"filter-section",children:(0,r.jsx)("div",{className:"filter-buttons",children:P.map(e=>(0,r.jsxs)("button",{className:"filter-btn ".concat(u===e.value?"active":""),onClick:()=>h(e.value),children:[(0,r.jsx)("span",{className:"filter-icon",children:e.icon}),(0,r.jsx)("span",{className:"filter-label",children:e.label}),(0,r.jsxs)("span",{className:"filter-count",children:["(",e.count,")"]})]},e.value))})}),(0,r.jsxs)("div",{className:"view-controls",children:[(0,r.jsxs)("div",{className:"sort-controls",children:[(0,r.jsx)("select",{value:m,onChange:e=>p(e.target.value),className:"sort-select",children:[{value:"date",label:"Date"},{value:"name",label:"Name"},{value:"size",label:"Size"},{value:"type",label:"Type"}].map(e=>(0,r.jsxs)("option",{value:e.value,children:["Sort by ",e.label]},e.value))}),(0,r.jsx)("button",{className:"sort-direction-btn",onClick:()=>g(e=>"asc"===e?"desc":"asc"),title:"Sort ".concat("asc"===f?"Descending":"Ascending"),children:"asc"===f?"\u2191":"\u2193"})]}),(0,r.jsxs)("div",{className:"view-mode-controls",children:[(0,r.jsx)("button",{className:"view-mode-btn ".concat("grid"===w?"active":""),onClick:()=>j("grid"),title:"Grid View",children:"\u229e"}),(0,r.jsx)("button",{className:"view-mode-btn ".concat("list"===w?"active":""),onClick:()=>j("list"),title:"List View",children:"\u2630"})]}),(0,r.jsx)("button",{className:"stats-btn ".concat(N?"active":""),onClick:()=>S(!N),title:"Toggle Statistics",children:"\ud83d\udcca"})]})]}),N&&(0,r.jsxs)("div",{className:"stats-panel",children:[(0,r.jsx)("h4",{children:"\ud83d\udcca Media Statistics"}),(0,r.jsxs)("div",{className:"stats-grid",children:[(0,r.jsxs)("div",{className:"stat-item",children:[(0,r.jsx)("span",{className:"stat-label",children:"Total Files:"}),(0,r.jsx)("span",{className:"stat-value",children:I.totalFiles})]}),(0,r.jsxs)("div",{className:"stat-item",children:[(0,r.jsx)("span",{className:"stat-label",children:"Total Size:"}),(0,r.jsx)("span",{className:"stat-value",children:I.totalSize})]}),(0,r.jsxs)("div",{className:"stat-item",children:[(0,r.jsx)("span",{className:"stat-label",children:"Average Size:"}),(0,r.jsx)("span",{className:"stat-value",children:I.averageSize})]}),(0,r.jsxs)("div",{className:"stat-item",children:[(0,r.jsx)("span",{className:"stat-label",children:"File Types:"}),(0,r.jsx)("div",{className:"type-breakdown",children:Object.entries(I.types).map(e=>{let[t,n]=e;return(0,r.jsxs)("span",{className:"type-stat",children:[M(t)," ",n]},t)})})]})]})]}),s&&b.size>0&&(0,r.jsxs)("div",{className:"bulk-actions",children:[(0,r.jsxs)("span",{className:"selection-count",children:[b.size," of ",l.length," selected"]}),(0,r.jsxs)("div",{className:"bulk-buttons",children:[(0,r.jsx)("button",{onClick:()=>{b.size===l.length?x(new Set):x(new Set(l.map(e=>e.id)))},className:"select-all-btn",children:b.size===l.length?"Deselect All":"Select All"}),(0,r.jsx)("button",{onClick:async()=>{if(s&&0!==b.size){k(!0);try{const e=Array.from(b).map(e=>{const t=l.find(t=>t.id===e);return i.A.deleteMediaItem(t.type,e)});await Promise.all(e),x(new Set),o&&o()}catch(e){console.error("Error deleting items:",e)}finally{k(!1)}}},className:"bulk-delete-btn",disabled:C,children:C?"Deleting...":"Delete (".concat(b.size,")")})]})]}),(0,r.jsx)("div",{className:"media-container ".concat(w),children:0===l.length?(0,r.jsxs)("div",{className:"empty-state",children:[(0,r.jsx)("div",{className:"empty-icon",children:"\ud83d\udcc2"}),(0,r.jsx)("h3",{children:"No files found"}),(0,r.jsx)("p",{children:v?'No files match "'.concat(v,'"'):"all"!==u?"No ".concat(u," files found"):"No files uploaded yet"})]}):l.map(e=>(0,r.jsx)(O,{item:e,isSelected:b.has(e.id),onSelect:T,onView:e=>{try{console.log("\ud83c\udfac Opening media viewer for:",e),console.log("\ud83d\udccb Media details:",{type:e.type,url:e.url,name:e.name,hasUrl:!!e.url,urlType:typeof e.url});const t=document.querySelector('[data-item-id="'.concat(e.id,'"]'));if(t&&(t.style.transform="scale(0.95)",setTimeout(()=>{t.style.transform=""},150)),!e.url)return console.error("\u274c No URL found for media item:",e),void alert("\u274c Cannot open ".concat(e.name," - No URL available"));if("document"===e.type||"pdf"===e.type){const t=e.url.startsWith("http")?e.url:"http://localhost:5001".concat(e.url);return console.log("\ud83d\udcc4 Opening document in new tab:",t),void window.open(t,"_blank")}console.log("\ud83d\uddbc\ufe0f Opening in modal viewer"),A(e)}catch(t){console.error("\ud83d\udca5 Error opening media viewer:",t),alert("\ud83d\udca5 Error opening ".concat(e.name,": ").concat(t.message))}}},e.id))}),(0,r.jsxs)("div",{className:"results-summary",children:["Showing ",l.length," of ",(null===t||void 0===t?void 0:t.length)||0," files",v&&' matching "'.concat(v,'"'),"all"!==u&&" (".concat(u," only)")]}),E&&(0,r.jsx)("div",{className:"media-viewer-overlay",onClick:()=>A(null),children:(0,r.jsxs)("div",{className:"media-viewer-modal",onClick:e=>e.stopPropagation(),children:[(0,r.jsxs)("div",{className:"media-viewer-header",children:[(0,r.jsx)("h3",{children:E.name||"Media File"}),(0,r.jsx)("button",{className:"close-viewer-btn",onClick:()=>A(null),children:"\xd7"})]}),(0,r.jsxs)("div",{className:"media-viewer-content",children:["image"===E.type&&E.url&&(0,r.jsx)("img",{src:E.url,alt:E.name||"Image",className:"viewer-image",onError:e=>{console.error("Image load error:",e),console.log("Image URL:",E.url)}}),"video"===E.type&&E.url&&(0,r.jsxs)("video",{src:E.url.startsWith("http")?E.url:"http://localhost:5001".concat(E.url),controls:!0,autoPlay:!0,playsInline:!0,className:"viewer-video",poster:E.thumbnailUrl,onError:e=>{console.error("Video playback error in viewer:",e),console.log("Selected media details:",E),console.log("Video source URL:",E.url.startsWith("http")?E.url:"http://localhost:5001".concat(E.url))},onLoadStart:()=>{console.log("Video load started for:",E.name)},onCanPlay:()=>{console.log("Video can play:",E.name)},children:[(0,r.jsx)("source",{src:E.url.startsWith("http")?E.url:"http://localhost:5001".concat(E.url),type:E.mimeType||"video/mp4"}),"Your browser does not support the video tag."]}),"gif"===E.type&&E.url&&(0,r.jsx)("img",{src:E.url,alt:E.name||"GIF",className:"viewer-gif",onError:e=>{console.error("GIF load error:",e),console.log("GIF URL:",E.url)}}),("document"===E.type||"pdf"===E.type)&&E.url&&(0,r.jsxs)("div",{className:"pdf-viewer",children:[(0,r.jsx)("iframe",{src:E.url.startsWith("http")?E.url:"http://localhost:5001".concat(E.url),width:"100%",height:"500px",title:E.name||"Document",style:{border:"none",borderRadius:"8px"},onError:e=>{console.error("Document load error:",e),console.log("Document URL:",E.url)}}),(0,r.jsx)("div",{className:"pdf-actions",children:(0,r.jsx)("a",{href:E.url.startsWith("http")?E.url:"http://localhost:5001".concat(E.url),target:"_blank",rel:"noopener noreferrer",className:"pdf-open-btn",children:"Open in New Tab"})})]}),!E.url&&(0,r.jsxs)("div",{className:"error-message",children:[(0,r.jsx)("p",{children:"\u26a0\ufe0f Media file not found or invalid URL"}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"File:"})," ",E.name]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Type:"})," ",E.type]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"URL:"})," ",E.url||"No URL provided"]}),(0,r.jsxs)("div",{className:"debug-info",children:[(0,r.jsx)("p",{children:(0,r.jsx)("strong",{children:"Debug Info:"})}),(0,r.jsx)("pre",{children:JSON.stringify(E,null,2)})]}),(0,r.jsx)("button",{className:"refresh-media-btn",onClick:()=>{console.log("\ud83d\udd04 Refreshing media gallery..."),o&&o(),A(null)},children:"\ud83d\udd04 Refresh Gallery"})]})]}),(0,r.jsx)("div",{className:"media-viewer-info",children:(0,r.jsxs)("div",{className:"media-details",children:[(0,r.jsxs)("span",{children:[(0,r.jsx)("strong",{children:"Type:"})," ",E.type]}),(0,r.jsxs)("span",{children:[(0,r.jsx)("strong",{children:"Size:"})," ",L(E.size)]}),E.dimensions&&(0,r.jsxs)("span",{children:[(0,r.jsx)("strong",{children:"Dimensions:"})," ",E.dimensions]}),E.duration&&(0,r.jsxs)("span",{children:[(0,r.jsx)("strong",{children:"Duration:"})," ",d(E.duration)]}),(0,r.jsxs)("span",{children:[(0,r.jsx)("strong",{children:"Uploaded:"})," ",E.uploadedAt?new Date(E.uploadedAt).toLocaleDateString():"Unknown"]})]})})]})})]})},h=e=>{let{currentAvatar:t,onAvatarChange:n,isOwnProfile:s}=e;const[o,l]=(0,a.useState)(!1),[c,d]=(0,a.useState)(!1),[u,h]=(0,a.useState)(t),m=(0,a.useRef)(null),p=(0,a.useCallback)(async e=>{console.log("\ud83d\udd04 Avatar upload started:",{fileCount:e.length});const a=e[0];if(a){if(console.log("\ud83d\udcc1 File details:",{name:a.name,size:a.size,type:a.type}),!a.type.startsWith("image/"))return console.error("\u274c Invalid file type:",a.type),void alert("Please select an image file (PNG, JPG, GIF, etc.)");if(a.size>5242880)return console.error("\u274c File too large:",a.size),void alert("File size must be less than 5MB");l(!0),console.log("\u23f3 Upload started...");try{const e=new FileReader;e.onload=e=>{h(e.target.result),console.log("\ud83d\uddbc\ufe0f Preview created")},e.readAsDataURL(a);const t=localStorage.getItem("authToken")||sessionStorage.getItem("authToken");if(console.log("\ud83d\udd11 Auth token check:",{hasToken:!!t,tokenLength:t?t.length:0,localStorage:!!localStorage.getItem("authToken"),sessionStorage:!!sessionStorage.getItem("authToken")}),!t){console.log("\ud83c\udfad No auth token found, running in demo mode");const e=new FileReader;return e.onload=e=>{const t=e.target.result;h(t),n(t),console.log("\u2705 Demo mode avatar update successful")},void e.readAsDataURL(a)}console.log("\ud83c\udf10 Uploading to server...");try{const e=await i.A.api.uploadAvatar(a);if(console.log("\u2705 Upload successful via userDataService:",e),!e||!e.avatarUrl)throw console.error("\u274c No avatar URL in response:",e),new Error("Invalid response: no avatar URL returned");console.log("\ud83d\uddbc\ufe0f Setting new avatar URL:",e.avatarUrl),n(e.avatarUrl)}catch(s){throw console.error("\u274c API upload failed:",s),new Error(s.message||"Upload failed")}}catch(o){if(console.error("\ud83d\udca5 Avatar upload error:",o),console.error("\ud83d\udca5 Error details:",{message:o.message,stack:o.stack,name:o.name}),o.message.includes("Network Error")||o.message.includes("fetch")||o.message.includes("API call failed")){console.log("\ud83d\udd04 Network error, falling back to demo mode");const e=new FileReader;e.onload=e=>{const t=e.target.result;h(t),n(t),console.log("\u2705 Fallback demo mode avatar update successful")},e.readAsDataURL(a)}else alert("Failed to upload avatar: ".concat(o.message)),h(t)}finally{l(!1),console.log("\ud83c\udfc1 Upload process completed")}}},[t,n]),f=(0,a.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),"dragenter"===e.type||"dragover"===e.type?d(!0):"dragleave"===e.type&&d(!1)},[]),g=(0,a.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),d(!1),e.dataTransfer.files&&e.dataTransfer.files[0]&&p(e.dataTransfer.files)},[p]),v=(0,a.useCallback)(e=>{e.preventDefault(),e.target.files&&e.target.files[0]&&p(e.target.files)},[p]),y=(0,a.useCallback)(()=>{s&&m.current&&m.current.click()},[s]);return(0,r.jsxs)("div",{className:"avatar-upload-container",children:[(0,r.jsxs)("div",{className:"profile-avatar ".concat(s?"editable":""," ").concat(c?"drag-active":""," ").concat(o?"uploading":""),onDragEnter:s?f:void 0,onDragLeave:s?f:void 0,onDragOver:s?f:void 0,onDrop:s?g:void 0,onClick:y,children:[(0,r.jsxs)("div",{className:"avatar-image-container",children:[(0,r.jsx)("img",{src:u||"/default-avatar.png",alt:"Profile Avatar",className:"avatar-image"}),s&&(0,r.jsx)("div",{className:"avatar-overlay",children:o?(0,r.jsxs)("div",{className:"upload-spinner",children:[(0,r.jsx)("div",{className:"spinner"}),(0,r.jsx)("span",{children:"Uploading..."})]}):(0,r.jsxs)("div",{className:"upload-prompt",children:[(0,r.jsx)("div",{className:"upload-icon",children:"\ud83d\udcf7"}),(0,r.jsx)("span",{children:"Change Photo"})]})})]}),s&&(0,r.jsx)("input",{ref:m,type:"file",accept:"image/*",onChange:v,className:"avatar-file-input"})]}),s&&(0,r.jsxs)("div",{className:"avatar-upload-tips",children:[(0,r.jsx)("p",{className:"upload-hint",children:"Click or drag & drop to change your profile photo"}),(0,r.jsx)("p",{className:"upload-requirements",children:"Supports: JPG, PNG, GIF \u2022 Max size: 5MB"})]})]})};var m=n(373),p=n(398);const f=e=>{let{isOpen:t,onClose:n,currentUser:s,userId:i}=e;const[o,l]=(0,a.useState)(null),[c,d]=(0,a.useState)(""),[u,h]=(0,a.useState)(""),[m,f]=(0,a.useState)(!1),[g,v]=(0,a.useState)(!1),y=(null===s||void 0===s?void 0:s.id)||i;(0,a.useEffect)(()=>{t&&y&&b()},[t,y]);const b=async()=>{try{const e=p.A.getStatus();if(l(e),e.isInitialized){const e=await p.A.generateKeyFingerprint();d(e);const t=await p.A.getPublicKeyForSharing();h(t)}}catch(e){console.error("Failed to load encryption status:",e)}};return t?(0,r.jsx)("div",{className:"encryption-settings-overlay",children:(0,r.jsxs)("div",{className:"encryption-settings-modal",children:[(0,r.jsxs)("div",{className:"encryption-settings-header",children:[(0,r.jsx)("h2",{children:"\ud83d\udd12 End-to-End Encryption"}),(0,r.jsx)("button",{className:"close-btn",onClick:n,children:"\xd7"})]}),(0,r.jsx)("div",{className:"encryption-settings-content",children:null!==o&&void 0!==o&&o.isInitialized?(0,r.jsxs)("div",{className:"encryption-active",children:[(0,r.jsx)("div",{className:"encryption-status",children:(0,r.jsxs)("div",{className:"status-indicator",children:[(0,r.jsx)("span",{className:"status-icon",children:"\u2705"}),(0,r.jsx)("span",{className:"status-text",children:"End-to-end encryption is enabled"})]})}),(0,r.jsxs)("div",{className:"encryption-details",children:[(0,r.jsxs)("div",{className:"detail-section",children:[(0,r.jsx)("h4",{children:"\ud83d\udd11 Your Key Fingerprint"}),(0,r.jsx)("p",{className:"detail-description",children:"Share this with contacts to verify your identity:"}),(0,r.jsxs)("div",{className:"fingerprint-display",children:[(0,r.jsx)("code",{className:"fingerprint",children:c}),(0,r.jsx)("button",{className:"copy-btn",onClick:()=>{navigator.clipboard.writeText(c),alert("\ud83d\udccb Key fingerprint copied to clipboard!")},children:"\ud83d\udccb"})]})]}),(0,r.jsxs)("div",{className:"detail-section",children:[(0,r.jsx)("h4",{children:"\ud83d\udce4 Your Public Key"}),(0,r.jsx)("p",{className:"detail-description",children:"Share this with contacts to enable encrypted messaging:"}),(0,r.jsxs)("div",{className:"public-key-section",children:[(0,r.jsxs)("button",{className:"toggle-key-btn",onClick:()=>v(!g),children:[g?"\ud83d\ude48 Hide":"\ud83d\udc41\ufe0f Show"," Public Key"]}),g&&(0,r.jsxs)("div",{className:"public-key-display",children:[(0,r.jsx)("textarea",{className:"public-key-text",value:u,readOnly:!0,rows:6}),(0,r.jsx)("button",{className:"copy-btn",onClick:()=>{navigator.clipboard.writeText(u),alert("\ud83d\udccb Public key copied to clipboard! Share this with contacts to enable encrypted messaging.")},children:"\ud83d\udccb Copy Public Key"})]})]})]}),(0,r.jsxs)("div",{className:"detail-section",children:[(0,r.jsx)("h4",{children:"\u2699\ufe0f Key Management"}),(0,r.jsx)("div",{className:"key-actions",children:(0,r.jsx)("button",{className:"regenerate-btn",onClick:async()=>{if(window.confirm("\u26a0\ufe0f Are you sure? Regenerating keys will prevent you from reading old encrypted messages.")){f(!0);try{p.A.clearEncryptionData();await p.A.initialize(s.id)&&(await b(),alert("\u2705 New encryption keys generated successfully!"))}catch(e){console.error("Failed to regenerate keys:",e),alert("\u274c Failed to regenerate keys. Please try again.")}finally{f(!1)}}},disabled:m,children:m?"\ud83d\udd04 Generating...":"\ud83d\udd04 Regenerate Keys"})}),(0,r.jsx)("p",{className:"warning-text",children:"\u26a0\ufe0f Regenerating keys will prevent you from reading old encrypted messages."})]})]})]}):(0,r.jsxs)("div",{className:"encryption-setup",children:[(0,r.jsxs)("div",{className:"encryption-info",children:[(0,r.jsx)("h3",{children:"\ud83d\udee1\ufe0f Secure Your Messages"}),(0,r.jsx)("p",{children:"Enable end-to-end encryption to ensure only you and your contacts can read your messages."}),(0,r.jsxs)("div",{className:"encryption-benefits",children:[(0,r.jsxs)("div",{className:"benefit-item",children:[(0,r.jsx)("span",{className:"benefit-icon",children:"\ud83d\udd10"}),(0,r.jsx)("span",{children:"Messages encrypted on your device"})]}),(0,r.jsxs)("div",{className:"benefit-item",children:[(0,r.jsx)("span",{className:"benefit-icon",children:"\ud83d\udeab"}),(0,r.jsx)("span",{children:"Server cannot read your messages"})]}),(0,r.jsxs)("div",{className:"benefit-item",children:[(0,r.jsx)("span",{className:"benefit-icon",children:"\u2705"}),(0,r.jsx)("span",{children:"Only recipients can decrypt"})]})]})]}),(0,r.jsx)("button",{className:"enable-encryption-btn",onClick:async()=>{f(!0);try{await p.A.initialize(y)?(await b(),alert("\u2705 End-to-end encryption has been enabled for your account!")):alert("\u274c Failed to initialize encryption. Please try again.")}catch(e){console.error("Failed to initialize encryption:",e),alert("\u274c Failed to initialize encryption. Please try again.")}finally{f(!1)}},disabled:m,children:m?"\ud83d\udd04 Generating Keys...":"\ud83d\udd12 Enable Encryption"})]})}),(0,r.jsx)("div",{className:"encryption-settings-footer",children:(0,r.jsx)("div",{className:"security-notice",children:(0,r.jsx)("p",{children:"\ud83d\udd12 Your private keys never leave your device and are stored securely in your browser."})})})]})}):null},g=e=>{let{userId:t,username:n,onClose:d,isVisible:p,isClosing:g}=e;const[v,y]=(0,a.useState)("profile"),[b,x]=(0,a.useState)(null),[w,j]=(0,a.useState)([]),[N,S]=(0,a.useState)([]),[C,k]=(0,a.useState)(!0),[E,A]=(0,a.useState)(null),[P,T]=(0,a.useState)(!1),[L,M]=(0,a.useState)(!1),[I,O]=(0,a.useState)(!1),[_,D]=(0,a.useState)(!1),[R,F]=(0,a.useState)([]),[X,U]=(0,a.useState)(null),[z,B]=(0,a.useState)(!1),H=(()=>{const e=localStorage.getItem("user");if(e)try{const t=JSON.parse(e);return t.id||t.username}catch(E){console.error("Error parsing localStorage user data:",E)}const t=sessionStorage.getItem("user");if(t)try{const e=JSON.parse(t);return e.id||e.username}catch(E){console.error("Error parsing sessionStorage user data:",E)}return null})(),V=t===H;console.log("UserProfile authentication check:",{userId:t,currentUserId:H,isOwnProfile:V,localStorageUser:localStorage.getItem("user"),sessionStorageUser:sessionStorage.getItem("user")}),(0,a.useEffect)(()=>{(async()=>{try{if(k(!0),V)try{const e=localStorage.getItem("user")||sessionStorage.getItem("user");if(e){const t=JSON.parse(e);console.log("\ud83d\udccb Setting current user profile from local storage:",t),x((0,s.A)((0,s.A)({},t),{},{userId:t.id,username:t.username,displayName:t.displayName||t.name,bio:t.bio||"",avatarUrl:t.avatar,uploadCount:0,connectionCount:0,activityScore:0,joinDate:t.createdAt,isOnline:!0,status:"online"}))}}catch(E){console.warn("\u26a0\ufe0f Could not parse user data from storage:",E)}console.log("\ud83d\udd0d Fetching user profile for:",t,V?"(own profile)":"(other user)");const e=await i.A.fetchUserProfile(t);if(console.log("\u2705 Profile data received:",e),x(e),"uploads"===v||"profile"===v){const e=await i.A.fetchUserUploads(t);j(e)}if("history"===v||"profile"===v){const e=await i.A.fetchUserViewHistory(t);S(e)}k(!1)}catch(e){console.error("Error loading user data:",e),A("Failed to load user data. Please try again later."),k(!1)}})()},[t,v,V]);const q=e=>{y(e)},G=e=>{if(console.log("\ud83d\udcbe Saving updated profile:",e),x(t=>(0,s.A)((0,s.A)((0,s.A)({},t),e),{},{isOnline:!!V||(null===t||void 0===t?void 0:t.isOnline),status:V?"online":null===t||void 0===t?void 0:t.status})),V)try{const t=JSON.parse(localStorage.getItem("user")||sessionStorage.getItem("user")||"{}"),n=(0,s.A)((0,s.A)((0,s.A)({},t),e),{},{isOnline:!0,status:"online"});localStorage.getItem("user")&&localStorage.setItem("user",JSON.stringify(n)),sessionStorage.getItem("user")&&sessionStorage.setItem("user",JSON.stringify(n)),console.log("\u2705 Updated user data in local storage")}catch(E){console.warn("\u26a0\ufe0f Could not update user data in storage:",E)}},W=async e=>{try{const n=(0,s.A)((0,s.A)({},b),{},{avatar:e});await i.A.updateUserProfile(t,{avatar:e}),x(n)}catch(E){console.error("Failed to update avatar:",E)}},K=e=>{switch(e){case"image":return"\ud83d\uddbc\ufe0f";case"video":return"\ud83c\udfac";case"gif":return"\ud83c\udfad";case"document":return"\ud83d\udcc4";default:return"\ud83d\udcc1"}},Q=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),J=()=>N&&0!==N.length?(0,r.jsx)("div",{className:"history-list",children:N.map(e=>(0,r.jsxs)("div",{className:"history-item",children:[(0,r.jsx)("div",{className:"history-icon",children:K(e.contentType)}),(0,r.jsxs)("div",{className:"history-info",children:[(0,r.jsx)("span",{className:"history-title",children:e.title}),(0,r.jsxs)("span",{className:"history-details",children:[e.contentType," \u2022 Viewed ",Q(e.viewedAt)]})]})]},e.id))}):(0,r.jsx)("p",{className:"empty-state",children:"No view history to display"});return(0,r.jsxs)("div",{className:"user-profile-container ".concat(p?"visible":""," ").concat(g?"closing":""),children:[(0,r.jsx)("div",{className:"profile-header-gradient"}),(0,r.jsxs)("div",{className:"user-profile-header",children:[(0,r.jsxs)("div",{className:"header-content",children:[(0,r.jsxs)("div",{className:"profile-title-section",children:[(0,r.jsxs)("h2",{className:"profile-title",children:[n,"'s Profile"]}),(0,r.jsx)("div",{className:"profile-subtitle",children:null!==b&&void 0!==b&&b.isOnline?(0,r.jsx)("span",{className:"online-indicator",children:"\ud83d\udfe2 Online"}):(0,r.jsx)("span",{className:"offline-indicator",children:"\u26aa Offline"})})]}),(0,r.jsx)("button",{className:"close-btn",onClick:d,children:(0,r.jsx)("span",{className:"close-icon",children:"\xd7"})})]}),(0,r.jsx)("div",{className:"profile-tabs",children:(0,r.jsxs)("div",{className:"tabs-container",children:[(0,r.jsxs)("button",{className:"tab-btn ".concat("profile"===v?"active":""),onClick:()=>q("profile"),children:[(0,r.jsx)("span",{className:"tab-icon",children:"\ud83d\udc64"}),(0,r.jsx)("span",{className:"tab-label",children:"Profile"})]}),(0,r.jsxs)("button",{className:"tab-btn ".concat("uploads"===v?"active":""),onClick:()=>q("uploads"),children:[(0,r.jsx)("span",{className:"tab-icon",children:"\ud83d\udcc1"}),(0,r.jsx)("span",{className:"tab-label",children:"Media"})]}),(0,r.jsxs)("button",{className:"tab-btn ".concat("history"===v?"active":""),onClick:()=>q("history"),children:[(0,r.jsx)("span",{className:"tab-icon",children:"\ud83d\udcda"}),(0,r.jsx)("span",{className:"tab-label",children:"History"})]}),(0,r.jsxs)("button",{className:"tab-btn ".concat("contacts"===v?"active":""),onClick:()=>{U(null),D(!0)},children:[(0,r.jsx)("span",{className:"tab-icon",children:"\ud83d\udc65"}),(0,r.jsx)("span",{className:"tab-label",children:"Contacts"})]}),V&&(0,r.jsxs)("button",{className:"tab-btn ".concat("encryption"===v?"active":""),onClick:()=>B(!0),children:[(0,r.jsx)("span",{className:"tab-icon",children:"\ud83d\udd12"}),(0,r.jsx)("span",{className:"tab-label",children:"Security"})]}),(0,r.jsx)("div",{className:"tab-indicator"})]})})]}),(0,r.jsx)("div",{className:"user-profile-content",children:(0,r.jsx)("div",{className:"content-wrapper",children:C?(0,r.jsxs)("div",{className:"loading-container",children:[(0,r.jsxs)("div",{className:"loading-spinner",children:[(0,r.jsx)("div",{className:"spinner-ring"}),(0,r.jsx)("div",{className:"spinner-ring"}),(0,r.jsx)("div",{className:"spinner-ring"})]}),(0,r.jsx)("p",{className:"loading-text",children:"Loading profile..."})]}):E?(0,r.jsxs)("div",{className:"error-container",children:[(0,r.jsx)("div",{className:"error-icon",children:"\u26a0\ufe0f"}),(0,r.jsx)("p",{className:"error-message",children:E}),(0,r.jsx)("button",{className:"retry-btn",onClick:()=>window.location.reload(),children:"Retry"})]}):(0,r.jsxs)("div",{className:"tab-content",children:["profile"===v&&(()=>{return b?(0,r.jsxs)("div",{className:"profile-info",children:[(0,r.jsxs)("div",{className:"profile-header",children:[(0,r.jsx)(h,{currentAvatar:b.avatar,onAvatarChange:W,isOwnProfile:V}),(0,r.jsxs)("div",{className:"profile-details",children:[(0,r.jsx)("h2",{children:b.displayName||b.name}),(0,r.jsxs)("p",{className:"username",children:["@",b.username]}),b.statusMessage&&(0,r.jsxs)("p",{className:"status-message",children:["\ud83d\udcad ",b.statusMessage]}),(0,r.jsx)("p",{className:"bio",children:b.bio||"No bio available"}),(0,r.jsx)("div",{className:"profile-actions",children:V&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("button",{className:"edit-profile-btn",onClick:()=>T(!0),children:"\u270f\ufe0f Edit Profile"}),(0,r.jsx)("button",{className:"privacy-settings-btn",onClick:()=>M(!0),children:"\ud83d\udd12 Privacy & Notifications"}),(0,r.jsx)("button",{className:"analytics-btn",onClick:()=>O(!0),children:"\ud83d\udcca View Analytics"})]})}),(0,r.jsxs)("div",{className:"profile-stats",children:[(0,r.jsxs)("div",{className:"stat",children:[(0,r.jsx)("span",{className:"stat-value",children:(null===w||void 0===w?void 0:w.length)||0}),(0,r.jsx)("span",{className:"stat-label",children:"Uploads"})]}),(0,r.jsxs)("div",{className:"stat",children:[(0,r.jsx)("span",{className:"stat-value",children:b.connectionCount||0}),(0,r.jsx)("span",{className:"stat-label",children:"Connections"})]})]}),(0,r.jsxs)("div",{className:"profile-extended-info",children:[(b.location||b.company||b.jobTitle)&&(0,r.jsxs)("div",{className:"info-section",children:[b.location&&(0,r.jsxs)("div",{className:"info-item",children:[(0,r.jsx)("span",{className:"info-icon",children:"\ud83d\udccd"}),(0,r.jsx)("span",{children:b.location})]}),b.company&&(0,r.jsxs)("div",{className:"info-item",children:[(0,r.jsx)("span",{className:"info-icon",children:"\ud83c\udfe2"}),(0,r.jsx)("span",{children:b.company}),b.jobTitle&&(0,r.jsxs)("span",{className:"job-title",children:[" \u2022 ",b.jobTitle]})]}),b.website&&(0,r.jsxs)("div",{className:"info-item",children:[(0,r.jsx)("span",{className:"info-icon",children:"\ud83d\udd17"}),(0,r.jsx)("a",{href:b.website,target:"_blank",rel:"noopener noreferrer",children:b.website})]})]}),b.socialLinks&&Object.values(b.socialLinks).some(e=>e)&&(0,r.jsxs)("div",{className:"social-links",children:[(0,r.jsx)("h4",{children:"Social Links"}),(0,r.jsxs)("div",{className:"social-icons",children:[b.socialLinks.twitter&&(0,r.jsx)("a",{href:"https://twitter.com/".concat(b.socialLinks.twitter.replace("@","")),target:"_blank",rel:"noopener noreferrer",className:"social-link",children:"\ud83d\udc26"}),b.socialLinks.linkedin&&(0,r.jsx)("a",{href:"https://linkedin.com/in/".concat(b.socialLinks.linkedin),target:"_blank",rel:"noopener noreferrer",className:"social-link",children:"\ud83d\udcbc"}),b.socialLinks.github&&(0,r.jsx)("a",{href:"https://github.com/".concat(b.socialLinks.github),target:"_blank",rel:"noopener noreferrer",className:"social-link",children:"\ud83d\udc19"}),b.socialLinks.instagram&&(0,r.jsx)("a",{href:"https://instagram.com/".concat(b.socialLinks.instagram.replace("@","")),target:"_blank",rel:"noopener noreferrer",className:"social-link",children:"\ud83d\udcf7"}),b.socialLinks.facebook&&(0,r.jsx)("a",{href:"https://facebook.com/".concat(b.socialLinks.facebook),target:"_blank",rel:"noopener noreferrer",className:"social-link",children:"\ud83d\udc64"}),b.socialLinks.youtube&&(0,r.jsx)("a",{href:"https://youtube.com/c/".concat(b.socialLinks.youtube),target:"_blank",rel:"noopener noreferrer",className:"social-link",children:"\ud83d\udcfa"})]})]})]})]})]}),(0,r.jsxs)("div",{className:"profile-sections",children:[(0,r.jsx)("h3",{children:"Recent Uploads"}),(0,r.jsxs)("div",{className:"profile-section",children:[(e=w.slice(0,4),e&&0!==e.length?(0,r.jsx)("div",{className:"media-grid",children:e.map(e=>(0,r.jsxs)("div",{className:"media-item",children:["image"===e.type?(0,r.jsx)("div",{className:"media-preview",children:(0,r.jsx)("img",{src:e.url,alt:e.name})}):(0,r.jsx)("div",{className:"media-preview file-icon",children:K(e.type)}),(0,r.jsxs)("div",{className:"media-info",children:[(0,r.jsx)("span",{className:"media-name",children:e.name}),(0,r.jsx)("span",{className:"media-date",children:Q(e.date)})]})]},e.id))}):(0,r.jsx)("p",{className:"empty-state",children:"No content to display"})),w.length>4&&(0,r.jsx)("button",{className:"view-more-btn",onClick:()=>q("uploads"),children:"View all uploads"})]}),(0,r.jsx)("h3",{children:"Recently Viewed"}),(0,r.jsxs)("div",{className:"profile-section",children:[J(N.slice(0,3)),N.length>3&&(0,r.jsx)("button",{className:"view-more-btn",onClick:()=>q("history"),children:"View full history"})]})]})]}):(0,r.jsx)("p",{className:"empty-state",children:"User profile not available"});var e})(),"uploads"===v&&(0,r.jsxs)("div",{className:"uploads-container",children:[(0,r.jsx)("h3",{children:"Media Gallery"}),(0,r.jsx)(u,{userUploads:w,userId:t,isOwnProfile:V,onRefresh:()=>{i.A.fetchUserUploads(t).then(j)}})]}),"history"===v&&(0,r.jsxs)("div",{className:"history-container",children:[(0,r.jsx)("h3",{children:"View History"}),J()]})]})})}),P&&(0,r.jsx)(o.default,{userProfile:b,onClose:()=>T(!1),onSave:G}),L&&(0,r.jsx)(l,{userProfile:b,onClose:()=>M(!1),onSave:G}),I&&(0,r.jsx)(c,{userProfile:b,onClose:()=>O(!1)}),_&&(0,r.jsx)(m.A,{contact:X,allContacts:R,onSave:e=>{if(X)F(t=>t.map(t=>t.id===X.id?(0,s.A)((0,s.A)({},t),e):t));else{const t=(0,s.A)((0,s.A)({},e),{},{id:Date.now().toString(),createdAt:(new Date).toISOString()});F(e=>[...e,t])}D(!1),U(null)},onClose:()=>{D(!1),U(null)}}),z&&(0,r.jsx)(f,{isOpen:z,currentUser:{id:t,username:n},onClose:()=>B(!1)})]})},v=e=>{let{userId:t,username:n,onClose:s}=e;const[i,o]=(0,a.useState)(!1),[l,c]=(0,a.useState)(!1),d=(0,a.useCallback)(()=>{c(!0),setTimeout(()=>{s()},300)},[s]);(0,a.useEffect)(()=>{o(!0)},[]),(0,a.useEffect)(()=>{const e=e=>{"Escape"===e.key&&d()};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[d]),(0,a.useEffect)(()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow="unset"}),[]);return(0,r.jsx)("div",{className:"user-profile-modal-backdrop ".concat(i?"visible":""," ").concat(l?"closing":""),onClick:e=>{e.target.className.includes("user-profile-modal-backdrop")&&d()},children:(0,r.jsx)("div",{className:"modal-glass-effect",children:(0,r.jsx)(g,{userId:t,username:n,onClose:d,isVisible:i,isClosing:l})})})}},532:(e,t,n)=>{n.d(t,{As:()=>c,OJ:()=>l});var a=n(555),s=n(950),i=n(61),o=n(414);const r=(0,s.createContext)(),l=e=>{let{children:t}=e;const[n,l]=(0,s.useState)(null),[c,d]=(0,s.useState)(null),[u,h]=(0,s.useState)(!0),[m,p]=(0,s.useState)(!1);(0,s.useEffect)(()=>{(async()=>{const e=localStorage.getItem("authToken"),t=sessionStorage.getItem("authToken"),n=localStorage.getItem("user"),a=sessionStorage.getItem("user");let s=null,i=null,o=!1;if(e&&n?(s=e,i=n,o=!0,console.log("Found remembered session in localStorage")):t&&a&&(s=t,i=a,o=!1,console.log("Found temporary session in sessionStorage")),s&&i)try{const e=JSON.parse(i);d(s),p(o);try{const t=new AbortController,n=setTimeout(()=>t.abort(),3e3),a=await fetch("http://localhost:5001/api/users/profile",{headers:{Authorization:"Bearer ".concat(s),"Content-Type":"application/json"},signal:t.signal});if(clearTimeout(n),!a.ok)throw new Error("Invalid token");{const t=await a.json();if(t.success&&t.user){const e=t.user;l(e);(o?localStorage:sessionStorage).setItem("user",JSON.stringify(e)),console.log("Restored session with fresh profile data:",{remembered:o,user:e.username,theme:e.theme,language:e.language})}else l(e),console.log("Used stored session data (profile fetch failed):",{remembered:o,user:e.username})}}catch(r){"AbortError"===r.name||r.message.includes("Failed to fetch")||console.warn("Could not fetch fresh profile, using stored data:",r.message),l(e),console.log("Used stored session data (offline mode):",{remembered:o,user:e.username})}}catch(c){console.error("Error parsing stored user data:",c),localStorage.removeItem("user"),localStorage.removeItem("authToken"),sessionStorage.removeItem("user"),sessionStorage.removeItem("authToken")}h(!1)})()},[]);return(0,o.jsx)(r.Provider,{value:{isAuthenticated:!!c,user:n,token:c,loading:u,rememberMe:m,login:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];l(e),d(t),p(n),localStorage.removeItem("user"),localStorage.removeItem("authToken"),sessionStorage.removeItem("user"),sessionStorage.removeItem("authToken");const a=n?localStorage:sessionStorage;a.setItem("user",JSON.stringify(e)),a.setItem("authToken",t),console.log("User session saved to ".concat(n?"localStorage (remembered)":"sessionStorage (temporary)")),(0,i.Mx)(i.gI.LOGIN,{userId:e.id||"anonymous",method:"manual",remembered:n})},logout:()=>{n&&(0,i.Mx)(i.gI.LOGOUT,{userId:n.id||"anonymous"}),l(null),d(null),p(!1),localStorage.removeItem("authToken"),localStorage.removeItem("user"),sessionStorage.removeItem("authToken"),sessionStorage.removeItem("user"),console.log("User session cleared from all storage")},refreshUser:async()=>{if(!c)return console.warn("No token available for user refresh"),!1;try{const e=await fetch("http://localhost:5001/api/users/profile",{headers:{Authorization:"Bearer ".concat(c),"Content-Type":"application/json"}});if(e.ok){const t=await e.json();if(t.success&&t.user){const e=t.user;l(e);return(m?localStorage:sessionStorage).setItem("user",JSON.stringify(e)),console.log("User data refreshed successfully"),!0}}return!1}catch(e){return console.error("Error refreshing user data:",e),!1}},updateUser:e=>{const t=(0,a.A)((0,a.A)({},n),e);l(t);(m?localStorage:sessionStorage).setItem("user",JSON.stringify(t)),console.log("User data updated in context")}},children:t})},c=()=>{const e=(0,s.useContext)(r);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e}},555:(e,t,n)=>{function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function s(e){var t=function(e,t){if("object"!=a(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var s=n.call(e,t||"default");if("object"!=a(s))return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==a(t)?t:t+""}function i(e,t,n){return(t=s(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach(function(t){i(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}n.d(t,{A:()=>r})},579:(e,t,n)=>{n.r(t),n.d(t,{default:()=>m});var a=n(555),s=n(910),i=n(514);const o=new class{constructor(){this.MESSAGES_KEY="quibish_messages",this.USER_DATA_KEY="quibish_user_data",this.UPLOADS_KEY="quibish_uploads",this.SETTINGS_KEY="quibish_settings"}isAvailable(){try{const e="__localStorage_test__";return localStorage.setItem(e,e),localStorage.removeItem(e),!0}catch(e){return!1}}saveMessages(e){try{return!!this.isAvailable()&&(localStorage.setItem(this.MESSAGES_KEY,JSON.stringify(e)),console.log("\ud83d\udcbe Messages saved to localStorage"),!0)}catch(t){return console.error("Error saving messages to localStorage:",t),!1}}loadMessages(){try{if(!this.isAvailable())return[];const e=localStorage.getItem(this.MESSAGES_KEY);if(e){const t=JSON.parse(e);return console.log("\ud83d\udcc1 Loaded ".concat(t.length," messages from localStorage")),t}return[]}catch(e){return console.error("Error loading messages from localStorage:",e),[]}}addMessage(e){try{const t=this.loadMessages(),n=(0,a.A)((0,a.A)({},e),{},{id:e.id||Date.now().toString(),timestamp:e.timestamp||(new Date).toISOString(),localId:Date.now()+Math.random()});return t.push(n),this.saveMessages(t),n}catch(t){return console.error("Error adding message to localStorage:",t),null}}saveUploadedFiles(e){try{return!!this.isAvailable()&&(localStorage.setItem(this.UPLOADS_KEY,JSON.stringify(e)),console.log("\ud83d\udcbe Uploaded files saved to localStorage"),!0)}catch(t){return console.error("Error saving uploads to localStorage:",t),!1}}loadUploadedFiles(){try{if(!this.isAvailable())return[];const e=localStorage.getItem(this.UPLOADS_KEY);return e?JSON.parse(e):[]}catch(e){return console.error("Error loading uploads from localStorage:",e),[]}}saveUserData(e){try{return!!this.isAvailable()&&(localStorage.setItem(this.USER_DATA_KEY,JSON.stringify(e)),!0)}catch(t){return console.error("Error saving user data to localStorage:",t),!1}}loadUserData(){try{if(!this.isAvailable())return null;const e=localStorage.getItem(this.USER_DATA_KEY);return e?JSON.parse(e):null}catch(e){return console.error("Error loading user data from localStorage:",e),null}}clearAllData(){try{return!!this.isAvailable()&&(localStorage.removeItem(this.MESSAGES_KEY),localStorage.removeItem(this.USER_DATA_KEY),localStorage.removeItem(this.UPLOADS_KEY),localStorage.removeItem(this.SETTINGS_KEY),console.log("\ud83d\uddd1\ufe0f All localStorage data cleared"),!0)}catch(e){return console.error("Error clearing localStorage:",e),!1}}getStorageInfo(){try{if(!this.isAvailable())return null;const e=this.loadMessages(),t=this.loadUploadedFiles(),n=this.loadUserData();return{messagesCount:e.length,uploadsCount:t.length,hasUserData:!!n,totalSize:this.calculateStorageSize()}}catch(e){return console.error("Error getting storage info:",e),null}}calculateStorageSize(){try{let e=0;for(let t in localStorage)localStorage.hasOwnProperty(t)&&t.startsWith("quibish_")&&(e+=localStorage[t].length);return e}catch(e){return 0}}},r="http://localhost:5001/api",l={username:"admin",password:"admin"},c=()=>!!(localStorage.getItem("token")||localStorage.getItem("authToken")),d={isAuthenticated:c,getAuthToken:()=>localStorage.getItem("token")||localStorage.getItem("authToken"),ensureAuthenticated:async()=>{if(c())return console.log("\u2705 User already authenticated"),!0;console.log("\ud83d\udd10 No auth token found, attempting auto-login...");try{const e=await fetch("".concat(r,"/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)});if(!e.ok)return console.error("\u274c Auto-login failed:",e.status,e.statusText),!1;const t=await e.json();return t.token?(localStorage.setItem("token",t.token),localStorage.setItem("authToken",t.token),console.log("\u2705 Auto-login successful"),!0):(console.error("\u274c No token in login response:",t),!1)}catch(e){return console.error("\u274c Auto-login error:",e),!1}},logout:()=>{localStorage.removeItem("token"),localStorage.removeItem("authToken"),sessionStorage.removeItem("token"),sessionStorage.removeItem("authToken"),console.log("\ud83d\udc4b User logged out")}},u=s.A.create({baseURL:"http://localhost:5001/api",timeout:1e4,headers:{"Content-Type":"application/json"}});u.interceptors.request.use(e=>{const t=localStorage.getItem("token")||localStorage.getItem("authToken");return t&&(e.headers.Authorization="Bearer ".concat(t)),console.log("\ud83d\udd11 API request with auth:",e.url,t?"Token present":"No token"),e},e=>(console.error("\u274c Request interceptor error:",e),Promise.reject(e))),u.interceptors.response.use(e=>(console.log("\u2705 API response success:",e.config.url,e.status),e),e=>{var t,n;return console.error("\u274c API response error:",null===(t=e.config)||void 0===t?void 0:t.url,null===(n=e.response)||void 0===n?void 0:n.status,e.message),Promise.reject(e)});const h=new class{constructor(){this.messageListeners=[],this.typingListeners=[],this.connectionStateListeners=[],this._typingCallbacks=[],this._isConnected=i.A.isConnected,this.setupWebSocketHandlers()}setupWebSocketHandlers(){i.A.addEventListener("message",this.handleIncomingMessage.bind(this)),i.A.addEventListener("typing",this.handleTypingUpdate.bind(this)),i.A.addEventListener("status",this.handleStatusUpdate.bind(this)),i.A.addConnectionListener(this.handleConnectionStateChange.bind(this))}handleIncomingMessage(e){o.addMessage(e),this.messageListeners.forEach(t=>{try{t(e)}catch(n){console.error("Error in message listener:",n)}})}handleTypingUpdate(e){this._typingCallbacks.forEach(t=>{try{t(e.username,e.isTyping)}catch(n){console.error("Error in typing callback:",n)}}),this.typingListeners.forEach(t=>{try{t(e)}catch(n){console.error("Error in typing listener:",n)}})}handleStatusUpdate(e){}handleConnectionStateChange(e,t){this._isConnected=e,this.connectionStateListeners.forEach(n=>{try{n(e,t)}catch(a){console.error("Error in connection state listener:",a)}})}async getMessages(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{if(!await d.ensureAuthenticated())return console.warn("\u26a0\ufe0f Authentication failed, using cached messages only"),this.loadMessagesFromStorage(e.conversationId)||[];const t={};e.since&&(t.since=e.since),e.limit&&(t.limit=e.limit),e.conversationId&&(t.conversationId=e.conversationId);const n=await u.get("/messages",{params:t}),a=n.data.messages||n.data||[];return this.cacheMessages(a,e.conversationId),a}catch(t){console.error("Error fetching messages:",t);try{const t=this.loadMessagesFromStorage(e.conversationId);if(Array.isArray(t)&&t.length>0)return console.log("Loaded messages from cache"),t}catch(n){console.error("Error loading messages from storage:",n)}const a=localStorage.getItem("cachedMessages");return a?JSON.parse(a):[]}}cacheMessages(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{const n=t?"messages_".concat(t):"cachedMessages";localStorage.setItem(n,JSON.stringify(e))}catch(n){console.error("Error caching messages:",n)}}loadMessagesFromStorage(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;try{const t=e?"messages_".concat(e):"cachedMessages",n=localStorage.getItem(t);if(n)return JSON.parse(n);if(e){const t=localStorage.getItem("cachedMessages");if(t){return JSON.parse(t).filter(t=>t.conversationId===e)}}return[]}catch(t){return console.error("Error loading messages from storage:",t),[]}}async sendMessage(e,t){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;const s={text:e,sender:t,conversationId:arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,type:"text",timestamp:(new Date).toISOString(),replyTo:n};try{o.addMessage((0,a.A)((0,a.A)({},s),{},{senderId:t,senderName:t,id:Date.now().toString(),local:!0}));if(!i.A.send("newMessage",s)){const e=await u.post("/messages",s);return e.data.message&&o.addMessage((0,a.A)((0,a.A)({},e.data.message),{},{local:!1})),e.data}return(0,a.A)((0,a.A)({},s),{},{id:Date.now(),status:"sent"})}catch(r){console.error("Error sending message:",r);const e=(0,a.A)((0,a.A)({},s),{},{id:Date.now(),status:"pending"});return this.storePendingMessage(e),e}}storePendingMessage(e){try{const t=localStorage.getItem("pendingMessages"),n=t?JSON.parse(t):[];n.push(e),localStorage.setItem("pendingMessages",JSON.stringify(n)),console.log("Stored pending message:",e.id)}catch(t){console.error("Error storing pending message:",t)}}async getStatusUpdates(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{const t={};e.since&&(t.since=e.since);return(await u.get("/status-updates",{params:t})).data}catch(t){console.error("Error fetching status updates:",t);const e=localStorage.getItem("statusUpdates");return e?JSON.parse(e):[]}}async markAsRead(e,t){try{return(await u.post("/messages/".concat(e,"/read"),{username:t})).data}catch(n){throw console.error("Error marking message as read:",n),n}}async sendVoiceMessage(e,t){try{const n=new FormData;n.append("audio",e),n.append("sender",t);return(await u.post("/messages/voice",n,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(n){throw console.error("Error sending voice message:",n),n}}async uploadFile(e,t){try{const n=new FormData;n.append("file",e),n.append("sender",t);return(await u.post("/messages/file",n,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(n){throw console.error("Error uploading file:",n),n}}sendTypingStatus(e,t){i.A.send("typing",{username:e,isTyping:t})}subscribeToTyping(e){this._typingCallbacks.includes(e)||this._typingCallbacks.push(e)}unsubscribeFromTyping(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this._typingCallbacks=e?this._typingCallbacks.filter(t=>t!==e):[]}addMessageListener(e){return this.messageListeners.push(e),()=>this.removeMessageListener(e)}removeMessageListener(e){this.messageListeners=this.messageListeners.filter(t=>t!==e)}addConnectionStateListener(e){return this.connectionStateListeners.push(e),()=>this.removeConnectionStateListener(e)}removeConnectionStateListener(e){this.connectionStateListeners=this.connectionStateListeners.filter(t=>t!==e)}isConnected(){return this._isConnected}getConnectionQuality(){return i.A.getConnectionQuality()}getConnectionMetrics(){return i.A.getConnectionMetrics()}async reconnect(){try{return await i.A.reconnect()}catch(e){return console.error("Reconnection failed:",e),!1}}getStorageInfo(){return o.getStorageInfo()}clearStoredMessages(){return o.clearAllData()}};console.log("\u26a0\ufe0f WebSocket connection temporarily disabled - using REST API only");const m=h},589:(e,t,n)=>{n.d(t,{$n:()=>l,authService:()=>d,conversationService:()=>m,userService:()=>h});var a=n(555),s=n(910),i=n(514);const o={_isConnected:navigator.onLine&&i.A.isConnected,_listeners:[],get isConnected(){return navigator.onLine&&i.A.isConnected},addConnectionListener(e){this._listeners.push(e);const t=i.A.addConnectionListener((t,n)=>{this._isConnected=navigator.onLine&&t,e(this._isConnected,n)}),n=()=>{i.A.isConnected&&(this._isConnected=!0,e(!0,{source:"browser",event:"online"}))},a=()=>{this._isConnected=!1,e(!1,{source:"browser",event:"offline"})};return window.addEventListener("online",n),window.addEventListener("offline",a),()=>{this._listeners=this._listeners.filter(t=>t!==e),t(),window.removeEventListener("online",n),window.removeEventListener("offline",a)}},notifyConnectionChange(e){this._isConnected!==e&&(this._isConnected=e,this._listeners.forEach(t=>{try{t(e,{source:"api"})}catch(n){console.error("Error in connection listener:",n)}}),console.log("[API] Connection status changed: ".concat(e?"Connected":"Disconnected")))}},r=s.A.create({baseURL:"https://api.quibish.com/api",timeout:parseInt("5000")||5e3,headers:{"Content-Type":"application/json"}});r.interceptors.request.use(e=>{const t=localStorage.getItem("authToken")||sessionStorage.getItem("authToken");return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e));s.A.create({baseURL:"https://api.translation-service.example",timeout:5e3,headers:{"Content-Type":"application/json",Authorization:"Bearer translation_api_key"}});const l=async()=>{try{const e=await r.get("/ping",{timeout:3e3});return o.notifyConnectionChange(!0),i.A.isConnected||i.A.connect(),200===e.status}catch(e){return console.warn("API server not available, enabling demo mode:",e.message),o.notifyConnectionChange(!1),!1}};o.addConnectionListener(e=>{e&&(async()=>{try{const e=localStorage.getItem("pendingMessages");if(!e)return;const t=JSON.parse(e);if(0===t.length)return;console.log("Syncing ".concat(t.length," pending messages..."));const n=t.map(async e=>{try{return await r.post("/messages",{text:e.text,sender:e.sender,type:e.type,replyTo:e.replyTo,timestamp:e.timestamp,pendingId:e.id}),{success:!0,id:e.id}}catch(t){return console.error("Failed to sync message ".concat(e.id,":"),t),{success:!1,id:e.id}}}),a=(await Promise.allSettled(n)).filter(e=>"fulfilled"===e.status&&e.value.success).map(e=>e.value.id);if(a.length>0){const e=t.filter(e=>!a.includes(e.id));localStorage.setItem("pendingMessages",JSON.stringify(e)),console.log("Synced ".concat(a.length," messages, ").concat(e.length," remaining"))}}catch(e){console.error("Error syncing pending messages:",e)}})()}),i.A.addConnectionListener(e=>{const t=o.isConnected,n=navigator.onLine&&e;t!==n&&o.notifyConnectionChange(n)}),console.log("\u26a0\ufe0f Connection checker temporarily disabled to fix rate limiting"),r.interceptors.request.use(e=>{const t=localStorage.getItem("authToken")||sessionStorage.getItem("authToken");return t&&(e.headers.Authorization="Bearer ".concat(t)),e}),r.interceptors.response.use(e=>(o.notifyConnectionChange(!0),e),async e=>{var t;if(e.response&&401===e.response.status)return localStorage.removeItem("authToken"),sessionStorage.removeItem("authToken"),localStorage.removeItem("user"),window.location.href="/",Promise.reject(e);if(null!==(t=e.config)&&void 0!==t&&t.skipRetry)return Promise.reject(e);if("ECONNABORTED"===e.code||e.message.includes("timeout")||e.message.includes("Network Error")){if(o.notifyConnectionChange(!1),o.currentRetries>=o.maxRetries)return console.error("Max retries (".concat(o.maxRetries,") reached for request:"),e.config.url),o.currentRetries=0,Promise.reject(e);o.currentRetries++;const t=o.getRetryDelay();return console.log("Retry ".concat(o.currentRetries,"/").concat(o.maxRetries," for ").concat(e.config.url," after ").concat(t,"ms")),await new Promise(e=>setTimeout(e,t)),r(e.config)}return Promise.reject(e)});const c=(e,t)=>(console.log("Performing offline authentication for:",e),{user:{id:Date.now(),username:e,email:e.includes("@")?e:e+"@offline.com",name:e.charAt(0).toUpperCase()+e.slice(1),isOnline:!1,status:"offline",lastActive:(new Date).toISOString()},token:"offline-token-"+Date.now(),success:!0}),d={getUserById:async e=>{try{return(await r.get("/users/".concat(e))).data.user}catch(t){throw console.error("Error fetching user data:",t),t}},getAllUsers:async()=>{try{return(await r.get("/users")).data.users}catch(e){throw console.error("Error fetching users:",e),e}},updateUser:async(e,t)=>{try{const n=t instanceof FormData,s={headers:{"Content-Type":n?"multipart/form-data":"application/json"}};if(!await l()){console.log("API offline, using offline mode for updateUser");const e=JSON.parse(localStorage.getItem("user")||sessionStorage.getItem("user"));if(!e)throw new Error("User not found");let s=t;if(n){s={};for(const[e,n]of t.entries())s[e]=n}const i=(0,a.A)((0,a.A)({},e),s);return localStorage.setItem("user",JSON.stringify(i)),i}return(await r.put("/users/".concat(e),t,s)).data.user}catch(n){throw console.error("Error updating user profile:",n),n}},changePassword:async(e,t,n)=>{try{if(!await l())throw console.log("API offline, password changes not available in offline mode"),new Error("Password changes are not available when offline");return(await r.post("/users/".concat(e,"/change-password"),{currentPassword:t,newPassword:n})).data}catch(a){throw console.error("Error changing password:",a),a}},updatePreferences:async(e,t)=>{try{if(!await l()){console.log("API offline, using demo mode for updatePreferences"),console.log("API offline, updating preferences locally");const e=JSON.parse(localStorage.getItem("user")||sessionStorage.getItem("user"));if(!e)throw new Error("User not found");const n=(0,a.A)((0,a.A)({},e),{},{preferences:(0,a.A)((0,a.A)({},e.preferences),t)});return localStorage.setItem("user",JSON.stringify(n)),n}return(await r.put("/users/".concat(e,"/preferences"),t)).data}catch(n){throw console.error("Error updating preferences:",n),n}},updateProfile:async e=>{try{const t=localStorage.getItem("authToken")||sessionStorage.getItem("authToken");if(console.log("updateProfile Debug - Token check:",{token:t?"present":"missing",userData:e}),!t)throw new Error("No authentication token found. Please log in again.");const n=await r.put("/users/profile",e,{headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"}});return console.log("updateProfile Debug - API response:",n.data),n.data}catch(s){var t,n;if(console.error("updateProfile Debug - Error details:",{error:s,message:s.message,response:null===(t=s.response)||void 0===t?void 0:t.data,status:null===(n=s.response)||void 0===n?void 0:n.status}),"ECONNREFUSED"===s.code||"ERR_NETWORK"===s.code||!navigator.onLine){console.log("Network error detected - falling back to offline mode");const t=JSON.parse(localStorage.getItem("user")||sessionStorage.getItem("user")||"{}"),n=(0,a.A)((0,a.A)({},t),e);return localStorage.setItem("user",JSON.stringify(n)),{success:!0,user:n}}throw s}},uploadAvatar:async e=>{try{const t=new FormData;t.append("avatar",e);const n=localStorage.getItem("authToken");return(await r.post("/users/avatar",t,{headers:{Authorization:"Bearer ".concat(n),"Content-Type":"multipart/form-data"}})).data}catch(t){throw console.error("Error uploading avatar:",t),t}},removeAvatar:async()=>{try{const e=localStorage.getItem("authToken");return(await r.delete("/users/avatar",{headers:{Authorization:"Bearer ".concat(e)}})).data}catch(e){throw console.error("Error removing avatar:",e),e}},updateCurrentUserPreferences:async e=>{try{const t=localStorage.getItem("authToken");return(await r.put("/users/preferences",e,{headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"}})).data}catch(t){throw console.error("Error updating preferences:",t),t}},changeCurrentUserPassword:async(e,t)=>{try{const n=localStorage.getItem("authToken");return(await r.post("/users/change-password",{currentPassword:e,newPassword:t},{headers:{Authorization:"Bearer ".concat(n),"Content-Type":"application/json"}})).data}catch(n){throw console.error("Error changing password:",n),n}},login:async(e,t)=>{try{console.log("API Client - Login attempt:",{username:e});if(!await l())return console.log("API offline - using demo authentication"),c(e);const n=await r.post("/auth/login",{username:e,password:t});console.log("API Client - Login response:",n.data);const a=n.data;if(a.hasOwnProperty("success")&&!a.success){const e=new Error(a.error||a.message||"Login failed");throw e.response={data:a},e}return{user:a.user||{username:e,email:e.includes("@")?e:null},token:a.token||"demo-token",success:!0}}catch(n){if(console.error("Auth service login error:",n),"ECONNREFUSED"===n.code||"ERR_NETWORK"===n.code||!navigator.onLine)return console.log("Network error detected - falling back to demo authentication"),c(e);throw n}},register:async(e,t,n)=>{try{console.log("API Client - Registration attempt:",{username:e,email:t});if(!await l())return console.log("API offline - using demo registration"),{user:{id:Date.now(),username:e,email:t,name:e.charAt(0).toUpperCase()+e.slice(1)},token:"offline-registration-token-"+Date.now(),success:!0};const a=await r.post("/auth/register",{username:e,email:t,password:n});console.log("API Client - Registration response:",a.data);const s=a.data;if(s.hasOwnProperty("success")&&!s.success){const e=new Error(s.error||s.message||"Registration failed");throw e.response={data:s},e}return{user:s.user||{username:e,email:t},token:s.token||"demo-token-"+Date.now().toString().slice(-6),success:!0}}catch(a){if(console.error("Auth service registration error:",a),"ECONNREFUSED"===a.code||"ERR_NETWORK"===a.code||!navigator.onLine)return console.log("Network error detected - allowing offline registration"),{user:{id:Date.now(),username:e,email:t,name:e.charAt(0).toUpperCase()+e.slice(1)},token:"offline-fallback-token-"+Date.now(),success:!0};throw a}},saveUserSession:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];localStorage.removeItem("user"),localStorage.removeItem("authToken"),sessionStorage.removeItem("user"),sessionStorage.removeItem("authToken");const s=n?localStorage:sessionStorage;try{const i=(0,a.A)((0,a.A)({},e),{},{isOnline:!0,status:"online",lastActive:(new Date).toISOString()});return s.setItem("user",JSON.stringify(i)),s.setItem("authToken",t),console.log("User session saved in ".concat(n?"localStorage":"sessionStorage"," with online status")),!0}catch(i){console.error("Error saving user session:",i);try{const s=n?sessionStorage:localStorage,i=(0,a.A)((0,a.A)({},e),{},{isOnline:!0,status:"online",lastActive:(new Date).toISOString()});return s.setItem("user",JSON.stringify(i)),s.setItem("authToken",t),console.log("User session saved in fallback storage"),!0}catch(o){return console.error("Error saving user session in fallback storage:",o),!1}}},logout:()=>{localStorage.removeItem("user"),localStorage.removeItem("authToken"),sessionStorage.removeItem("user"),sessionStorage.removeItem("authToken"),window.location.href="/"},getUser:()=>{const e=localStorage.getItem("user"),t=sessionStorage.getItem("user"),n=e||t;return n?JSON.parse(n):null},getToken:()=>localStorage.getItem("authToken")||sessionStorage.getItem("authToken")},u={messages:[],statusUpdates:[],lastUpdated:null,saveMessages(e){this.messages=e,this.lastUpdated=new Date;try{localStorage.setItem("cachedMessages",JSON.stringify(e))}catch(t){console.warn("Failed to save messages to localStorage:",t)}},saveStatusUpdates(e){this.statusUpdates=e;try{localStorage.setItem("statusUpdates",JSON.stringify(e))}catch(t){console.warn("Failed to save status updates to localStorage:",t)}},getCachedMessages(){if(this.messages.length>0)return this.messages;try{const e=localStorage.getItem("cachedMessages");if(e){const t=JSON.parse(e);return this.messages=t,t}}catch(e){console.warn("Failed to load cached messages from localStorage:",e)}return[]},getCachedStatusUpdates(){if(this.statusUpdates.length>0)return this.statusUpdates;try{const e=localStorage.getItem("statusUpdates");if(e){const t=JSON.parse(e);return this.statusUpdates=t,t}}catch(e){console.warn("Failed to load cached status updates from localStorage:",e)}return[]}},h={async searchUsers(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;try{if(!e||e.trim().length<2)return{success:!1,error:"Search query must be at least 2 characters long"};const n=await s.A.get("http://localhost:5001/api/users/search",{params:{q:e.trim(),limit:t},headers:{Authorization:"Bearer ".concat(d.getToken()),"Content-Type":"application/json"}});return n.data.success?{success:!0,users:n.data.users,count:n.data.count}:{success:!1,error:n.data.error||"Search failed"}}catch(i){var n,a;return console.error("Error searching users:",i),{success:!1,error:(null===(n=i.response)||void 0===n||null===(a=n.data)||void 0===a?void 0:a.error)||"Failed to search users"}}},async getAllUsers(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;try{const t=await s.A.get("http://localhost:5001/api/users",{params:{limit:e},headers:{Authorization:"Bearer ".concat(d.getToken()),"Content-Type":"application/json"}});return t.data.success?{success:!0,users:t.data.users}:{success:!1,error:t.data.error||"Failed to get users"}}catch(a){var t,n;return console.error("Error getting users:",a),{success:!1,error:(null===(t=a.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.error)||"Failed to get users"}}}},m={async createConversation(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"direct",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;try{const a={type:t,participants:e.map(e=>e.id||e),name:"group"===t?n:null},i=await s.A.post("http://localhost:5001/api/conversations",a,{headers:{Authorization:"Bearer ".concat(d.getToken()),"Content-Type":"application/json"}});return i.data.success?{success:!0,conversation:i.data.conversation}:{success:!1,error:i.data.error||"Failed to create conversation"}}catch(o){var a,i;return console.error("Error creating conversation:",o),{success:!1,error:(null===(a=o.response)||void 0===a||null===(i=a.data)||void 0===i?void 0:i.error)||"Failed to create conversation"}}},async getConversations(){try{const e=await s.A.get("http://localhost:5001/api/conversations",{headers:{Authorization:"Bearer ".concat(d.getToken()),"Content-Type":"application/json"}});return e.data.success?{success:!0,conversations:e.data.conversations}:{success:!1,error:e.data.error||"Failed to get conversations"}}catch(n){var e,t;return console.error("Error getting conversations:",n),{success:!1,error:(null===(e=n.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.error)||"Failed to get conversations"}}}};Promise.resolve().then(n.bind(n,579)).then(e=>{Object.assign(p,e.default)});const p={_typingCallbacks:[],addConnectionStateListener:e=>(Promise.resolve().then(n.bind(n,579)).then(t=>t.default.addConnectionStateListener(e)),o.addConnectionListener(e)),isConnected:()=>{try{const e=n(579);if(e&&e.default)return e.default.isConnected()}catch(e){console.debug("Using fallback connection check")}return o.isConnected},getConnectionQuality:()=>{try{const e=n(579);if(e&&e.default)return e.default.getConnectionQuality()}catch(e){return o.isConnected?"good":"offline"}},getConnectionMetrics:()=>{try{const e=n(579);if(e&&e.default)return e.default.getConnectionMetrics()}catch(e){return{latency:0,stability:o.isConnected?100:0,quality:o.isConnected?"good":"offline",connected:o.isConnected}}},reconnect:async()=>{try{const e=n(579);if(e&&e.default)return await e.default.reconnect()}catch(e){console.debug("Using fallback reconnect")}try{return await l(),o.isConnected}catch(t){return console.error("Reconnection failed:",t),!1}},getMessages:async()=>{try{const e=(await r.get("/messages")).data;return u.saveMessages(e),e}catch(e){return console.warn("Error fetching messages, using cached data:",e),u.getCachedMessages()}},getStatusUpdates:async()=>{try{const e=(await r.get("/status-updates")).data;return u.saveStatusUpdates(e),e}catch(e){return console.warn("Error fetching status updates, using cached data:",e),u.getCachedStatusUpdates()}},sendMessage:async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const s={id:Date.now()+Math.random().toString(36).substring(2,9),text:e,sender:t,type:"text",replyTo:n,timestamp:(new Date).toISOString(),status:"sending"};try{const i=await r.post("/messages",{text:e,sender:t,type:"text",replyTo:n,timestamp:s.timestamp}),o=[...u.getCachedMessages(),i.data];return u.saveMessages(o),(0,a.A)((0,a.A)({},i.data),{},{status:"sent"})}catch(i){console.warn("Failed to send message, saving to pending queue:",i);try{const e=JSON.parse(localStorage.getItem("pendingMessages")||"[]");e.push(s),localStorage.setItem("pendingMessages",JSON.stringify(e))}catch(o){console.error("Failed to save pending message:",o)}const e=[...u.getCachedMessages(),s];return u.saveMessages(e),(0,a.A)((0,a.A)({},s),{},{status:"pending"})}},sendVoiceMessage:async(e,t)=>{const n=new FormData;n.append("audio",e),n.append("sender",t),n.append("type","voice");return(await s.A.post("http://localhost:5001/api/voice-messages",n,{headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(localStorage.getItem("token"))}})).data},uploadFile:async(e,t)=>{const n=new FormData;n.append("file",e),n.append("sender",t),n.append("type","file");return(await s.A.post("http://localhost:5001/api/files",n,{headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(localStorage.getItem("token"))}})).data},markAsRead:async(e,t)=>{try{return(await r.post("/messages/".concat(e,"/read"),{username:t})).data}catch(n){console.error("Error marking message as read:",n);const s=JSON.parse(localStorage.getItem("messages")||"[]").map(n=>n.id===e?(0,a.A)((0,a.A)({},n),{},{readBy:[...n.readBy||[],t]}):n);return localStorage.setItem("messages",JSON.stringify(s)),s.find(t=>t.id===e)}},sendTypingStatus:(e,t)=>{Promise.resolve().then(n.bind(n,579)).then(n=>{n.default.sendTypingStatus(e,t)})},subscribeToTyping:e=>{Promise.resolve().then(n.bind(n,579)).then(t=>{t.default.subscribeToTyping(e)})},unsubscribeFromTyping:()=>{p._typingCallbacks=[],console.log("Unsubscribed from typing indicators")}}},608:(e,t,n)=>{n.d(t,{A:()=>g});var a=n(555);const s={PROFILE:"userProfile",PHOTOS:"userPhotos",VIDEOS:"userVideos",GIFS:"userGifs",AUDIO:"userAudio",FILES:"userFiles",FAVORITES:"userFavorites",MEDIA_CACHE:"mediaCache"},i="http://localhost:5001/api",o=3e4,r=()=>new Promise((e,t)=>{const n=indexedDB.open("quibishUserData",2);n.onerror=e=>{console.error("Error opening IndexedDB:",e.target.error),t(e.target.error)},n.onsuccess=t=>{const n=t.target.result;e(n)},n.onupgradeneeded=e=>{const t=e.target.result;t.objectStoreNames.contains(s.PROFILE)||t.createObjectStore(s.PROFILE,{keyPath:"username"}),t.objectStoreNames.contains(s.PHOTOS)||t.createObjectStore(s.PHOTOS,{keyPath:"id"}),t.objectStoreNames.contains(s.VIDEOS)||t.createObjectStore(s.VIDEOS,{keyPath:"id"}),t.objectStoreNames.contains(s.GIFS)||t.createObjectStore(s.GIFS,{keyPath:"id"}),t.objectStoreNames.contains(s.AUDIO)||t.createObjectStore(s.AUDIO,{keyPath:"id"}),t.objectStoreNames.contains(s.FILES)||t.createObjectStore(s.FILES,{keyPath:"id"}),t.objectStoreNames.contains(s.FAVORITES)||t.createObjectStore(s.FAVORITES,{keyPath:"id"}),t.objectStoreNames.contains(s.MEDIA_CACHE)||t.createObjectStore(s.MEDIA_CACHE,{keyPath:"id"})}}),l=()=>{const e=localStorage.getItem("authToken")||localStorage.getItem("token");return console.log("\ud83d\udd11 Auth token for API call:",e?"Present":"Missing"),{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}},c=()=>{const e=localStorage.getItem("authToken")||localStorage.getItem("token");return{Authorization:"Bearer ".concat(e)}},d=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n="".concat(i).concat(e),s=(0,a.A)({timeout:o},t);console.log("\ud83c\udf10 Making API call to:",n,"with options:",s);try{const t=await fetch(n,s);if(console.log("\ud83d\udce1 API response status:",t.status,"for",e),!t.ok){const e=await t.json().catch(()=>({}));throw console.error("\u274c API call failed with error data:",e),new Error(e.error||"API call failed: ".concat(t.status))}const a=await t.json();return console.log("\u2705 API call successful for",e,":",a),a}catch(r){throw console.error("\u274c API call to ".concat(e," failed:"),r),r}},u=async()=>await d("/users/profile",{method:"GET",headers:l()}),h=async e=>(console.log("\ud83c\udf10 Making API call to update profile with data:",e),await d("/users/profile",{method:"PUT",headers:l(),body:JSON.stringify(e)})),m=async e=>{try{localStorage.setItem("userProfile",JSON.stringify({username:e.username,displayName:e.displayName,avatar:e.avatarUrl,lastUpdated:(new Date).toISOString()}));const t=await r(),n=t.transaction([s.PROFILE],"readwrite").objectStore(s.PROFILE),i=(0,a.A)((0,a.A)({},e),{},{lastUpdated:(new Date).toISOString()}),o=n.put(i);return new Promise((e,t)=>{o.onsuccess=()=>e(i),o.onerror=e=>t(e.target.error)})}catch(t){throw console.error("Error saving user profile:",t),t}},p=async e=>{try{const t=localStorage.getItem("userProfile");if(t){const n=JSON.parse(t);if(n.username===e)return n}const n=(await r()).transaction([s.PROFILE],"readonly"),a=n.objectStore(s.PROFILE).get(e);return new Promise((e,t)=>{a.onsuccess=t=>{const n=t.target.result;n&&localStorage.setItem("userProfile",JSON.stringify({username:n.username,displayName:n.displayName,avatar:n.avatarUrl,lastUpdated:n.lastUpdated})),e(n||null)},a.onerror=e=>t(e.target.error)})}catch(t){throw console.error("Error getting user profile:",t),t}},f=async e=>{try{let t;switch(e.toLowerCase()){case"photo":t=s.PHOTOS;break;case"video":t=s.VIDEOS;break;case"audio":case"voice":t=s.AUDIO;break;default:t=s.FILES}const n=(await r()).transaction([t],"readonly"),a=n.objectStore(t).count();a.onsuccess=()=>{const t=a.result,n=localStorage.getItem("mediaItemCounts")||"{}",s=JSON.parse(n);s[e.toLowerCase()]=t,localStorage.setItem("mediaItemCounts",JSON.stringify(s))}}catch(t){console.error("Error updating media item count:",t)}},g={saveUserProfile:m,getUserProfile:p,saveMediaItem:async(e,t)=>{try{let n;switch(e.toLowerCase()){case"photo":n=s.PHOTOS;break;case"video":n=s.VIDEOS;break;case"audio":case"voice":n=s.AUDIO;break;default:n=s.FILES}const i=(0,a.A)((0,a.A)({},t),{},{id:t.id||"".concat(e,"_").concat(Date.now()),timestamp:t.timestamp||(new Date).toISOString(),type:e.toLowerCase()}),o=(await r()).transaction([n],"readwrite"),l=o.objectStore(n).put(i);return new Promise((t,n)=>{l.onsuccess=()=>{f(e),t(i)},l.onerror=e=>n(e.target.error)})}catch(n){throw console.error("Error saving ".concat(e,":"),n),n}},getMediaItems:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{let n;switch(e.toLowerCase()){case"photo":n=s.PHOTOS;break;case"video":n=s.VIDEOS;break;case"audio":case"voice":n=s.AUDIO;break;default:n=s.FILES}const a=(await r()).transaction([n],"readonly"),i=a.objectStore(n).getAll();return new Promise((e,n)=>{i.onsuccess=n=>{let a=n.target.result||[];if(a=t.sortBy?a.sort((e,n)=>"asc"===t.sortDirection?e[t.sortBy]>n[t.sortBy]?1:-1:e[t.sortBy]<n[t.sortBy]?1:-1):a.sort((e,t)=>new Date(t.timestamp)-new Date(e.timestamp)),t.offset||t.limit){const e=t.offset||0,n=t.limit||a.length;a=a.slice(e,e+n)}e(a)},i.onerror=e=>n(e.target.error)})}catch(n){throw console.error("Error getting ".concat(e," items:"),n),n}},deleteMediaItem:async(e,t)=>{try{let n;switch(e.toLowerCase()){case"photo":n=s.PHOTOS;break;case"video":n=s.VIDEOS;break;case"audio":case"voice":n=s.AUDIO;break;default:n=s.FILES}const a=(await r()).transaction([n],"readwrite"),i=a.objectStore(n).delete(t);return new Promise((t,n)=>{i.onsuccess=()=>{f(e),t(!0)},i.onerror=e=>n(e.target.error)})}catch(n){throw console.error("Error deleting ".concat(e," item:"),n),n}},toggleFavorite:async e=>{try{const t=await r(),n=t.transaction([s.FAVORITES],"readwrite").objectStore(s.FAVORITES),i=n.get(e.id);return new Promise((t,s)=>{i.onsuccess=async i=>{if(i.target.result){const i=n.delete(e.id);i.onsuccess=()=>{t((0,a.A)((0,a.A)({},e),{},{isFavorite:!1}))},i.onerror=e=>s(e.target.error)}else{const i=(0,a.A)((0,a.A)({},e),{},{isFavorite:!0,favoritedAt:(new Date).toISOString()}),o=n.put(i);o.onsuccess=()=>{t(i)},o.onerror=e=>s(e.target.error)}},i.onerror=e=>s(e.target.error)})}catch(t){throw console.error("Error toggling favorite:",t),t}},getFavorites:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{const t=(await r()).transaction([s.FAVORITES],"readonly"),n=t.objectStore(s.FAVORITES).getAll();return new Promise((t,a)=>{n.onsuccess=n=>{let a=n.target.result||[];if(a=e.sortBy?a.sort((t,n)=>"asc"===e.sortDirection?t[e.sortBy]>n[e.sortBy]?1:-1:t[e.sortBy]<n[e.sortBy]?1:-1):a.sort((e,t)=>new Date(t.favoritedAt)-new Date(e.favoritedAt)),e.offset||e.limit){const t=e.offset||0,n=e.limit||a.length;a=a.slice(t,t+n)}t(a)},n.onerror=e=>a(e.target.error)})}catch(t){throw console.error("Error getting favorites:",t),t}},isFavorited:async e=>{try{const t=(await r()).transaction([s.FAVORITES],"readonly"),n=t.objectStore(s.FAVORITES).get(e);return new Promise((e,t)=>{n.onsuccess=t=>{e(!!t.target.result)},n.onerror=e=>t(e.target.error)})}catch(t){throw console.error("Error checking if item is favorited:",t),t}},getStorageUsage:async()=>{try{if("storage"in navigator&&"estimate"in navigator.storage){const e=await navigator.storage.estimate();return{quota:e.quota,usage:e.usage,percentUsed:e.usage/e.quota*100,usageDetails:e.usageDetails}}{await r();const e={photos:0,videos:0,audio:0,files:0},t=localStorage.getItem("mediaItemCounts")||"{}";return{counts:JSON.parse(t),usage:e,estimatedSize:"Not available",lastUpdated:(new Date).toISOString()}}}catch(e){throw console.error("Error getting storage usage:",e),e}},clearAllUserData:async()=>{try{const e=await r(),t=Object.values(s),n=e.transaction(t,"readwrite"),a=t.map(e=>new Promise((t,a)=>{const s=n.objectStore(e).clear();s.onsuccess=()=>t(),s.onerror=e=>a(e.target.error)}));return await Promise.all(a),localStorage.removeItem("userProfile"),localStorage.removeItem("mediaItemCounts"),!0}catch(e){throw console.error("Error clearing user data:",e),e}},fetchUserProfile:async e=>{try{const n=localStorage.getItem("token")||localStorage.getItem("authToken"),s=JSON.parse(localStorage.getItem("user")||sessionStorage.getItem("user")||"{}");if(n&&(e===s.id||e===s.username))try{console.log("\ud83d\udd0d Fetching real user profile from API for current user...");const e=await u();if(e&&e.user){const t=(0,a.A)((0,a.A)({},e.user),{},{userId:e.user.id,username:e.user.username,displayName:e.user.displayName||e.user.name,bio:e.user.bio||"",avatarUrl:e.user.avatar,uploadCount:0,connectionCount:0,activityScore:0,joinDate:e.user.createdAt,isOnline:!0,status:e.user.status||"online"});return console.log("\u2705 Real user profile fetched successfully:",t),t}}catch(t){console.warn("\u26a0\ufe0f Failed to fetch real profile from API, falling back to mock data:",t)}console.log("\ud83d\udccb Using mock data for user profile..."),await new Promise(e=>setTimeout(e,1e3));const i=e===s.id||e===s.username;return{userId:e,username:i&&s.username||"user".concat(e),displayName:i&&(s.displayName||s.name)||"User ".concat(e),bio:i?s.bio||"This is the bio for ".concat(s.name||"the user","."):"This is the bio for user ".concat(e,". They are a valued member of our community."),avatarUrl:i?s.avatar:"https://randomuser.me/api/portraits/".concat(e%2===0?"men":"women","/").concat(e%10,".jpg"),uploadCount:Math.floor(50*Math.random()),connectionCount:Math.floor(100*Math.random()),activityScore:Math.floor(1e3*Math.random()),joinDate:i?s.createdAt:new Date(Date.now()-1e10*Math.random()).toISOString(),isOnline:!!i||Math.random()>.3,status:i||Math.random()>.3?"online":"offline"}}catch(n){throw console.error("Error fetching user profile for user ".concat(e,":"),n),n}},fetchUserUploads:async e=>{try{await new Promise(e=>setTimeout(e,800));const t=["image","video","document","gif"],n=10+Math.floor(10*Math.random()),a=[];for(let s=0;s<n;s++){const n=t[Math.floor(Math.random()*t.length)],i=new Date(Date.now()-5e9*Math.random()).toISOString();let o=null,r=null;switch(n){case"image":o="https://picsum.photos/seed/".concat(e,"_").concat(s,"/800/600");break;case"video":const t=["https://sample-videos.com/zip/10/mp4/SampleVideo_1280x720_1mb.mp4","https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4","https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/ElephantsDream.mp4","https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/ForBiggerBlazes.mp4","https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/SubaruOutbackOnStreetAndDirt.mp4"];o=t[s%t.length],r="https://picsum.photos/seed/".concat(e,"_").concat(s,"_thumb/400/300");break;case"gif":o="https://picsum.photos/seed/".concat(e,"_").concat(s,"/400/300.gif");break;case"document":o="https://www.w3.org/WAI/ER/tests/xhtml/testfiles/resources/pdf/dummy.pdf"}a.push({id:"upload_".concat(e,"_").concat(s),name:"".concat(n,"_file_").concat(s,".").concat("image"===n?"jpg":"video"===n?"mp4":"gif"===n?"gif":"pdf"),type:n,size:Math.floor(1e7*Math.random()),date:i,uploadedAt:i,url:o,thumbnailUrl:r,mimeType:"video"===n?"video/mp4":"image"===n?"image/jpeg":"gif"===n?"image/gif":"application/pdf",dimensions:"image"===n||"video"===n?"".concat(400+Math.floor(800*Math.random()),"x").concat(300+Math.floor(600*Math.random())):null,duration:"video"===n?Math.floor(300*Math.random())+30:null})}return a.sort((e,t)=>new Date(t.date)-new Date(e.date))}catch(t){throw console.error("Error fetching uploads for user ".concat(e,":"),t),t}},fetchUserViewHistory:async e=>{try{await new Promise(e=>setTimeout(e,600));const t=["image","video","document","gif","article","profile"],n=8+Math.floor(12*Math.random()),a=[];for(let s=0;s<n;s++){const n=t[Math.floor(Math.random()*t.length)],i=new Date(Date.now()-3e9*Math.random()).toISOString();a.push({id:"history_".concat(e,"_").concat(s),title:"profile"===n?"User Profile: user".concat(Math.floor(100*Math.random())):"".concat(n.charAt(0).toUpperCase()+n.slice(1)," ").concat(Math.floor(1e3*Math.random())),contentType:n,contentId:"content_".concat(Math.floor(1e4*Math.random())),viewedAt:i})}return a.sort((e,t)=>new Date(t.viewedAt)-new Date(e.viewedAt))}catch(t){throw console.error("Error fetching view history for user ".concat(e,":"),t),t}},fetchUserAnalytics:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"month";try{await new Promise(e=>setTimeout(e,1200));const n="week"===t?.3:"month"===t?1:"quarter"===t?3:12;return{profileViews:Math.floor((200+800*Math.random())*n),monthlyViews:Math.floor((50+200*Math.random())*n),topViewers:Array.from({length:5},(e,t)=>({id:"viewer_".concat(t),name:"Viewer ".concat(t+1),avatar:"https://randomuser.me/api/portraits/".concat(t%2===0?"men":"women","/").concat(t+5,".jpg"),viewCount:Math.floor((5+20*Math.random())*n)})).sort((e,t)=>t.viewCount-e.viewCount),uploadStats:{totalUploads:Math.floor((10+40*Math.random())*n),totalViews:Math.floor((500+2e3*Math.random())*n),totalLikes:Math.floor((100+500*Math.random())*n),mostViewedContent:{name:"summer_vacation_2024.jpg",views:Math.floor((50+200*Math.random())*n),thumbnail:"https://picsum.photos/seed/".concat(e,"_popular/300/300")}},activityStats:{messagesCount:Math.floor((100+400*Math.random())*n),reactionsGiven:Math.floor((50+200*Math.random())*n),connectionsCount:Math.floor(20+80*Math.random()),joinDate:new Date(Date.now()-31536e6*Math.random()).toISOString()}}}catch(n){throw console.error("Error fetching analytics for user ".concat(e,":"),n),n}},updateUserProfile:async(e,t)=>{console.log("\ud83d\udd04 Starting profile update for user:",e,"with data:",t);try{const s=localStorage.getItem("token")||localStorage.getItem("authToken");if(console.log("\ud83d\udd11 Token check:",s?"Found":"Not found"),s)try{console.log("\ud83c\udf10 Attempting API update...");const n=await h(t);return console.log("\u2705 API update successful:",n),await m((0,a.A)((0,a.A)({},n),{},{userId:e})),n}catch(n){console.warn("\u26a0\ufe0f API update failed, falling back to local storage:",n)}else console.log("\ud83d\udcf4 No token found, using local storage only");const i=await p(t.username||e),o=(0,a.A)((0,a.A)((0,a.A)({},i),t),{},{userId:e,lastUpdated:(new Date).toISOString()});return console.log("\ud83d\udcbe Saving to local storage:",o),await m(o),o}catch(s){throw console.error("Error updating profile for user ".concat(e,":"),s),s}},api:{getUserProfile:u,updateUserProfile:h,updateUserEmail:async e=>await d("/users/email",{method:"PUT",headers:l(),body:JSON.stringify({email:e})}),uploadAvatar:async e=>{const t=new FormData;return t.append("avatar",e),await d("/users/avatar",{method:"POST",headers:c(),body:t})},uploadMedia:async e=>{const t=new FormData;return e.forEach(e=>t.append("media",e)),await d("/upload/media",{method:"POST",headers:c(),body:t})},getUserMedia:async()=>await d("/upload/media",{method:"GET",headers:l()}),deleteMedia:async e=>await d("/upload/media/".concat(e),{method:"DELETE",headers:l()}),setupTwoFactor:async()=>{try{const e=localStorage.getItem("authToken")||sessionStorage.getItem("authToken"),t=await fetch("".concat(i,"/auth/2fa/setup"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}}),n=await t.json();if(!t.ok)throw new Error(n.error||"Failed to setup 2FA");return n}catch(e){throw console.error("Setup 2FA error:",e),e}},verifyTwoFactorSetup:async e=>{try{const t=localStorage.getItem("authToken")||sessionStorage.getItem("authToken"),n=await fetch("".concat(i,"/auth/2fa/verify-setup"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({token:e})}),a=await n.json();if(!n.ok)throw new Error(a.error||"Failed to verify 2FA setup");return a}catch(t){throw console.error("Verify 2FA setup error:",t),t}},verifyTwoFactor:async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];try{const a=await fetch("".concat(i,"/auth/2fa/verify"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:e,token:t,isBackupCode:n})}),s=await a.json();if(!a.ok)throw new Error(s.error||"Failed to verify 2FA");return s}catch(a){throw console.error("Verify 2FA error:",a),a}},completeTwoFactorLogin:async e=>{try{const t=await fetch("".concat(i,"/auth/complete-login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:e})}),n=await t.json();if(!t.ok)throw new Error(n.error||"Failed to complete login");return n}catch(t){throw console.error("Complete 2FA login error:",t),t}},disableTwoFactor:async(e,t)=>{try{const n=localStorage.getItem("authToken")||sessionStorage.getItem("authToken"),a=await fetch("".concat(i,"/auth/2fa/disable"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)},body:JSON.stringify({password:e,token:t})}),s=await a.json();if(!a.ok)throw new Error(s.error||"Failed to disable 2FA");return s}catch(n){throw console.error("Disable 2FA error:",n),n}},getTwoFactorStatus:async()=>{try{const e=localStorage.getItem("authToken")||sessionStorage.getItem("authToken"),t=await fetch("".concat(i,"/auth/2fa/status"),{method:"GET",headers:{Authorization:"Bearer ".concat(e)}}),n=await t.json();if(!t.ok)throw new Error(n.error||"Failed to get 2FA status");return n}catch(e){throw console.error("Get 2FA status error:",e),e}},generateBackupCodes:async()=>{try{const e=localStorage.getItem("authToken")||sessionStorage.getItem("authToken"),t=await fetch("".concat(i,"/auth/2fa/backup-codes"),{method:"GET",headers:{Authorization:"Bearer ".concat(e)}}),n=await t.json();if(!t.ok)throw new Error(n.error||"Failed to generate backup codes");return n}catch(e){throw console.error("Generate backup codes error:",e),e}}},utils:{formatFileSize:e=>{if(0===e)return"0 Bytes";const t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB"][t]},validateFile:e=>{if(!["image/jpeg","image/jpg","image/png","image/gif","image/webp","video/mp4","video/webm","video/ogg","video/avi","video/mov"].includes(e.type))return{valid:!1,error:"Invalid file type. Only images and videos are allowed."};const t=e.type.startsWith("video/")?52428800:10485760;if(e.size>t){const t=e.type.startsWith("video/")?"50MB":"10MB";return{valid:!1,error:"File too large. Maximum size is ".concat(t,".")}}return{valid:!0}},createThumbnail:e=>new Promise(t=>{if(e.type.startsWith("image/")){const n=new FileReader;n.onload=e=>t(e.target.result),n.readAsDataURL(e)}else if(e.type.startsWith("video/")){const n=document.createElement("video"),a=document.createElement("canvas"),s=a.getContext("2d");n.onloadedmetadata=()=>{a.width=200,a.height=n.videoHeight/n.videoWidth*200,n.currentTime=1},n.onseeked=()=>{s.drawImage(n,0,0,a.width,a.height),t(a.toDataURL()),URL.revokeObjectURL(n.src)},n.src=URL.createObjectURL(e)}else t(null)})}}},629:(e,t,n)=>{n.r(t),n.d(t,{default:()=>i});var a=n(950),s=n(414);const i=(0,a.memo)(e=>{let{callState:t,onEndCall:n,onToggleMinimize:i}=e;const[o,r]=(0,a.useState)(!1),[l,c]=(0,a.useState)(!1),[d,u]=(0,a.useState)(0),[h,m]=(0,a.useState)("connecting"),p=(0,a.useRef)(null),f=(0,a.useRef)(null),g=(0,a.useRef)(null),{active:v,withUser:y,minimized:b,audioOnly:x}=t||{},w=(null===y||void 0===y?void 0:y.avatar)||"https://via.placeholder.com/100",j=(null===y||void 0===y?void 0:y.name)||"Unknown User";if((0,a.useEffect)(()=>("connected"===h&&(g.current=setInterval(()=>{u(e=>e+1)},1e3)),()=>{g.current&&clearInterval(g.current)}),[h]),(0,a.useEffect)(()=>{if(v&&"connecting"===h){const e=setTimeout(()=>{m("connected")},3e3);return()=>clearTimeout(e)}},[v,h]),(0,a.useEffect)(()=>{v?x&&c(!0):(r(!1),c(!1),u(0),m("connecting"))},[v,x]),!t.active)return null;return(0,s.jsxs)("div",{className:"video-call-container ".concat(b?"minimized":"full"," ").concat(x?"audio-only":""),children:[(0,s.jsxs)("div",{className:"video-call-header",children:[(0,s.jsxs)("div",{className:"video-call-title",children:[x?(0,s.jsx)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("path",{d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}):(0,s.jsx)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("path",{d:"M15 10L19.5528 7.72361C20.2177 7.39116 21 7.87465 21 8.61803V15.382C21 16.1253 20.2177 16.6088 19.5528 16.2764L15 14M5 20H13C14.1046 20 15 19.1046 15 18V6C15 4.89543 14.1046 4 13 4H5C3.89543 4 3 4.89543 3 6V18C3 19.1046 3.89543 20 5 20Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),j]}),"connected"===h&&(0,s.jsx)("div",{className:"video-call-timer",children:(e=>{const t=Math.floor(e/60).toString().padStart(2,"0"),n=(e%60).toString().padStart(2,"0");return"".concat(t,":").concat(n)})(d)}),(0,s.jsx)("div",{className:"video-call-actions",children:(0,s.jsx)("button",{className:"video-call-action",onClick:i,title:b?"Expand":"Minimize",children:b?(0,s.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("path",{d:"M4 14H10V20M20 10H14V4M14 10L21 3M3 21L10 14",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}):(0,s.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("path",{d:"M8 3H5C3.89543 3 3 3.89543 3 5V8M21 8V5C21 3.89543 20.1046 3 19 3H16M16 21H19C20.1046 21 21 20.1046 21 19V16M3 16V19C3 20.1046 3.89543 21 5 21H8",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})})]}),(0,s.jsxs)("div",{className:"video-call-streams",children:[x||l||"connecting"===h?(0,s.jsxs)("div",{className:"video-call-placeholder",children:[(0,s.jsx)("img",{className:"video-call-avatar",src:w,alt:j}),(0,s.jsx)("div",{className:"video-call-status",children:j}),"connecting"===h?(0,s.jsxs)("div",{className:"video-call-connecting",children:["Connecting",(0,s.jsxs)("span",{className:"connecting-dots",children:[(0,s.jsx)("span",{className:"connecting-dot"}),(0,s.jsx)("span",{className:"connecting-dot"}),(0,s.jsx)("span",{className:"connecting-dot"})]})]}):x?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"audio-visualization",children:[(0,s.jsx)("div",{className:"audio-bar"}),(0,s.jsx)("div",{className:"audio-bar"}),(0,s.jsx)("div",{className:"audio-bar"}),(0,s.jsx)("div",{className:"audio-bar"}),(0,s.jsx)("div",{className:"audio-bar"})]}),(0,s.jsx)("div",{className:"video-call-connecting",children:"Voice call in progress"})]}):(0,s.jsx)("div",{className:"video-call-connecting",children:"Video turned off"})]}):(0,s.jsx)("div",{className:"video-call-remote-stream",ref:f}),!x&&(0,s.jsx)("div",{className:"video-call-local-stream",ref:p,style:{background:"#1e293b",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:b?"8px":"12px"},children:l?(0,s.jsxs)("div",{style:{textAlign:"center",padding:"5px"},children:[(0,s.jsx)("div",{style:{width:b?"30px":"50px",height:b?"30px":"50px",borderRadius:"50%",background:"#475569",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 5px"},children:(0,s.jsx)("svg",{width:b?"16":"24",height:b?"16":"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("path",{d:"M15.75 6a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0zM4.501 20.118a7.5 7.5 0 0114.998 0A17.933 17.933 0 0112 21.75c-2.676 0-5.216-.584-7.499-1.632z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),!b&&(0,s.jsx)("div",{children:"You"})]}):(0,s.jsx)("div",{children:"Your camera"})})]}),(0,s.jsxs)("div",{className:"video-call-controls",children:[(0,s.jsx)("button",{className:"video-call-control-btn mute ".concat(o?"active":""),onClick:()=>{r(!o)},title:o?"Unmute":"Mute",children:o?(0,s.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,s.jsx)("path",{d:"M5.58579 15.0001L3.87868 16.7072C2.70711 15.5356 2 13.8787 2 12.0001C2 10.1215 2.70711 8.46459 3.87868 7.29302L5.58579 9.00013M18.4142 9.00013L20.1213 7.29302C21.2929 8.46459 22 10.1215 22 12.0001C22 13.8787 21.2929 15.5356 20.1213 16.7072L18.4142 15.0001M16 6.5L8 17.5",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,s.jsx)("path",{d:"M9.5 6.5V11L14.5 12V17.5",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}):(0,s.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,s.jsx)("path",{d:"M8 7C8 4.79086 9.79086 3 12 3V3C14.2091 3 16 4.79086 16 7V15C16 17.2091 14.2091 19 12 19V19C9.79086 19 8 17.2091 8 15V7Z",stroke:"currentColor",strokeWidth:"2"}),(0,s.jsx)("path",{d:"M5 12C5 15.866 8.13401 19 12 19M12 19C15.866 19 19 15.866 19 12",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"}),(0,s.jsx)("path",{d:"M12 19V22",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})]})}),!x&&(0,s.jsx)("button",{className:"video-call-control-btn video-off ".concat(l?"active":""),onClick:()=>{x||c(!l)},title:l?"Turn on camera":"Turn off camera",children:l?(0,s.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,s.jsx)("path",{d:"M3 8.68861V15.3114C3 16.7943 4.20557 17.9999 5.68851 17.9999H14.3115C15.7944 17.9999 17 16.7943 17 15.3114V8.68861C17 7.20567 15.7944 6.0001 14.3115 6.0001H5.68851C4.20557 6.0001 3 7.20567 3 8.68861Z",stroke:"currentColor",strokeWidth:"2"}),(0,s.jsx)("path",{d:"M17 10.0001L20.6343 7.36791C20.8732 7.20746 21.2 7.37558 21.2 7.66818V16.3321C21.2 16.6247 20.8732 16.7928 20.6343 16.6324L17 14.0001",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"}),(0,s.jsx)("path",{d:"M3 3L21 21",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})]}):(0,s.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,s.jsx)("path",{d:"M3 8.68861V15.3114C3 16.7943 4.20557 17.9999 5.68851 17.9999H14.3115C15.7944 17.9999 17 16.7943 17 15.3114V8.68861C17 7.20567 15.7944 6.0001 14.3115 6.0001H5.68851C4.20557 6.0001 3 7.20567 3 8.68861Z",stroke:"currentColor",strokeWidth:"2"}),(0,s.jsx)("path",{d:"M17 10.0001L20.6343 7.36791C20.8732 7.20746 21.2 7.37558 21.2 7.66818V16.3321C21.2 16.6247 20.8732 16.7928 20.6343 16.6324L17 14.0001",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})]})}),(0,s.jsx)("button",{className:"video-call-control-btn end-call",onClick:n,title:"End call",children:(0,s.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("path",{d:"M22 12C22 10.6868 21.7413 9.38647 21.2388 8.1731C20.7362 6.95996 19.9997 5.85742 19.0711 4.92896C18.1425 4.00024 17.0401 3.26367 15.8268 2.76123C14.6136 2.25854 13.3132 2 12 2C10.6868 2 9.38647 2.25854 8.1731 2.76123C6.95996 3.26367 5.85742 4.00024 4.92896 4.92896C3.26367 6.59424 2 9.0218 2 12M3.29289 18.7071L7.5 14.5M7.5 14.5V18M7.5 14.5H4M20.7071 18.7071L16.5 14.5M16.5 14.5V18M16.5 14.5H20",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})]})]})})},630:(e,t,n)=>{n.r(t),n.d(t,{default:()=>o});var a=n(555),s=n(950),i=n(414);const o=e=>{var t,n,o,r,l,c;let{userProfile:d,onClose:u,onSave:h}=e;const[m,p]=(0,s.useState)({name:(null===d||void 0===d?void 0:d.name)||"",displayName:(null===d||void 0===d?void 0:d.displayName)||"",bio:(null===d||void 0===d?void 0:d.bio)||"",phone:(null===d||void 0===d?void 0:d.phone)||"",location:(null===d||void 0===d?void 0:d.location)||"",company:(null===d||void 0===d?void 0:d.company)||"",jobTitle:(null===d||void 0===d?void 0:d.jobTitle)||"",website:(null===d||void 0===d?void 0:d.website)||"",statusMessage:(null===d||void 0===d?void 0:d.statusMessage)||"",socialLinks:{twitter:(null===d||void 0===d||null===(t=d.socialLinks)||void 0===t?void 0:t.twitter)||"",linkedin:(null===d||void 0===d||null===(n=d.socialLinks)||void 0===n?void 0:n.linkedin)||"",github:(null===d||void 0===d||null===(o=d.socialLinks)||void 0===o?void 0:o.github)||"",instagram:(null===d||void 0===d||null===(r=d.socialLinks)||void 0===r?void 0:r.instagram)||"",facebook:(null===d||void 0===d||null===(l=d.socialLinks)||void 0===l?void 0:l.facebook)||"",youtube:(null===d||void 0===d||null===(c=d.socialLinks)||void 0===c?void 0:c.youtube)||""}}),[f,g]=(0,s.useState)((null===d||void 0===d?void 0:d.avatar)||null),[v,y]=(0,s.useState)(null),[b,x]=(0,s.useState)(!1),[w,j]=(0,s.useState)({}),[N,S]=(0,s.useState)(!1),C=(0,s.useRef)(null),k=(e,t)=>{if(e.includes(".")){const[n,s]=e.split(".");p(e=>(0,a.A)((0,a.A)({},e),{},{[n]:(0,a.A)((0,a.A)({},e[n]),{},{[s]:t})}))}else p(n=>(0,a.A)((0,a.A)({},n),{},{[e]:t}));w[e]&&j(t=>(0,a.A)((0,a.A)({},t),{},{[e]:null}))},E=(e,t)=>{const n={email:e=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)||!e,website:e=>/^https?:\/\/.+\..+/.test(e)||!e,phone:e=>/^[\d\s\-+()]+$/.test(e)||!e,"socialLinks.twitter":e=>/^@?[\w]+$/.test(e)||!e,"socialLinks.linkedin":e=>/^[\w-]+$/.test(e)||!e,"socialLinks.github":e=>/^[\w-]+$/.test(e)||!e,"socialLinks.instagram":e=>/^@?[\w.]+$/.test(e)||!e};return!n[e]||n[e](t)},A=(e,t)=>{E(e,t)||j(t=>(0,a.A)((0,a.A)({},t),{},{[e]:"Invalid format"}))},P=(0,s.useCallback)(e=>{if(e&&e.type.startsWith("image/")){const t=new FileReader;t.onload=t=>{g(t.target.result),y(e)},t.readAsDataURL(e)}},[]),T=(0,s.useCallback)(e=>{e.preventDefault(),S(!0)},[]),L=(0,s.useCallback)(e=>{e.preventDefault(),S(!1)},[]),M=(0,s.useCallback)(e=>{e.preventDefault(),S(!1);const t=e.dataTransfer.files;t.length>0&&P(t[0])},[P]);return(0,i.jsx)("div",{className:"edit-profile-modal-overlay",onClick:u,children:(0,i.jsxs)("div",{className:"edit-profile-modal",onClick:e=>e.stopPropagation(),children:[(0,i.jsxs)("div",{className:"edit-profile-header",children:[(0,i.jsx)("h2",{children:"Edit Profile"}),(0,i.jsx)("button",{className:"close-btn",onClick:u,children:"\xd7"})]}),(0,i.jsxs)("div",{className:"edit-profile-content",children:[(0,i.jsxs)("div",{className:"avatar-section",children:[(0,i.jsx)("div",{className:"avatar-upload-area ".concat(N?"dragging":""),onDragOver:T,onDragLeave:L,onDrop:M,onClick:()=>{var e;return null===(e=C.current)||void 0===e?void 0:e.click()},children:f?(0,i.jsx)("img",{src:f,alt:"Avatar preview",className:"avatar-preview"}):(0,i.jsxs)("div",{className:"avatar-placeholder",children:[(0,i.jsx)("span",{className:"avatar-icon",children:"\ud83d\udcf7"}),(0,i.jsx)("span",{children:"Drop image or click to upload"})]})}),(0,i.jsx)("input",{ref:C,type:"file",accept:"image/*",onChange:e=>{const t=e.target.files[0];t&&P(t)},style:{display:"none"}})]}),(0,i.jsxs)("div",{className:"form-section",children:[(0,i.jsx)("h3",{children:"Basic Information"}),(0,i.jsxs)("div",{className:"form-row",children:[(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{children:"Full Name"}),(0,i.jsx)("input",{type:"text",value:m.name,onChange:e=>k("name",e.target.value),placeholder:"Your full name"})]}),(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{children:"Display Name"}),(0,i.jsx)("input",{type:"text",value:m.displayName,onChange:e=>k("displayName",e.target.value),placeholder:"How others see you"})]})]}),(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{children:"Bio"}),(0,i.jsx)("textarea",{value:m.bio,onChange:e=>k("bio",e.target.value),placeholder:"Tell us about yourself...",rows:"3",maxLength:"500"}),(0,i.jsxs)("span",{className:"char-count",children:[m.bio.length,"/500"]})]}),(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{children:"Status Message"}),(0,i.jsx)("input",{type:"text",value:m.statusMessage,onChange:e=>k("statusMessage",e.target.value),placeholder:"What's on your mind?",maxLength:"100"})]})]}),(0,i.jsxs)("div",{className:"form-section",children:[(0,i.jsx)("h3",{children:"Contact Information"}),(0,i.jsxs)("div",{className:"form-row",children:[(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{children:"Phone"}),(0,i.jsx)("input",{type:"tel",value:m.phone,onChange:e=>k("phone",e.target.value),onBlur:e=>A("phone",e.target.value),placeholder:"+1 (555) 123-4567",className:w.phone?"error":""}),w.phone&&(0,i.jsx)("span",{className:"error-text",children:w.phone})]}),(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{children:"Location"}),(0,i.jsx)("input",{type:"text",value:m.location,onChange:e=>k("location",e.target.value),placeholder:"City, Country"})]})]}),(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{children:"Website"}),(0,i.jsx)("input",{type:"url",value:m.website,onChange:e=>k("website",e.target.value),onBlur:e=>A("website",e.target.value),placeholder:"https://yourwebsite.com",className:w.website?"error":""}),w.website&&(0,i.jsx)("span",{className:"error-text",children:w.website})]})]}),(0,i.jsxs)("div",{className:"form-section",children:[(0,i.jsx)("h3",{children:"Professional Information"}),(0,i.jsxs)("div",{className:"form-row",children:[(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{children:"Company"}),(0,i.jsx)("input",{type:"text",value:m.company,onChange:e=>k("company",e.target.value),placeholder:"Your company"})]}),(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{children:"Job Title"}),(0,i.jsx)("input",{type:"text",value:m.jobTitle,onChange:e=>k("jobTitle",e.target.value),placeholder:"Your role"})]})]})]}),(0,i.jsxs)("div",{className:"form-section",children:[(0,i.jsx)("h3",{children:"Social Media"}),(0,i.jsx)("div",{className:"social-links-grid",children:[{key:"twitter",icon:"\ud83d\udc26",label:"Twitter",placeholder:"@username"},{key:"linkedin",icon:"\ud83d\udcbc",label:"LinkedIn",placeholder:"username"},{key:"github",icon:"\ud83d\udc19",label:"GitHub",placeholder:"username"},{key:"instagram",icon:"\ud83d\udcf7",label:"Instagram",placeholder:"@username"},{key:"facebook",icon:"\ud83d\udc64",label:"Facebook",placeholder:"username"},{key:"youtube",icon:"\ud83d\udcfa",label:"YouTube",placeholder:"channel-name"}].map(e=>(0,i.jsxs)("div",{className:"form-group social-input",children:[(0,i.jsxs)("label",{children:[(0,i.jsx)("span",{className:"social-icon",children:e.icon}),e.label]}),(0,i.jsx)("input",{type:"text",value:m.socialLinks[e.key],onChange:t=>k("socialLinks.".concat(e.key),t.target.value),onBlur:t=>A("socialLinks.".concat(e.key),t.target.value),placeholder:e.placeholder,className:w["socialLinks.".concat(e.key)]?"error":""}),w["socialLinks.".concat(e.key)]&&(0,i.jsx)("span",{className:"error-text",children:w["socialLinks.".concat(e.key)]})]},e.key))})]}),w.general&&(0,i.jsx)("div",{className:"error-message",children:w.general})]}),(0,i.jsxs)("div",{className:"edit-profile-footer",children:[(0,i.jsx)("button",{className:"cancel-btn",onClick:u,disabled:b,children:"Cancel"}),(0,i.jsx)("button",{className:"save-btn",onClick:async()=>{if(console.log("\ud83d\udd04 Starting profile save process..."),console.log("\ud83d\udccb Form data:",m),console.log("\ud83d\udc64 User profile:",d),(null===d||void 0===d||!d.id)&&(null===d||void 0===d||!d.username))return console.error("\u274c No user ID or username found in userProfile"),j({general:"User information is missing. Please refresh the page and try again."}),void x(!1);x(!0),j({});try{let i=localStorage.getItem("token")||localStorage.getItem("authToken")||sessionStorage.getItem("token");if(console.log("\ud83d\udd11 Current token status:",i?"Found":"Not found"),i)console.log("\u2705 Authentication token found, proceeding with update...");else{console.log("\ud83d\udd10 No authentication token found, checking for demo mode...");const n=localStorage.getItem("user")||sessionStorage.getItem("user");if(n)try{"demo"===JSON.parse(n).username&&(console.log("\u2705 User authentication handled"),i="demo-auth-token")}catch(e){console.log("Could not parse user data:",e)}if(!i){console.log("\ud83d\udd10 No authentication found, attempting login...");try{const e=await fetch("http://localhost:5001/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:"demo",password:"demo"})});if(!e.ok)throw new Error("Auto-login failed");i=(await e.json()).token||"demo-auth-token",console.log("\u2705 Auto-login successful")}catch(t){return console.error("\u274c Authentication error:",t),j({general:"Authentication failed. Please refresh the page and try again."}),void x(!1)}}}const o={};if(Object.keys(m).forEach(e=>{"object"===typeof m[e]?Object.keys(m[e]).forEach(t=>{const n="".concat(e,".").concat(t);E(n,m[e][t])||(o[n]="Invalid format")}):E(e,m[e])||(o[e]="Invalid format")}),Object.keys(o).length>0)return console.log("\u274c Validation errors found:",o),j(o),void x(!1);console.log("\u2705 Validation passed");let r=null===d||void 0===d?void 0:d.avatar;if(v)try{console.log("\ud83d\udcf8 Uploading avatar...");const e=new FormData;e.append("avatar",v);const t=await fetch("http://localhost:5001/api/users/avatar",{method:"POST",headers:{Authorization:"Bearer ".concat(i)},body:e});if(!t.ok){const e=await t.text();throw console.error("\u274c Avatar upload failed:",t.status,e),new Error("Avatar upload failed: ".concat(t.status," ").concat(e))}const n=await t.json();if(!n.success)throw new Error(n.error||"Avatar upload failed");r=n.avatarUrl,console.log("\u2705 Avatar uploaded successfully:",n)}catch(n){console.error("\u274c Avatar upload failed:",n),j({general:"Avatar upload failed: ".concat(n.message,". Profile will be saved without avatar change.")})}const l=(0,a.A)((0,a.A)({},m),{},{avatar:r});console.log("\ud83d\udcbe Updating profile with data:",l),console.log("\ud83c\udd94 User ID:",null===d||void 0===d?void 0:d.id);try{(await fetch("http://localhost:5001/api/users/profile",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(i)},body:JSON.stringify(l)})).ok?console.log("\u2705 Profile updated via API"):console.log("\u26a0\ufe0f API update failed, using local storage fallback")}catch(s){console.log("\u26a0\ufe0f API not available, using local storage:",s.message)}const c=JSON.parse(localStorage.getItem("user")||sessionStorage.getItem("user")||"{}"),p=(0,a.A)((0,a.A)({},c),l);localStorage.getItem("user")&&localStorage.setItem("user",JSON.stringify(p)),sessionStorage.getItem("user")&&sessionStorage.setItem("user",JSON.stringify(p)),console.log("\u2705 Profile update completed successfully"),h(l),u()}catch(i){console.error("\u274c Error saving profile:",i),console.error("\u274c Error details:",i.message,i.stack);let e="Failed to save profile. Please try again.";i.message.includes("Authentication")?e="Authentication failed. Please refresh the page and log in again.":i.message.includes("Network Error")||i.message.includes("fetch")?e="Network error. Please check your connection and ensure the server is running.":i.message.includes("500")?e="Server error. Please try again later.":i.message.includes("400")?e="Invalid profile data. Please check your inputs.":i.message.includes("Avatar upload failed")&&(e=i.message),j({general:e})}finally{x(!1),console.log("\ud83c\udfc1 Profile save process completed")}},disabled:b,children:b?"Saving...":"Save Changes"})]})]})})}},719:(e,t,n)=>{n.d(t,{A:()=>l});var a=n(950),s=n(555),i=n(967);const o=new class{constructor(){this.activeCall=null,this.callHistory=[],this.isInitialized=!1,this.countryCodes={US:{code:"+1",name:"United States",format:"(XXX) XXX-XXXX"},CA:{code:"+1",name:"Canada",format:"(XXX) XXX-XXXX"},GB:{code:"+44",name:"United Kingdom",format:"XXXX XXX XXXX"},DE:{code:"+49",name:"Germany",format:"XXX XXXXXXXX"},FR:{code:"+33",name:"France",format:"X XX XX XX XX"},IT:{code:"+39",name:"Italy",format:"XXX XXX XXXX"},ES:{code:"+34",name:"Spain",format:"XXX XX XX XX"},AU:{code:"+61",name:"Australia",format:"XXX XXX XXX"},JP:{code:"+81",name:"Japan",format:"XX-XXXX-XXXX"},CN:{code:"+86",name:"China",format:"XXX XXXX XXXX"},IN:{code:"+91",name:"India",format:"XXXXX XXXXX"},BR:{code:"+55",name:"Brazil",format:"(XX) XXXXX-XXXX"},MX:{code:"+52",name:"Mexico",format:"XXX XXX XXXX"},RU:{code:"+7",name:"Russia",format:"XXX XXX-XX-XX"},KR:{code:"+82",name:"South Korea",format:"XX-XXXX-XXXX"},ZA:{code:"+27",name:"South Africa",format:"XX XXX XXXX"},EG:{code:"+20",name:"Egypt",format:"XX XXXX XXXX"},NG:{code:"+234",name:"Nigeria",format:"XXX XXX XXXX"},KE:{code:"+254",name:"Kenya",format:"XXX XXXXXX"},AE:{code:"+971",name:"UAE",format:"XX XXX XXXX"},SA:{code:"+966",name:"Saudi Arabia",format:"XX XXX XXXX"},TR:{code:"+90",name:"Turkey",format:"XXX XXX XX XX"},PL:{code:"+48",name:"Poland",format:"XXX XXX XXX"},NL:{code:"+31",name:"Netherlands",format:"X XXXX XXXX"},SE:{code:"+46",name:"Sweden",format:"XXX XXX XX XX"},NO:{code:"+47",name:"Norway",format:"XXX XX XXX"},DK:{code:"+45",name:"Denmark",format:"XX XX XX XX"},FI:{code:"+358",name:"Finland",format:"XX XXX XXXX"},CH:{code:"+41",name:"Switzerland",format:"XX XXX XX XX"},AT:{code:"+43",name:"Austria",format:"XXX XXXXXXX"},BE:{code:"+32",name:"Belgium",format:"XXX XX XX XX"},IE:{code:"+353",name:"Ireland",format:"XX XXX XXXX"},PT:{code:"+351",name:"Portugal",format:"XXX XXX XXX"},GR:{code:"+30",name:"Greece",format:"XXX XXX XXXX"},CZ:{code:"+420",name:"Czech Republic",format:"XXX XXX XXX"},HU:{code:"+36",name:"Hungary",format:"XX XXX XXXX"},RO:{code:"+40",name:"Romania",format:"XXX XXX XXXX"},BG:{code:"+359",name:"Bulgaria",format:"XX XXX XXXX"},HR:{code:"+385",name:"Croatia",format:"XX XXX XXXX"},SI:{code:"+386",name:"Slovenia",format:"XX XXX XXX"},SK:{code:"+421",name:"Slovakia",format:"XXX XXX XXX"},LT:{code:"+370",name:"Lithuania",format:"XXX XXXXX"},LV:{code:"+371",name:"Latvia",format:"XXXX XXXX"},EE:{code:"+372",name:"Estonia",format:"XXXX XXXX"},IS:{code:"+354",name:"Iceland",format:"XXX XXXX"},LU:{code:"+352",name:"Luxembourg",format:"XXX XXX XXX"},MT:{code:"+356",name:"Malta",format:"XXXX XXXX"},CY:{code:"+357",name:"Cyprus",format:"XX XXXXXX"},IL:{code:"+972",name:"Israel",format:"XX-XXX-XXXX"},LB:{code:"+961",name:"Lebanon",format:"XX XXX XXX"},JO:{code:"+962",name:"Jordan",format:"X XXXX XXXX"},SY:{code:"+963",name:"Syria",format:"XXX XXX XXX"},IQ:{code:"+964",name:"Iraq",format:"XXX XXX XXXX"},KW:{code:"+965",name:"Kuwait",format:"XXXX XXXX"},BH:{code:"+973",name:"Bahrain",format:"XXXX XXXX"},QA:{code:"+974",name:"Qatar",format:"XXXX XXXX"},OM:{code:"+968",name:"Oman",format:"XXXX XXXX"},YE:{code:"+967",name:"Yemen",format:"XXX XXX XXX"},AF:{code:"+93",name:"Afghanistan",format:"XX XXX XXXX"},PK:{code:"+92",name:"Pakistan",format:"XXX XXXXXXX"},BD:{code:"+880",name:"Bangladesh",format:"XXXX-XXXXXX"},LK:{code:"+94",name:"Sri Lanka",format:"XX XXX XXXX"},NP:{code:"+977",name:"Nepal",format:"XXX-XXX-XXXX"},BT:{code:"+975",name:"Bhutan",format:"X XXX XXX"},MV:{code:"+960",name:"Maldives",format:"XXX-XXXX"},MM:{code:"+95",name:"Myanmar",format:"XX XXX XXXX"},TH:{code:"+66",name:"Thailand",format:"XX XXX XXXX"},VN:{code:"+84",name:"Vietnam",format:"XXX XXX XXXX"},LA:{code:"+856",name:"Laos",format:"XX XXX XXX"},KH:{code:"+855",name:"Cambodia",format:"XXX XXX XXX"},MY:{code:"+60",name:"Malaysia",format:"XX-XXXX XXXX"},SG:{code:"+65",name:"Singapore",format:"XXXX XXXX"},ID:{code:"+62",name:"Indonesia",format:"XXX-XXXX-XXXX"},PH:{code:"+63",name:"Philippines",format:"XXX XXX XXXX"},TW:{code:"+886",name:"Taiwan",format:"XXXX XXXXXX"},HK:{code:"+852",name:"Hong Kong",format:"XXXX XXXX"},MO:{code:"+853",name:"Macau",format:"XXXX XXXX"},MN:{code:"+976",name:"Mongolia",format:"XXXX XXXX"},KZ:{code:"+7",name:"Kazakhstan",format:"XXX XXX XX XX"},UZ:{code:"+998",name:"Uzbekistan",format:"XX XXX XX XX"},TM:{code:"+993",name:"Turkmenistan",format:"XX XXXXXX"},TJ:{code:"+992",name:"Tajikistan",format:"XXX XX XX XX"},KG:{code:"+996",name:"Kyrgyzstan",format:"XXX XXXXXX"},GE:{code:"+995",name:"Georgia",format:"XXX XXX XXX"},AM:{code:"+374",name:"Armenia",format:"XX XXXXXX"},AZ:{code:"+994",name:"Azerbaijan",format:"XX XXX XX XX"},BY:{code:"+375",name:"Belarus",format:"XX XXX-XX-XX"},UA:{code:"+380",name:"Ukraine",format:"XX XXX XX XX"},MD:{code:"+373",name:"Moldova",format:"XXXX XXXX"},RU:{code:"+7",name:"Russia",format:"XXX XXX-XX-XX"}}}async initialize(){if(!this.isInitialized)try{return console.log("\ud83d\udcde Initializing PSTN calling service..."),this.twilioDevice={ready:!0,canCall:!0,connectionQuality:"excellent"},this.isInitialized=!0,console.log("\u2705 PSTN calling service initialized"),!0}catch(e){return console.error("\u274c Failed to initialize PSTN calling service:",e),!1}}validateInternationalNumber(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"US";if(!e)return{valid:!1,error:"No phone number provided"};let n=e.replace(/\D/g,"");const a=this.countryCodes[t.toUpperCase()];if(!a)return{valid:!1,error:"Unsupported country code"};const s=a.code.replace("+","");return n.startsWith(s)||(n=s+n),n.length<7||n.length>15?{valid:!1,error:"Invalid number length for ".concat(a.name)}:{valid:!0,originalNumber:e,cleanNumber:n,formattedNumber:"+"+n,displayNumber:this.formatNumberForDisplay(n,t),country:a.name,countryCode:a.code}}formatNumberForDisplay(e,t){const n=this.countryCodes[t.toUpperCase()];if(!n)return"+"+e;const a=n.code.replace("+",""),s=e.startsWith(a)?e.substring(a.length):e;switch(t.toUpperCase()){case"US":case"CA":if(10===s.length)return"".concat(n.code," (").concat(s.substring(0,3),") ").concat(s.substring(3,6),"-").concat(s.substring(6));break;case"GB":if(s.length>=10)return"".concat(n.code," ").concat(s.substring(0,4)," ").concat(s.substring(4,7)," ").concat(s.substring(7));break;case"DE":if(s.length>=10)return"".concat(n.code," ").concat(s.substring(0,3)," ").concat(s.substring(3));break;case"FR":if(9===s.length)return"".concat(n.code," ").concat(s.substring(0,1)," ").concat(s.substring(1,3)," ").concat(s.substring(3,5)," ").concat(s.substring(5,7)," ").concat(s.substring(7));break;default:return"".concat(n.code," ").concat(s)}return"+"+e}detectCountryFromNumber(e){const t=e.replace(/\D/g,""),n=Object.entries(this.countryCodes).sort((e,t)=>t[1].code.length-e[1].code.length);for(const[a,s]of n){const e=s.code.replace("+","");if(t.startsWith(e))return{country:a,name:s.name,code:s.code,localNumber:t.substring(e.length)}}return null}getCallingInfo(e){const t=this.countryCodes[e.toUpperCase()];return{perMinute:"FREE",currency:"N/A",connection:"FREE",message:"\u2728 FREE calling to ".concat((null===t||void 0===t?void 0:t.name)||"this country"," via our app!"),isFree:!0}}async initiateCall(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};await this.initialize();const{countryCode:n="US",recordCall:a=!1,enableFallback:s=!0}=t;try{const t=this.validateInternationalNumber(e,n);if(!t.valid)throw new Error(t.error);const i="pstn_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9)),o=this.getCallingInfo(n),r={callId:i,type:"pstn",targetNumber:t.formattedNumber,displayNumber:t.displayNumber,country:t.country,countryCode:t.countryCode,status:"initiating",startTime:new Date,callInfo:o,cost:"FREE",billing:"No charges - completely free via app!",recordCall:a,enableFallback:s,connectionType:"pstn",enhancedFeatures:{pstnCall:!0,internationalCalling:!0,callRecording:a,qualityMonitoring:!0,freeCalling:!0}};return this.activeCall=r,console.log("\ud83d\udcde Initiating FREE PSTN call to ".concat(t.displayNumber)),console.log("\u2728 No charges - this call is completely FREE via our app!"),setTimeout(()=>{this.activeCall&&this.activeCall.callId===i&&(this.activeCall.status="ringing",this.notifyCallStateChange("ringing"))},1e3),setTimeout(()=>{if(this.activeCall&&this.activeCall.callId===i){window.confirm("Calling ".concat(t.displayNumber,"\n\nSimulate call answered?"))?(this.activeCall.status="connected",this.activeCall.connectedTime=new Date,this.notifyCallStateChange("connected"),this.startCallTimer()):(this.activeCall.status="no-answer",this.notifyCallStateChange("no-answer"),this.endCall())}},3e3),r}catch(o){if(console.error("\u274c Failed to initiate PSTN call:",o),t.enableFallback)return console.log("\ud83d\udd04 Attempting fallback to WebRTC..."),await i.A.initiateEnhancedCall({phone:e},"webrtc");throw o}}startCallTimer(){this.activeCall&&(this.callTimer=setInterval(()=>{if(this.activeCall&&"connected"===this.activeCall.status){const e=new Date-this.activeCall.connectedTime,t=e/6e4*this.activeCall.rates.perMinute+this.activeCall.rates.connection;this.activeCall.duration=e,this.activeCall.estimatedCost=t,this.notifyCallStateChange("timer-update")}},1e3))}endCall(){if(!this.activeCall)return null;const e=(0,s.A)((0,s.A)({},this.activeCall),{},{endTime:new Date,finalStatus:this.activeCall.status});return this.activeCall.connectedTime&&(e.totalDuration=new Date-this.activeCall.connectedTime,e.finalCost=e.totalDuration/6e4*this.activeCall.rates.perMinute+this.activeCall.rates.connection),this.callHistory.push(e),this.callTimer&&(clearInterval(this.callTimer),this.callTimer=null),this.activeCall=null,this.notifyCallStateChange("ended"),console.log("\ud83d\udcde PSTN call ended:",e),e}getCurrentCall(){return this.activeCall}getCallHistory(){return this.callHistory.slice().reverse()}isAvailable(){var e;return this.isInitialized&&(null===(e=this.twilioDevice)||void 0===e?void 0:e.ready)}getSupportedCountries(){return Object.entries(this.countryCodes).map(e=>{let[t,n]=e;return{code:t,name:n.name,dialCode:n.code,format:n.format}}).sort((e,t)=>e.name.localeCompare(t.name))}notifyCallStateChange(e){console.log("\ud83d\udcde Call state changed: ".concat(e)),"undefined"!==typeof window&&window.dispatchEvent(new CustomEvent("pstn-call-state-change",{detail:{state:e,call:this.activeCall}}))}canCallEmergency(e){return{US:["911"],GB:["999","112"],DE:["112","110"],FR:["112","15","17","18"],AU:["000","112"],CA:["911"],JP:["110","119"],IN:["100","101","102","108"],CN:["110","119","120"]}[e.toUpperCase()]||["112"]}};var r=n(414);const l=e=>{var t;let{isOpen:n,onClose:s,contact:i=null,darkMode:l=!1}=e;const[c,d]=(0,a.useState)(""),[u,h]=(0,a.useState)("US"),[m,p]=(0,a.useState)([]),[f,g]=(0,a.useState)(null),[v,y]=(0,a.useState)(!1),[b,x]=(0,a.useState)(null),[w,j]=(0,a.useState)(null),[N,S]=(0,a.useState)([]),[C,k]=(0,a.useState)(!1);(0,a.useEffect)(()=>{n&&E()},[n]),(0,a.useEffect)(()=>{const e=e=>{const{state:t,call:n}=e.detail;"ended"===t?(j(null),P()):j(n)};return window.addEventListener("pstn-call-state-change",e),()=>window.removeEventListener("pstn-call-state-change",e)},[]),(0,a.useEffect)(()=>{if(i&&i.phone){d(i.phone);const e=o.detectCountryFromNumber(i.phone);e&&h(e.country)}},[i]),(0,a.useEffect)(()=>{c?A():(g(null),x(null))},[c,u]);const E=async()=>{try{await o.initialize();const e=o.getSupportedCountries();p(e),P(),k(!0)}catch(e){console.error("Failed to initialize dialer:",e)}},A=async()=>{if(c.trim()){y(!0);try{const e=o.validateInternationalNumber(c,u);if(g(e),e.valid){const e=o.getCallingInfo(u);x(e)}}catch(e){console.error("Validation error:",e),g({valid:!1,error:e.message})}finally{y(!1)}}else g(null)},P=()=>{const e=o.getCallHistory();S(e.slice(0,10))},T=e=>{if(!e)return"00:00";const t=Math.floor(e/6e4),n=Math.floor(e%6e4/1e3);return"".concat(t.toString().padStart(2,"0"),":").concat(n.toString().padStart(2,"0"))},L=e=>"FREE"!==e&&e?"string"===typeof e?e:"$".concat(e.toFixed(4)):"\u2728 FREE";return n?(0,r.jsx)("div",{className:"international-dialer-overlay ".concat(l?"dark":""),children:(0,r.jsxs)("div",{className:"international-dialer-modal",children:[(0,r.jsxs)("div",{className:"dialer-header",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{children:"\ud83c\udf0d International Calling"}),(0,r.jsx)("p",{className:"free-calling-subtitle",children:"\u2728 All calls are completely FREE via this app!"})]}),(0,r.jsx)("button",{className:"close-btn",onClick:s,title:"Close",children:"\u2715"})]}),(0,r.jsxs)("div",{className:"dialer-content",children:[C?w?(0,r.jsxs)("div",{className:"active-call",children:[(0,r.jsxs)("div",{className:"call-info",children:[(0,r.jsxs)("h3",{children:["\ud83d\udcde Calling ",w.displayNumber]}),(0,r.jsx)("p",{className:"call-status",children:w.status}),(0,r.jsx)("p",{className:"call-country",children:w.country}),"connected"===w.status&&(0,r.jsxs)("div",{className:"call-stats",children:[(0,r.jsxs)("div",{className:"call-duration",children:["Duration: ",T(w.duration)]}),(0,r.jsxs)("div",{className:"call-cost",children:["Cost: ",L(w.estimatedCost)]})]})]}),(0,r.jsx)("div",{className:"call-controls",children:(0,r.jsx)("button",{className:"end-call-btn",onClick:()=>{o.endCall()},children:"\ud83d\udcde End Call"})})]}):(0,r.jsxs)("div",{className:"dialer-form",children:[(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{children:"Country"}),(0,r.jsx)("select",{value:u,onChange:e=>h(e.target.value),className:"country-select",children:m.map(e=>(0,r.jsxs)("option",{value:e.code,children:[e.dialCode," ",e.name]},e.code))})]}),(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{children:"Phone Number"}),(0,r.jsxs)("div",{className:"phone-input-group",children:[(0,r.jsx)("span",{className:"country-code",children:(null===(t=m.find(e=>e.code===u))||void 0===t?void 0:t.dialCode)||"+1"}),(0,r.jsx)("input",{type:"tel",value:c,onChange:e=>d(e.target.value),placeholder:"Enter phone number",className:"phone-input"})]})]}),v&&(0,r.jsxs)("div",{className:"validation-loading",children:[(0,r.jsx)("div",{className:"spinner"}),"Validating number..."]}),f&&(0,r.jsx)("div",{className:"validation-result ".concat(f.valid?"valid":"invalid"),children:f.valid?(0,r.jsxs)("div",{className:"valid-number",children:[(0,r.jsx)("div",{className:"check-icon",children:"\u2705"}),(0,r.jsxs)("div",{className:"number-info",children:[(0,r.jsx)("div",{className:"formatted-number",children:f.displayNumber}),(0,r.jsx)("div",{className:"country-name",children:f.country})]})]}):(0,r.jsxs)("div",{className:"invalid-number",children:[(0,r.jsx)("div",{className:"error-icon",children:"\u274c"}),(0,r.jsx)("div",{className:"error-message",children:f.error})]})}),b&&(null===f||void 0===f?void 0:f.valid)&&(0,r.jsxs)("div",{className:"call-rates free-calling",children:[(0,r.jsx)("h4",{children:"\u2728 Free Calling"}),(0,r.jsxs)("div",{className:"rates-info",children:[(0,r.jsxs)("div",{className:"rate-item",children:[(0,r.jsx)("span",{children:"Cost per minute:"}),(0,r.jsx)("span",{className:"free-badge",children:L(b.perMinute)})]}),(0,r.jsxs)("div",{className:"rate-item",children:[(0,r.jsx)("span",{children:"Connection fee:"}),(0,r.jsx)("span",{className:"free-badge",children:L(b.connection)})]}),b.message&&(0,r.jsx)("div",{className:"free-message",children:b.message})]})]}),(0,r.jsx)("div",{className:"call-actions",children:(0,r.jsxs)("button",{className:"call-btn free-call",onClick:async()=>{if(null!==f&&void 0!==f&&f.valid)try{const e=await o.initiateCall(c,{countryCode:u,recordCall:!1,enableFallback:!0});j(e)}catch(e){alert("Failed to start call: ".concat(e.message))}},disabled:!(null!==f&&void 0!==f&&f.valid),children:["\ud83d\udcde FREE Call ",(null===f||void 0===f?void 0:f.displayNumber)||"Number"]})}),(0,r.jsx)("div",{className:"emergency-notice",children:(0,r.jsx)("p",{children:"\u26a0\ufe0f For emergencies, use your local emergency number"})})]}):(0,r.jsxs)("div",{className:"dialer-loading",children:[(0,r.jsx)("div",{className:"loading-spinner"}),(0,r.jsx)("p",{children:"Initializing international calling..."})]}),!w&&N.length>0&&(0,r.jsxs)("div",{className:"call-history",children:[(0,r.jsx)("h4",{children:"\ud83d\udccb Recent Calls"}),(0,r.jsx)("div",{className:"history-list",children:N.map((e,t)=>(0,r.jsxs)("div",{className:"history-item",children:[(0,r.jsxs)("div",{className:"history-info",children:[(0,r.jsx)("div",{className:"history-number",children:e.displayNumber}),(0,r.jsxs)("div",{className:"history-details",children:[e.country," \u2022 ",T(e.totalDuration)," \u2022 \u2728 FREE"]})]}),(0,r.jsx)("div",{className:"history-time",children:new Date(e.startTime).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]},t))})]})]})]})}):null}},831:(e,t,n)=>{n.r(t),n.d(t,{default:()=>r});var a=n(555),s=n(950),i=n(414);const o=[{id:"getting-started",title:"Getting Started",icon:"\ud83d\ude80",content:[{question:"How do I start using Quibish?",answer:"Welcome to Quibish! To get started, simply log in with your credentials. If you're new, you can create an account by clicking the Sign Up button.",tags:["login","account","demo"]},{question:"How do I create a new conversation?",answer:'Click the "New Chat" button in the sidebar, then select a user from the list or create a group conversation. You can also click on any user in the contacts list to start chatting.',tags:["chat","conversation","new"]},{question:"How do I navigate the interface?",answer:"The main interface consists of three parts: the sidebar (conversations list), the chat area (messages), and the user panel. You can collapse the sidebar by clicking the menu button.",tags:["interface","navigation","sidebar"]}]},{id:"messaging",title:"Messaging",icon:"\ud83d\udcac",content:[{question:"How do I send a message?",answer:"Type your message in the input field at the bottom and press Enter or click the send button. You can also use Shift+Enter for line breaks.",tags:["send","message","text"]},{question:"Can I send emojis and GIFs?",answer:"Yes! Click the emoji button (\ud83d\ude0a) to open the emoji picker, or click the GIF button to search and send GIFs. You can also type emojis directly using your keyboard.",tags:["emoji","gif","media"]},{question:"How do I share files and images?",answer:"Click the attachment button (\ud83d\udcce) to upload files, or the image button (\ud83d\udcf7) for photos. You can drag and drop files directly into the chat area. Supported formats include images, videos, and documents.",tags:["files","images","upload","attachment"]},{question:"Can I edit or delete messages?",answer:"Hover over your message and click the three dots menu to edit or delete. You can edit messages within a certain time frame after sending.",tags:["edit","delete","message"]},{question:"How do message reactions work?",answer:"Hover over any message and click the emoji reaction button, or double-click a message to quickly add a heart reaction. You can see who reacted by hovering over the reaction.",tags:["reactions","emoji","like"]}]},{id:"profile",title:"Profile & Settings",icon:"\ud83d\udc64",content:[{question:"How do I update my profile?",answer:'Click on your profile picture or name in the sidebar, then select "Edit Profile". You can update your name, bio, avatar, and other personal information.',tags:["profile","edit","avatar","settings"]},{question:"How do I change my avatar?",answer:"In the profile edit modal, click on your current avatar or the camera icon to upload a new profile picture. Supported formats are JPG, PNG, and GIF up to 5MB.",tags:["avatar","profile","picture","upload"]},{question:"How do I enable dark mode?",answer:'Click the settings gear icon in the sidebar and toggle the "Dark Mode" option. The interface will switch between light and dark themes.',tags:["dark mode","theme","settings"]},{question:"What are the privacy settings?",answer:"In Settings, you can control who can message you, see your online status, and view your profile information. You can also manage blocked users and notification preferences.",tags:["privacy","settings","blocked","notifications"]}]},{id:"features",title:"Advanced Features",icon:"\u2b50",content:[{question:"How does video calling work?",answer:"Click the video call button in a conversation to start a video call. Make sure you have camera and microphone permissions enabled in your browser.",tags:["video","call","camera","microphone"]},{question:"Can I search through my messages?",answer:"Yes! Use the search bar in the sidebar to find conversations, or use the in-chat search to find specific messages within a conversation.",tags:["search","find","messages"]},{question:"What are smart previews?",answer:"When you share links, Quibish automatically generates previews showing the page title, description, and thumbnail image for a richer sharing experience.",tags:["links","preview","smart","sharing"]},{question:"How do I use keyboard shortcuts?",answer:"Press Ctrl+K (Cmd+K on Mac) to quickly search conversations, Escape to close modals, and Enter to send messages. Many more shortcuts are available throughout the interface.",tags:["shortcuts","keyboard","hotkeys"]}]},{id:"troubleshooting",title:"Troubleshooting",icon:"\ud83d\udd27",content:[{question:"Messages are not sending",answer:"Check your internet connection first. If the problem persists, try refreshing the page. Make sure your browser supports modern web standards and has JavaScript enabled.",tags:["sending","connection","error"]},{question:"I can't see new messages",answer:"Try refreshing the page or check your internet connection. If you're in a group chat, make sure you haven't been removed from the conversation.",tags:["receiving","messages","refresh"]},{question:"Video calls are not working",answer:"Ensure your browser has permission to access your camera and microphone. Try using a different browser or check if other participants can hear/see you.",tags:["video","call","permissions","browser"]},{question:"The app is running slowly",answer:"Clear your browser cache and cookies. Close other browser tabs and applications. If you have many conversations, try archiving old ones to improve performance.",tags:["slow","performance","cache"]},{question:"I forgot my password",answer:'Use the "Forgot Password" link on the login page to reset your password. You\'ll receive an email with instructions to create a new password.',tags:["password","reset","forgot","login"]}]},{id:"shortcuts",title:"Keyboard Shortcuts",icon:"\u2328\ufe0f",content:[{question:"Navigation Shortcuts",answer:"Ctrl/Cmd + K: Quick search conversations\nEscape: Close modals and dialogs\nCtrl/Cmd + N: New conversation\nCtrl/Cmd + ,: Open settings",tags:["navigation","keyboard","shortcuts"]},{question:"Messaging Shortcuts",answer:"Enter: Send message\nShift + Enter: New line\nCtrl/Cmd + E: Insert emoji\nCtrl/Cmd + U: Upload file\nUp Arrow: Edit last message",tags:["messaging","keyboard","shortcuts"]},{question:"General Shortcuts",answer:"Ctrl/Cmd + F: Search in current conversation\nCtrl/Cmd + R: Refresh\nF11: Toggle fullscreen\nCtrl/Cmd + +/-: Zoom in/out",tags:["general","keyboard","shortcuts"]}]}],r=e=>{let{isOpen:t,onClose:n}=e;const[r,l]=(0,s.useState)("getting-started"),[c,d]=(0,s.useState)("");(0,s.useEffect)(()=>(document.body.style.overflow=t?"hidden":"unset",()=>{document.body.style.overflow="unset"}),[t]);const u=(0,s.useMemo)(()=>{if(""===c.trim())return[];const e=c.toLowerCase(),t=[];return o.forEach(n=>{n.content.forEach(s=>{const i=s.question.toLowerCase().includes(e),o=s.answer.toLowerCase().includes(e),r=s.tags.some(t=>t.toLowerCase().includes(e));(i||o||r)&&t.push((0,a.A)((0,a.A)({},s),{},{section:n.title,sectionId:n.id,sectionIcon:n.icon}))})}),t},[c]),h=(e,t)=>{if(!t)return e;const n=new RegExp("(".concat(t,")"),"gi");return e.split(n).map((e,t)=>n.test(e)?(0,i.jsx)("mark",{className:"search-highlight",children:e},t):e)};return t?(0,i.jsx)("div",{className:"help-modal-backdrop",onClick:e=>e.target===e.currentTarget&&n(),children:(0,i.jsxs)("div",{className:"help-modal",children:[(0,i.jsxs)("div",{className:"help-modal-header",children:[(0,i.jsx)("h2",{children:"Help & Support"}),(0,i.jsx)("button",{className:"help-close-btn",onClick:n,children:"\xd7"})]}),(0,i.jsxs)("div",{className:"help-modal-content",children:[(0,i.jsxs)("div",{className:"help-search-section",children:[(0,i.jsxs)("div",{className:"help-search-bar",children:[(0,i.jsx)("span",{className:"help-search-icon",children:"\ud83d\udd0d"}),(0,i.jsx)("input",{type:"text",placeholder:"Search for help topics...",value:c,onChange:e=>d(e.target.value),className:"help-search-input"}),c&&(0,i.jsx)("button",{className:"help-search-clear",onClick:()=>d(""),children:"\xd7"})]}),c&&(0,i.jsxs)("div",{className:"help-search-results",children:[(0,i.jsxs)("h4",{children:["Search Results (",u.length,")"]}),u.length>0?(0,i.jsx)("div",{className:"help-search-items",children:u.map((e,t)=>(0,i.jsxs)("div",{className:"help-search-item",onClick:()=>{return t=e.sectionId,l(t),void d("");var t},children:[(0,i.jsx)("div",{className:"help-search-item-header",children:(0,i.jsxs)("span",{className:"help-search-section-badge",children:[e.sectionIcon," ",e.section]})}),(0,i.jsx)("h5",{children:h(e.question,c)}),(0,i.jsxs)("p",{children:[h(e.answer.substring(0,150),c),"..."]})]},t))}):(0,i.jsxs)("div",{className:"help-no-results",children:[(0,i.jsxs)("p",{children:['No results found for "',c,'"']}),(0,i.jsx)("p",{children:"Try different keywords or browse the sections below."})]})]})]}),(0,i.jsxs)("div",{className:"help-main-content",children:[(0,i.jsxs)("div",{className:"help-sidebar",children:[(0,i.jsx)("div",{className:"help-sections",children:o.map(e=>(0,i.jsxs)("button",{className:"help-section-btn ".concat(r===e.id?"active":""),onClick:()=>{return t=e.id,l(t),void d("");var t},children:[(0,i.jsx)("span",{className:"help-section-icon",children:e.icon}),(0,i.jsx)("span",{className:"help-section-title",children:e.title})]},e.id))}),(0,i.jsxs)("div",{className:"help-quick-actions",children:[(0,i.jsx)("h4",{children:"Quick Actions"}),(0,i.jsx)("button",{className:"help-action-btn",onClick:()=>window.open("mailto:support@quibish.com"),children:"\ud83d\udce7 Contact Support"}),(0,i.jsx)("button",{className:"help-action-btn",onClick:()=>l("troubleshooting"),children:"\ud83d\udd27 Troubleshooting"}),(0,i.jsx)("button",{className:"help-action-btn",onClick:()=>l("shortcuts"),children:"\u2328\ufe0f Keyboard Shortcuts"})]})]}),(0,i.jsx)("div",{className:"help-content-area",children:!c&&(0,i.jsx)(i.Fragment,{children:(()=>{const e=o.find(e=>e.id===r);return(0,i.jsxs)("div",{className:"help-section-content",children:[(0,i.jsx)("div",{className:"help-section-header",children:(0,i.jsxs)("h3",{children:[(0,i.jsx)("span",{className:"help-section-icon-large",children:e.icon}),e.title]})}),(0,i.jsx)("div",{className:"help-items",children:e.content.map((e,t)=>(0,i.jsxs)("div",{className:"help-item",children:[(0,i.jsx)("h4",{className:"help-question",children:e.question}),(0,i.jsx)("div",{className:"help-answer",children:e.answer.split("\n").map((e,t)=>(0,i.jsx)("p",{children:e},t))}),e.tags&&(0,i.jsx)("div",{className:"help-tags",children:e.tags.map(e=>(0,i.jsxs)("span",{className:"help-tag",children:["#",e]},e))})]},t))})]})})()})})]})]}),(0,i.jsx)("div",{className:"help-modal-footer",children:(0,i.jsxs)("div",{className:"help-footer-content",children:[(0,i.jsxs)("div",{className:"help-footer-section",children:[(0,i.jsx)("h4",{children:"Still need help?"}),(0,i.jsxs)("p",{children:["Contact our support team at ",(0,i.jsx)("a",{href:"mailto:support@quibish.com",children:"support@quibish.com"})]})]}),(0,i.jsxs)("div",{className:"help-footer-section",children:[(0,i.jsx)("h4",{children:"Version Info"}),(0,i.jsx)("p",{children:"Quibish v1.0.0 \u2022 Last updated: September 2025"})]})]})})]})}):null}},835:(e,t,n)=>{n.d(t,{A:()=>o,m:()=>i});var a=n(555);const s=new class{constructor(){this.capabilities={camera:!1,microphone:!1,geolocation:!1,contacts:!1,sensors:!1,fileSystem:!1,webShare:!1,notifications:!1,vibration:!1,fullscreen:!1,orientation:!1},this.sensors={accelerometer:null,gyroscope:null,magnetometer:null,orientationSensor:null},this.init()}async init(){await this.detectCapabilities(),this.setupSensors(),console.log("\u2705 Native Device Features Service initialized",this.capabilities)}async detectCapabilities(){this.capabilities.camera="mediaDevices"in navigator&&"getUserMedia"in navigator.mediaDevices,this.capabilities.microphone=this.capabilities.camera,this.capabilities.geolocation="geolocation"in navigator,this.capabilities.contacts="contacts"in navigator,this.capabilities.sensors="Accelerometer"in window||"Gyroscope"in window,this.capabilities.fileSystem="showOpenFilePicker"in window,this.capabilities.webShare="share"in navigator,this.capabilities.notifications="Notification"in window,this.capabilities.vibration="vibrate"in navigator,this.capabilities.fullscreen="requestFullscreen"in document.documentElement,this.capabilities.orientation="orientation"in window.screen}async requestCameraAccess(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this.capabilities.camera)throw new Error("Camera not supported");const t=(0,a.A)((0,a.A)({},{video:{width:{ideal:1920,max:1920},height:{ideal:1080,max:1080},frameRate:{ideal:30,max:60},facingMode:"user"},audio:!1}),e);try{const e=await navigator.mediaDevices.getUserMedia(t);return console.log("\u2705 Camera access granted"),e}catch(n){throw console.error("\u274c Camera access denied:",n),n}}async capturePhoto(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"user";try{const t=await this.requestCameraAccess({video:{facingMode:e}});return new Promise((e,n)=>{const a=document.createElement("video"),s=document.createElement("canvas"),i=s.getContext("2d");a.srcObject=t,a.play(),a.onloadedmetadata=()=>{s.width=a.videoWidth,s.height=a.videoHeight,i.drawImage(a,0,0),s.toBlob(a=>{t.getTracks().forEach(e=>e.stop()),a?e({blob:a,dataUrl:s.toDataURL("image/jpeg",.9),width:s.width,height:s.height}):n(new Error("Failed to capture photo"))},"image/jpeg",.9)},a.onerror=e=>{t.getTracks().forEach(e=>e.stop()),n(e)}})}catch(t){throw console.error("\u274c Photo capture failed:",t),t}}async recordVideo(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3e4;try{const t=await this.requestCameraAccess({video:!0,audio:!0}),n=new MediaRecorder(t),a=[];return new Promise((s,i)=>{n.ondataavailable=e=>{e.data.size>0&&a.push(e.data)},n.onstop=()=>{const n=new Blob(a,{type:"video/webm"});t.getTracks().forEach(e=>e.stop()),s({blob:n,url:URL.createObjectURL(n),duration:e})},n.onerror=e=>{t.getTracks().forEach(e=>e.stop()),i(e)},n.start(),setTimeout(()=>{"recording"===n.state&&n.stop()},e)})}catch(t){throw console.error("\u274c Video recording failed:",t),t}}async pickContacts(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this.capabilities.contacts)throw new Error("Contact Picker not supported");const t=(0,a.A)((0,a.A)({},{multiple:!1,properties:["name","email","tel"]}),e);try{const e=await navigator.contacts.select(t.properties,{multiple:t.multiple});return console.log("\u2705 Contacts selected:",e),e}catch(n){throw console.error("\u274c Contact selection failed:",n),n}}async getCurrentLocation(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this.capabilities.geolocation)throw new Error("Geolocation not supported");const t=(0,a.A)((0,a.A)({},{enableHighAccuracy:!0,timeout:1e4,maximumAge:6e4}),e);return new Promise((e,n)=>{navigator.geolocation.getCurrentPosition(t=>{console.log("\u2705 Location obtained:",t),e({latitude:t.coords.latitude,longitude:t.coords.longitude,accuracy:t.coords.accuracy,altitude:t.coords.altitude,timestamp:t.timestamp})},e=>{console.error("\u274c Location access failed:",e),n(e)},t)})}watchLocation(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.capabilities.geolocation)throw new Error("Geolocation not supported");const n=(0,a.A)((0,a.A)({},{enableHighAccuracy:!0,timeout:1e4,maximumAge:6e4}),t);return navigator.geolocation.watchPosition(t=>{e({latitude:t.coords.latitude,longitude:t.coords.longitude,accuracy:t.coords.accuracy,altitude:t.coords.altitude,timestamp:t.timestamp})},t=>{console.error("\u274c Location watch failed:",t),e(null,t)},n)}setupSensors(){if(this.capabilities.sensors)try{"Accelerometer"in window&&(this.sensors.accelerometer=new window.Accelerometer({frequency:60}),this.sensors.accelerometer.addEventListener("reading",()=>{this.handleSensorReading("accelerometer",{x:this.sensors.accelerometer.x,y:this.sensors.accelerometer.y,z:this.sensors.accelerometer.z})})),"Gyroscope"in window&&(this.sensors.gyroscope=new window.Gyroscope({frequency:60}),this.sensors.gyroscope.addEventListener("reading",()=>{this.handleSensorReading("gyroscope",{x:this.sensors.gyroscope.x,y:this.sensors.gyroscope.y,z:this.sensors.gyroscope.z})})),"DeviceOrientationEvent"in window&&window.addEventListener("deviceorientation",e=>{this.handleSensorReading("orientation",{alpha:e.alpha,beta:e.beta,gamma:e.gamma})}),console.log("\u2705 Device sensors initialized")}catch(e){console.error("\u274c Sensor setup failed:",e)}else console.log("\ud83d\udcf1 Device sensors not available")}handleSensorReading(e,t){const n=new CustomEvent("device-sensor",{detail:{type:e,data:t,timestamp:Date.now()}});window.dispatchEvent(n)}async openFileDialog(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this.capabilities.fileSystem)return this.fallbackFileDialog(e);const t=(0,a.A)((0,a.A)({},{multiple:!1,types:[{description:"Images",accept:{"image/*":[".png",".jpg",".jpeg",".gif",".webp"]}},{description:"Videos",accept:{"video/*":[".mp4",".webm",".ogg"]}},{description:"Documents",accept:{"application/pdf":[".pdf"],"text/*":[".txt",".md"]}}]}),e);try{const e=await window.showOpenFilePicker(t),n=await Promise.all(e.map(async e=>({file:await e.getFile(),handle:e})));return console.log("\u2705 Files selected via File System API:",n),n}catch(n){throw console.error("\u274c File selection failed:",n),n}}fallbackFileDialog(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise((t,n)=>{const a=document.createElement("input");if(a.type="file",a.multiple=e.multiple||!1,e.types){const t=e.types.flatMap(e=>Object.values(e.accept).flat());a.accept=t.join(",")}a.onchange=e=>{const n=Array.from(e.target.files).map(e=>({file:e}));t(n)},a.onerror=n,a.click()})}async shareContent(e){if(!this.capabilities.webShare)throw new Error("Web Share not supported");try{return await navigator.share(e),console.log("\u2705 Content shared successfully"),!0}catch(t){throw console.error("\u274c Sharing failed:",t),t}}async shareFile(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.capabilities.webShare)throw new Error("Web Share not supported");try{const n=(0,a.A)({files:[e]},t);if(navigator.canShare&&!navigator.canShare(n))throw new Error("Cannot share this file type");return await navigator.share(n),console.log("\u2705 File shared successfully"),!0}catch(n){throw console.error("\u274c File sharing failed:",n),n}}async lockOrientation(e){if(!this.capabilities.orientation)throw new Error("Screen Orientation not supported");try{await window.screen.orientation.lock(e),console.log("\u2705 Orientation locked to ".concat(e))}catch(t){throw console.error("\u274c Orientation lock failed:",t),t}}unlockOrientation(){this.capabilities.orientation&&(window.screen.orientation.unlock(),console.log("\u2705 Orientation unlocked"))}async enterFullscreen(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.documentElement;if(!this.capabilities.fullscreen)throw new Error("Fullscreen not supported");try{await e.requestFullscreen(),console.log("\u2705 Entered fullscreen")}catch(t){throw console.error("\u274c Fullscreen failed:",t),t}}exitFullscreen(){document.fullscreenElement&&(document.exitFullscreen(),console.log("\u2705 Exited fullscreen"))}getCapabilities(){return(0,a.A)({},this.capabilities)}isSupported(e){return this.capabilities[e]||!1}},i={capturePhoto:e=>s.capturePhoto(e),recordVideo:e=>s.recordVideo(e),pickContacts:e=>s.pickContacts(e),getLocation:e=>s.getCurrentLocation(e),watchLocation:(e,t)=>s.watchLocation(e,t),openFiles:e=>s.openFileDialog(e),share:e=>s.shareContent(e),shareFile:(e,t)=>s.shareFile(e,t),lockOrientation:e=>s.lockOrientation(e),unlockOrientation:()=>s.unlockOrientation(),enterFullscreen:e=>s.enterFullscreen(e),exitFullscreen:()=>s.exitFullscreen(),getCapabilities:()=>s.getCapabilities(),isSupported:e=>s.isSupported(e)},o=s},863:(e,t,n)=>{var a=n(950);function s(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var o={d:{f:i,r:function(){throw Error(s(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},r=Symbol.for("react.portal");var l=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(e,t){return"font"===e?"":"string"===typeof t?"use-credentials"===t?t:"":void 0}t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)throw Error(s(299));return function(e,t,n){var a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:r,key:null==a?null:""+a,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.flushSync=function(e){var t=l.T,n=o.p;try{if(l.T=null,o.p=2,e)return e()}finally{l.T=t,o.p=n,o.d.f()}},t.preconnect=function(e,t){"string"===typeof e&&(t?t="string"===typeof(t=t.crossOrigin)?"use-credentials"===t?t:"":void 0:t=null,o.d.C(e,t))},t.prefetchDNS=function(e){"string"===typeof e&&o.d.D(e)},t.preinit=function(e,t){if("string"===typeof e&&t&&"string"===typeof t.as){var n=t.as,a=c(n,t.crossOrigin),s="string"===typeof t.integrity?t.integrity:void 0,i="string"===typeof t.fetchPriority?t.fetchPriority:void 0;"style"===n?o.d.S(e,"string"===typeof t.precedence?t.precedence:void 0,{crossOrigin:a,integrity:s,fetchPriority:i}):"script"===n&&o.d.X(e,{crossOrigin:a,integrity:s,fetchPriority:i,nonce:"string"===typeof t.nonce?t.nonce:void 0})}},t.preinitModule=function(e,t){if("string"===typeof e)if("object"===typeof t&&null!==t){if(null==t.as||"script"===t.as){var n=c(t.as,t.crossOrigin);o.d.M(e,{crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0})}}else null==t&&o.d.M(e)},t.preload=function(e,t){if("string"===typeof e&&"object"===typeof t&&null!==t&&"string"===typeof t.as){var n=t.as,a=c(n,t.crossOrigin);o.d.L(e,n,{crossOrigin:a,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0,type:"string"===typeof t.type?t.type:void 0,fetchPriority:"string"===typeof t.fetchPriority?t.fetchPriority:void 0,referrerPolicy:"string"===typeof t.referrerPolicy?t.referrerPolicy:void 0,imageSrcSet:"string"===typeof t.imageSrcSet?t.imageSrcSet:void 0,imageSizes:"string"===typeof t.imageSizes?t.imageSizes:void 0,media:"string"===typeof t.media?t.media:void 0})}},t.preloadModule=function(e,t){if("string"===typeof e)if(t){var n=c(t.as,t.crossOrigin);o.d.m(e,{as:"string"===typeof t.as&&"script"!==t.as?t.as:void 0,crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0})}else o.d.m(e)},t.requestFormReset=function(e){o.d.r(e)},t.unstable_batchedUpdates=function(e,t){return e(t)},t.useFormState=function(e,t,n){return l.H.useFormState(e,t,n)},t.useFormStatus=function(){return l.H.useHostTransitionStatus()},t.version="19.1.1"},910:(e,t,n)=>{n.d(t,{A:()=>Pt});var a={};function s(e,t){return function(){return e.apply(t,arguments)}}n.r(a),n.d(a,{hasBrowserEnv:()=>de,hasStandardBrowserEnv:()=>he,hasStandardBrowserWebWorkerEnv:()=>me,navigator:()=>ue,origin:()=>pe});const{toString:i}=Object.prototype,{getPrototypeOf:o}=Object,{iterator:r,toStringTag:l}=Symbol,c=(d=Object.create(null),e=>{const t=i.call(e);return d[t]||(d[t]=t.slice(8,-1).toLowerCase())});var d;const u=e=>(e=e.toLowerCase(),t=>c(t)===e),h=e=>t=>typeof t===e,{isArray:m}=Array,p=h("undefined");function f(e){return null!==e&&!p(e)&&null!==e.constructor&&!p(e.constructor)&&y(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const g=u("ArrayBuffer");const v=h("string"),y=h("function"),b=h("number"),x=e=>null!==e&&"object"===typeof e,w=e=>{if("object"!==c(e))return!1;const t=o(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(l in e)&&!(r in e)},j=u("Date"),N=u("File"),S=u("Blob"),C=u("FileList"),k=u("URLSearchParams"),[E,A,P,T]=["ReadableStream","Request","Response","Headers"].map(u);function L(e,t){let n,a,{allOwnKeys:s=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),m(e))for(n=0,a=e.length;n<a;n++)t.call(null,e[n],n,e);else{if(f(e))return;const a=s?Object.getOwnPropertyNames(e):Object.keys(e),i=a.length;let o;for(n=0;n<i;n++)o=a[n],t.call(null,e[o],o,e)}}function M(e,t){if(f(e))return null;t=t.toLowerCase();const n=Object.keys(e);let a,s=n.length;for(;s-- >0;)if(a=n[s],t===a.toLowerCase())return a;return null}const I="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:global,O=e=>!p(e)&&e!==I;const _=(D="undefined"!==typeof Uint8Array&&o(Uint8Array),e=>D&&e instanceof D);var D;const R=u("HTMLFormElement"),F=(e=>{let{hasOwnProperty:t}=e;return(e,n)=>t.call(e,n)})(Object.prototype),X=u("RegExp"),U=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),a={};L(n,(n,s)=>{let i;!1!==(i=t(n,s,e))&&(a[s]=i||n)}),Object.defineProperties(e,a)};const z=u("AsyncFunction"),B=((e,t)=>{return e?setImmediate:t?(n="axios@".concat(Math.random()),a=[],I.addEventListener("message",e=>{let{source:t,data:s}=e;t===I&&s===n&&a.length&&a.shift()()},!1),e=>{a.push(e),I.postMessage(n,"*")}):e=>setTimeout(e);var n,a})("function"===typeof setImmediate,y(I.postMessage)),H="undefined"!==typeof queueMicrotask?queueMicrotask.bind(I):"undefined"!==typeof process&&process.nextTick||B,V={isArray:m,isArrayBuffer:g,isBuffer:f,isFormData:e=>{let t;return e&&("function"===typeof FormData&&e instanceof FormData||y(e.append)&&("formdata"===(t=c(e))||"object"===t&&y(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&g(e.buffer),t},isString:v,isNumber:b,isBoolean:e=>!0===e||!1===e,isObject:x,isPlainObject:w,isEmptyObject:e=>{if(!x(e)||f(e))return!1;try{return 0===Object.keys(e).length&&Object.getPrototypeOf(e)===Object.prototype}catch(t){return!1}},isReadableStream:E,isRequest:A,isResponse:P,isHeaders:T,isUndefined:p,isDate:j,isFile:N,isBlob:S,isRegExp:X,isFunction:y,isStream:e=>x(e)&&y(e.pipe),isURLSearchParams:k,isTypedArray:_,isFileList:C,forEach:L,merge:function e(){const{caseless:t}=O(this)&&this||{},n={},a=(a,s)=>{const i=t&&M(n,s)||s;w(n[i])&&w(a)?n[i]=e(n[i],a):w(a)?n[i]=e({},a):m(a)?n[i]=a.slice():n[i]=a};for(let s=0,i=arguments.length;s<i;s++)arguments[s]&&L(arguments[s],a);return n},extend:function(e,t,n){let{allOwnKeys:a}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return L(t,(t,a)=>{n&&y(t)?e[a]=s(t,n):e[a]=t},{allOwnKeys:a}),e},trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,n,a)=>{e.prototype=Object.create(t.prototype,a),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:(e,t,n,a)=>{let s,i,r;const l={};if(t=t||{},null==e)return t;do{for(s=Object.getOwnPropertyNames(e),i=s.length;i-- >0;)r=s[i],a&&!a(r,e,t)||l[r]||(t[r]=e[r],l[r]=!0);e=!1!==n&&o(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:c,kindOfTest:u,endsWith:(e,t,n)=>{e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;const a=e.indexOf(t,n);return-1!==a&&a===n},toArray:e=>{if(!e)return null;if(m(e))return e;let t=e.length;if(!b(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},forEachEntry:(e,t)=>{const n=(e&&e[r]).call(e);let a;for(;(a=n.next())&&!a.done;){const n=a.value;t.call(e,n[0],n[1])}},matchAll:(e,t)=>{let n;const a=[];for(;null!==(n=e.exec(t));)a.push(n);return a},isHTMLForm:R,hasOwnProperty:F,hasOwnProp:F,reduceDescriptors:U,freezeMethods:e=>{U(e,(t,n)=>{if(y(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const a=e[n];y(a)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))})},toObjectSet:(e,t)=>{const n={},a=e=>{e.forEach(e=>{n[e]=!0})};return m(e)?a(e):a(String(e).split(t)),n},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,t,n){return t.toUpperCase()+n}),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:M,global:I,isContextDefined:O,isSpecCompliantForm:function(e){return!!(e&&y(e.append)&&"FormData"===e[l]&&e[r])},toJSONObject:e=>{const t=new Array(10),n=(e,a)=>{if(x(e)){if(t.indexOf(e)>=0)return;if(f(e))return e;if(!("toJSON"in e)){t[a]=e;const s=m(e)?[]:{};return L(e,(e,t)=>{const i=n(e,a+1);!p(i)&&(s[t]=i)}),t[a]=void 0,s}}return e};return n(e,0)},isAsyncFn:z,isThenable:e=>e&&(x(e)||y(e))&&y(e.then)&&y(e.catch),setImmediate:B,asap:H,isIterable:e=>null!=e&&y(e[r])};function q(e,t,n,a,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),a&&(this.request=a),s&&(this.response=s,this.status=s.status?s.status:null)}V.inherits(q,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:V.toJSONObject(this.config),code:this.code,status:this.status}}});const G=q.prototype,W={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{W[e]={value:e}}),Object.defineProperties(q,W),Object.defineProperty(G,"isAxiosError",{value:!0}),q.from=(e,t,n,a,s,i)=>{const o=Object.create(G);return V.toFlatObject(e,o,function(e){return e!==Error.prototype},e=>"isAxiosError"!==e),q.call(o,e.message,t,n,a,s),o.cause=e,o.name=e.name,i&&Object.assign(o,i),o};const K=q;function Q(e){return V.isPlainObject(e)||V.isArray(e)}function J(e){return V.endsWith(e,"[]")?e.slice(0,-2):e}function Y(e,t,n){return e?e.concat(t).map(function(e,t){return e=J(e),!n&&t?"["+e+"]":e}).join(n?".":""):t}const $=V.toFlatObject(V,{},null,function(e){return/^is[A-Z]/.test(e)});const Z=function(e,t,n){if(!V.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const a=(n=V.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(e,t){return!V.isUndefined(t[e])})).metaTokens,s=n.visitor||c,i=n.dots,o=n.indexes,r=(n.Blob||"undefined"!==typeof Blob&&Blob)&&V.isSpecCompliantForm(t);if(!V.isFunction(s))throw new TypeError("visitor must be a function");function l(e){if(null===e)return"";if(V.isDate(e))return e.toISOString();if(V.isBoolean(e))return e.toString();if(!r&&V.isBlob(e))throw new K("Blob is not supported. Use a Buffer instead.");return V.isArrayBuffer(e)||V.isTypedArray(e)?r&&"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}function c(e,n,s){let r=e;if(e&&!s&&"object"===typeof e)if(V.endsWith(n,"{}"))n=a?n:n.slice(0,-2),e=JSON.stringify(e);else if(V.isArray(e)&&function(e){return V.isArray(e)&&!e.some(Q)}(e)||(V.isFileList(e)||V.endsWith(n,"[]"))&&(r=V.toArray(e)))return n=J(n),r.forEach(function(e,a){!V.isUndefined(e)&&null!==e&&t.append(!0===o?Y([n],a,i):null===o?n:n+"[]",l(e))}),!1;return!!Q(e)||(t.append(Y(s,n,i),l(e)),!1)}const d=[],u=Object.assign($,{defaultVisitor:c,convertValue:l,isVisitable:Q});if(!V.isObject(e))throw new TypeError("data must be an object");return function e(n,a){if(!V.isUndefined(n)){if(-1!==d.indexOf(n))throw Error("Circular reference detected in "+a.join("."));d.push(n),V.forEach(n,function(n,i){!0===(!(V.isUndefined(n)||null===n)&&s.call(t,n,V.isString(i)?i.trim():i,a,u))&&e(n,a?a.concat(i):[i])}),d.pop()}}(e),t};function ee(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(e){return t[e]})}function te(e,t){this._pairs=[],e&&Z(e,this,t)}const ne=te.prototype;ne.append=function(e,t){this._pairs.push([e,t])},ne.toString=function(e){const t=e?function(t){return e.call(this,t,ee)}:ee;return this._pairs.map(function(e){return t(e[0])+"="+t(e[1])},"").join("&")};const ae=te;function se(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function ie(e,t,n){if(!t)return e;const a=n&&n.encode||se;V.isFunction(n)&&(n={serialize:n});const s=n&&n.serialize;let i;if(i=s?s(t,n):V.isURLSearchParams(t)?t.toString():new ae(t,n).toString(a),i){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+i}return e}const oe=class{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){V.forEach(this.handlers,function(t){null!==t&&e(t)})}},re={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1};var le=n(555);const ce={isBrowser:!0,classes:{URLSearchParams:"undefined"!==typeof URLSearchParams?URLSearchParams:ae,FormData:"undefined"!==typeof FormData?FormData:null,Blob:"undefined"!==typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},de="undefined"!==typeof window&&"undefined"!==typeof document,ue="object"===typeof navigator&&navigator||void 0,he=de&&(!ue||["ReactNative","NativeScript","NS"].indexOf(ue.product)<0),me="undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts,pe=de&&window.location.href||"http://localhost",fe=(0,le.A)((0,le.A)({},a),ce);const ge=function(e){function t(e,n,a,s){let i=e[s++];if("__proto__"===i)return!0;const o=Number.isFinite(+i),r=s>=e.length;if(i=!i&&V.isArray(a)?a.length:i,r)return V.hasOwnProp(a,i)?a[i]=[a[i],n]:a[i]=n,!o;a[i]&&V.isObject(a[i])||(a[i]=[]);return t(e,n,a[i],s)&&V.isArray(a[i])&&(a[i]=function(e){const t={},n=Object.keys(e);let a;const s=n.length;let i;for(a=0;a<s;a++)i=n[a],t[i]=e[i];return t}(a[i])),!o}if(V.isFormData(e)&&V.isFunction(e.entries)){const n={};return V.forEachEntry(e,(e,a)=>{t(function(e){return V.matchAll(/\w+|\[(\w*)]/g,e).map(e=>"[]"===e[0]?"":e[1]||e[0])}(e),a,n,0)}),n}return null};const ve={transitional:re,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const n=t.getContentType()||"",a=n.indexOf("application/json")>-1,s=V.isObject(e);s&&V.isHTMLForm(e)&&(e=new FormData(e));if(V.isFormData(e))return a?JSON.stringify(ge(e)):e;if(V.isArrayBuffer(e)||V.isBuffer(e)||V.isStream(e)||V.isFile(e)||V.isBlob(e)||V.isReadableStream(e))return e;if(V.isArrayBufferView(e))return e.buffer;if(V.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let i;if(s){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return Z(e,new fe.classes.URLSearchParams,(0,le.A)({visitor:function(e,t,n,a){return fe.isNode&&V.isBuffer(e)?(this.append(t,e.toString("base64")),!1):a.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((i=V.isFileList(e))||n.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return Z(i?{"files[]":e}:e,t&&new t,this.formSerializer)}}return s||a?(t.setContentType("application/json",!1),function(e,t,n){if(V.isString(e))try{return(t||JSON.parse)(e),V.trim(e)}catch(a){if("SyntaxError"!==a.name)throw a}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||ve.transitional,n=t&&t.forcedJSONParsing,a="json"===this.responseType;if(V.isResponse(e)||V.isReadableStream(e))return e;if(e&&V.isString(e)&&(n&&!this.responseType||a)){const n=!(t&&t.silentJSONParsing)&&a;try{return JSON.parse(e)}catch(s){if(n){if("SyntaxError"===s.name)throw K.from(s,K.ERR_BAD_RESPONSE,this,null,this.response);throw s}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:fe.classes.FormData,Blob:fe.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};V.forEach(["delete","get","head","post","put","patch"],e=>{ve.headers[e]={}});const ye=ve,be=V.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),xe=Symbol("internals");function we(e){return e&&String(e).trim().toLowerCase()}function je(e){return!1===e||null==e?e:V.isArray(e)?e.map(je):String(e)}function Ne(e,t,n,a,s){return V.isFunction(a)?a.call(this,t,n):(s&&(t=n),V.isString(t)?V.isString(a)?-1!==t.indexOf(a):V.isRegExp(a)?a.test(t):void 0:void 0)}class Se{constructor(e){e&&this.set(e)}set(e,t,n){const a=this;function s(e,t,n){const s=we(t);if(!s)throw new Error("header name must be a non-empty string");const i=V.findKey(a,s);(!i||void 0===a[i]||!0===n||void 0===n&&!1!==a[i])&&(a[i||t]=je(e))}const i=(e,t)=>V.forEach(e,(e,n)=>s(e,n,t));if(V.isPlainObject(e)||e instanceof this.constructor)i(e,t);else if(V.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))i((e=>{const t={};let n,a,s;return e&&e.split("\n").forEach(function(e){s=e.indexOf(":"),n=e.substring(0,s).trim().toLowerCase(),a=e.substring(s+1).trim(),!n||t[n]&&be[n]||("set-cookie"===n?t[n]?t[n].push(a):t[n]=[a]:t[n]=t[n]?t[n]+", "+a:a)}),t})(e),t);else if(V.isObject(e)&&V.isIterable(e)){let n,a,s={};for(const t of e){if(!V.isArray(t))throw TypeError("Object iterator must return a key-value pair");s[a=t[0]]=(n=s[a])?V.isArray(n)?[...n,t[1]]:[n,t[1]]:t[1]}i(s,t)}else null!=e&&s(t,e,n);return this}get(e,t){if(e=we(e)){const n=V.findKey(this,e);if(n){const e=this[n];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let a;for(;a=n.exec(e);)t[a[1]]=a[2];return t}(e);if(V.isFunction(t))return t.call(this,e,n);if(V.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=we(e)){const n=V.findKey(this,e);return!(!n||void 0===this[n]||t&&!Ne(0,this[n],n,t))}return!1}delete(e,t){const n=this;let a=!1;function s(e){if(e=we(e)){const s=V.findKey(n,e);!s||t&&!Ne(0,n[s],s,t)||(delete n[s],a=!0)}}return V.isArray(e)?e.forEach(s):s(e),a}clear(e){const t=Object.keys(this);let n=t.length,a=!1;for(;n--;){const s=t[n];e&&!Ne(0,this[s],s,e,!0)||(delete this[s],a=!0)}return a}normalize(e){const t=this,n={};return V.forEach(this,(a,s)=>{const i=V.findKey(n,s);if(i)return t[i]=je(a),void delete t[s];const o=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,n)=>t.toUpperCase()+n)}(s):String(s).trim();o!==s&&delete t[s],t[o]=je(a),n[o]=!0}),this}concat(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.constructor.concat(this,...t)}toJSON(e){const t=Object.create(null);return V.forEach(this,(n,a)=>{null!=n&&!1!==n&&(t[a]=e&&V.isArray(n)?n.join(", "):n)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(e=>{let[t,n]=e;return t+": "+n}).join("\n")}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e){const t=new this(e);for(var n=arguments.length,a=new Array(n>1?n-1:0),s=1;s<n;s++)a[s-1]=arguments[s];return a.forEach(e=>t.set(e)),t}static accessor(e){const t=(this[xe]=this[xe]={accessors:{}}).accessors,n=this.prototype;function a(e){const a=we(e);t[a]||(!function(e,t){const n=V.toCamelCase(" "+t);["get","set","has"].forEach(a=>{Object.defineProperty(e,a+n,{value:function(e,n,s){return this[a].call(this,t,e,n,s)},configurable:!0})})}(n,e),t[a]=!0)}return V.isArray(e)?e.forEach(a):a(e),this}}Se.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),V.reduceDescriptors(Se.prototype,(e,t)=>{let{value:n}=e,a=t[0].toUpperCase()+t.slice(1);return{get:()=>n,set(e){this[a]=e}}}),V.freezeMethods(Se);const Ce=Se;function ke(e,t){const n=this||ye,a=t||n,s=Ce.from(a.headers);let i=a.data;return V.forEach(e,function(e){i=e.call(n,i,s.normalize(),t?t.status:void 0)}),s.normalize(),i}function Ee(e){return!(!e||!e.__CANCEL__)}function Ae(e,t,n){K.call(this,null==e?"canceled":e,K.ERR_CANCELED,t,n),this.name="CanceledError"}V.inherits(Ae,K,{__CANCEL__:!0});const Pe=Ae;function Te(e,t,n){const a=n.config.validateStatus;n.status&&a&&!a(n.status)?t(new K("Request failed with status code "+n.status,[K.ERR_BAD_REQUEST,K.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}const Le=function(e,t){e=e||10;const n=new Array(e),a=new Array(e);let s,i=0,o=0;return t=void 0!==t?t:1e3,function(r){const l=Date.now(),c=a[o];s||(s=l),n[i]=r,a[i]=l;let d=o,u=0;for(;d!==i;)u+=n[d++],d%=e;if(i=(i+1)%e,i===o&&(o=(o+1)%e),l-s<t)return;const h=c&&l-c;return h?Math.round(1e3*u/h):void 0}};const Me=function(e,t){let n,a,s=0,i=1e3/t;const o=function(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now();s=i,n=null,a&&(clearTimeout(a),a=null),e(...t)};return[function(){const e=Date.now(),t=e-s;for(var r=arguments.length,l=new Array(r),c=0;c<r;c++)l[c]=arguments[c];t>=i?o(l,e):(n=l,a||(a=setTimeout(()=>{a=null,o(n)},i-t)))},()=>n&&o(n)]},Ie=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,a=0;const s=Le(50,250);return Me(n=>{const i=n.loaded,o=n.lengthComputable?n.total:void 0,r=i-a,l=s(r);a=i;e({loaded:i,total:o,progress:o?i/o:void 0,bytes:r,rate:l||void 0,estimated:l&&o&&i<=o?(o-i)/l:void 0,event:n,lengthComputable:null!=o,[t?"download":"upload"]:!0})},n)},Oe=(e,t)=>{const n=null!=e;return[a=>t[0]({lengthComputable:n,total:e,loaded:a}),t[1]]},_e=e=>function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return V.asap(()=>e(...n))},De=fe.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,fe.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(fe.origin),fe.navigator&&/(msie|trident)/i.test(fe.navigator.userAgent)):()=>!0,Re=fe.hasStandardBrowserEnv?{write(e,t,n,a,s,i){const o=[e+"="+encodeURIComponent(t)];V.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),V.isString(a)&&o.push("path="+a),V.isString(s)&&o.push("domain="+s),!0===i&&o.push("secure"),document.cookie=o.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function Fe(e,t,n){let a=!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t);return e&&(a||0==n)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const Xe=e=>e instanceof Ce?(0,le.A)({},e):e;function Ue(e,t){t=t||{};const n={};function a(e,t,n,a){return V.isPlainObject(e)&&V.isPlainObject(t)?V.merge.call({caseless:a},e,t):V.isPlainObject(t)?V.merge({},t):V.isArray(t)?t.slice():t}function s(e,t,n,s){return V.isUndefined(t)?V.isUndefined(e)?void 0:a(void 0,e,0,s):a(e,t,0,s)}function i(e,t){if(!V.isUndefined(t))return a(void 0,t)}function o(e,t){return V.isUndefined(t)?V.isUndefined(e)?void 0:a(void 0,e):a(void 0,t)}function r(n,s,i){return i in t?a(n,s):i in e?a(void 0,n):void 0}const l={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:r,headers:(e,t,n)=>s(Xe(e),Xe(t),0,!0)};return V.forEach(Object.keys((0,le.A)((0,le.A)({},e),t)),function(a){const i=l[a]||s,o=i(e[a],t[a],a);V.isUndefined(o)&&i!==r||(n[a]=o)}),n}const ze=e=>{const t=Ue({},e);let n,{data:a,withXSRFToken:s,xsrfHeaderName:i,xsrfCookieName:o,headers:r,auth:l}=t;if(t.headers=r=Ce.from(r),t.url=ie(Fe(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),l&&r.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),V.isFormData(a))if(fe.hasStandardBrowserEnv||fe.hasStandardBrowserWebWorkerEnv)r.setContentType(void 0);else if(!1!==(n=r.getContentType())){const[e,...t]=n?n.split(";").map(e=>e.trim()).filter(Boolean):[];r.setContentType([e||"multipart/form-data",...t].join("; "))}if(fe.hasStandardBrowserEnv&&(s&&V.isFunction(s)&&(s=s(t)),s||!1!==s&&De(t.url))){const e=i&&o&&Re.read(o);e&&r.set(i,e)}return t},Be="undefined"!==typeof XMLHttpRequest&&function(e){return new Promise(function(t,n){const a=ze(e);let s=a.data;const i=Ce.from(a.headers).normalize();let o,r,l,c,d,{responseType:u,onUploadProgress:h,onDownloadProgress:m}=a;function p(){c&&c(),d&&d(),a.cancelToken&&a.cancelToken.unsubscribe(o),a.signal&&a.signal.removeEventListener("abort",o)}let f=new XMLHttpRequest;function g(){if(!f)return;const a=Ce.from("getAllResponseHeaders"in f&&f.getAllResponseHeaders());Te(function(e){t(e),p()},function(e){n(e),p()},{data:u&&"text"!==u&&"json"!==u?f.response:f.responseText,status:f.status,statusText:f.statusText,headers:a,config:e,request:f}),f=null}f.open(a.method.toUpperCase(),a.url,!0),f.timeout=a.timeout,"onloadend"in f?f.onloadend=g:f.onreadystatechange=function(){f&&4===f.readyState&&(0!==f.status||f.responseURL&&0===f.responseURL.indexOf("file:"))&&setTimeout(g)},f.onabort=function(){f&&(n(new K("Request aborted",K.ECONNABORTED,e,f)),f=null)},f.onerror=function(){n(new K("Network Error",K.ERR_NETWORK,e,f)),f=null},f.ontimeout=function(){let t=a.timeout?"timeout of "+a.timeout+"ms exceeded":"timeout exceeded";const s=a.transitional||re;a.timeoutErrorMessage&&(t=a.timeoutErrorMessage),n(new K(t,s.clarifyTimeoutError?K.ETIMEDOUT:K.ECONNABORTED,e,f)),f=null},void 0===s&&i.setContentType(null),"setRequestHeader"in f&&V.forEach(i.toJSON(),function(e,t){f.setRequestHeader(t,e)}),V.isUndefined(a.withCredentials)||(f.withCredentials=!!a.withCredentials),u&&"json"!==u&&(f.responseType=a.responseType),m&&([l,d]=Ie(m,!0),f.addEventListener("progress",l)),h&&f.upload&&([r,c]=Ie(h),f.upload.addEventListener("progress",r),f.upload.addEventListener("loadend",c)),(a.cancelToken||a.signal)&&(o=t=>{f&&(n(!t||t.type?new Pe(null,e,f):t),f.abort(),f=null)},a.cancelToken&&a.cancelToken.subscribe(o),a.signal&&(a.signal.aborted?o():a.signal.addEventListener("abort",o)));const v=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(a.url);v&&-1===fe.protocols.indexOf(v)?n(new K("Unsupported protocol "+v+":",K.ERR_BAD_REQUEST,e)):f.send(s||null)})},He=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let n,a=new AbortController;const s=function(e){if(!n){n=!0,o();const t=e instanceof Error?e:this.reason;a.abort(t instanceof K?t:new Pe(t instanceof Error?t.message:t))}};let i=t&&setTimeout(()=>{i=null,s(new K("timeout ".concat(t," of ms exceeded"),K.ETIMEDOUT))},t);const o=()=>{e&&(i&&clearTimeout(i),i=null,e.forEach(e=>{e.unsubscribe?e.unsubscribe(s):e.removeEventListener("abort",s)}),e=null)};e.forEach(e=>e.addEventListener("abort",s));const{signal:r}=a;return r.unsubscribe=()=>V.asap(o),r}};function Ve(e,t){this.v=e,this.k=t}function qe(e){return function(){return new Ge(e.apply(this,arguments))}}function Ge(e){var t,n;function a(t,n){try{var i=e[t](n),o=i.value,r=o instanceof Ve;Promise.resolve(r?o.v:o).then(function(n){if(r){var l="return"===t?"return":"next";if(!o.k||n.done)return a(l,n);n=e[l](n).value}s(i.done?"return":"normal",n)},function(e){a("throw",e)})}catch(e){s("throw",e)}}function s(e,s){switch(e){case"return":t.resolve({value:s,done:!0});break;case"throw":t.reject(s);break;default:t.resolve({value:s,done:!1})}(t=t.next)?a(t.key,t.arg):n=null}this._invoke=function(e,s){return new Promise(function(i,o){var r={key:e,arg:s,resolve:i,reject:o,next:null};n?n=n.next=r:(t=n=r,a(e,s))})},"function"!=typeof e.return&&(this.return=void 0)}function We(e){return new Ve(e,0)}function Ke(e){var t={},n=!1;function a(t,a){return n=!0,a=new Promise(function(n){n(e[t](a))}),{done:!1,value:new Ve(a,1)}}return t["undefined"!=typeof Symbol&&Symbol.iterator||"@@iterator"]=function(){return this},t.next=function(e){return n?(n=!1,e):a("next",e)},"function"==typeof e.throw&&(t.throw=function(e){if(n)throw n=!1,e;return a("throw",e)}),"function"==typeof e.return&&(t.return=function(e){return n?(n=!1,e):a("return",e)}),t}function Qe(e){var t,n,a,s=2;for("undefined"!=typeof Symbol&&(n=Symbol.asyncIterator,a=Symbol.iterator);s--;){if(n&&null!=(t=e[n]))return t.call(e);if(a&&null!=(t=e[a]))return new Je(t.call(e));n="@@asyncIterator",a="@@iterator"}throw new TypeError("Object is not async iterable")}function Je(e){function t(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then(function(e){return{value:e,done:t}})}return Je=function(e){this.s=e,this.n=e.next},Je.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var n=this.s.return;return void 0===n?Promise.resolve({value:e,done:!0}):t(n.apply(this.s,arguments))},throw:function(e){var n=this.s.return;return void 0===n?Promise.reject(e):t(n.apply(this.s,arguments))}},new Je(e)}Ge.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},Ge.prototype.next=function(e){return this._invoke("next",e)},Ge.prototype.throw=function(e){return this._invoke("throw",e)},Ge.prototype.return=function(e){return this._invoke("return",e)};const Ye=function*(e,t){let n=e.byteLength;if(!t||n<t)return void(yield e);let a,s=0;for(;s<n;)a=s+t,yield e.slice(s,a),s=a},$e=function(){var e=qe(function*(e,t){var n,a=!1,s=!1;try{for(var i,o=Qe(Ze(e));a=!(i=yield We(o.next())).done;a=!1){const e=i.value;yield*Ke(Qe(Ye(e,t)))}}catch(r){s=!0,n=r}finally{try{a&&null!=o.return&&(yield We(o.return()))}finally{if(s)throw n}}});return function(t,n){return e.apply(this,arguments)}}(),Ze=function(){var e=qe(function*(e){if(e[Symbol.asyncIterator])return void(yield*Ke(Qe(e)));const t=e.getReader();try{for(;;){const{done:e,value:n}=yield We(t.read());if(e)break;yield n}}finally{yield We(t.cancel())}});return function(t){return e.apply(this,arguments)}}(),et=(e,t,n,a)=>{const s=$e(e,t);let i,o=0,r=e=>{i||(i=!0,a&&a(e))};return new ReadableStream({async pull(e){try{const{done:t,value:a}=await s.next();if(t)return r(),void e.close();let i=a.byteLength;if(n){let e=o+=i;n(e)}e.enqueue(new Uint8Array(a))}catch(t){throw r(t),t}},cancel:e=>(r(e),s.return())},{highWaterMark:2})},tt="function"===typeof fetch&&"function"===typeof Request&&"function"===typeof Response,nt=tt&&"function"===typeof ReadableStream,at=tt&&("function"===typeof TextEncoder?(st=new TextEncoder,e=>st.encode(e)):async e=>new Uint8Array(await new Response(e).arrayBuffer()));var st;const it=function(e){try{for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];return!!e(...n)}catch(s){return!1}},ot=nt&&it(()=>{let e=!1;const t=new Request(fe.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),rt=nt&&it(()=>V.isReadableStream(new Response("").body)),lt={stream:rt&&(e=>e.body)};var ct;tt&&(ct=new Response,["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!lt[e]&&(lt[e]=V.isFunction(ct[e])?t=>t[e]():(t,n)=>{throw new K("Response type '".concat(e,"' is not supported"),K.ERR_NOT_SUPPORT,n)})}));const dt=async(e,t)=>{const n=V.toFiniteNumber(e.getContentLength());return null==n?(async e=>{if(null==e)return 0;if(V.isBlob(e))return e.size;if(V.isSpecCompliantForm(e)){const t=new Request(fe.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return V.isArrayBufferView(e)||V.isArrayBuffer(e)?e.byteLength:(V.isURLSearchParams(e)&&(e+=""),V.isString(e)?(await at(e)).byteLength:void 0)})(t):n},ut={http:null,xhr:Be,fetch:tt&&(async e=>{let{url:t,method:n,data:a,signal:s,cancelToken:i,timeout:o,onDownloadProgress:r,onUploadProgress:l,responseType:c,headers:d,withCredentials:u="same-origin",fetchOptions:h}=ze(e);c=c?(c+"").toLowerCase():"text";let m,p=He([s,i&&i.toAbortSignal()],o);const f=p&&p.unsubscribe&&(()=>{p.unsubscribe()});let g;try{if(l&&ot&&"get"!==n&&"head"!==n&&0!==(g=await dt(d,a))){let e,n=new Request(t,{method:"POST",body:a,duplex:"half"});if(V.isFormData(a)&&(e=n.headers.get("content-type"))&&d.setContentType(e),n.body){const[e,t]=Oe(g,Ie(_e(l)));a=et(n.body,65536,e,t)}}V.isString(u)||(u=u?"include":"omit");const s="credentials"in Request.prototype;m=new Request(t,(0,le.A)((0,le.A)({},h),{},{signal:p,method:n.toUpperCase(),headers:d.normalize().toJSON(),body:a,duplex:"half",credentials:s?u:void 0}));let i=await fetch(m,h);const o=rt&&("stream"===c||"response"===c);if(rt&&(r||o&&f)){const e={};["status","statusText","headers"].forEach(t=>{e[t]=i[t]});const t=V.toFiniteNumber(i.headers.get("content-length")),[n,a]=r&&Oe(t,Ie(_e(r),!0))||[];i=new Response(et(i.body,65536,n,()=>{a&&a(),f&&f()}),e)}c=c||"text";let v=await lt[V.findKey(lt,c)||"text"](i,e);return!o&&f&&f(),await new Promise((t,n)=>{Te(t,n,{data:v,headers:Ce.from(i.headers),status:i.status,statusText:i.statusText,config:e,request:m})})}catch(v){if(f&&f(),v&&"TypeError"===v.name&&/Load failed|fetch/i.test(v.message))throw Object.assign(new K("Network Error",K.ERR_NETWORK,e,m),{cause:v.cause||v});throw K.from(v,v&&v.code,e,m)}})};V.forEach(ut,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(n){}Object.defineProperty(e,"adapterName",{value:t})}});const ht=e=>"- ".concat(e),mt=e=>V.isFunction(e)||null===e||!1===e,pt=e=>{e=V.isArray(e)?e:[e];const{length:t}=e;let n,a;const s={};for(let i=0;i<t;i++){let t;if(n=e[i],a=n,!mt(n)&&(a=ut[(t=String(n)).toLowerCase()],void 0===a))throw new K("Unknown adapter '".concat(t,"'"));if(a)break;s[t||"#"+i]=a}if(!a){const e=Object.entries(s).map(e=>{let[t,n]=e;return"adapter ".concat(t," ")+(!1===n?"is not supported by the environment":"is not available in the build")});let n=t?e.length>1?"since :\n"+e.map(ht).join("\n"):" "+ht(e[0]):"as no adapter specified";throw new K("There is no suitable adapter to dispatch the request "+n,"ERR_NOT_SUPPORT")}return a};function ft(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Pe(null,e)}function gt(e){ft(e),e.headers=Ce.from(e.headers),e.data=ke.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return pt(e.adapter||ye.adapter)(e).then(function(t){return ft(e),t.data=ke.call(e,e.transformResponse,t),t.headers=Ce.from(t.headers),t},function(t){return Ee(t)||(ft(e),t&&t.response&&(t.response.data=ke.call(e,e.transformResponse,t.response),t.response.headers=Ce.from(t.response.headers))),Promise.reject(t)})}const vt="1.11.0",yt={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{yt[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});const bt={};yt.transitional=function(e,t,n){function a(e,t){return"[Axios v"+vt+"] Transitional option '"+e+"'"+t+(n?". "+n:"")}return(n,s,i)=>{if(!1===e)throw new K(a(s," has been removed"+(t?" in "+t:"")),K.ERR_DEPRECATED);return t&&!bt[s]&&(bt[s]=!0,console.warn(a(s," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,s,i)}},yt.spelling=function(e){return(t,n)=>(console.warn("".concat(n," is likely a misspelling of ").concat(e)),!0)};const xt={assertOptions:function(e,t,n){if("object"!==typeof e)throw new K("options must be an object",K.ERR_BAD_OPTION_VALUE);const a=Object.keys(e);let s=a.length;for(;s-- >0;){const i=a[s],o=t[i];if(o){const t=e[i],n=void 0===t||o(t,i,e);if(!0!==n)throw new K("option "+i+" must be "+n,K.ERR_BAD_OPTION_VALUE);continue}if(!0!==n)throw new K("Unknown option "+i,K.ERR_BAD_OPTION)}},validators:yt},wt=xt.validators;class jt{constructor(e){this.defaults=e||{},this.interceptors={request:new oe,response:new oe}}async request(e,t){try{return await this._request(e,t)}catch(n){if(n instanceof Error){let e={};Error.captureStackTrace?Error.captureStackTrace(e):e=new Error;const t=e.stack?e.stack.replace(/^.+\n/,""):"";try{n.stack?t&&!String(n.stack).endsWith(t.replace(/^.+\n.+\n/,""))&&(n.stack+="\n"+t):n.stack=t}catch(a){}}throw n}}_request(e,t){"string"===typeof e?(t=t||{}).url=e:t=e||{},t=Ue(this.defaults,t);const{transitional:n,paramsSerializer:a,headers:s}=t;void 0!==n&&xt.assertOptions(n,{silentJSONParsing:wt.transitional(wt.boolean),forcedJSONParsing:wt.transitional(wt.boolean),clarifyTimeoutError:wt.transitional(wt.boolean)},!1),null!=a&&(V.isFunction(a)?t.paramsSerializer={serialize:a}:xt.assertOptions(a,{encode:wt.function,serialize:wt.function},!0)),void 0!==t.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),xt.assertOptions(t,{baseUrl:wt.spelling("baseURL"),withXsrfToken:wt.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let i=s&&V.merge(s.common,s[t.method]);s&&V.forEach(["delete","get","head","post","put","patch","common"],e=>{delete s[e]}),t.headers=Ce.concat(i,s);const o=[];let r=!0;this.interceptors.request.forEach(function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(r=r&&e.synchronous,o.unshift(e.fulfilled,e.rejected))});const l=[];let c;this.interceptors.response.forEach(function(e){l.push(e.fulfilled,e.rejected)});let d,u=0;if(!r){const e=[gt.bind(this),void 0];for(e.unshift(...o),e.push(...l),d=e.length,c=Promise.resolve(t);u<d;)c=c.then(e[u++],e[u++]);return c}d=o.length;let h=t;for(u=0;u<d;){const e=o[u++],t=o[u++];try{h=e(h)}catch(m){t.call(this,m);break}}try{c=gt.call(this,h)}catch(m){return Promise.reject(m)}for(u=0,d=l.length;u<d;)c=c.then(l[u++],l[u++]);return c}getUri(e){return ie(Fe((e=Ue(this.defaults,e)).baseURL,e.url,e.allowAbsoluteUrls),e.params,e.paramsSerializer)}}V.forEach(["delete","get","head","options"],function(e){jt.prototype[e]=function(t,n){return this.request(Ue(n||{},{method:e,url:t,data:(n||{}).data}))}}),V.forEach(["post","put","patch"],function(e){function t(t){return function(n,a,s){return this.request(Ue(s||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:a}))}}jt.prototype[e]=t(),jt.prototype[e+"Form"]=t(!0)});const Nt=jt;class St{constructor(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(e){t=e});const n=this;this.promise.then(e=>{if(!n._listeners)return;let t=n._listeners.length;for(;t-- >0;)n._listeners[t](e);n._listeners=null}),this.promise.then=e=>{let t;const a=new Promise(e=>{n.subscribe(e),t=e}).then(e);return a.cancel=function(){n.unsubscribe(t)},a},e(function(e,a,s){n.reason||(n.reason=new Pe(e,a,s),t(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new St(function(t){e=t}),cancel:e}}}const Ct=St;const kt={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(kt).forEach(e=>{let[t,n]=e;kt[n]=t});const Et=kt;const At=function e(t){const n=new Nt(t),a=s(Nt.prototype.request,n);return V.extend(a,Nt.prototype,n,{allOwnKeys:!0}),V.extend(a,n,null,{allOwnKeys:!0}),a.create=function(n){return e(Ue(t,n))},a}(ye);At.Axios=Nt,At.CanceledError=Pe,At.CancelToken=Ct,At.isCancel=Ee,At.VERSION=vt,At.toFormData=Z,At.AxiosError=K,At.Cancel=At.CanceledError,At.all=function(e){return Promise.all(e)},At.spread=function(e){return function(t){return e.apply(null,t)}},At.isAxiosError=function(e){return V.isObject(e)&&!0===e.isAxiosError},At.mergeConfig=Ue,At.AxiosHeaders=Ce,At.formToJSON=e=>ge(V.isHTMLForm(e)?new FormData(e):e),At.getAdapter=pt,At.HttpStatusCode=Et,At.default=At;const Pt=At},916:(e,t)=>{var n=Symbol.for("react.transitional.element"),a=Symbol.for("react.fragment");function s(e,t,a){var s=null;if(void 0!==a&&(s=""+a),void 0!==t.key&&(s=""+t.key),"key"in t)for(var i in a={},t)"key"!==i&&(a[i]=t[i]);else a=t;return t=a.ref,{$$typeof:n,type:e,key:s,ref:void 0!==t?t:null,props:a}}t.Fragment=a,t.jsx=s,t.jsxs=s},932:(e,t,n)=>{n.r(t),n.d(t,{default:()=>i});var a=n(950),s=n(414);const i=e=>{let{isOpen:t,onClose:n,onSubmit:i}=e;const[o,r]=(0,a.useState)("general"),[l,c]=(0,a.useState)(""),[d,u]=(0,a.useState)(""),[h,m]=(0,a.useState)(""),[p,f]=(0,a.useState)(0),[g,v]=(0,a.useState)(""),[y,b]=(0,a.useState)("medium"),[x,w]=(0,a.useState)([]),[j,N]=(0,a.useState)(!1),[S,C]=(0,a.useState)(!1),[k,E]=(0,a.useState)({});(0,a.useEffect)(()=>{t&&(r("general"),c(""),u(""),m(""),f(0),v(""),b("medium"),w([]),N(!1),C(!1),E({}))},[t]),(0,a.useEffect)(()=>(document.body.style.overflow=t?"hidden":"unset",()=>{document.body.style.overflow="unset"}),[t]);const A=[{value:"bug",label:"Bug Report",icon:"\ud83d\udc1b",color:"#ff4757"},{value:"feature",label:"Feature Request",icon:"\ud83d\udca1",color:"#3742fa"},{value:"improvement",label:"Improvement",icon:"\u26a1",color:"#2ed573"},{value:"general",label:"General Feedback",icon:"\ud83d\udcac",color:"#5352ed"},{value:"question",label:"Question",icon:"\u2753",color:"#ff6b35"},{value:"compliment",label:"Compliment",icon:"\ud83c\udf89",color:"#26de81"}],P={bug:["UI/UX","Performance","Authentication","Messaging","Profile","Mobile","Other"],feature:["Chat Features","Profile Features","Mobile App","Integrations","Settings","Other"],improvement:["Speed","Design","Usability","Accessibility","Mobile Experience","Other"],general:["Overall Experience","Design","Performance","Features","Support","Other"],question:["How to Use","Account","Features","Technical","Billing","Other"],compliment:["Design","Features","Performance","Support","Overall","Other"]},T=A.find(e=>e.value===o);return t?(0,s.jsx)("div",{className:"feedback-modal-backdrop",onClick:e=>e.target===e.currentTarget&&n(),children:(0,s.jsx)("div",{className:"feedback-modal",children:S?(0,s.jsxs)("div",{className:"feedback-success",children:[(0,s.jsx)("div",{className:"success-icon",children:"\u2705"}),(0,s.jsx)("h3",{children:"Thank you for your feedback!"}),(0,s.jsx)("p",{children:"We appreciate your input and will review it soon."})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"feedback-modal-header",children:[(0,s.jsx)("h2",{children:"Share Your Feedback"}),(0,s.jsx)("button",{className:"feedback-close-btn",onClick:n,children:"\xd7"})]}),(0,s.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),(()=>{const e={};return l.trim()||(e.title="Title is required"),d.trim()?d.trim().length<10&&(e.description="Description must be at least 10 characters"):e.description="Description is required",h&&!/\S+@\S+\.\S+/.test(h)&&(e.email="Please enter a valid email address"),"bug"!==o||g||(e.category="Please select a category for bug reports"),E(e),0===Object.keys(e).length})()){N(!0);try{const e={type:o,title:l.trim(),description:d.trim(),email:h.trim(),rating:p,category:g,priority:y,attachments:x,timestamp:(new Date).toISOString(),userAgent:navigator.userAgent,url:window.location.href};await new Promise(e=>setTimeout(e,1500)),i&&await i(e),C(!0),setTimeout(()=>{C(!1),n()},2e3)}catch(t){console.error("Failed to submit feedback:",t),E({submit:"Failed to submit feedback. Please try again."})}finally{N(!1)}}},className:"feedback-form",children:[(0,s.jsxs)("div",{className:"feedback-section",children:[(0,s.jsx)("label",{className:"feedback-label",children:"What type of feedback do you have?"}),(0,s.jsx)("div",{className:"feedback-types",children:A.map(e=>(0,s.jsxs)("button",{type:"button",className:"feedback-type-btn ".concat(o===e.value?"active":""),onClick:()=>{r(e.value),v("")},style:{"--type-color":e.color},children:[(0,s.jsx)("span",{className:"feedback-type-icon",children:e.icon}),(0,s.jsx)("span",{className:"feedback-type-label",children:e.label})]},e.value))})]}),(0,s.jsxs)("div",{className:"feedback-section",children:[(0,s.jsxs)("label",{className:"feedback-label",children:["Title ",(0,s.jsx)("span",{className:"required",children:"*"})]}),(0,s.jsx)("input",{type:"text",value:l,onChange:e=>c(e.target.value),placeholder:"Brief ".concat(null===T||void 0===T?void 0:T.label.toLowerCase()," title..."),className:"feedback-input ".concat(k.title?"error":""),maxLength:100}),k.title&&(0,s.jsx)("span",{className:"feedback-error",children:k.title})]}),P[o]&&(0,s.jsxs)("div",{className:"feedback-section",children:[(0,s.jsxs)("label",{className:"feedback-label",children:["Category ","bug"===o&&(0,s.jsx)("span",{className:"required",children:"*"})]}),(0,s.jsxs)("select",{value:g,onChange:e=>v(e.target.value),className:"feedback-select ".concat(k.category?"error":""),children:[(0,s.jsx)("option",{value:"",children:"Select a category..."}),P[o].map(e=>(0,s.jsx)("option",{value:e,children:e},e))]}),k.category&&(0,s.jsx)("span",{className:"feedback-error",children:k.category})]}),("bug"===o||"feature"===o)&&(0,s.jsxs)("div",{className:"feedback-section",children:[(0,s.jsx)("label",{className:"feedback-label",children:"Priority"}),(0,s.jsx)("div",{className:"priority-buttons",children:["low","medium","high","critical"].map(e=>(0,s.jsx)("button",{type:"button",className:"priority-btn ".concat(y===e?"active":""," priority-").concat(e),onClick:()=>b(e),children:e.charAt(0).toUpperCase()+e.slice(1)},e))})]}),("general"===o||"compliment"===o)&&(0,s.jsxs)("div",{className:"feedback-section",children:[(0,s.jsx)("label",{className:"feedback-label",children:"How would you rate your experience?"}),(0,s.jsx)("div",{className:"rating-stars",children:[1,2,3,4,5].map(e=>(0,s.jsx)("button",{type:"button",className:"star-btn ".concat(e<=p?"active":""),onClick:()=>{f(e)},children:"\u2b50"},e))})]}),(0,s.jsxs)("div",{className:"feedback-section",children:[(0,s.jsxs)("label",{className:"feedback-label",children:["Description ",(0,s.jsx)("span",{className:"required",children:"*"})]}),(0,s.jsx)("textarea",{value:d,onChange:e=>u(e.target.value),placeholder:"Please provide detailed ".concat(null===T||void 0===T?void 0:T.label.toLowerCase(),"..."),className:"feedback-textarea ".concat(k.description?"error":""),rows:5,maxLength:2e3}),(0,s.jsxs)("div",{className:"char-count",children:[d.length,"/2000"]}),k.description&&(0,s.jsx)("span",{className:"feedback-error",children:k.description})]}),(0,s.jsxs)("div",{className:"feedback-section",children:[(0,s.jsx)("label",{className:"feedback-label",children:"Email (optional)"}),(0,s.jsx)("input",{type:"email",value:h,onChange:e=>m(e.target.value),placeholder:"your.email@example.com",className:"feedback-input ".concat(k.email?"error":"")}),(0,s.jsx)("div",{className:"feedback-hint",children:"We'll only use this to follow up on your feedback"}),k.email&&(0,s.jsx)("span",{className:"feedback-error",children:k.email})]}),(0,s.jsxs)("div",{className:"feedback-section",children:[(0,s.jsx)("label",{className:"feedback-label",children:"Attachments (optional)"}),(0,s.jsxs)("div",{className:"file-upload-area",children:[(0,s.jsx)("input",{type:"file",id:"feedback-files",multiple:!0,accept:".jpg,.jpeg,.png,.gif,.txt,.pdf",onChange:e=>{const t=Array.from(e.target.files).filter(e=>["image/jpeg","image/png","image/gif","text/plain","application/pdf"].includes(e.type)&&e.size<=5242880);w(e=>[...e,...t].slice(0,3))},className:"file-input-hidden"}),(0,s.jsx)("label",{htmlFor:"feedback-files",className:"file-upload-btn",children:"\ud83d\udcce Add Files"}),(0,s.jsx)("div",{className:"file-upload-hint",children:"Images, PDFs, or text files (max 5MB each, 3 files total)"})]}),x.length>0&&(0,s.jsx)("div",{className:"attachment-list",children:x.map((e,t)=>(0,s.jsxs)("div",{className:"attachment-item",children:[(0,s.jsx)("span",{className:"attachment-name",children:e.name}),(0,s.jsx)("button",{type:"button",className:"remove-attachment",onClick:()=>(e=>{w(t=>t.filter((t,n)=>n!==e))})(t),children:"\xd7"})]},t))})]}),k.submit&&(0,s.jsx)("div",{className:"feedback-error submit-error",children:k.submit}),(0,s.jsxs)("div",{className:"feedback-actions",children:[(0,s.jsx)("button",{type:"button",className:"feedback-btn secondary",onClick:n,disabled:j,children:"Cancel"}),(0,s.jsx)("button",{type:"submit",className:"feedback-btn primary",disabled:j,style:{"--type-color":null===T||void 0===T?void 0:T.color},children:j?(0,s.jsxs)("span",{className:"submitting",children:[(0,s.jsx)("div",{className:"spinner"}),"Submitting..."]}):"Submit ".concat(null===T||void 0===T?void 0:T.label)})]})]})]})})}):null}},950:(e,t,n)=>{e.exports=n(983)},955:(e,t,n)=>{n.d(t,{e:()=>i});var a=n(555);const s="contacts";const i=new class{constructor(){this.db=null,this.isInitialized=!1,this.initPromise=this.init()}async init(){if(!this.isInitialized)return new Promise((e,t)=>{const n=indexedDB.open("quibishContacts",1);n.onerror=()=>{console.error("Failed to open contacts database"),t(n.error)},n.onsuccess=()=>{this.db=n.result,this.isInitialized=!0,console.log("\ud83d\udcc7 Contact database initialized"),e()},n.onupgradeneeded=e=>{const t=e.target.result;if(!t.objectStoreNames.contains(s)){const e=t.createObjectStore(s,{keyPath:"id"});e.createIndex("name","name",{unique:!1}),e.createIndex("email","email",{unique:!1}),e.createIndex("phone","phone",{unique:!1}),e.createIndex("category","category",{unique:!1}),e.createIndex("isFavorite","isFavorite",{unique:!1}),e.createIndex("lastContacted","lastContacted",{unique:!1}),e.createIndex("createdAt","createdAt",{unique:!1})}}})}async ensureReady(){this.isInitialized||await this.initPromise}async getAllContacts(){return await this.ensureReady(),new Promise((e,t)=>{const n=this.db.transaction([s],"readonly").objectStore(s).getAll();n.onsuccess=()=>{const t=n.result||[],a=this.calculateContactStats(t);e({contacts:t.sort((e,t)=>e.name.localeCompare(t.name)),stats:a})},n.onerror=()=>{console.error("Failed to get contacts"),t(n.error)}})}calculateContactStats(e){const t=new Date,n=new Date(t.getTime()-6048e5);return{total:e.length,favorites:e.filter(e=>e.isFavorite).length,recentlyAdded:e.filter(e=>new Date(e.createdAt)>n).length,frequentlyContacted:e.filter(e=>(e.contactCount||0)>5).length,categories:{work:e.filter(e=>"work"===e.category||e.company).length,family:e.filter(e=>"family"===e.category).length,friends:e.filter(e=>"friends"===e.category).length,business:e.filter(e=>"business"===e.category).length,other:e.filter(e=>"other"===e.category||!e.category).length}}}async findDuplicates(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const{contacts:n}=await this.getAllContacts();return n.filter(n=>{if(t&&n.id===t)return!1;if(e.name&&n.name&&e.name.toLowerCase().trim()===n.name.toLowerCase().trim())return!0;if(e.emails&&n.emails){const t=e.emails.map(e=>e.value.toLowerCase().trim()).filter(e=>e),a=n.emails.map(e=>e.value.toLowerCase().trim()).filter(e=>e);if(t.some(e=>a.includes(e)))return!0}if(e.email&&n.email&&e.email.toLowerCase().trim()===n.email.toLowerCase().trim())return!0;if(e.phones&&n.phones){const t=e.phones.map(e=>this.normalizePhone(e.value)).filter(e=>e),a=n.phones.map(e=>this.normalizePhone(e.value)).filter(e=>e);if(t.some(e=>a.includes(e)))return!0}return!(!e.phone||!n.phone||this.normalizePhone(e.phone)!==this.normalizePhone(n.phone))})}normalizePhone(e){return e?e.replace(/[\s\-()\\+]/g,"").replace(/^1/,""):""}async getPotentialDuplicates(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.7;const{contacts:n}=await this.getAllContacts();return n.map(n=>{var a,s,i,o,r,l;let c=0,d=[];const u=this.calculateSimilarity((null===(a=e.name)||void 0===a?void 0:a.toLowerCase())||"",(null===(s=n.name)||void 0===s?void 0:s.toLowerCase())||"");u>.8&&(c+=.4*u,d.push("Name similarity: ".concat(Math.round(100*u),"%")));const h=(null===(i=e.emails)||void 0===i?void 0:i.map(e=>e.value.toLowerCase()))||[],m=(null===(o=n.emails)||void 0===o?void 0:o.map(e=>e.value.toLowerCase()))||[];e.email&&h.push(e.email.toLowerCase()),n.email&&m.push(n.email.toLowerCase());const p=h.filter(e=>m.includes(e));p.length>0&&(c+=.5,d.push("Matching emails: ".concat(p.join(", "))));const f=(null===(r=e.phones)||void 0===r?void 0:r.map(e=>this.normalizePhone(e.value)))||[],g=(null===(l=n.phones)||void 0===l?void 0:l.map(e=>this.normalizePhone(e.value)))||[];e.phone&&f.push(this.normalizePhone(e.phone)),n.phone&&g.push(this.normalizePhone(n.phone));const v=f.filter(e=>g.includes(e));return v.length>0&&(c+=.4,d.push("Matching phones: ".concat(v.length," match(es)"))),{contact:n,score:c,reasons:d,isDuplicate:c>=t}}).filter(e=>e.score>=t).sort((e,t)=>t.score-e.score)}calculateSimilarity(e,t){if(!e||!t)return 0;if(e===t)return 1;const n=e.length>t.length?e:t,a=e.length>t.length?t:e;if(0===n.length)return 1;const s=this.levenshteinDistance(n,a);return(n.length-s)/n.length}levenshteinDistance(e,t){const n=[];for(let a=0;a<=t.length;a++)n[a]=[a];for(let a=0;a<=e.length;a++)n[0][a]=a;for(let a=1;a<=t.length;a++)for(let s=1;s<=e.length;s++)t.charAt(a-1)===e.charAt(s-1)?n[a][s]=n[a-1][s-1]:n[a][s]=Math.min(n[a-1][s-1]+1,n[a][s-1]+1,n[a-1][s]+1);return n[t.length][e.length]}async createContact(e){await this.ensureReady();const t=await this.findDuplicates(e);if(t.length>0)throw new Error("Duplicate contact found: ".concat(t[0].name," (").concat(t[0].email||t[0].phone,")"));const n=(0,a.A)((0,a.A)({id:"contact_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9))},e),{},{createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString(),contactCount:0,isFavorite:e.isFavorite||!1,lastContacted:null});return new Promise((e,t)=>{const a=this.db.transaction([s],"readwrite").objectStore(s).add(n);a.onsuccess=()=>{console.log("\u2705 Contact created:",n.name),e(n)},a.onerror=()=>{console.error("Failed to create contact"),t(a.error)}})}async updateContact(e,t){await this.ensureReady();const n=await this.findDuplicates(t,e);if(n.length>0)throw new Error("Duplicate contact found: ".concat(n[0].name," (").concat(n[0].email||n[0].phone,")"));return new Promise((n,i)=>{const o=this.db.transaction([s],"readwrite").objectStore(s),r=o.get(e);r.onsuccess=()=>{const e=r.result;if(!e)return void i(new Error("Contact not found"));const s=(0,a.A)((0,a.A)((0,a.A)({},e),t),{},{updatedAt:(new Date).toISOString()}),l=o.put(s);l.onsuccess=()=>{console.log("\u2705 Contact updated:",s.name),n(s)},l.onerror=()=>{i(l.error)}},r.onerror=()=>{i(r.error)}})}async mergeContacts(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"primary";await this.ensureReady();const{contacts:a}=await this.getAllContacts(),s=a.find(t=>t.id===e),i=a.find(e=>e.id===t);if(!s||!i)throw new Error("One or both contacts not found");let o;switch(n){case"primary":default:o=this.mergePrimaryStrategy(s,i);break;case"secondary":o=this.mergePrimaryStrategy(i,s);break;case"newest":const e=new Date(s.createdAt)>new Date(i.createdAt)?s:i,t=e===s?i:s;o=this.mergePrimaryStrategy(e,t);break;case"mostComplete":const n=this.calculateCompletenessScore(s)>=this.calculateCompletenessScore(i)?s:i,a=n===s?i:s;o=this.mergePrimaryStrategy(n,a)}return await this.updateContact(e,o),await this.deleteContact(t),console.log("\ud83d\udd17 Contacts merged successfully"),o}mergePrimaryStrategy(e,t){const n=(0,a.A)({},e),s=e.emails||[],i=t.emails||[],o=[...s];i.forEach(e=>{s.some(t=>t.value.toLowerCase()===e.value.toLowerCase())||o.push(e)}),n.emails=o;const r=e.phones||[],l=t.phones||[],c=[...r];l.forEach(e=>{r.some(t=>this.normalizePhone(t.value)===this.normalizePhone(e.value))||c.push(e)}),n.phones=c;const d=e.tags||[],u=t.tags||[];return n.tags=[...new Set([...d,...u])],n.socialLinks=(0,a.A)((0,a.A)({},t.socialLinks),e.socialLinks),Object.keys(t).forEach(e=>{n[e]||!t[e]||["id","createdAt","updatedAt","emails","phones","tags","socialLinks"].includes(e)||(n[e]=t[e])}),n.contactCount=(e.contactCount||0)+(t.contactCount||0),n.isFavorite=e.isFavorite||t.isFavorite,t.lastContacted&&(!e.lastContacted||new Date(t.lastContacted)>new Date(e.lastContacted))&&(n.lastContacted=t.lastContacted),n.updatedAt=(new Date).toISOString(),n}calculateCompletenessScore(e){let t=0;return e.name&&(t+=10),e.emails&&e.emails.length>0&&(t+=8),e.phones&&e.phones.length>0&&(t+=8),e.company&&(t+=5),e.jobTitle&&(t+=3),e.location&&(t+=3),e.website&&(t+=2),e.avatar&&(t+=5),e.birthdate&&(t+=3),e.notes&&(t+=2),e.socialLinks&&Object.values(e.socialLinks).some(e=>e)&&(t+=4),e.tags&&e.tags.length>0&&(t+=2),t}async deleteContact(e){return await this.ensureReady(),new Promise((t,n)=>{const a=this.db.transaction([s],"readwrite").objectStore(s).delete(e);a.onsuccess=()=>{console.log("\ud83d\uddd1\ufe0f Contact deleted:",e),t()},a.onerror=()=>{console.error("Failed to delete contact"),n(a.error)}})}async toggleFavorite(e){return await this.ensureReady(),new Promise((t,n)=>{const a=this.db.transaction([s],"readwrite").objectStore(s),i=a.get(e);i.onsuccess=()=>{const e=i.result;if(!e)return void n(new Error("Contact not found"));e.isFavorite=!e.isFavorite,e.updatedAt=(new Date).toISOString();const s=a.put(e);s.onsuccess=()=>{console.log("\u2b50 Favorite toggled:",e.name,e.isFavorite),t(e)},s.onerror=()=>{n(s.error)}},i.onerror=()=>{n(i.error)}})}async importContacts(e){await this.ensureReady();let t=0;const n=[];for(const s of e)try{const e=this.parseDeviceContact(s);await this.createContact(e),t++}catch(a){console.error("Failed to import contact:",a),n.push(a.message)}return{count:t,errors:n,total:e.length}}parseDeviceContact(e){var t,n,a;return{name:(null===(t=e.name)||void 0===t?void 0:t[0])||"Unknown Contact",email:(null===(n=e.email)||void 0===n?void 0:n[0])||"",phone:(null===(a=e.tel)||void 0===a?void 0:a[0])||"",category:"other",tags:["imported"],notes:"Imported from device contacts"}}async exportContacts(){const{contacts:e}=await this.getAllContacts(),t=e.map(e=>[e.name||"",e.email||"",e.phone||"",e.company||"",e.jobTitle||"",e.category||"",e.location||"",e.website||"",e.notes||"",(e.tags||[]).join("; ")]);return{csv:[["Name","Email","Phone","Company","Job Title","Category","Location","Website","Notes","Tags"].join(","),...t.map(e=>e.map(e=>'"'.concat(String(e).replace(/"/g,'""'),'"')).join(","))].join("\n"),count:e.length,filename:"contacts_".concat((new Date).toISOString().split("T")[0],".csv")}}async recordContactInteraction(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"message";return await this.ensureReady(),new Promise((n,a)=>{const i=this.db.transaction([s],"readwrite").objectStore(s),o=i.get(e);o.onsuccess=()=>{const e=o.result;if(!e)return void a(new Error("Contact not found"));e.contactCount=(e.contactCount||0)+1,e.lastContacted=(new Date).toISOString(),e.lastInteractionType=t,e.updatedAt=(new Date).toISOString();const s=i.put(e);s.onsuccess=()=>{console.log("\ud83d\udcca Contact interaction recorded:",e.name),n(e)},s.onerror=()=>{a(s.error)}},o.onerror=()=>{a(o.error)}})}async searchContacts(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;const{contacts:n}=await this.getAllContacts(),a=e.toLowerCase();return n.filter(e=>{var t,n,s,i;return(null===(t=e.name)||void 0===t?void 0:t.toLowerCase().includes(a))||(null===(n=e.email)||void 0===n?void 0:n.toLowerCase().includes(a))||(null===(s=e.phone)||void 0===s?void 0:s.includes(a))||(null===(i=e.company)||void 0===i?void 0:i.toLowerCase().includes(a))||(e.tags||[]).some(e=>e.toLowerCase().includes(a))}).slice(0,t)}async getRecentContacts(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;const{contacts:t}=await this.getAllContacts();return t.filter(e=>e.lastContacted).sort((e,t)=>new Date(t.lastContacted)-new Date(e.lastContacted)).slice(0,e)}async getFrequentContacts(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;const{contacts:t}=await this.getAllContacts();return t.filter(e=>(e.contactCount||0)>0).sort((e,t)=>(t.contactCount||0)-(e.contactCount||0)).slice(0,e)}async updateContactInteraction(e,t){try{const n=(await this.getDatabase()).transaction(["contacts"],"readwrite"),a=n.objectStore("contacts"),s=await new Promise((t,n)=>{const s=a.get(e);s.onsuccess=()=>t(s.result),s.onerror=()=>n(s.error)});if(s){s.analytics||(s.analytics={totalInteractions:0,lastInteraction:null,interactions:[],frequencyScore:0,chatCount:0,callCount:0,lastChatDate:null,lastCallDate:null});const i=new Date;s.analytics.totalInteractions++,s.analytics.lastInteraction=i.toISOString(),"chat_started"===t?(s.analytics.chatCount++,s.analytics.lastChatDate=i.toISOString()):"call_made"===t&&(s.analytics.callCount++,s.analytics.lastCallDate=i.toISOString()),s.analytics.interactions.unshift({type:t,timestamp:i.toISOString(),id:Date.now()}),s.analytics.interactions.length>50&&(s.analytics.interactions=s.analytics.interactions.slice(0,50));const o=new Date(i.getTime()-2592e6),r=s.analytics.interactions.filter(e=>new Date(e.timestamp)>=o);s.analytics.frequencyScore=r.length,s.lastModified=i.toISOString(),await new Promise((e,t)=>{const n=a.put(s);n.onsuccess=()=>e(),n.onerror=()=>t(n.error)}),await n.complete,console.log("Updated analytics for contact ".concat(e,":"),s.analytics)}}catch(n){console.error("Error updating contact interaction:",n)}}async getContactAnalytics(){try{const e=await this.getAllContacts(),t=new Date,n=new Date(t.getTime()-6048e5),a=new Date(t.getTime()-2592e6);return{totalContacts:e.length,recentlyAdded:e.filter(e=>new Date(e.dateAdded)>=n).length,frequentlyContacted:e.filter(e=>{var t;return(null===(t=e.analytics)||void 0===t?void 0:t.frequencyScore)>3}).sort((e,t)=>{var n,a;return((null===(n=t.analytics)||void 0===n?void 0:n.frequencyScore)||0)-((null===(a=e.analytics)||void 0===a?void 0:a.frequencyScore)||0)}).slice(0,10),recentlyContacted:e.filter(e=>{var t;return(null===(t=e.analytics)||void 0===t?void 0:t.lastInteraction)&&new Date(e.analytics.lastInteraction)>=n}).sort((e,t)=>{var n,a;return new Date((null===(n=t.analytics)||void 0===n?void 0:n.lastInteraction)||0)-new Date((null===(a=e.analytics)||void 0===a?void 0:a.lastInteraction)||0)}).slice(0,10),mostCalled:e.filter(e=>{var t;return(null===(t=e.analytics)||void 0===t?void 0:t.callCount)>0}).sort((e,t)=>{var n,a;return((null===(n=t.analytics)||void 0===n?void 0:n.callCount)||0)-((null===(a=e.analytics)||void 0===a?void 0:a.callCount)||0)}).slice(0,5),mostChatted:e.filter(e=>{var t;return(null===(t=e.analytics)||void 0===t?void 0:t.chatCount)>0}).sort((e,t)=>{var n,a;return((null===(n=t.analytics)||void 0===n?void 0:n.chatCount)||0)-((null===(a=e.analytics)||void 0===a?void 0:a.chatCount)||0)}).slice(0,5),interactionStats:{totalChats:e.reduce((e,t)=>{var n;return e+((null===(n=t.analytics)||void 0===n?void 0:n.chatCount)||0)},0),totalCalls:e.reduce((e,t)=>{var n;return e+((null===(n=t.analytics)||void 0===n?void 0:n.callCount)||0)},0),totalInteractions:e.reduce((e,t)=>{var n;return e+((null===(n=t.analytics)||void 0===n?void 0:n.totalInteractions)||0)},0),activeInLastWeek:e.filter(e=>{var t;return(null===(t=e.analytics)||void 0===t?void 0:t.lastInteraction)&&new Date(e.analytics.lastInteraction)>=n}).length,activeInLastMonth:e.filter(e=>{var t;return(null===(t=e.analytics)||void 0===t?void 0:t.lastInteraction)&&new Date(e.analytics.lastInteraction)>=a}).length},categoryBreakdown:{work:e.filter(e=>"work"===e.category||e.company).length,family:e.filter(e=>"family"===e.category).length,friends:e.filter(e=>"friends"===e.category).length,other:e.filter(e=>!e.category||"work"!==e.category&&"family"!==e.category&&"friends"!==e.category).length}}}catch(e){return console.error("Error getting contact analytics:",e),null}}async seedDemoContacts(){const e=[{name:"Alice Johnson",email:"alice@example.com",phone:"+1 (555) 123-4567",category:"work",isFavorite:!0,tags:["work"]},{name:"Bob Smith",email:"bob@example.com",phone:"+1 (555) 234-5678",category:"friends",isFavorite:!1,contactCount:8,tags:["designer","creative"],socialLinks:{instagram:"@bobsmith_design"}},{name:"Charlie Brown",email:"charlie@personal.com",phone:"+1 (555) 345-6789",category:"friends",location:"Los Angeles, CA",isFavorite:!0,contactCount:22,lastContacted:new Date(Date.now()-18e6).toISOString(),tags:["college","close friend"],notes:"Met in college, great friend!"},{name:"Diana Prince",email:"diana.prince@law.com",phone:"+1 (555) 456-7890",company:"Prince & Associates",jobTitle:"Attorney",category:"business",location:"Washington, DC",website:"https://princelaw.com",isFavorite:!1,contactCount:3,tags:["lawyer","professional"]},{name:"Emma Wilson",email:"emma@family.com",phone:"+1 (555) 567-8901",category:"family",location:"Chicago, IL",isFavorite:!0,contactCount:45,lastContacted:new Date(Date.now()-432e5).toISOString(),tags:["sister","family"],notes:"My amazing sister!"}];try{if((await this.getAllContacts()).length>0)return void console.log("\u26a1 Skipping demo data - contacts already exist")}catch(t){console.log("\u26a1 Proceeding with demo data seeding")}for(const n of e)await this.createContact(n);console.log("\ud83c\udf31 ".concat(e.length," minimal demo contacts seeded"))}async syncWithBackend(){try{console.log("\ud83d\udd04 Backend sync not implemented yet")}catch(e){console.error("Failed to sync with backend:",e)}}async clearAllContacts(){return await this.ensureReady(),new Promise((e,t)=>{const n=this.db.transaction([s],"readwrite").objectStore(s).clear();n.onsuccess=()=>{console.log("\ud83d\uddd1\ufe0f All contacts cleared"),e()},n.onerror=()=>{t(n.error)}})}async getContactStatistics(){const{contacts:e}=await this.getAllContacts(),t=this.calculateContactStats(e),n=[];for(let a=0;a<e.length;a++){const t=e[a],s=await this.findDuplicates(t,t.id);s.length>0&&n.push({contact:t,duplicates:s})}return(0,a.A)((0,a.A)({},t),{},{duplicates:{count:n.length,contacts:n}})}async cleanupDuplicates(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"mostComplete";const{contacts:t}=await this.getAllContacts(),n=new Set,a={merged:0,deleted:0,errors:[]};for(const i of t)if(!n.has(i.id))try{const t=await this.findDuplicates(i,i.id);if(t.length>0)for(const s of t)n.has(s.id)||(await this.mergeContacts(i.id,s.id,e),n.add(s.id),a.merged++);n.add(i.id)}catch(s){a.errors.push({contactId:i.id,contactName:i.name,error:s.message})}return console.log("\ud83e\uddf9 Duplicate cleanup completed: ".concat(a.merged," merged, ").concat(a.errors.length," errors")),a}}},967:(e,t,n)=>{n.d(t,{A:()=>i});var a=n(555),s=n(985);const i=new class{constructor(){this.activeCall=null,this.connectionMonitoringInterval=null,this.callQualityHistory=[]}validatePhoneNumber(e){if(!e)return!1;const t=e.replace(/\D/g,"");return t.length>=10&&t.length<=15}formatPhoneNumber(e){if(!e)return"";const t=e.replace(/\D/g,"");return 10===t.length?"(".concat(t.slice(0,3),") ").concat(t.slice(3,6),"-").concat(t.slice(6)):11===t.length&&"1"===t[0]?"+1 (".concat(t.slice(1,4),") ").concat(t.slice(4,7),"-").concat(t.slice(7)):"+".concat(t)}async getAvailableCallMethods(e){const t=this.validatePhoneNumber(e.phone),n=s.A.getConnectionStatus();return s.A.getOptimalCallMethod(t).map(s=>(0,a.A)((0,a.A)({},s),{},{targetPhone:t?this.formatPhoneNumber(e.phone):null,connectionQuality:n.quality,estimatedLatency:n.latency}))}async initiateEnhancedCall(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"auto";try{const n=await this.getAvailableCallMethods(e);let a;a="auto"===t?n[0]:n.find(e=>e.type===t)||n[0];const i={callId:"call_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9)),targetUser:e,method:a,startTime:new Date,connectionStatus:s.A.getConnectionStatus(),audioSettings:s.A.getAudioSettings()};return await this.startCallWithMethod(i)}catch(n){throw console.error("Failed to initiate enhanced voice call:",n),n}}async startCallWithMethod(e){const{method:t,targetUser:n}=e;switch(t.type){case"wifi-call":return await this.startWiFiOptimizedCall(e);case"webrtc":return await this.startWebRTCCall(e);case"webrtc-optimized":return await this.startOptimizedWebRTCCall(e);case"phone-call":return await this.startPhoneCall(e);case"callback-request":return await this.requestCallback(e);default:throw new Error("Unsupported call method: ".concat(t.type))}}async startWiFiOptimizedCall(e){console.log("\ud83d\udd0a Starting WiFi-optimized voice call...");(0,a.A)((0,a.A)({},e.audioSettings),{},{deviceId:"default",echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0});const t=(0,a.A)((0,a.A)({},e),{},{status:"connecting",enhancedFeatures:{wifiOptimized:!0,adaptiveQuality:!0,backgroundNoiseReduction:!0,dynamicBandwidthAdjustment:!0}});return this.activeCall=t,this.startConnectionMonitoring(),t}async startWebRTCCall(e){console.log("\ud83c\udf10 Starting WebRTC voice call...");const t=(0,a.A)((0,a.A)({},e),{},{status:"connecting",enhancedFeatures:{webrtcOptimized:!0,echoCancellation:!0}});return this.activeCall=t,this.startConnectionMonitoring(),t}async startOptimizedWebRTCCall(e){console.log("\ud83d\udcde Starting optimized voice call...");const t=(0,a.A)((0,a.A)({},e),{},{status:"connecting",enhancedFeatures:{lowBandwidthMode:!0,aggressiveCompression:!0,reducedSampleRate:!0}});return this.activeCall=t,this.startConnectionMonitoring(),t}async startPhoneCall(e){console.log("\ud83d\udcf1 Initiating phone call...");const t=e.targetUser.phone,n=(0,a.A)((0,a.A)({},e),{},{status:"dialing",phoneNumber:this.formatPhoneNumber(t),enhancedFeatures:{cellularFallback:!0,pstnGateway:!0}});return this.activeCall=n,setTimeout(()=>{this.activeCall&&this.activeCall.callId===n.callId&&(this.activeCall.status="ringing")},1e3),n}async requestCallback(e){console.log("\ud83d\udd04 Requesting callback...");return(0,a.A)((0,a.A)({},e),{},{status:"callback-requested",enhancedFeatures:{callbackRequest:!0,offlineFallback:!0}})}startConnectionMonitoring(){this.connectionMonitoringInterval=s.A.startCallMonitoring(e=>{this.activeCall&&this.handleQualityChange(e)})}handleQualityChange(e){const{previousQuality:t,currentQuality:n,audioSettings:a}=e;console.log("\ud83d\udcf6 Connection quality changed: ".concat(t," \u2192 ").concat(n)),this.callQualityHistory.push({timestamp:new Date,quality:n,latency:e.status.latency,bandwidth:e.status.bandwidth}),this.activeCall&&(this.activeCall.connectionQuality=n,this.activeCall.audioSettings=a,this.adaptCallQuality(n,a))}adaptCallQuality(e,t){if(this.activeCall)switch(e){case"excellent":case"good":"wifi-call"!==this.activeCall.method.type&&console.log("\ud83d\udcc8 Upgrading call quality...");break;case"fair":console.log("\u2696\ufe0f Maintaining stable quality...");break;case"poor":console.log("\ud83d\udcc9 Reducing quality for stability...");break;case"offline":console.log("\ud83d\udcf5 Connection lost, attempting reconnection..."),this.handleConnectionLoss()}}handleConnectionLoss(){this.activeCall&&(this.activeCall.status="reconnecting",this.validatePhoneNumber(this.activeCall.targetUser.phone)&&console.log("\ud83d\udcf1 Switching to phone fallback..."))}endCall(){if(this.activeCall){console.log("\ud83d\udcde Ending voice call..."),this.connectionMonitoringInterval&&(s.A.stopCallMonitoring(this.connectionMonitoringInterval),this.connectionMonitoringInterval=null);const e={duration:new Date-this.activeCall.startTime,qualityHistory:this.callQualityHistory,method:this.activeCall.method,finalQuality:this.activeCall.connectionQuality};return console.log("\ud83d\udcca Call ended. Stats:",e),this.activeCall=null,this.callQualityHistory=[],e}}getCurrentCallStatus(){return this.activeCall?(0,a.A)((0,a.A)({},this.activeCall),{},{duration:new Date-this.activeCall.startTime,connectionStatus:s.A.getConnectionStatus(),qualityHistory:this.callQualityHistory}):null}userHasPhoneNumber(e){return this.validatePhoneNumber(null===e||void 0===e?void 0:e.phone)}getConnectionRecommendations(){const e=s.A.getConnectionStatus(),t=[];return"poor"!==e.quality&&"fair"!==e.quality||(t.push({type:"wifi",icon:"\ud83d\udcf6",title:"Connect to WiFi",description:"Switch to a WiFi network for better call quality"}),t.push({type:"location",icon:"\ud83d\udccd",title:"Move closer to router",description:"Get closer to your WiFi router for stronger signal"})),e.latency>200&&t.push({type:"network",icon:"\ud83d\udd04",title:"Close other apps",description:"Close bandwidth-heavy apps for better performance"}),t}}},983:(e,t)=>{var n=Symbol.for("react.transitional.element"),a=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),r=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),m=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},f=Object.assign,g={};function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function y(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var x=b.prototype=new y;x.constructor=b,f(x,v.prototype),x.isPureReactComponent=!0;var w=Array.isArray,j={H:null,A:null,T:null,S:null,V:null},N=Object.prototype.hasOwnProperty;function S(e,t,a,s,i,o){return a=o.ref,{$$typeof:n,type:e,key:t,ref:void 0!==a?a:null,props:o}}function C(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var k=/\/+/g;function E(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function A(){}function P(e,t,s,i,o){var r=typeof e;"undefined"!==r&&"boolean"!==r||(e=null);var l,c,d=!1;if(null===e)d=!0;else switch(r){case"bigint":case"string":case"number":d=!0;break;case"object":switch(e.$$typeof){case n:case a:d=!0;break;case h:return P((d=e._init)(e._payload),t,s,i,o)}}if(d)return o=o(e),d=""===i?"."+E(e,0):i,w(o)?(s="",null!=d&&(s=d.replace(k,"$&/")+"/"),P(o,t,s,"",function(e){return e})):null!=o&&(C(o)&&(l=o,c=s+(null==o.key||e&&e.key===o.key?"":(""+o.key).replace(k,"$&/")+"/")+d,o=S(l.type,c,void 0,0,0,l.props)),t.push(o)),1;d=0;var u,p=""===i?".":i+":";if(w(e))for(var f=0;f<e.length;f++)d+=P(i=e[f],t,s,r=p+E(i,f),o);else if("function"===typeof(f=null===(u=e)||"object"!==typeof u?null:"function"===typeof(u=m&&u[m]||u["@@iterator"])?u:null))for(e=f.call(e),f=0;!(i=e.next()).done;)d+=P(i=i.value,t,s,r=p+E(i,f++),o);else if("object"===r){if("function"===typeof e.then)return P(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"===typeof e.status?e.then(A,A):(e.status="pending",e.then(function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)},function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(e),t,s,i,o);throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return d}function T(e,t,n){if(null==e)return e;var a=[],s=0;return P(e,a,"","",function(e){return t.call(n,e,s++)}),a}function L(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var M="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function I(){}t.Children={map:T,forEach:function(e,t,n){T(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return T(e,function(){t++}),t},toArray:function(e){return T(e,function(e){return e})||[]},only:function(e){if(!C(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=s,t.Profiler=o,t.PureComponent=b,t.StrictMode=i,t.Suspense=d,t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=j,t.__COMPILER_RUNTIME={__proto__:null,c:function(e){return j.H.useMemoCache(e)}},t.cache=function(e){return function(){return e.apply(null,arguments)}},t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error("The argument must be a React element, but you passed "+e+".");var a=f({},e.props),s=e.key;if(null!=t)for(i in void 0!==t.ref&&void 0,void 0!==t.key&&(s=""+t.key),t)!N.call(t,i)||"key"===i||"__self"===i||"__source"===i||"ref"===i&&void 0===t.ref||(a[i]=t[i]);var i=arguments.length-2;if(1===i)a.children=n;else if(1<i){for(var o=Array(i),r=0;r<i;r++)o[r]=arguments[r+2];a.children=o}return S(e.type,s,void 0,0,0,a)},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider=e,e.Consumer={$$typeof:r,_context:e},e},t.createElement=function(e,t,n){var a,s={},i=null;if(null!=t)for(a in void 0!==t.key&&(i=""+t.key),t)N.call(t,a)&&"key"!==a&&"__self"!==a&&"__source"!==a&&(s[a]=t[a]);var o=arguments.length-2;if(1===o)s.children=n;else if(1<o){for(var r=Array(o),l=0;l<o;l++)r[l]=arguments[l+2];s.children=r}if(e&&e.defaultProps)for(a in o=e.defaultProps)void 0===s[a]&&(s[a]=o[a]);return S(e,i,void 0,0,0,s)},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=C,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:L}},t.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=j.T,n={};j.T=n;try{var a=e(),s=j.S;null!==s&&s(n,a),"object"===typeof a&&null!==a&&"function"===typeof a.then&&a.then(I,M)}catch(i){M(i)}finally{j.T=t}},t.unstable_useCacheRefresh=function(){return j.H.useCacheRefresh()},t.use=function(e){return j.H.use(e)},t.useActionState=function(e,t,n){return j.H.useActionState(e,t,n)},t.useCallback=function(e,t){return j.H.useCallback(e,t)},t.useContext=function(e){return j.H.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e,t){return j.H.useDeferredValue(e,t)},t.useEffect=function(e,t,n){var a=j.H;if("function"===typeof n)throw Error("useEffect CRUD overload is not enabled in this build of React.");return a.useEffect(e,t)},t.useId=function(){return j.H.useId()},t.useImperativeHandle=function(e,t,n){return j.H.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return j.H.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return j.H.useLayoutEffect(e,t)},t.useMemo=function(e,t){return j.H.useMemo(e,t)},t.useOptimistic=function(e,t){return j.H.useOptimistic(e,t)},t.useReducer=function(e,t,n){return j.H.useReducer(e,t,n)},t.useRef=function(e){return j.H.useRef(e)},t.useState=function(e){return j.H.useState(e)},t.useSyncExternalStore=function(e,t,n){return j.H.useSyncExternalStore(e,t,n)},t.useTransition=function(){return j.H.useTransition()},t.version="19.1.1"},985:(e,t,n)=>{n.d(t,{A:()=>a});const a=new class{constructor(){this.connectionQuality="unknown",this.connectionType="unknown",this.bandwidth=0,this.latency=0,this.isOnline=navigator.onLine,this.wifiStrength=0,this.initializeConnectionMonitoring()}initializeConnectionMonitoring(){if(window.addEventListener("online",()=>{this.isOnline=!0,this.assessConnectionQuality()}),window.addEventListener("offline",()=>{this.isOnline=!1,this.connectionQuality="offline"}),"connection"in navigator){const e=navigator.connection||navigator.mozConnection||navigator.webkitConnection;e&&(e.addEventListener("change",()=>{this.updateConnectionInfo(e)}),this.updateConnectionInfo(e))}this.assessConnectionQuality()}updateConnectionInfo(e){this.connectionType=e.effectiveType||e.type||"unknown",this.bandwidth=e.downlink||0,"wifi"!==e.type&&"4g"!==e.effectiveType||(this.wifiStrength=this.calculateWiFiStrength(e)),this.assessConnectionQuality()}calculateWiFiStrength(e){if(!e)return 0;const t=e.downlink||0,n=e.rtt||0;let a=0;return t>=10?a+=40:t>=5?a+=30:t>=1&&(a+=20),n<=50?a+=30:n<=100?a+=20:n<=200&&(a+=10),"4g"===e.effectiveType?a+=30:"3g"===e.effectiveType?a+=20:"slow-2g"===e.effectiveType&&(a+=5),Math.min(100,a)}async assessConnectionQuality(){if(this.isOnline)try{const e=await this.measureLatency();this.latency=e,"wifi"===this.connectionType||"4g"===this.connectionType?e<50&&this.bandwidth>5?this.connectionQuality="excellent":e<100&&this.bandwidth>2?this.connectionQuality="good":e<200&&this.bandwidth>1?this.connectionQuality="fair":this.connectionQuality="poor":"3g"===this.connectionType?this.connectionQuality=e<150?"fair":"poor":this.connectionQuality="poor"}catch(e){console.warn("Connection quality assessment failed:",e),this.connectionQuality="unknown"}else this.connectionQuality="offline"}async measureLatency(){const e=performance.now();try{await fetch("/api/ping",{method:"GET",cache:"no-cache"});return performance.now()-e}catch(t){return 200}}getOptimalCallMethod(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=this.connectionQuality,n="wifi"===this.connectionType,a=[];return"excellent"!==t&&"good"!==t||(n&&a.push({type:"wifi-call",quality:"high",description:"WiFi Voice Call (HD)",icon:"\ud83d\udcf6",estimated_quality:"\ud83d\udd0a\ud83d\udd0a\ud83d\udd0a",latency:this.latency,bandwidth:this.bandwidth}),a.push({type:"webrtc",quality:"high",description:"Internet Call (HD)",icon:"\ud83c\udf10",estimated_quality:"\ud83d\udd0a\ud83d\udd0a\ud83d\udd0a"})),"fair"!==t&&0!==a.length||a.push({type:"webrtc-optimized",quality:"medium",description:"Optimized Internet Call",icon:"\ud83d\udcde",estimated_quality:"\ud83d\udd0a\ud83d\udd0a"}),e&&a.push({type:"phone-call",quality:"standard",description:"Phone Call",icon:"\ud83d\udcf1",estimated_quality:"\ud83d\udd0a\ud83d\udd0a",note:"Uses cellular network"}),"poor"!==t&&"offline"!==t||a.push({type:"callback-request",quality:"fallback",description:"Request Callback",icon:"\ud83d\udd04",estimated_quality:"\ud83d\udcde",note:"User will call you back"}),a}getConnectionStatus(){return{isOnline:this.isOnline,quality:this.connectionQuality,type:this.connectionType,bandwidth:this.bandwidth,latency:this.latency,wifiStrength:this.wifiStrength,icon:this.getConnectionIcon(),color:this.getConnectionColor()}}getConnectionIcon(){switch(this.connectionQuality){case"excellent":case"good":case"fair":case"poor":return"\ud83d\udcf6";case"offline":return"\ud83d\udcf5";default:return"\u2753"}}getConnectionColor(){switch(this.connectionQuality){case"excellent":return"#10b981";case"good":return"#059669";case"fair":return"#f59e0b";case"poor":return"#ef4444";default:return"#6b7280"}}getAudioSettings(){switch(this.connectionQuality){case"excellent":return{sampleRate:48e3,bitrate:128,echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0,highpassFilter:!1};case"good":return{sampleRate:44100,bitrate:96,echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0,highpassFilter:!0};case"fair":return{sampleRate:22050,bitrate:64,echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0,highpassFilter:!0};default:return{sampleRate:16e3,bitrate:32,echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0,highpassFilter:!0}}}startCallMonitoring(e){return setInterval(async()=>{const t=this.connectionQuality;await this.assessConnectionQuality(),t!==this.connectionQuality&&e({previousQuality:t,currentQuality:this.connectionQuality,status:this.getConnectionStatus(),audioSettings:this.getAudioSettings()})},5e3)}stopCallMonitoring(e){e&&clearInterval(e)}}}},t={};function n(a){var s=t[a];if(void 0!==s)return s.exports;var i=t[a]={exports:{}};return e[a](i,i.exports,n),i.exports}n.m=e,n.d=(e,t)=>{for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce((t,a)=>(n.f[a](e,t),t),[])),n.u=e=>"static/js/"+e+"."+{81:"4e2be5fa",206:"86ac5b8e"}[e]+".chunk.js",n.miniCssF=e=>{},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="quibish:";n.l=(a,s,i,o)=>{if(e[a])e[a].push(s);else{var r,l;if(void 0!==i)for(var c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var u=c[d];if(u.getAttribute("src")==a||u.getAttribute("data-webpack")==t+i){r=u;break}}r||(l=!0,(r=document.createElement("script")).charset="utf-8",r.timeout=120,n.nc&&r.setAttribute("nonce",n.nc),r.setAttribute("data-webpack",t+i),r.src=a),e[a]=[s];var h=(t,n)=>{r.onerror=r.onload=null,clearTimeout(m);var s=e[a];if(delete e[a],r.parentNode&&r.parentNode.removeChild(r),s&&s.forEach(e=>e(n)),t)return t(n)},m=setTimeout(h.bind(null,void 0,{type:"timeout",target:r}),12e4);r.onerror=h.bind(null,r.onerror),r.onload=h.bind(null,r.onload),l&&document.head.appendChild(r)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/quibish/",(()=>{var e={792:0};n.f.j=(t,a)=>{var s=n.o(e,t)?e[t]:void 0;if(0!==s)if(s)a.push(s[2]);else{var i=new Promise((n,a)=>s=e[t]=[n,a]);a.push(s[2]=i);var o=n.p+n.u(t),r=new Error;n.l(o,a=>{if(n.o(e,t)&&(0!==(s=e[t])&&(e[t]=void 0),s)){var i=a&&("load"===a.type?"missing":a.type),o=a&&a.target&&a.target.src;r.message="Loading chunk "+t+" failed.\n("+i+": "+o+")",r.name="ChunkLoadError",r.type=i,r.request=o,s[1](r)}},"chunk-"+t,t)}};var t=(t,a)=>{var s,i,o=a[0],r=a[1],l=a[2],c=0;if(o.some(t=>0!==e[t])){for(s in r)n.o(r,s)&&(n.m[s]=r[s]);if(l)l(n)}for(t&&t(a);c<o.length;c++)i=o[c],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0},a=self.webpackChunkquibish=self.webpackChunkquibish||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})();var a=n(950),s=n(352),i=n(555),o=n(523),r=n(52),l=n(629),c=n(261),d=n(69),u=n(932),h=n(831),m=n(414);const p=e=>{let{text:t,maxLength:n=300,className:s="",showWordCount:i=!1,enableSmartBreaks:o=!0}=e;const[r,l]=(0,a.useState)(!1),c=(0,a.useCallback)((e,t)=>{if(e.length<=t)return e;const n=e.substring(0,t);if(o){const e=n.lastIndexOf(". "),a=n.lastIndexOf("? "),s=n.lastIndexOf("! "),i=Math.max(e,a,s);if(i>.6*t)return n.substring(0,i+1);const o=n.lastIndexOf(" ");if(o>.8*t)return n.substring(0,o)}return n},[o]),d=(0,a.useMemo)(()=>{const e=t.split(/\s+/).length;return{words:e,sentences:t.split(/[.!?]+/).length-1,readTime:Math.ceil(e/200)}},[t]),u=t.length>n,h=r?t:c(t,n),p=t.length-h.length,f=(0,a.useCallback)(()=>{l(e=>!e)},[]),g=(0,a.useMemo)(()=>t.includes("```")?"code":t.match(/https?:\/\/[^\s]+/)?"links":t.includes("@")?"mentions":"text",[t]);return(0,m.jsxs)("div",{className:"smart-text-content ".concat(s," content-type-").concat(g),children:[(0,m.jsx)("div",{className:"text-display",children:"code"===g?(0,m.jsx)("pre",{className:"code-block",children:(0,m.jsx)("code",{children:h})}):(0,m.jsx)("div",{className:"text-content",children:h.split(/(@\w+|https?:\/\/[^\s]+)/g).map((e,t)=>e.startsWith("@")?(0,m.jsx)("span",{className:"mention",children:e},t):e.match(/https?:\/\/[^\s]+/)?(0,m.jsx)("a",{href:e,target:"_blank",rel:"noopener noreferrer",className:"inline-link",onClick:e=>e.stopPropagation(),children:e.length>30?e.substring(0,30)+"...":e},t):e)})}),u&&(0,m.jsxs)("div",{className:"text-controls",children:[(0,m.jsx)("button",{className:"expand-button",onClick:f,type:"button",children:r?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("span",{className:"icon",children:"\u2303"}),"Show less"]}):(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("span",{className:"icon",children:"\u2304"}),"Show more (",p," more characters)"]})}),i&&(0,m.jsxs)("div",{className:"text-metrics",children:["\ud83d\udcd6 ",d.readTime," min read \u2022 ",d.words," words \u2022 ",d.sentences," sentences"]})]}),"code"===g&&(0,m.jsx)("div",{className:"content-actions",children:(0,m.jsx)("button",{className:"action-button copy-code",onClick:()=>{var e;return null===(e=navigator.clipboard)||void 0===e?void 0:e.writeText(t)},title:"Copy code",children:"\ud83d\udccb Copy"})}),"links"===g&&!r&&(0,m.jsx)("div",{className:"content-actions",children:(0,m.jsx)("button",{className:"action-button preview-links",onClick:f,title:"Preview links",children:"\ud83d\udd17 Preview Links"})})]})};var f=n(17),g=n(503),v=n(446),y=n(473);const b=e=>{let{contact:t,viewMode:n="grid",isSelected:s=!1,onSelect:i,onEdit:o,onDelete:r,onToggleFavorite:l,onStartChat:c,onStartCall:d,darkMode:u=!1}=e;const[h,p]=(0,a.useState)(!1),[f,g]=(0,a.useState)(!1),v=(0,a.useCallback)(e=>{var n;e.stopPropagation(),null===l||void 0===l||l(t.id),null===y.G||void 0===y.G||null===(n=y.G.haptic)||void 0===n||n.call(y.G,"light")},[t.id,l]),b=(0,a.useCallback)(e=>{var n;e.stopPropagation(),null===c||void 0===c||c(t),null===y.G||void 0===y.G||null===(n=y.G.haptic)||void 0===n||n.call(y.G,"medium")},[t,c]),x=(0,a.useCallback)(e=>{var n;e.stopPropagation(),null===d||void 0===d||d(t),null===y.G||void 0===y.G||null===(n=y.G.haptic)||void 0===n||n.call(y.G,"medium")},[t,d]),w=(0,a.useCallback)(e=>{e.stopPropagation(),null===o||void 0===o||o(t),p(!1)},[t,o]),j=(0,a.useCallback)(e=>{e.stopPropagation(),null===r||void 0===r||r(t.id),p(!1)},[t.id,r]),N=(0,a.useCallback)(()=>{i?i(t.id):p(!h)},[t.id,i,h]),S=(0,a.useCallback)(()=>{var e;i||(p(!0),null===y.G||void 0===y.G||null===(e=y.G.haptic)||void 0===e||e.call(y.G,"medium"))},[i]),C=(()=>{if(t.isOnline)return{icon:"\ud83d\udfe2",text:"Online",class:"online"};if(t.lastSeen){const e=new Date(t.lastSeen),n=new Date-e;if(n<3e5)return{icon:"\ud83d\udfe1",text:"Recently active",class:"recent"};if(n<864e5)return{icon:"\u26aa",text:"Today",class:"today"}}return{icon:"\u26ab",text:"Offline",class:"offline"}})(),k=(e=>{if(!e)return"#667eea";const t=["#667eea","#764ba2","#f093fb","#f5576c","#4facfe","#43e97b","#fa709a","#ffecd2","#a8edea","#fed6e3","#d299c2","#fef9d3"];return t[e.length%t.length]})(t.name);return(0,m.jsxs)("div",{className:"contact-card ".concat(n," ").concat(s?"selected":""," ").concat(u?"dark":""," ").concat(h?"actions-open":""),onClick:N,onContextMenu:e=>{e.preventDefault(),S()},children:[i&&(0,m.jsx)("div",{className:"selection-checkbox",children:(0,m.jsx)("input",{type:"checkbox",checked:s,onChange:()=>i(t.id),onClick:e=>e.stopPropagation()})}),(0,m.jsxs)("div",{className:"contact-avatar-container",children:[(0,m.jsx)("div",{className:"contact-avatar",style:{backgroundColor:t.avatar?"transparent":k},children:t.avatar&&!f?(0,m.jsx)("img",{src:t.avatar,alt:t.name,onError:()=>g(!0)}):(0,m.jsx)("span",{className:"avatar-initials",children:(E=t.name,E?E.split(" ").map(e=>e.charAt(0)).join("").toUpperCase().slice(0,2):"?")})}),(0,m.jsx)("div",{className:"status-indicator ".concat(C.class),children:(0,m.jsx)("span",{className:"status-icon",children:C.icon})}),t.isFavorite&&(0,m.jsx)("div",{className:"favorite-indicator",children:"\u2b50"})]}),(0,m.jsxs)("div",{className:"contact-info",children:[(0,m.jsxs)("div",{className:"contact-name-section",children:[(0,m.jsx)("h3",{className:"contact-name",title:t.name,children:t.name||"Unknown Contact"}),t.nickname&&(0,m.jsxs)("span",{className:"contact-nickname",children:['"',t.nickname,'"']})]}),(0,m.jsxs)("div",{className:"contact-details",children:[t.company&&(0,m.jsxs)("div",{className:"contact-company",title:t.company,children:["\ud83c\udfe2 ",t.company]}),t.jobTitle&&(0,m.jsxs)("div",{className:"contact-job-title",title:t.jobTitle,children:["\ud83d\udcbc ",t.jobTitle]}),t.email&&(0,m.jsxs)("div",{className:"contact-email",title:t.email,children:["\ud83d\udce7 ",t.email]}),t.phone&&(0,m.jsxs)("div",{className:"contact-phone",title:t.phone,children:["\ud83d\udcf1 ",(e=>{if(!e)return"";const t=e.replace(/\D/g,"");return 10===t.length?"(".concat(t.slice(0,3),") ").concat(t.slice(3,6),"-").concat(t.slice(6)):e})(t.phone)]}),t.location&&(0,m.jsxs)("div",{className:"contact-location",title:t.location,children:["\ud83d\udccd ",t.location]})]}),t.tags&&t.tags.length>0&&(0,m.jsxs)("div",{className:"contact-tags",children:[t.tags.slice(0,3).map((e,t)=>(0,m.jsx)("span",{className:"contact-tag ".concat(e.toLowerCase()),children:e},t)),t.tags.length>3&&(0,m.jsxs)("span",{className:"contact-tag more",children:["+",t.tags.length-3]})]}),t.lastContacted&&(0,m.jsxs)("div",{className:"last-contact-info",children:[(0,m.jsx)("span",{className:"last-contact-label",children:"Last contact:"}),(0,m.jsx)("span",{className:"last-contact-date",children:new Date(t.lastContacted).toLocaleDateString()})]})]}),(0,m.jsxs)("div",{className:"contact-quick-actions",children:[(0,m.jsx)("button",{className:"quick-action-btn favorite-btn",onClick:v,title:t.isFavorite?"Remove from favorites":"Add to favorites",children:t.isFavorite?"\u2b50":"\u2606"}),c&&(0,m.jsx)("button",{className:"quick-action-btn chat-btn",onClick:b,title:"Start chat",children:"\ud83d\udcac"}),d&&t.phone&&(0,m.jsx)("button",{className:"quick-action-btn call-btn",onClick:x,title:"Start call",children:"\ud83d\udcde"}),(0,m.jsx)("button",{className:"quick-action-btn more-btn",onClick:e=>{e.stopPropagation(),p(!h)},title:"More actions",children:"\u22ef"})]}),h&&(0,m.jsxs)("div",{className:"contact-actions-menu",children:[(0,m.jsx)("div",{className:"actions-menu-backdrop",onClick:()=>p(!1)}),(0,m.jsxs)("div",{className:"actions-menu-content",children:[(0,m.jsxs)("button",{className:"action-menu-item",onClick:w,children:[(0,m.jsx)("span",{className:"action-icon",children:"\u270f\ufe0f"}),(0,m.jsx)("span",{className:"action-label",children:"Edit Contact"})]}),t.email&&(0,m.jsxs)("button",{className:"action-menu-item",onClick:e=>{e.stopPropagation(),window.location.href="mailto:".concat(t.email)},children:[(0,m.jsx)("span",{className:"action-icon",children:"\ud83d\udce7"}),(0,m.jsx)("span",{className:"action-label",children:"Send Email"})]}),t.phone&&(0,m.jsxs)("button",{className:"action-menu-item",onClick:e=>{e.stopPropagation(),window.location.href="tel:".concat(t.phone)},children:[(0,m.jsx)("span",{className:"action-icon",children:"\ud83d\udcde"}),(0,m.jsx)("span",{className:"action-label",children:"Call Phone"})]}),t.website&&(0,m.jsxs)("button",{className:"action-menu-item",onClick:e=>{e.stopPropagation(),window.open(t.website,"_blank")},children:[(0,m.jsx)("span",{className:"action-icon",children:"\ud83c\udf10"}),(0,m.jsx)("span",{className:"action-label",children:"Visit Website"})]}),(0,m.jsxs)("button",{className:"action-menu-item share-btn",onClick:e=>{e.stopPropagation(),navigator.share&&navigator.share({title:"Contact: ".concat(t.name),text:"".concat(t.name,"\n").concat(t.email||"","\n").concat(t.phone||"")})},children:[(0,m.jsx)("span",{className:"action-icon",children:"\ud83d\udce4"}),(0,m.jsx)("span",{className:"action-label",children:"Share Contact"})]}),(0,m.jsxs)("button",{className:"action-menu-item delete-btn",onClick:j,children:[(0,m.jsx)("span",{className:"action-icon",children:"\ud83d\uddd1\ufe0f"}),(0,m.jsx)("span",{className:"action-label",children:"Delete Contact"})]})]})]}),t.contactCount&&t.contactCount>0&&(0,m.jsxs)("div",{className:"contact-frequency",children:[(0,m.jsx)("div",{className:"frequency-bar",children:(0,m.jsx)("div",{className:"frequency-fill",style:{width:"".concat(Math.min(t.contactCount/10*100,100),"%")}})}),(0,m.jsxs)("span",{className:"frequency-label",children:[t.contactCount," interaction",1!==t.contactCount?"s":""]})]})]});var E};var x=n(373);const w=e=>{let{categories:t,selectedCategory:n,onCategoryChange:a}=e;return(0,m.jsx)("div",{className:"contact-groups",children:(0,m.jsx)("div",{className:"groups-container",children:t.map(e=>(0,m.jsxs)("button",{className:"group-btn ".concat(n===e.id?"active":""),onClick:()=>a(e.id),title:"".concat(e.label," (").concat(e.count,")"),children:[(0,m.jsx)("span",{className:"group-icon",children:e.icon}),(0,m.jsx)("span",{className:"group-label",children:e.label}),(0,m.jsx)("span",{className:"group-count",children:e.count})]},e.id))})})};var j=n(955),N=n(835);const S=e=>{let{isOpen:t,onClose:n,currentUser:s,darkMode:i=!1,onStartChat:o=null,onStartCall:r=null}=e;const[l,c]=(0,a.useState)([]),[d,u]=(0,a.useState)([]),[h,p]=(0,a.useState)(""),[f,g]=(0,a.useState)("all"),[v,S]=(0,a.useState)("name"),[C,k]=(0,a.useState)("grid"),[E,A]=(0,a.useState)(!1),[P,T]=(0,a.useState)(null),[L,M]=(0,a.useState)(!1),[I,O]=(0,a.useState)(null),[_,D]=(0,a.useState)(new Set),[R,F]=(0,a.useState)(!1),[X,U]=(0,a.useState)({total:0,favorites:0,recentlyAdded:0,frequentlyContacted:0});(0,a.useEffect)(()=>{t&&z()},[t]),(0,a.useEffect)(()=>{let e=[...l];if("all"!==f&&(e=e.filter(e=>{switch(f){case"favorites":return e.isFavorite;case"recent":return B(e);case"work":return"work"===e.category||e.company;case"family":return"family"===e.category;case"friends":return"friends"===e.category;default:return e.category===f}})),h.trim()){const t=h.toLowerCase();e=e.filter(e=>{var n,a,s,i;return(null===(n=e.name)||void 0===n?void 0:n.toLowerCase().includes(t))||(null===(a=e.email)||void 0===a?void 0:a.toLowerCase().includes(t))||(null===(s=e.phone)||void 0===s?void 0:s.includes(t))||(null===(i=e.company)||void 0===i?void 0:i.toLowerCase().includes(t))})}e.sort((e,t)=>{switch(v){case"name":return(e.name||"").localeCompare(t.name||"");case"recent":return new Date(t.lastContacted||t.createdAt)-new Date(e.lastContacted||e.createdAt);case"frequent":return(t.contactCount||0)-(e.contactCount||0);case"company":return(e.company||"").localeCompare(t.company||"");default:return 0}}),u(e)},[l,h,f,v]);const z=(0,a.useCallback)(async()=>{try{var e;A(!0),T(null);const t=await j.e.getAllContacts();c(t.contacts||[]),U(t.stats||{}),console.log("\ud83d\udcc7 Loaded contacts:",null===(e=t.contacts)||void 0===e?void 0:e.length)}catch(t){console.error("Failed to load contacts:",t),T("Failed to load contacts. Please try again.")}finally{A(!1)}},[]),B=e=>{const t=new Date(Date.now()-6048e5);return new Date(e.createdAt)>t},H=(0,a.useCallback)(()=>{var e;O(null),M(!0),null===y.G||void 0===y.G||null===(e=y.G.haptic)||void 0===e||e.call(y.G,"light")},[]),V=(0,a.useCallback)(e=>{var t;O(e),M(!0),null===y.G||void 0===y.G||null===(t=y.G.haptic)||void 0===t||t.call(y.G,"light")},[]),q=(0,a.useCallback)(async e=>{if(window.confirm("Are you sure you want to delete this contact?"))try{var t;await j.e.deleteContact(e),await z(),null===y.G||void 0===y.G||null===(t=y.G.haptic)||void 0===t||t.call(y.G,"medium")}catch(n){console.error("Failed to delete contact:",n),T("Failed to delete contact.")}},[z]),G=(0,a.useCallback)(async e=>{try{var t;await j.e.toggleFavorite(e),await z(),null===y.G||void 0===y.G||null===(t=y.G.haptic)||void 0===t||t.call(y.G,"light")}catch(n){console.error("Failed to toggle favorite:",n)}},[z]),W=(0,a.useCallback)(async e=>{try{var t;I?await j.e.updateContact(I.id,e):await j.e.createContact(e),M(!1),O(null),await z(),null===y.G||void 0===y.G||null===(t=y.G.haptic)||void 0===t||t.call(y.G,"success")}catch(n){console.error("Failed to save contact:",n),T("Failed to save contact.")}},[I,z]),K=(0,a.useCallback)(async()=>{try{A(!0);const t=await N.m.pickContacts({multiple:!0,properties:["name","email","tel"]});if(t&&t.length>0){var e;const n=await j.e.importContacts(t);await z(),alert("\u2705 Successfully imported ".concat(n.count," contacts")),null===y.G||void 0===y.G||null===(e=y.G.haptic)||void 0===e||e.call(y.G,"success")}}catch(t){console.error("Failed to import contacts:",t),t.message.includes("not supported")?T("Contact import not supported on this device."):T("Failed to import contacts. Please check permissions.")}finally{A(!1)}},[z]),Q=(0,a.useCallback)(async()=>{try{var e;const t=await j.e.exportContacts(),n=new Blob([t.csv],{type:"text/csv"}),a=URL.createObjectURL(n),s=document.createElement("a");s.href=a,s.download="quibish_contacts_".concat((new Date).toISOString().split("T")[0],".csv"),document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(a),null===y.G||void 0===y.G||null===(e=y.G.haptic)||void 0===e||e.call(y.G,"success"),alert("\u2705 Exported ".concat(t.count," contacts"))}catch(t){console.error("Failed to export contacts:",t),T("Failed to export contacts.")}},[]),J=(0,a.useCallback)(e=>{D(t=>{const n=new Set(t);return n.has(e)?n.delete(e):n.add(e),F(n.size>0),n})},[]),Y=(0,a.useCallback)(()=>{D(new Set),F(!1)},[]),$=(0,a.useMemo)(()=>[{id:"all",label:"All Contacts",icon:"\ud83d\udc65",count:l.length},{id:"favorites",label:"Favorites",icon:"\u2b50",count:X.favorites},{id:"recent",label:"Recent",icon:"\ud83d\udd52",count:X.recentlyAdded},{id:"work",label:"Work",icon:"\ud83d\udcbc",count:l.filter(e=>"work"===e.category||e.company).length},{id:"family",label:"Family",icon:"\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d\udc66",count:l.filter(e=>"family"===e.category).length},{id:"friends",label:"Friends",icon:"\ud83d\udc6b",count:l.filter(e=>"friends"===e.category).length}],[l,X]);return t?(0,m.jsx)("div",{className:"contact-manager-overlay ".concat(i?"dark":""),children:(0,m.jsxs)("div",{className:"contact-manager",children:[(0,m.jsxs)("div",{className:"contact-manager-header",children:[(0,m.jsxs)("div",{className:"header-left",children:[(0,m.jsx)("h2",{children:"\ud83d\udcc7 Contacts"}),(0,m.jsxs)("div",{className:"contact-count",children:[d.length," of ",l.length," contacts"]})]}),(0,m.jsxs)("div",{className:"header-actions",children:[(0,m.jsx)("button",{className:"action-btn import-btn",onClick:K,disabled:E,title:"Import from device",children:"\ud83d\udcf1"}),(0,m.jsx)("button",{className:"action-btn export-btn",onClick:Q,disabled:E||0===l.length,title:"Export contacts",children:"\ud83d\udce4"}),(0,m.jsx)("button",{className:"action-btn add-btn",onClick:H,title:"Add new contact",children:"\u2795"}),(0,m.jsx)("button",{className:"close-btn",onClick:n,title:"Close",children:"\u2715"})]})]}),(0,m.jsxs)("div",{className:"contact-manager-controls",children:[(0,m.jsx)("div",{className:"search-section",children:(0,m.jsxs)("div",{className:"search-input-wrapper",children:[(0,m.jsx)("input",{type:"text",placeholder:"Search contacts...",value:h,onChange:e=>p(e.target.value),className:"search-input"}),(0,m.jsx)("span",{className:"search-icon",children:"\ud83d\udd0d"})]})}),(0,m.jsx)("div",{className:"filter-section",children:(0,m.jsx)(w,{categories:$,selectedCategory:f,onCategoryChange:g})}),(0,m.jsxs)("div",{className:"view-controls",children:[(0,m.jsxs)("select",{value:v,onChange:e=>S(e.target.value),className:"sort-select",children:[(0,m.jsx)("option",{value:"name",children:"Sort by Name"}),(0,m.jsx)("option",{value:"recent",children:"Sort by Recent"}),(0,m.jsx)("option",{value:"frequent",children:"Sort by Frequent"}),(0,m.jsx)("option",{value:"company",children:"Sort by Company"})]}),(0,m.jsxs)("div",{className:"view-mode-toggle",children:[(0,m.jsx)("button",{className:"view-btn ".concat("grid"===C?"active":""),onClick:()=>k("grid"),title:"Grid view",children:"\u268f"}),(0,m.jsx)("button",{className:"view-btn ".concat("list"===C?"active":""),onClick:()=>k("list"),title:"List view",children:"\u2630"})]})]})]}),R&&(0,m.jsxs)("div",{className:"bulk-actions",children:[(0,m.jsxs)("div",{className:"bulk-info",children:[_.size," contact",1!==_.size?"s":""," selected"]}),(0,m.jsxs)("div",{className:"bulk-buttons",children:[(0,m.jsx)("button",{className:"bulk-btn",onClick:()=>console.log("Bulk message"),children:"\ud83d\udcac Message"}),(0,m.jsx)("button",{className:"bulk-btn",onClick:()=>console.log("Bulk export"),children:"\ud83d\udce4 Export"}),(0,m.jsx)("button",{className:"bulk-btn danger",onClick:()=>console.log("Bulk delete"),children:"\ud83d\uddd1\ufe0f Delete"}),(0,m.jsx)("button",{className:"bulk-btn cancel",onClick:Y,children:"\u2715 Cancel"})]})]}),(0,m.jsx)("div",{className:"contact-manager-content",children:E?(0,m.jsxs)("div",{className:"loading-container",children:[(0,m.jsx)("div",{className:"loading-spinner"}),(0,m.jsx)("p",{children:"Loading contacts..."})]}):P?(0,m.jsxs)("div",{className:"error-container",children:[(0,m.jsx)("div",{className:"error-icon",children:"\u26a0\ufe0f"}),(0,m.jsx)("p",{children:P}),(0,m.jsx)("button",{className:"retry-btn",onClick:z,children:"\ud83d\udd04 Retry"})]}):0===d.length?(0,m.jsxs)("div",{className:"empty-state",children:[(0,m.jsx)("div",{className:"empty-icon",children:"\ud83d\udc65"}),(0,m.jsx)("h3",{children:h||"all"!==f?"No contacts found":"No contacts yet"}),(0,m.jsx)("p",{children:h?"Try adjusting your search or filters":"Add your first contact to get started"}),!h&&"all"===f&&(0,m.jsxs)("div",{className:"empty-actions",children:[(0,m.jsx)("button",{className:"primary-btn",onClick:H,children:"\u2795 Add Contact"}),(0,m.jsx)("button",{className:"secondary-btn",onClick:K,children:"\ud83d\udcf1 Import from Device"})]})]}):(0,m.jsx)("div",{className:"contact-grid ".concat(C),children:d.map(e=>(0,m.jsx)(b,{contact:e,viewMode:C,isSelected:_.has(e.id),onSelect:J,onEdit:V,onDelete:q,onToggleFavorite:G,onStartChat:o,onStartCall:r,darkMode:i},e.id))})}),L&&(0,m.jsx)(x.A,{isOpen:L,contact:I,allContacts:d,onClose:()=>{M(!1),O(null)},onSave:W,darkMode:i})]})}):null};var C=n(719);const k=new class{constructor(){this.donationHistory=[],this.totalDonated=0,this.lastDonationDate=null,this.donationGoals={daily:50,weekly:300,monthly:1200,yearly:15e3},this.loadDonationData()}getDonationAmounts(){return[{amount:3,label:"$3",description:"\u2615 Buy us a coffee",popular:!1},{amount:5,label:"$5",description:"\ud83c\udf55 Support development",popular:!0},{amount:10,label:"$10",description:"\ud83d\ude80 Help us grow",popular:!1},{amount:25,label:"$25",description:"\ud83d\udc8e Premium supporter",popular:!1},{amount:50,label:"$50",description:"\ud83c\udf1f Super supporter",popular:!1},{amount:100,label:"$100",description:"\ud83c\udfc6 Champion supporter",popular:!1}]}getDonationMessage(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{callsMade:t=0,messagesSent:n=0,daysUsed:a=0}=e,s=[{title:"Keep This App Free! \ud83d\udc9d",subtitle:"Your donation helps us maintain free calling for everyone",condition:()=>!0},{title:"Love Free Calling? \ud83d\udcde",subtitle:"You've made ".concat(t," free calls! Help others enjoy this too"),condition:()=>t>5},{title:"Support Our Mission \ud83c\udf0d",subtitle:"After ".concat(a," days of free use, consider supporting our work"),condition:()=>a>7},{title:"Enjoying the App? \u2764\ufe0f",subtitle:"".concat(n," messages sent! A small donation keeps it free for all"),condition:()=>n>50}];return s.find(e=>e.condition())||s[0]}async processDonation(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"card";try{await new Promise(e=>setTimeout(e,2e3));const a={id:"donation_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9)),amount:e,message:t,paymentMethod:n,timestamp:new Date,status:"completed",transactionId:"txn_".concat(Math.random().toString(36).substr(2,16))};return this.donationHistory.unshift(a),this.totalDonated+=e,this.lastDonationDate=new Date,this.saveDonationData(),console.log("\u2705 Donation processed successfully:",a),{success:!0,donation:a,message:"Thank you for your $".concat(e," donation! \ud83d\ude4f")}}catch(a){return console.error("\u274c Donation processing failed:",a),{success:!1,error:a.message,message:"Donation failed. Please try again."}}}getDonationStats(){const e=new Date,t=864e5,n=7*t,a=30*t,s=365*t,i=this.donationHistory.filter(n=>e-new Date(n.timestamp)<t).reduce((e,t)=>e+t.amount,0),o=this.donationHistory.filter(t=>e-new Date(t.timestamp)<n).reduce((e,t)=>e+t.amount,0),r=this.donationHistory.filter(t=>e-new Date(t.timestamp)<a).reduce((e,t)=>e+t.amount,0),l=this.donationHistory.filter(t=>e-new Date(t.timestamp)<s).reduce((e,t)=>e+t.amount,0);return{total:this.totalDonated,daily:i,weekly:o,monthly:r,yearly:l,donationCount:this.donationHistory.length,lastDonation:this.lastDonationDate,goals:this.donationGoals,progress:{daily:Math.min(i/this.donationGoals.daily*100,100),weekly:Math.min(o/this.donationGoals.weekly*100,100),monthly:Math.min(r/this.donationGoals.monthly*100,100),yearly:Math.min(l/this.donationGoals.yearly*100,100)}}}shouldShowDonationPrompt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{callsMade:t=0,messagesSent:n=0,daysUsed:a=0}=e,s=this.getDonationStats();return!(s.lastDonation&&new Date-new Date(s.lastDonation)<6048e5)&&(t>3||n>20||a>2||t>0&&n>5)}getThankYouMessage(e){return e>=100?{title:"\ud83c\udfc6 Champion Supporter!",message:"Your incredible generosity helps us serve thousands of users worldwide. You're amazing!",badge:"champion"}:e>=50?{title:"\ud83c\udf1f Super Supporter!",message:"Your generous donation makes a huge difference in keeping this app free for everyone!",badge:"super"}:e>=25?{title:"\ud83d\udc8e Premium Supporter!",message:"Your wonderful contribution helps us improve and expand our free services!",badge:"premium"}:e>=10?{title:"\ud83d\ude80 Growth Supporter!",message:"Your donation helps us reach more users and build better features!",badge:"growth"}:e>=5?{title:"\ud83c\udf55 Development Supporter!",message:"Your support helps us keep the lights on and the code flowing!",badge:"development"}:{title:"\u2615 Coffee Supporter!",message:"Every dollar counts! Your support helps us maintain this free service!",badge:"coffee"}}saveDonationData(){try{const e={donationHistory:this.donationHistory,totalDonated:this.totalDonated,lastDonationDate:this.lastDonationDate};localStorage.setItem("quibish_donations",JSON.stringify(e))}catch(e){console.error("Failed to save donation data:",e)}}loadDonationData(){try{const e=localStorage.getItem("quibish_donations");if(e){const t=JSON.parse(e);this.donationHistory=t.donationHistory||[],this.totalDonated=t.totalDonated||0,this.lastDonationDate=t.lastDonationDate?new Date(t.lastDonationDate):null}}catch(e){console.error("Failed to load donation data:",e)}}getRecentDonations(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;return this.donationHistory.slice(0,e)}getSupporterBadge(){const e=this.getDonationStats();return e.total>=100?{level:"champion",icon:"\ud83c\udfc6",title:"Champion Supporter"}:e.total>=50?{level:"super",icon:"\ud83c\udf1f",title:"Super Supporter"}:e.total>=25?{level:"premium",icon:"\ud83d\udc8e",title:"Premium Supporter"}:e.total>=10?{level:"growth",icon:"\ud83d\ude80",title:"Growth Supporter"}:e.total>=5?{level:"development",icon:"\ud83c\udf55",title:"Development Supporter"}:e.total>=1?{level:"coffee",icon:"\u2615",title:"Coffee Supporter"}:null}},E=e=>{var t;let{isOpen:n,onClose:s,userStats:i={},darkMode:o=!1,trigger:r="manual"}=e;const[l,c]=(0,a.useState)(5),[d,u]=(0,a.useState)(""),[h,p]=(0,a.useState)(""),[f,g]=(0,a.useState)("card"),[v,y]=(0,a.useState)(!1),[b,x]=(0,a.useState)(!1),[w,j]=(0,a.useState)(null),[N,S]=(0,a.useState)(null);(0,a.useEffect)(()=>{if(n){const e=k.getDonationStats();S(e)}},[n]);const C=k.getDonationAmounts(),E=k.getDonationMessage(i),A=()=>{v||(s(),setTimeout(()=>{x(!1),j(null),c(5),u(""),p("")},300))};return n?(0,m.jsx)("div",{className:"donation-modal-overlay ".concat(o?"dark":""),children:(0,m.jsx)("div",{className:"donation-modal",children:b&&null!==w&&void 0!==w&&w.success?(0,m.jsxs)("div",{className:"donation-thank-you",children:[(0,m.jsxs)("div",{className:"thank-you-header",children:[(0,m.jsx)("div",{className:"thank-you-icon",children:"\ud83d\ude4f"}),(0,m.jsx)("h2",{children:k.getThankYouMessage(l).title}),(0,m.jsx)("p",{children:k.getThankYouMessage(l).message})]}),(0,m.jsxs)("div",{className:"donation-receipt",children:[(0,m.jsxs)("div",{className:"receipt-item",children:[(0,m.jsx)("span",{children:"Donation Amount:"}),(0,m.jsxs)("span",{className:"amount",children:["$",l]})]}),(0,m.jsxs)("div",{className:"receipt-item",children:[(0,m.jsx)("span",{children:"Transaction ID:"}),(0,m.jsx)("span",{className:"transaction-id",children:null===(t=w.donation)||void 0===t?void 0:t.transactionId})]}),(0,m.jsxs)("div",{className:"receipt-item",children:[(0,m.jsx)("span",{children:"Date:"}),(0,m.jsx)("span",{children:(new Date).toLocaleDateString()})]})]}),(0,m.jsxs)("div",{className:"supporter-badge",children:[(0,m.jsx)("div",{className:"badge-icon",children:"champion"===k.getThankYouMessage(l).badge?"\ud83c\udfc6":"super"===k.getThankYouMessage(l).badge?"\ud83c\udf1f":"premium"===k.getThankYouMessage(l).badge?"\ud83d\udc8e":"growth"===k.getThankYouMessage(l).badge?"\ud83d\ude80":"development"===k.getThankYouMessage(l).badge?"\ud83c\udf55":"\u2615"}),(0,m.jsxs)("p",{children:["You're now a ",(0,m.jsx)("strong",{children:k.getThankYouMessage(l).title}),"!"]})]}),(0,m.jsx)("button",{className:"close-thank-you-btn",onClick:A,children:"Continue Using App"})]}):(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("div",{className:"donation-header",children:[(0,m.jsxs)("div",{children:[(0,m.jsx)("h2",{children:E.title}),(0,m.jsx)("p",{className:"donation-subtitle",children:E.subtitle})]}),(0,m.jsx)("button",{className:"close-btn",onClick:A,disabled:v,children:"\u2715"})]}),(0,m.jsxs)("div",{className:"donation-content",children:[(0,m.jsxs)("div",{className:"impact-statement",children:[(0,m.jsxs)("div",{className:"impact-item",children:[(0,m.jsx)("span",{className:"impact-icon",children:"\ud83d\udcde"}),(0,m.jsxs)("div",{children:[(0,m.jsx)("strong",{children:"Free Calling"}),(0,m.jsx)("p",{children:"Keep international calling free for everyone"})]})]}),(0,m.jsxs)("div",{className:"impact-item",children:[(0,m.jsx)("span",{className:"impact-icon",children:"\ud83d\ude80"}),(0,m.jsxs)("div",{children:[(0,m.jsx)("strong",{children:"New Features"}),(0,m.jsx)("p",{children:"Fund development of exciting new capabilities"})]})]}),(0,m.jsxs)("div",{className:"impact-item",children:[(0,m.jsx)("span",{className:"impact-icon",children:"\ud83c\udf0d"}),(0,m.jsxs)("div",{children:[(0,m.jsx)("strong",{children:"Global Reach"}),(0,m.jsx)("p",{children:"Help us serve users worldwide"})]})]})]}),(0,m.jsxs)("div",{className:"donation-amounts",children:[(0,m.jsx)("h3",{children:"Choose an amount:"}),(0,m.jsx)("div",{className:"amount-grid",children:C.map(e=>(0,m.jsxs)("button",{className:"amount-btn ".concat(l!==e.amount||d?"":"selected"," ").concat(e.popular?"popular":""),onClick:()=>{return t=e.amount,c(t),void u("");var t},disabled:v,children:[e.popular&&(0,m.jsx)("span",{className:"popular-badge",children:"Most Popular"}),(0,m.jsx)("span",{className:"amount-label",children:e.label}),(0,m.jsx)("span",{className:"amount-description",children:e.description})]},e.amount))}),(0,m.jsxs)("div",{className:"custom-amount",children:[(0,m.jsx)("label",{children:"Or enter a custom amount:"}),(0,m.jsxs)("div",{className:"custom-input-group",children:[(0,m.jsx)("span",{className:"currency-symbol",children:"$"}),(0,m.jsx)("input",{type:"text",placeholder:"0.00",value:d,onChange:e=>{const t=e.target.value.replace(/[^0-9.]/g,"");u(t),t&&c(parseFloat(t))},disabled:v,className:"custom-amount-input"})]})]})]}),(0,m.jsxs)("div",{className:"donation-message",children:[(0,m.jsx)("label",{children:"Leave a message (optional):"}),(0,m.jsx)("textarea",{placeholder:"Thanks for creating this amazing free app!",value:h,onChange:e=>p(e.target.value),disabled:v,maxLength:200}),(0,m.jsxs)("div",{className:"character-count",children:[h.length,"/200"]})]}),(0,m.jsxs)("div",{className:"payment-method",children:[(0,m.jsx)("label",{children:"Payment method:"}),(0,m.jsxs)("div",{className:"payment-options",children:[(0,m.jsx)("button",{className:"payment-btn ".concat("card"===f?"selected":""),onClick:()=>g("card"),disabled:v,children:"\ud83d\udcb3 Credit Card"}),(0,m.jsx)("button",{className:"payment-btn ".concat("paypal"===f?"selected":""),onClick:()=>g("paypal"),disabled:v,children:"\ud83c\udd7f\ufe0f PayPal"})]})]}),w&&!w.success&&(0,m.jsxs)("div",{className:"donation-error",children:[(0,m.jsx)("span",{className:"error-icon",children:"\u26a0\ufe0f"}),(0,m.jsx)("span",{children:w.message})]}),(0,m.jsxs)("div",{className:"donation-actions",children:[(0,m.jsx)("button",{className:"donate-btn",onClick:async()=>{const e=d?parseFloat(d):l;if(!e||e<1)alert("Please enter a valid donation amount ($1 minimum)");else{y(!0);try{const t=await k.processDonation(e,h,f);j(t),t.success&&(x(!0),setTimeout(()=>{s(),x(!1),j(null)},5e3))}catch(t){console.error("Donation error:",t),j({success:!1,message:"Something went wrong. Please try again."})}finally{y(!1)}}},disabled:v||!l&&!d,children:v?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("span",{className:"loading-spinner"}),"Processing..."]}):(0,m.jsxs)(m.Fragment,{children:["\ud83d\udc9d Donate $",d||l]})}),(0,m.jsx)("p",{className:"donation-note",children:"\ud83d\udd12 Secure payment \u2022 \ud83d\udc9d 100% goes to app development \u2022 \ud83d\ude4f Thank you!"})]}),N&&(0,m.jsx)("div",{className:"donation-stats",children:(0,m.jsxs)("p",{className:"stats-text",children:["\ud83d\udcb0 Community has donated ",(0,m.jsxs)("strong",{children:["$",N.yearly]})," this year",N.donationCount>0&&(0,m.jsxs)(m.Fragment,{children:[" \u2022 \ud83c\udf89 ",(0,m.jsx)("strong",{children:N.donationCount})," supporters"]})]})})]})]})})}):null},A=e=>{let{userStats:t={},darkMode:n=!1,onOpenDonation:s,position:i="bottom-right",autoShow:o=!0}=e;const[r,l]=(0,a.useState)(!1),[c,d]=(0,a.useState)(!1),[u,h]=(0,a.useState)(null);(0,a.useEffect)(()=>{if(o&&!c){if(k.shouldShowDonationPrompt(t)){const e=setTimeout(()=>{l(!0)},1e4);return()=>clearTimeout(e)}}const e=k.getSupporterBadge();h(e)},[t,o,c]);const p=()=>{l(!1),d(!0),sessionStorage.setItem("donation_prompt_dismissed","true")};if((0,a.useEffect)(()=>{sessionStorage.getItem("donation_prompt_dismissed")&&d(!0)},[]),c)return u?(0,m.jsx)("div",{className:"supporter-badge-display ".concat(i," ").concat(n?"dark":""),children:(0,m.jsxs)("div",{className:"badge-content",children:[(0,m.jsx)("span",{className:"badge-icon",children:u.icon}),(0,m.jsx)("span",{className:"badge-title",children:u.title})]})}):null;if(!r)return null;k.getDonationMessage(t);return(0,m.jsxs)("div",{className:"donation-prompt ".concat(i," ").concat(n?"dark":""),children:[(0,m.jsxs)("div",{className:"prompt-content",children:[(0,m.jsxs)("div",{className:"prompt-header",children:[(0,m.jsx)("div",{className:"prompt-icon",children:"\ud83d\udc9d"}),(0,m.jsxs)("div",{className:"prompt-text",children:[(0,m.jsx)("div",{className:"prompt-title",children:"Love this free app?"}),(0,m.jsx)("div",{className:"prompt-subtitle",children:"Help us keep it free for everyone!"})]}),(0,m.jsx)("button",{className:"prompt-close",onClick:p,children:"\u2715"})]}),(0,m.jsxs)("div",{className:"prompt-actions",children:[(0,m.jsx)("button",{className:"donate-now-btn",onClick:()=>{l(!1),s&&s()},children:"\ud83d\udc9d Donate"}),(0,m.jsx)("button",{className:"maybe-later-btn",onClick:p,children:"Maybe Later"})]})]}),(0,m.jsx)("div",{className:"prompt-stats",children:"\ud83d\udcb0 Help us reach our goal of keeping this 100% free!"})]})};var P=n(579),T=n(398);const L=new class{constructor(){this.originalMessageService=P.default,this.encryptionEnabled=!1}async initializeEncryption(e){try{const t=await T.A.initialize(e);return this.encryptionEnabled=t,console.log("\ud83d\udd12 Encryption ".concat(t?"enabled":"disabled"," for user:"),e),t}catch(t){return console.error("\u274c Failed to initialize encryption:",t),this.encryptionEnabled=!1,!1}}async sendMessage(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{const{encrypt:n=!0,recipientId:a=null,conversationParticipants:s=[]}=t;if(this.encryptionEnabled&&n){if(a)return await this.sendEncryptedDirectMessage(e,a);if(s.length>0)return await this.sendEncryptedGroupMessage(e,s)}return await this.originalMessageService.sendMessage(e)}catch(n){throw console.error("\u274c Failed to send message:",n),n}}async sendEncryptedDirectMessage(e,t){try{if(!T.A.canEncryptForUser(t))throw new Error("Cannot encrypt for user ".concat(t," - no public key available"));const n=await T.A.encryptMessage(e.text,t),a=(0,i.A)((0,i.A)({},e),{},{text:"[Encrypted Message]",encryptedContent:n.encryptedContent,isEncrypted:!0,recipientId:t,messageType:"encrypted"}),s=await this.originalMessageService.sendMessage(a);return(0,i.A)((0,i.A)({},s),{},{text:e.text,isEncrypted:!0,encryptionStatus:"sent"})}catch(n){throw console.error("\u274c Failed to send encrypted direct message:",n),n}}async sendEncryptedGroupMessage(e,t){try{const n=await T.A.encryptForGroup(e.text,t),a=(0,i.A)((0,i.A)({},e),{},{text:"[Encrypted Group Message]",encryptedPayloads:n.encryptedPayloads,isGroupEncrypted:!0,messageType:"group_encrypted"}),s=await this.originalMessageService.sendMessage(a);return(0,i.A)((0,i.A)({},s),{},{text:e.text,isEncrypted:!0,encryptionStatus:"sent"})}catch(n){throw console.error("\u274c Failed to send encrypted group message:",n),n}}async getMessages(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{const t=await this.originalMessageService.getMessages(e);if(!this.encryptionEnabled)return t;return await Promise.all(t.map(e=>this.decryptMessageIfNeeded(e)))}catch(t){throw console.error("\u274c Failed to get and decrypt messages:",t),t}}async decryptMessageIfNeeded(e){try{if(!e.isEncrypted&&!e.encryptedContent)return e;if(e.encryptedContent){const t=await T.A.decryptMessage({encryptedContent:e.encryptedContent,senderId:e.senderId,timestamp:e.timestamp});return(0,i.A)((0,i.A)({},e),{},{text:t.content,isEncrypted:!0,encryptionStatus:t.decryptionError?"failed":"decrypted"})}if(e.encryptedPayloads&&e.encryptedPayloads[T.A.userId]){const t=e.encryptedPayloads[T.A.userId],n=await T.A.decryptMessage({encryptedContent:t,senderId:e.senderId,timestamp:e.timestamp});return(0,i.A)((0,i.A)({},e),{},{text:n.content,isEncrypted:!0,encryptionStatus:n.decryptionError?"failed":"decrypted"})}return(0,i.A)((0,i.A)({},e),{},{text:"[Unable to decrypt message]",isEncrypted:!0,encryptionStatus:"failed"})}catch(t){return console.error("\u274c Failed to decrypt message:",t),(0,i.A)((0,i.A)({},e),{},{text:"[Decryption error]",isEncrypted:!0,encryptionStatus:"error"})}}async addUserPublicKey(e,t){try{const n=await T.A.importPublicKey(e,t);return n&&console.log("\u2705 Added public key for user: ".concat(e)),n}catch(n){return console.error("\u274c Failed to add user public key:",n),!1}}async getPublicKeyForSharing(){try{return await T.A.getPublicKeyForSharing()}catch(e){return console.error("\u274c Failed to get public key for sharing:",e),null}}canEncryptForUser(e){return this.encryptionEnabled&&T.A.canEncryptForUser(e)}getEncryptionStatus(){return{enabled:this.encryptionEnabled,serviceStatus:T.A.getStatus()}}async generateKeyFingerprint(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;try{return await T.A.generateKeyFingerprint(e)}catch(t){return console.error("\u274c Failed to generate fingerprint:",t),null}}clearEncryption(){T.A.clearEncryptionData(),this.encryptionEnabled=!1,console.log("\ud83e\uddf9 Cleared encryption data")}async editMessage(e,t){return await this.originalMessageService.editMessage(e,t)}async deleteMessage(e){return await this.originalMessageService.deleteMessage(e)}async addReaction(e,t){return await this.originalMessageService.addReaction(e,t)}async removeReaction(e,t){return await this.originalMessageService.removeReaction(e,t)}onMessage(e){return this.originalMessageService.onMessage(async t=>{const n=await this.decryptMessageIfNeeded(t);e(n)})}onMessageUpdate(e){return this.originalMessageService.onMessageUpdate(async t=>{const n=await this.decryptMessageIfNeeded(t);e(n)})}onMessageDelete(e){return this.originalMessageService.onMessageDelete(e)}};var M=n(967);const I=new class{constructor(){this.localStream=null,this.remoteStream=null,this.peerConnection=null,this.socket=null,this.activeCall=null,this.onlineUsers=new Map,this.isConnected=!1,this.rtcConfig={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:stun1.l.google.com:19302"},{urls:"stun:stun2.l.google.com:19302"},{urls:"stun:stun3.l.google.com:19302"},{urls:"stun:stun4.l.google.com:19302"},{urls:"turn:openrelay.metered.ca:80",username:"openrelayproject",credential:"openrelayproject"},{urls:"turn:openrelay.metered.ca:443",username:"openrelayproject",credential:"openrelayproject"}],iceCandidatePoolSize:10},this.initializeSignaling()}initializeSignaling(){try{const e="wss://your-domain.com/signaling";this.socket=new WebSocket(e),this.socket.onopen=()=>{console.log("Global voice call signaling connected"),this.isConnected=!0,this.registerUser()},this.socket.onmessage=e=>{this.handleSignalingMessage(JSON.parse(e.data))},this.socket.onclose=()=>{console.log("Signaling connection closed, attempting reconnect..."),this.isConnected=!1,setTimeout(()=>this.initializeSignaling(),3e3)},this.socket.onerror=e=>{console.warn("Signaling error, using local fallback:",e),this.setupLocalFallback()}}catch(e){console.warn("WebSocket not available, using local fallback:",e),this.setupLocalFallback()}}setupLocalFallback(){this.isConnected=!1,console.log("Using local fallback mode for voice calls")}registerUser(){const e=JSON.parse(localStorage.getItem("user")||"{}");this.socket&&this.socket.readyState===WebSocket.OPEN&&this.socket.send(JSON.stringify({type:"register",userId:e.id||"anonymous",userData:{name:e.name||"Anonymous User",avatar:e.avatar,location:"Unknown"}}))}handleSignalingMessage(e){switch(e.type){case"user-list":this.updateOnlineUsers(e.users);break;case"call-offer":this.handleIncomingCall(e);break;case"call-answer":this.handleCallAnswer(e);break;case"ice-candidate":this.handleIceCandidate(e);break;case"call-end":this.handleCallEnd(e);break;case"user-joined":this.onlineUsers.set(e.userId,e.userData);break;case"user-left":this.onlineUsers.delete(e.userId);break;default:console.log("Unknown signaling message:",e)}}updateOnlineUsers(e){this.onlineUsers.clear(),e.forEach(e=>{this.onlineUsers.set(e.id,e)})}getAvailableUsers(){return Array.from(this.onlineUsers.values()).filter(e=>{const t=JSON.parse(localStorage.getItem("user")||"{}");return e.id!==t.id})}async initiateCall(e){try{const t=this.onlineUsers.get(e);if(!t)throw new Error("Target user not found or offline");this.localStream=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0,sampleRate:48e3},video:!1}),this.peerConnection=new RTCPeerConnection(this.rtcConfig),this.setupPeerConnectionHandlers(),this.localStream.getTracks().forEach(e=>{this.peerConnection.addTrack(e,this.localStream)});const n=await this.peerConnection.createOffer();return await this.peerConnection.setLocalDescription(n),this.socket&&this.socket.readyState===WebSocket.OPEN?(this.socket.send(JSON.stringify({type:"call-offer",targetUserId:e,offer:n,callId:this.generateCallId()})),this.activeCall={id:this.generateCallId(),targetUser:t,status:"calling",startTime:Date.now(),type:"outgoing"},this.activeCall):this.simulateLocalCall(t)}catch(t){throw console.error("Failed to initiate call:",t),this.cleanup(),t}}async handleIncomingCall(e){try{if(!window.confirm("Incoming voice call from ".concat(e.callerName||"Unknown User",". Accept?")))return void this.rejectCall(e.callId);this.localStream=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0},video:!1}),this.peerConnection=new RTCPeerConnection(this.rtcConfig),this.setupPeerConnectionHandlers(),this.localStream.getTracks().forEach(e=>{this.peerConnection.addTrack(e,this.localStream)}),await this.peerConnection.setRemoteDescription(e.offer);const t=await this.peerConnection.createAnswer();await this.peerConnection.setLocalDescription(t),this.socket&&this.socket.readyState===WebSocket.OPEN&&this.socket.send(JSON.stringify({type:"call-answer",callId:e.callId,answer:t})),this.activeCall={id:e.callId,targetUser:e.callerData,status:"connected",startTime:Date.now(),type:"incoming"}}catch(t){console.error("Failed to handle incoming call:",t),this.rejectCall(e.callId)}}async handleCallAnswer(e){try{this.peerConnection&&(await this.peerConnection.setRemoteDescription(e.answer),this.activeCall&&(this.activeCall.status="connected",this.activeCall.connectedTime=Date.now()))}catch(t){console.error("Failed to handle call answer:",t)}}async handleIceCandidate(e){try{this.peerConnection&&e.candidate&&await this.peerConnection.addIceCandidate(e.candidate)}catch(t){console.error("Failed to handle ICE candidate:",t)}}setupPeerConnectionHandlers(){this.peerConnection.onicecandidate=e=>{var t;e.candidate&&this.socket&&this.socket.readyState===WebSocket.OPEN&&this.socket.send(JSON.stringify({type:"ice-candidate",candidate:e.candidate,callId:null===(t=this.activeCall)||void 0===t?void 0:t.id}))},this.peerConnection.ontrack=e=>{this.remoteStream=e.streams[0],this.playRemoteStream()},this.peerConnection.onconnectionstatechange=()=>{const e=this.peerConnection.connectionState;console.log("Connection state:",e),"connected"===e&&this.activeCall?this.activeCall.status="connected":"disconnected"!==e&&"failed"!==e||this.endCall()}}playRemoteStream(){if(this.remoteStream){const e=document.createElement("audio");e.srcObject=this.remoteStream,e.autoplay=!0,e.style.display="none",document.body.appendChild(e)}}endCall(){this.socket&&this.socket.readyState===WebSocket.OPEN&&this.activeCall&&this.socket.send(JSON.stringify({type:"call-end",callId:this.activeCall.id})),this.cleanup()}rejectCall(e){this.socket&&this.socket.readyState===WebSocket.OPEN&&this.socket.send(JSON.stringify({type:"call-reject",callId:e}))}handleCallEnd(e){this.cleanup()}cleanup(){this.localStream&&(this.localStream.getTracks().forEach(e=>e.stop()),this.localStream=null),this.peerConnection&&(this.peerConnection.close(),this.peerConnection=null),this.remoteStream&&(this.remoteStream=null),document.querySelectorAll('audio[src*="blob:"]').forEach(e=>{e.remove()}),this.activeCall=null}generateCallId(){return"call_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9))}simulateLocalCall(e){const t=this.generateCallId();return setTimeout(()=>{window.confirm("Simulating call to ".concat(e.name,". Simulate successful connection?"))?(this.activeCall={id:t,targetUser:e,status:"connected",startTime:Date.now(),type:"simulated",isSimulated:!0},console.log("Simulated call connected:",this.activeCall)):this.activeCall=null},2e3),{id:t,targetUser:e,status:"calling",startTime:Date.now(),type:"simulated"}}getCallStatus(){return this.activeCall}async canMakeCalls(){try{return(await navigator.mediaDevices.getUserMedia({audio:!0})).getTracks().forEach(e=>e.stop()),!0}catch(e){return!1}}getConnectionStats(){return{isConnected:this.isConnected,onlineUsers:this.onlineUsers.size,hasActiveCall:!!this.activeCall,connectionMode:this.isConnected?"global":"local"}}},O=e=>{let{onStartCall:t,currentCall:n}=e;const[s,i]=(0,a.useState)([]),[o,r]=(0,a.useState)({}),[l,c]=(0,a.useState)(!1),[d,u]=(0,a.useState)("");(0,a.useEffect)(()=>{h(),p();const e=setInterval(()=>{h(),p()},5e3);return()=>clearInterval(e)},[]);const h=()=>{const e=I.getAvailableUsers();i(e)},p=()=>{const e=I.getConnectionStats();r(e)},f=s.filter(e=>e.name.toLowerCase().includes(d.toLowerCase())||e.location.toLowerCase().includes(d.toLowerCase()));return(0,m.jsxs)("div",{className:"global-users ".concat(l?"expanded":""),children:[(0,m.jsxs)("div",{className:"global-users-header",onClick:()=>c(!l),children:[(0,m.jsxs)("div",{className:"header-info",children:[(0,m.jsx)("span",{className:"title",children:"\ud83c\udf0d Global Voice Calls"}),(0,m.jsxs)("div",{className:"connection-status",children:[(0,m.jsx)("span",{className:"status-indicator ".concat(o.isConnected?"connected":"local"),children:o.isConnected?"Connected":"Local Mode"}),(0,m.jsxs)("span",{className:"user-count",children:[s.length," users"]})]})]}),(0,m.jsx)("button",{className:"expand-button",children:l?"\u25bc":"\u25b6"})]}),l&&(0,m.jsxs)("div",{className:"global-users-content",children:[(0,m.jsx)("div",{className:"search-section",children:(0,m.jsx)("input",{type:"text",placeholder:"Search users by name or location...",value:d,onChange:e=>u(e.target.value),className:"user-search"})}),(0,m.jsxs)("div",{className:"connection-info",children:[(0,m.jsxs)("div",{className:"info-item",children:[(0,m.jsx)("span",{className:"info-label",children:"Mode:"}),(0,m.jsx)("span",{className:"info-value",children:o.connectionMode||"local"})]}),(0,m.jsxs)("div",{className:"info-item",children:[(0,m.jsx)("span",{className:"info-label",children:"Available:"}),(0,m.jsxs)("span",{className:"info-value",children:[o.onlineUsers," users"]})]}),o.hasActiveCall&&(0,m.jsxs)("div",{className:"info-item active-call",children:[(0,m.jsx)("span",{className:"info-label",children:"Status:"}),(0,m.jsx)("span",{className:"info-value",children:"\ud83d\udcde In Call"})]})]}),(0,m.jsx)("div",{className:"users-list",children:0===f.length?(0,m.jsx)("div",{className:"no-users",children:d?(0,m.jsxs)("p",{children:['No users found matching "',d,'"']}):o.isConnected?(0,m.jsx)("p",{children:"No users currently online"}):(0,m.jsxs)("div",{className:"local-mode-message",children:[(0,m.jsx)("p",{children:"\ud83d\udd27 Running in local mode"}),(0,m.jsx)("p",{children:"No users currently online"}),(0,m.jsx)("small",{children:"Backend signaling server not available"})]})}):f.map(e=>(0,m.jsxs)("div",{className:"user-item",children:[(0,m.jsxs)("div",{className:"user-avatar",children:[(0,m.jsx)("img",{src:e.avatar,alt:e.name,onError:t=>{t.target.src="https://ui-avatars.com/api/?name=".concat(encodeURIComponent(e.name),"&background=4f46e5&color=fff&size=40")}}),(0,m.jsx)("div",{className:"user-status-indicator online"})]}),(0,m.jsxs)("div",{className:"user-info",children:[(0,m.jsx)("div",{className:"user-name",children:e.name}),(0,m.jsxs)("div",{className:"user-details",children:[(0,m.jsxs)("span",{className:"user-location",children:["\ud83d\udccd ",e.location]}),(0,m.jsx)("span",{className:"user-status",children:"\ud83d\udfe2 Online"})]})]}),(0,m.jsx)("div",{className:"user-actions",children:(0,m.jsx)("button",{className:"call-button",onClick:()=>(async e=>{try{const n=await I.initiateCall(e.id);null===t||void 0===t||t(n)}catch(n){alert("Failed to start call: ".concat(n.message))}})(e),disabled:!!n,title:n?"Already in a call":"Call ".concat(e.name),children:"\ud83d\udcde"})})]},e.id))}),(0,m.jsxs)("div",{className:"global-users-footer",children:[(0,m.jsx)("button",{className:"refresh-button",onClick:h,title:"Refresh user list",children:"\ud83d\udd04 Refresh"}),(0,m.jsx)("div",{className:"connection-help",children:(0,m.jsx)("small",{children:o.isConnected?"Connected to global network":"Local mode - no users online"})})]})]})]})};var _=n(985),D=n(910);const R={NODE_ENV:"production",PUBLIC_URL:"/quibish",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_ALLOWED_FILE_TYPES:"image/jpeg,image/png,image/gif,image/webp,video/mp4,video/webm,audio/mp3,audio/wav",REACT_APP_API_BASE_URL:"https://api.quibish.com/api",REACT_APP_API_TIMEOUT:"5000",REACT_APP_AVATAR_SERVICE:"https://ui-avatars.com/api",REACT_APP_CONNECTION_TIMEOUT:"8000",REACT_APP_DEFAULT_LANGUAGE:"en",REACT_APP_DEFAULT_THEME:"auto",REACT_APP_ENABLE_ANIMATIONS:"true",REACT_APP_ENABLE_DEMO_MODE:"false",REACT_APP_ENABLE_DEV_TOOLS:"false",REACT_APP_ENABLE_EXPERIMENTAL:"false",REACT_APP_ENABLE_LOGGING:"false",REACT_APP_ENABLE_PERFORMANCE_MONITORING:"true",REACT_APP_ENABLE_REACT_DEVTOOLS:"false",REACT_APP_ENABLE_SOUNDS:"false",REACT_APP_GRAPHQL_URL:"https://graphql.quibish.com/graphql",REACT_APP_MAX_FILE_SIZE:"10",REACT_APP_PLACEHOLDER_SERVICE:"https://images.unsplash.com",REACT_APP_SEARCH_DEBOUNCE:"300",REACT_APP_SEARCH_MAX_RESULTS:"50",REACT_APP_SESSION_TIMEOUT:"30",REACT_APP_TOKEN_STORAGE_KEY:"quibish_prod_token",REACT_APP_UPLOAD_ENDPOINT:"/api/upload",REACT_APP_WS_RECONNECT_ATTEMPTS:"3",REACT_APP_WS_RECONNECT_DELAY:"3000",REACT_APP_WS_URL:"wss://ws.quibish.com/ws"}.REACT_APP_API_URL||"http://localhost:5001";const F=new class{constructor(){this.api=D.A.create({baseURL:"".concat(R,"/api/feedback"),timeout:1e4}),this.api.interceptors.request.use(e=>{const t=localStorage.getItem("authToken");return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e)),this.api.interceptors.response.use(e=>e,e=>{var t;return console.error("Feedback API Error:",e),401===(null===(t=e.response)||void 0===t?void 0:t.status)&&console.warn("Unauthorized feedback request"),Promise.reject(e)})}async submitFeedback(e){try{console.log("\ud83d\udcdd Submitting feedback:",{type:e.type,title:e.title,hasEmail:!!e.email,rating:e.rating,priority:e.priority});const t=await this.api.post("/",e);return console.log("\u2705 Feedback submitted successfully:",t.data),t.data}catch(n){var t;throw console.error("\u274c Failed to submit feedback:",n),null!==(t=n.response)&&void 0!==t&&t.data?new Error(n.response.data.message||"Failed to submit feedback"):"ECONNREFUSED"===n.code?new Error("Unable to connect to feedback service. Please try again later."):new Error("An unexpected error occurred. Please try again.")}}async getFeedbackStats(){try{return(await this.api.get("/stats")).data}catch(e){throw console.error("Failed to fetch feedback stats:",e),new Error("Failed to fetch feedback statistics")}}async getFeedbackList(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{return(await this.api.get("/",{params:e})).data}catch(t){throw console.error("Failed to fetch feedback list:",t),new Error("Failed to fetch feedback list")}}validateFeedback(e){const t={};return e.type||(t.type="Feedback type is required"),e.title&&0!==e.title.trim().length||(t.title="Title is required"),(!e.description||e.description.trim().length<10)&&(t.description="Description must be at least 10 characters"),e.email&&!/\S+@\S+\.\S+/.test(e.email)&&(t.email="Please enter a valid email address"),e.rating&&(e.rating<1||e.rating>5)&&(t.rating="Rating must be between 1 and 5"),"bug"!==e.type||e.category||(t.category="Category is required for bug reports"),{isValid:0===Object.keys(t).length,errors:t}}formatFeedbackData(e){var t,n,a;return{type:e.type,title:null===(t=e.title)||void 0===t?void 0:t.trim(),description:null===(n=e.description)||void 0===n?void 0:n.trim(),email:(null===(a=e.email)||void 0===a?void 0:a.trim())||null,rating:e.rating||null,category:e.category||null,priority:e.priority||"medium",attachments:e.attachments||[],timestamp:e.timestamp||(new Date).toISOString(),userAgent:e.userAgent||navigator.userAgent,url:e.url||window.location.href}}getFeedbackTypes(){return[{value:"bug",label:"Bug Report",icon:"\ud83d\udc1b",color:"#ff4757"},{value:"feature",label:"Feature Request",icon:"\ud83d\udca1",color:"#3742fa"},{value:"improvement",label:"Improvement",icon:"\u26a1",color:"#2ed573"},{value:"general",label:"General Feedback",icon:"\ud83d\udcac",color:"#5352ed"},{value:"question",label:"Question",icon:"\u2753",color:"#ff6b35"},{value:"compliment",label:"Compliment",icon:"\ud83c\udf89",color:"#26de81"}]}getCategoriesForType(e){return{bug:["UI/UX","Performance","Authentication","Messaging","Profile","Mobile","Other"],feature:["Chat Features","Profile Features","Mobile App","Integrations","Settings","Other"],improvement:["Speed","Design","Usability","Accessibility","Mobile Experience","Other"],general:["Overall Experience","Design","Performance","Features","Support","Other"],question:["How to Use","Account","Features","Technical","Billing","Other"],compliment:["Design","Features","Performance","Support","Overall","Other"]}[e]||[]}},X=e=>{var t,n,s;let{user:y={id:"user1",name:"Current User",avatar:null},conversations:b=[],currentConversation:x=null,onLogout:w=()=>{},darkMode:k=!1,onToggleDarkMode:T=()=>{}}=e;const[D]=(0,a.useState)(!0),[R,X]=(0,a.useState)(!1),[U,z]=(0,a.useState)((null===(t=b[0])||void 0===t?void 0:t.id)||null),[B,H]=(0,a.useState)(""),[V,q]=(0,a.useState)("all"),[G,W]=(0,a.useState)(!1),[K,Q]=(0,a.useState)(!1),[J,Y]=(0,a.useState)(!1),[$,Z]=(0,a.useState)(0),[ee,te]=(0,a.useState)(!1),[ne,ae]=(0,a.useState)({open:!1,imageUrl:null,imageName:null,zoom:1,pan:{x:0,y:0},isDragging:!1,currentIndex:0,images:[],isLoading:!1}),[se,ie]=(0,a.useState)({open:!1,videoUrl:null,videoName:null,poster:null,type:null}),[oe,re]=(0,a.useState)(!1),[le,ce]=(0,a.useState)(!1),[de,ue]=(0,a.useState)(!1),[he,me]=(0,a.useState)(!1),[pe,fe]=(0,a.useState)("photo"),[ge,ve]=(0,a.useState)(!1),[ye,be]=(0,a.useState)(!1),[xe,we]=(0,a.useState)(!1),[je,Ne]=(0,a.useState)(!1),[Se,Ce]=(0,a.useState)(!1),[ke,Ee]=(0,a.useState)({enabled:!1}),[Ae,Pe]=(0,a.useState)(!0),[Te,Le]=(0,a.useState)({isUploading:!1,fileName:"",progress:0,fileSize:0,uploadedSize:0}),Me=(0,a.useRef)(null),Ie=(0,a.useRef)(null),Oe=(0,a.useRef)(null),_e=(0,a.useRef)(null),De=(0,a.useRef)(null),Re=(0,a.useRef)(null),Fe=(0,a.useRef)(null),[Xe,Ue]=(0,a.useState)([]),[ze,Be]=(0,a.useState)(!0),[He,Ve]=(0,a.useState)(null),[qe,Ge]=(0,a.useState)(null),[We,Ke]=(0,a.useState)(!1),Qe=U&&b.find(e=>e.id===U)||null;(0,a.useEffect)(()=>{(async()=>{try{Be(!0),Ve(null);try{const e=await L.initializeEncryption(y.id);if(Ce(e),e){const e=L.getEncryptionStatus();Ee(e),console.log("\ud83d\udd12 Encryption initialized for ProChat")}}catch(e){console.warn("\u26a0\ufe0f Encryption initialization failed:",e),Ce(!1)}const t=await L.getMessages({limit:50});Array.isArray(t)?Ue(t):(console.warn("Invalid messages format received:",t),Ue([]))}catch(t){console.error("Failed to load messages:",t),Ve("Failed to load messages");try{const e=P.default.loadMessagesFromStorage();Array.isArray(e)&&e.length>0&&(Ue(e),console.log("Loaded messages from local storage"))}catch(n){console.error("Failed to load from storage:",n)}}finally{Be(!1)}})()},[y.id]);const Je=(0,a.useCallback)(()=>{Re.current&&Re.current.scrollIntoView({behavior:"smooth",block:"end"})},[]);(0,a.useEffect)(()=>{Je()},[Xe,Je]),(0,a.useEffect)(()=>{const e=()=>{on(_.A.getConnectionStatus())};e();const t=setInterval(e,1e4);return()=>clearInterval(t)},[]),(0,a.useEffect)(()=>{const e=()=>{window.innerWidth<=480?(X(!0),te(!1)):window.innerWidth>768&&(X(!1),te(!1)),window.innerWidth>480&&te(!1)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),(0,a.useEffect)(()=>{if(window.innerWidth<=480&&(G||We)){document.body.classList.add("emoji-picker-open");const e=document.body.style.overflow;return document.body.style.overflow="hidden",()=>{document.body.classList.remove("emoji-picker-open"),document.body.style.overflow=e}}},[G,We]);const Ye=(0,a.useCallback)(()=>{X(e=>!e)},[]),$e=(0,a.useCallback)(()=>{te(!ee),window.innerWidth<=480&&X(!0)},[ee]),Ze=(0,a.useCallback)(()=>{window.innerWidth<=480&&X(!0)},[]),et=(0,a.useCallback)(async e=>{z(e);try{Be(!0),Ve(null),console.log("Loading messages for conversation:",e);const t=await P.default.getMessages({conversationId:e,limit:50});Array.isArray(t)?(Ue(t),console.log("Loaded conversation messages:",t.length),setTimeout(()=>{Je()},100)):(console.warn("Invalid conversation messages format received:",t),Ue([]))}catch(t){console.error("Failed to load conversation messages:",t),Ve("Failed to load conversation messages");try{const t=P.default.loadMessagesFromStorage(e);Array.isArray(t)&&t.length>0?(Ue(t),console.log("Loaded conversation messages from cache")):Ue([])}catch(n){console.error("Error loading conversation messages from storage:",n),Ue([])}}finally{Be(!1)}},[]),tt=(0,a.useCallback)(e=>{H(e.target.value)},[]),nt=(0,a.useCallback)(e=>{q(e)},[]),at=(0,a.useCallback)(()=>{Qt(!0)},[]),st=(0,a.useCallback)(()=>{console.log("Create group clicked")},[]),it=(0,a.useCallback)(async e=>{try{var t,n,a,s;console.log("New chat created:",e);const i={id:e.id||"conv_".concat(Date.now()),name:e.name||(null===(t=e.participants)||void 0===t||null===(n=t.find(e=>e.id!==y.id))||void 0===n?void 0:n.name)||"New Chat",type:e.type,participants:e.participants,lastMessage:{text:"Chat created",timestamp:e.createdAt||(new Date).toISOString(),user:{name:"System"}},unreadCount:0,isOnline:!0,avatar:"group"===e.type?null:null===(a=e.participants)||void 0===a||null===(s=a.find(e=>e.id!==y.id))||void 0===s?void 0:s.avatar};console.log("Formatted conversation:",i),z(i.id)}catch(i){throw console.error("Failed to handle new chat:",i),i}},[y]),ot=(0,a.useCallback)(()=>{Wt({open:!0,section:"profile"})},[]),rt=(0,a.useCallback)(e=>{const t=e.target.files;t&&t.length>0&&(Array.from(t).forEach(e=>{if(console.log("Processing file:",e.name,e.type),e.type.startsWith("image/")){const t=new FileReader;t.onload=t=>{var n;console.log("Image loaded, creating message with URL:",(null===(n=t.target.result)||void 0===n?void 0:n.substring(0,50))+"...");const a={id:Date.now()+Math.random(),text:"\ufffd ".concat(e.name),user:y,timestamp:(new Date).toISOString(),reactions:[],file:{name:e.name,size:e.size,type:e.type,url:t.target.result}};Ue(e=>[...e,a]),setTimeout(()=>{Je()},100)},t.onerror=e=>{console.error("Error reading file:",e)},t.readAsDataURL(e)}else{const t={id:Date.now()+Math.random(),text:"\ud83d\udcce ".concat(e.name," (").concat((e.size/1024).toFixed(1)," KB)"),user:y,timestamp:(new Date).toISOString(),reactions:[],file:{name:e.name,size:e.size,type:e.type,url:URL.createObjectURL(e)}};Ue(e=>[...e,t]),setTimeout(()=>{Je()},100)}}),e.target.value="")},[y,Je]),lt=(0,a.useCallback)(()=>/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),[]),ct=(0,a.useCallback)(()=>{re(!0)},[]),dt=(0,a.useCallback)(()=>{const e=document.createElement("input");e.type="file",e.accept="image/gif",e.multiple=!0,e.onchange=e=>{rt(e)},e.click()},[rt]),ut=(0,a.useCallback)(e=>{const t={id:Date.now()+Math.random(),text:"\ud83c\udfad ".concat(e.name),user:y,timestamp:(new Date).toISOString(),reactions:[],file:{name:e.name||"selected.gif",size:e.size||0,type:"image/gif",url:e.url,isGif:!0}};Ue(e=>[...e,t]),re(!1),setTimeout(()=>{Je()},100)},[y,Ue,Je]),ht=(0,a.useCallback)(()=>{re(!1)},[]),mt=(0,a.useCallback)(()=>{},[]),pt=(0,a.useCallback)(function(){fe(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"photo"),ue(!0)},[]),ft=(0,a.useCallback)(()=>{ue(!1)},[]),gt=(0,a.useCallback)(async(e,t,n)=>{try{const a=new File([e],"".concat(t,"-").concat(Date.now(),".").concat("photo"===t?"jpg":"mp4"),{type:e.type});await rt({target:{files:[a]}}),ue(!1),un({text:"\ud83d\udcf8 ".concat("photo"===t?"Photo":"Video"," captured from camera"),type:"system",metadata:n})}catch(a){console.error("Failed to handle camera capture:",a),un({text:"\u274c Failed to upload captured media",type:"system"})}},[]),vt=(0,a.useCallback)(()=>{me(!0)},[]),yt=(0,a.useCallback)(()=>{me(!1)},[]),bt=(0,a.useCallback)(e=>{try{const t=e.map(e=>{const t=[];return e.name&&t.push(e.name),e.phone&&t.push("\ud83d\udcf1 ".concat(e.phone)),e.email&&t.push("\ud83d\udce7 ".concat(e.email)),t.join("\n")}).join("\n\n");un({text:"\ud83d\udc65 Shared Contact".concat(e.length>1?"s":"",":\n\n").concat(t),type:"contact",metadata:{contacts:e,shared:!0}}),me(!1)}catch(t){console.error("Failed to share contacts:",t),un({text:"\u274c Failed to share contacts",type:"system"})}},[]),xt=(0,a.useCallback)(()=>{Q(!0)},[]),[wt,jt]=(0,a.useState)(null),Nt=(0,a.useCallback)(e=>{jt(e),an({active:!0,withUser:{name:e.targetUser.name,avatar:e.targetUser.avatar,id:e.targetUser.id},minimized:!1,audioOnly:!0,callInstance:e});const t={id:e.id,text:"\ud83c\udf0d Global voice call ".concat("outgoing"===e.type?"to":"from"," ").concat(e.targetUser.name),user:"System",timestamp:(new Date).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),type:"global_voice_call",callStatus:e.status,isSystemMessage:!0};Ue(e=>[...e,t])},[]),St=((0,a.useCallback)(()=>{if(wt){I.endCall(),jt(null),an(e=>(0,i.A)((0,i.A)({},e),{},{active:!1}));const e={id:"end_".concat(Date.now()),text:"\ud83d\udcde Global call ended",user:"System",timestamp:(new Date).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),type:"system",isSystemMessage:!0};Ue(t=>[...t,e])}},[wt]),(0,a.useCallback)(()=>{ce(e=>!e)},[])),Ct=(0,a.useCallback)(()=>{const e={conversation:(null===Qe||void 0===Qe?void 0:Qe.name)||"Chat Export",messages:Xe,exportDate:(new Date).toISOString(),totalMessages:Xe.length},t=JSON.stringify(e,null,2),n=new Blob([t],{type:"application/json"}),a=document.createElement("a");a.href=URL.createObjectURL(n),a.download="chat-export-".concat((new Date).toISOString().split("T")[0],".json"),document.body.appendChild(a),a.click(),document.body.removeChild(a),ce(!1);const s={id:"export_".concat(Date.now()),text:"\ud83d\udce5 Chat exported successfully",user:"System",timestamp:(new Date).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),type:"system",isSystemMessage:!0};Ue(e=>[...e,s])},[Xe,Qe]),kt=(0,a.useCallback)(()=>{const e=!("true"===localStorage.getItem("notificationsMuted"));localStorage.setItem("notificationsMuted",e.toString()),ce(!1);const t={id:"mute_".concat(Date.now()),text:"\ud83d\udd14 Notifications ".concat(e?"muted":"unmuted"),user:"System",timestamp:(new Date).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),type:"system",isSystemMessage:!0};Ue(e=>[...e,t])},[]),Et=(0,a.useCallback)(()=>{if(window.confirm("Are you sure you want to clear this chat? This action cannot be undone.")){Ue([]),ce(!1);const e={id:"clear_".concat(Date.now()),text:"\ud83e\uddf9 Chat cleared",user:"System",timestamp:(new Date).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),type:"system",isSystemMessage:!0};Ue([e])}},[]),At=(0,a.useCallback)(()=>{ve(!0),ce(!1)},[]),Pt=(0,a.useCallback)(async e=>{try{const t={id:"contact_chat_".concat(Date.now()),text:"\ud83d\udcac Starting chat with ".concat(e.name),user:"System",timestamp:(new Date).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),type:"system",isSystemMessage:!0,contactId:e.id};Ue(e=>[...e,t]),ve(!1),await j.e.updateContactInteraction(e.id,"chat_started")}catch(t){console.error("Error starting chat with contact:",t)}},[]),Tt=(0,a.useCallback)(async e=>{try{if(e.phoneNumbers&&e.phoneNumbers.length>0){const t=e.phoneNumbers[0],n={id:"contact_call_".concat(Date.now()),text:"\ud83d\udcde Calling ".concat(e.name," at ").concat(t.number),user:"System",timestamp:(new Date).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),type:"system",isSystemMessage:!0,contactId:e.id};Ue(e=>[...e,n]),await j.e.updateContactInteraction(e.id,"call_made"),ve(!1)}else alert("No phone number available for this contact")}catch(t){console.error("Error calling contact:",t)}},[]),Lt=(0,a.useCallback)(()=>{const e=prompt("Search in chat:");if(e&&e.trim()){const t=Xe.filter(t=>t.text.toLowerCase().includes(e.toLowerCase())||t.user.toLowerCase().includes(e.toLowerCase()));if(ce(!1),t.length>0){const n={id:"search_".concat(Date.now()),text:"\ud83d\udd0d Found ".concat(t.length,' message(s) containing "').concat(e,'"'),user:"System",timestamp:(new Date).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),type:"system",isSystemMessage:!0,searchResults:t};Ue(e=>[...e,n])}else{const t={id:"search_".concat(Date.now()),text:'\ud83d\udd0d No messages found containing "'.concat(e,'"'),user:"System",timestamp:(new Date).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),type:"system",isSystemMessage:!0};Ue(e=>[...e,t])}}},[Xe]),Mt=(0,a.useCallback)(()=>{Xe.map(e=>"[".concat(e.timestamp,"] ").concat(e.user,": ").concat(e.text)).join("\n");const e=window.open("","_blank");e.document.write("\n      <html>\n        <head>\n          <title>Chat Print - ".concat((null===Qe||void 0===Qe?void 0:Qe.name)||"Chat",'</title>\n          <style>\n            body { font-family: Arial, sans-serif; margin: 20px; }\n            .header { border-bottom: 2px solid #ccc; margin-bottom: 20px; padding-bottom: 10px; }\n            .message { margin-bottom: 10px; padding: 8px; border-left: 3px solid #007bff; }\n            .timestamp { color: #666; font-size: 0.9em; }\n            .user { font-weight: bold; color: #333; }\n            .text { margin-top: 5px; }\n          </style>\n        </head>\n        <body>\n          <div class="header">\n            <h1>Chat: ').concat((null===Qe||void 0===Qe?void 0:Qe.name)||"Conversation","</h1>\n            <p>Exported on: ").concat((new Date).toLocaleString(),"</p>\n            <p>Total Messages: ").concat(Xe.length,'</p>\n          </div>\n          <div class="messages">\n            ').concat(Xe.map(e=>'\n              <div class="message">\n                <div class="timestamp">'.concat(e.timestamp,'</div>\n                <div class="user">').concat(e.user,'</div>\n                <div class="text">').concat(e.text,"</div>\n              </div>\n            ")).join(""),"\n          </div>\n        </body>\n      </html>\n    ")),e.document.close(),e.print(),ce(!1)},[Xe,Qe]);(0,a.useEffect)(()=>{const e=e=>{le&&!e.target.closest(".header-menu")&&ce(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[le]);const It=(0,a.useCallback)(async(e,t)=>{Ue(n=>n.map(n=>{if(n.id===e){return n.reactions.find(e=>e.emoji===t)?(0,i.A)((0,i.A)({},n),{},{reactions:n.reactions.map(e=>e.emoji===t?(0,i.A)((0,i.A)({},e),{},{count:e.count+1}):e)}):(0,i.A)((0,i.A)({},n),{},{reactions:[...n.reactions,{emoji:t,count:1,userId:y.id}]})}return n}));try{P.default.addReaction&&await P.default.addReaction(e,t)}catch(n){console.error("Failed to sync reaction with backend:",n)}},[y.id]),Ot=(0,a.useCallback)(e=>{qe?It(qe,e):Ht(t=>t+e),W(!1),Ke(!1),Ge(null)},[qe,It]),_t=(0,a.useCallback)(e=>{Ge(e),Ke(!0),W(!1)},[]),Dt=(0,a.useCallback)(e=>{const t=Math.floor(e/60),n=e%60;return"".concat(t,":").concat(n.toString().padStart(2,"0"))},[]),Rt=(0,a.useCallback)(()=>{Y(!0),Z(0),W(!1),De.current=setInterval(()=>{Z(e=>e+1)},1e3),console.log("Voice recording started")},[]),Ft=(0,a.useCallback)(function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(clearInterval(De.current),Y(!1),e&&$>0){const e={id:Date.now(),text:"\ud83c\udfa4 Voice message (".concat(Dt($),")"),user:y,timestamp:(new Date).toISOString(),reactions:[],type:"voice",duration:$};Ue(t=>[...t,e]),setTimeout(()=>{Je()},100)}Z(0)},[$,Dt,y,Je]);(0,a.useEffect)(()=>()=>{De.current&&clearInterval(De.current)},[]);const Xt=(0,a.useMemo)(()=>{let e=b;switch(B.trim()&&(e=e.filter(e=>{var t;return e.name.toLowerCase().includes(B.toLowerCase())||(null===(t=e.lastMessage)||void 0===t?void 0:t.toLowerCase().includes(B.toLowerCase()))})),V){case"unread":e=e.filter(e=>e.unreadCount>0);break;case"groups":e=e.filter(e=>e.name.includes("Team")||e.name.includes("Group"))}return e},[b,B,V]),Ut=(0,a.useMemo)(()=>({all:b.length,unread:b.filter(e=>e.unreadCount>0).length,groups:b.filter(e=>e.name.includes("Team")||e.name.includes("Group")).length}),[b]),zt=(0,a.useMemo)(()=>b.reduce((e,t)=>e+t.unreadCount,0),[b]),[Bt,Ht]=(0,a.useState)(""),[Vt,qt]=(0,a.useState)({open:!1,userId:null,username:null}),[Gt,Wt]=(0,a.useState)({open:!1,section:"profile"}),[Kt,Qt]=(0,a.useState)(!1),[Jt,Yt]=(0,a.useState)(!1),[$t,Zt]=(0,a.useState)(!1),[en,tn]=(0,a.useState)({active:!1,withUser:null,minimized:!1,audioOnly:!1}),[nn,an]=(0,a.useState)({active:!1,withUser:null,minimized:!1,audioOnly:!0}),[sn,on]=(0,a.useState)(null),[rn,ln]=(0,a.useState)([]),[cn,dn]=(0,a.useState)(!1),un=(0,a.useCallback)(async()=>{if(Bt.trim())try{const e={text:Bt.trim(),conversationId:U,user:(null===y||void 0===y?void 0:y.name)||"User"},t=(null===Qe||void 0===Qe?void 0:Qe.participants)||[],n=t.find(e=>e!==y.id),a=await L.sendMessage(e,{encrypt:Ae&&Se,recipientId:n,conversationParticipants:t}),s={id:a.id||Date.now(),text:Bt.trim(),user:y,timestamp:a.timestamp||(new Date).toISOString(),reactions:a.reactions||[],conversationId:U,isEncrypted:a.isEncrypted||!1,encryptionStatus:a.encryptionStatus};Ue(e=>[...e,s]),Ht(""),setTimeout(()=>{Je()},100)}catch(e){console.error("Failed to send message:",e);const t={id:Date.now(),text:Bt.trim(),user:y,timestamp:(new Date).toISOString(),reactions:[],pending:!0,conversationId:U};Ue(e=>[...e,t]),Ht(""),setTimeout(()=>{Je()},100),console.warn("Message sent offline, will sync when connection is restored")}},[Bt,y,U,Je,Qe,Ae,Se]),hn=(0,a.useCallback)(e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),un())},[un]),mn=(0,a.useCallback)((e,t)=>{qt({open:!0,userId:e,username:t})},[]),pn=(0,a.useCallback)(()=>{qt({open:!1,userId:null,username:null})},[]),fn=(0,a.useCallback)(()=>{Wt({open:!1,section:"profile"})},[]),gn=(0,a.useCallback)(async e=>{try{console.log("Feedback submitted:",e);const t=F.formatFeedbackData(e);if(!F.validateFeedback(t).isValid)throw new Error("Please check your feedback and try again.");const n=await F.submitFeedback(t);return console.log("\u2705 Feedback submitted successfully:",n),n}catch(t){throw console.error("\u274c Failed to submit feedback:",t),t}},[]),vn=(0,a.useCallback)(()=>Xe.filter(e=>e.file&&e.file.type.startsWith("image/")).map(e=>({url:e.file.url,name:e.file.name,messageId:e.id})),[Xe]),yn=(0,a.useCallback)((e,t)=>{const n=vn(),a=n.findIndex(t=>t.url===e);ae({open:!0,imageUrl:e,imageName:t,zoom:1,pan:{x:0,y:0},isDragging:!1,currentIndex:Math.max(0,a),images:n})},[vn]),bn=(0,a.useCallback)((e,t,n,a)=>{ie({open:!0,videoUrl:e,videoName:t,poster:n,type:a})},[]),xn=(0,a.useCallback)(()=>{ie({open:!1,videoUrl:null,videoName:null,poster:null,type:null})},[]),wn=(0,a.useCallback)(e=>{ae(t=>{const n="next"===e?Math.min(t.currentIndex+1,t.images.length-1):Math.max(t.currentIndex-1,0),a=t.images[n];return a?(0,i.A)((0,i.A)({},t),{},{currentIndex:n,imageUrl:a.url,imageName:a.name,zoom:1,pan:{x:0,y:0},isLoading:!0}):t})},[]),jn=(0,a.useCallback)(()=>{ae(e=>(0,i.A)((0,i.A)({},e),{},{isLoading:!1}))},[]),Nn=(0,a.useCallback)(()=>{ae(e=>(0,i.A)((0,i.A)({},e),{},{isLoading:!1}))},[]),Sn=(0,a.useCallback)(()=>{ae({open:!1,imageUrl:null,imageName:null,zoom:1,pan:{x:0,y:0},isDragging:!1,currentIndex:0,images:[],isLoading:!1})},[]),Cn=(0,a.useCallback)(()=>{ae(e=>(0,i.A)((0,i.A)({},e),{},{zoom:Math.min(1.2*e.zoom,3)}))},[]),kn=(0,a.useCallback)(()=>{ae(e=>(0,i.A)((0,i.A)({},e),{},{zoom:Math.max(e.zoom/1.2,.5),pan:e.zoom<=1?{x:0,y:0}:e.pan}))},[]),En=(0,a.useCallback)(()=>{ae(e=>(0,i.A)((0,i.A)({},e),{},{zoom:1,pan:{x:0,y:0}}))},[]),An=(0,a.useCallback)(e=>{ne.zoom>1&&ae(e=>(0,i.A)((0,i.A)({},e),{},{isDragging:!0}))},[ne.zoom]),Pn=(0,a.useCallback)(e=>{ne.isDragging&&ne.zoom>1&&ae(t=>(0,i.A)((0,i.A)({},t),{},{pan:{x:t.pan.x+e.movementX,y:t.pan.y+e.movementY}}))},[ne.isDragging,ne.zoom]),Tn=(0,a.useCallback)(()=>{ae(e=>(0,i.A)((0,i.A)({},e),{},{isDragging:!1}))},[]);(0,a.useEffect)(()=>{const e=e=>{if(ne.open)switch(e.key){case"Escape":Sn();break;case"ArrowLeft":e.preventDefault(),wn("prev");break;case"ArrowRight":e.preventDefault(),wn("next");break;case"+":case"=":e.preventDefault(),Cn();break;case"-":e.preventDefault(),kn();break;case"0":e.preventDefault(),En()}else if(se.open&&"Escape"===e.key)xn()},t=e=>{ne.open&&(e.preventDefault(),e.deltaY<0?Cn():kn())};return document.addEventListener("keydown",e),document.addEventListener("wheel",t,{passive:!1}),()=>{document.removeEventListener("keydown",e),document.removeEventListener("wheel",t)}},[ne.open,Sn,wn,Cn,kn,En]);const Ln=(0,a.useCallback)(()=>{tn(e=>(0,i.A)((0,i.A)({},e),{},{active:!1}))},[]),Mn=(0,a.useCallback)(()=>{tn(e=>(0,i.A)((0,i.A)({},e),{},{minimized:!e.minimized}))},[]),In=(0,a.useCallback)(async()=>{const e=Qe||x;if(e)try{const t=await M.A.getAvailableCallMethods(e);if(ln(t),t.length>1)return void dn(!0);await On(e,"auto")}catch(t){console.error("Failed to start voice call:",t)}},[Qe,x]),On=(0,a.useCallback)(async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"auto";try{const n=await M.A.initiateEnhancedCall(e,t);an({active:!0,withUser:{name:e.name,avatar:e.avatar,phone:e.phone},minimized:!1,audioOnly:!0,callInstance:n});const a={id:n.callId,text:"\ud83d\udcde ".concat(n.method.description," with ").concat(e.name),user:"You",timestamp:(new Date).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),type:"voice_call_enhanced",callStatus:n.status,callMethod:n.method,connectionQuality:n.connectionStatus.quality,isSystemMessage:!0};Ue(e=>[...e,a]),dn(!1)}catch(n){console.error("Failed to start enhanced voice call:",n)}},[]),_n=(0,a.useCallback)(()=>{an(e=>(0,i.A)((0,i.A)({},e),{},{active:!1}))},[]),Dn=(0,a.useCallback)(()=>{be(!0)},[]),Rn=(0,a.useCallback)(()=>{be(!1),we(!0)},[]),Fn=(0,a.useCallback)(async()=>{be(!1),await In()},[In]),Xn=(0,a.useCallback)(()=>{an(e=>(0,i.A)((0,i.A)({},e),{},{minimized:!e.minimized}))},[]),Un=(0,a.useMemo)(()=>(0,m.jsx)(l.default,{callState:en,onEndCall:Ln,onToggleMinimize:Mn}),[en,Ln,Mn]),zn=(0,a.useMemo)(()=>(0,m.jsx)(l.default,{callState:nn,onEndCall:_n,onToggleMinimize:Xn}),[nn,_n,Xn]),Bn=((0,a.useCallback)(e=>{const{text:t,file:n,reactions:a}=e;if(null!==n&&void 0!==n&&n.type.startsWith("image/"))return"\ud83d\udcf8 Image: ".concat(n.name);if(null!==n&&void 0!==n&&n.type.startsWith("video/"))return"\ud83c\udfa5 Video: ".concat(n.name);if(null!==n&&void 0!==n&&n.type.startsWith("audio/"))return"\ud83c\udfb5 Audio: ".concat(n.name);if(n&&!n.type.startsWith("image/")&&!n.type.startsWith("video/")&&!n.type.startsWith("audio/"))return"\ud83d\udcce File: ".concat(n.name);if(t.includes("```"))return"\ud83d\udcbb Code snippet";if(t.match(/https?:\/\/[^\s]+/))return"\ud83d\udd17 ".concat(t.substring(0,60),"...");if(t.includes("@")){const e=t.match(/@\w+/g);return"\ud83d\udcac ".concat(t.replace(/@\w+/g,"@user")).concat((null===e||void 0===e?void 0:e.length)>1?" (+".concat(e.length-1," mentions)"):"")}return(null===a||void 0===a?void 0:a.length)>0?"".concat(t.substring(0,60),"... (").concat(a.length," ").concat(1===a.length?"reaction":"reactions",")"):t.length>100?t.substring(0,100)+"...":t},[]),(0,a.useCallback)(e=>{const{text:t,file:n,user:a,reactions:s=[]}=e,i=t.length;return{length:i<=50?"short":i<=200?"medium":i<=500?"long":"very-long",type:n?n.type.startsWith("image/")?"image":n.type.startsWith("video/")?"video":n.type.startsWith("audio/")?"audio":"file":"text",priority:"admin"===a.role?"high":"moderator"===a.role?"medium":"normal",hasMedia:!!n,hasReactions:s.length>0,hasCode:t.includes("```")||t.includes("`"),hasLinks:/https?:\/\/[^\s]+/.test(t),hasMentions:/@\w+/.test(t),sentiment:t.includes("!")&&t.includes("urgent")?"urgent":t.includes("?")?"question":/[\ud83d\ude00\ud83d\ude03\ud83d\ude04\ud83d\ude01\ud83d\ude06\ud83d\ude05\ud83d\ude02\ud83e\udd23\ud83d\ude0a\ud83d\ude07\ud83d\ude42\ud83d\ude09\ud83d\ude0c\ud83d\ude0d\ud83e\udd70\ud83d\ude18\ud83d\ude17\ud83d\ude19\ud83d\ude1a\ud83d\ude0b\ud83d\ude1b\ud83d\ude1d\ud83d\ude1c\ud83e\udd2a\ud83e\udd28\ud83e\uddd0\ud83e\udd13\ud83d\ude0e\ud83e\udd29\ud83e\udd73\ud83d\ude0f\ud83d\ude12\ud83d\ude1e\ud83d\ude14\ud83d\ude1f\ud83d\ude15\ud83d\ude41\u2639\ufe0f\ud83d\ude23\ud83d\ude16\ud83d\ude2b\ud83d\ude29\ud83e\udd7a\ud83d\ude22\ud83d\ude2d\ud83d\ude24\ud83d\ude20\ud83d\ude21\ud83e\udd2c\ud83e\udd2f\ud83d\ude33\ud83e\udd75\ud83e\udd76\ud83d\ude31\ud83d\ude28\ud83d\ude30\ud83d\ude25\ud83d\ude13\ud83e\udd17\ud83e\udd14\ud83e\udd2d\ud83e\udd2b\ud83e\udd25\ud83d\ude36\ud83d\ude10\ud83d\ude11\ud83d\ude2c\ud83d\ude44\ud83d\ude2f\ud83d\ude26\ud83d\ude27\ud83d\ude2e\ud83d\ude32\ud83e\udd71\ud83d\ude34\ud83e\udd24\ud83d\ude2a\ud83d\ude35\ud83e\udd10\ud83e\udd74\ud83e\udd22\ud83e\udd2e\ud83e\udd27\ud83d\ude37\ud83e\udd12\ud83e\udd15\ud83e\udd11\ud83e\udd20\ud83d\ude08\ud83d\udc7f\ud83d\udc79\ud83d\udc7a\ud83e\udd21\ud83d\udca9\ud83d\udc7b\ud83d\udc80\u2620\ufe0f\ud83d\udc7d\ud83d\udc7e\ud83e\udd16\ud83c\udf83\ud83d\ude3a\ud83d\ude38\ud83d\ude39\ud83d\ude3b\ud83d\ude3c\ud83d\ude3d\ud83d\ude40\ud83d\ude3f\ud83d\ude3e]/.test(t)?"emoji":"neutral"}},[])),Hn=(0,a.useCallback)(e=>{const t=e.length;return t<=50?"short":t<=200?"medium":t<=500?"long":"very-long"},[]);return(0,m.jsxs)("div",{className:"pro-layout mobile-optimized smartphone-optimized",children:[(0,m.jsxs)("div",{className:"dynamic-background",children:[(0,m.jsx)("div",{className:"gradient-orb orb-1"}),(0,m.jsx)("div",{className:"gradient-orb orb-2"}),(0,m.jsx)("div",{className:"gradient-orb orb-3"}),(0,m.jsx)("div",{className:"gradient-orb orb-4"}),(0,m.jsx)("div",{className:"gradient-orb orb-5"}),(0,m.jsx)("div",{className:"floating-particles",children:[...Array(20)].map((e,t)=>(0,m.jsx)("div",{className:"particle particle-".concat(t+1)},t))})]}),(0,m.jsx)("div",{className:"content-backdrop"}),Un,zn,(0,m.jsxs)("div",{className:"pro-sidebar enhanced-sidebar ".concat(R?"collapsed":""),children:[(0,m.jsxs)("div",{className:"pro-sidebar-header",children:[(0,m.jsxs)("div",{className:"sidebar-logo",children:[(0,m.jsxs)("div",{className:"logo-icon","data-tooltip":"Quibish Chat",children:["\ud83d\udcac",zt>0&&(0,m.jsx)("div",{className:"logo-unread-badge",children:zt>99?"99+":zt}),","]}),!R&&(0,m.jsxs)("div",{className:"logo-text",children:[(0,m.jsx)("h2",{children:"Quibish"}),(0,m.jsx)("span",{className:"version",children:"v2.0"})]})]}),(0,m.jsx)("button",{onClick:Ye,className:"sidebar-toggle-btn",title:R?"Expand sidebar":"Collapse sidebar",children:R?"\u2b9e":"\u2b9c"})]}),(0,m.jsxs)("div",{className:"sidebar-user-profile",children:[(0,m.jsxs)("div",{className:"user-avatar ".concat("admin"===(null===y||void 0===y?void 0:y.role)?"admin-user":""),"data-tooltip":"admin"===(null===y||void 0===y?void 0:y.role)?"".concat((null===y||void 0===y?void 0:y.name)||"Admin"," (Administrator)"):(null===y||void 0===y?void 0:y.name)||"User Profile",children:[(0,m.jsx)("img",{src:K?"/default-avatar.png":(null===y||void 0===y?void 0:y.avatar)||"https://ui-avatars.com/api/?name=".concat(encodeURIComponent((null===y||void 0===y?void 0:y.name)||"User"),"&background=4f46e5&color=fff&size=80&bold=true&format=png"),alt:(null===y||void 0===y?void 0:y.name)||"User",onError:e=>{if(K){e.target.style.display="none";const t=document.createElement("div");t.className="avatar-fallback",t.style.cssText="\n                    width: 40px; \n                    height: 40px; \n                    border-radius: 50%; \n                    background: linear-gradient(135deg, #4f46e5, #7c3aed); \n                    display: flex; \n                    align-items: center; \n                    justify-content: center; \n                    color: white; \n                    font-weight: bold;\n                    font-size: 16px;\n                  ",t.textContent=((null===y||void 0===y?void 0:y.name)||"U").charAt(0).toUpperCase(),e.target.parentNode.insertBefore(t,e.target)}else console.log("Avatar load failed, trying fallback:",e.target.src),xt(),e.target.src.includes("ui-avatars.com")&&(e.target.src="/default-avatar.png")},onLoad:()=>Q(!1)}),(0,m.jsx)("div",{className:"status-indicator online"}),"admin"===(null===y||void 0===y?void 0:y.role)&&(0,m.jsx)("div",{className:"admin-badge",title:"Administrator",children:"\ud83d\udc51"})]}),!R&&(0,m.jsxs)("div",{className:"user-info",children:[(0,m.jsx)("h3",{className:"user-name",children:(null===y||void 0===y?void 0:y.name)||"User"}),(0,m.jsx)("p",{className:"user-status",children:"Online"})]}),!R&&(0,m.jsxs)("div",{className:"user-actions",children:[(0,m.jsx)("button",{className:"action-btn",title:"Settings",onClick:ot,children:"\u2699\ufe0f"}),(0,m.jsx)("button",{className:"action-btn",title:"Profile",onClick:()=>mn(null===y||void 0===y?void 0:y.id,null===y||void 0===y?void 0:y.name),children:"\ud83d\udc64"}),(0,m.jsx)("button",{className:"action-btn logout-btn",title:"Logout / Disconnect",onClick:w,children:"\ud83d\udeaa"})]})]}),!R&&(0,m.jsxs)("div",{className:"sidebar-quick-actions",children:[(0,m.jsxs)("button",{className:"quick-action-btn primary",onClick:at,children:[(0,m.jsx)("span",{className:"icon",children:"\u2795"}),(0,m.jsx)("span",{className:"text",children:"New Chat"})]}),(0,m.jsxs)("button",{className:"quick-action-btn secondary",onClick:st,children:[(0,m.jsx)("span",{className:"icon",children:"\ud83d\udc65"}),(0,m.jsx)("span",{className:"text",children:"Create Group"})]})]}),!R&&(0,m.jsx)("div",{className:"sidebar-search",children:(0,m.jsxs)("div",{className:"search-container",children:[(0,m.jsx)("span",{className:"search-icon",children:"\ud83d\udd0d"}),(0,m.jsx)("input",{type:"text",placeholder:"Search conversations...",className:"search-input",value:B,onChange:tt})]})}),!R&&(0,m.jsxs)("div",{className:"sidebar-filters",children:[(0,m.jsxs)("button",{className:"filter-tab ".concat("all"===V?"active":""),onClick:()=>nt("all"),children:[(0,m.jsx)("span",{className:"tab-text",children:"All"}),(0,m.jsx)("span",{className:"tab-count",children:Ut.all})]}),(0,m.jsxs)("button",{className:"filter-tab ".concat("unread"===V?"active":""),onClick:()=>nt("unread"),children:[(0,m.jsx)("span",{className:"tab-text",children:"Unread"}),(0,m.jsx)("span",{className:"tab-count",children:Ut.unread})]}),(0,m.jsxs)("button",{className:"filter-tab ".concat("groups"===V?"active":""),onClick:()=>nt("groups"),children:[(0,m.jsx)("span",{className:"tab-text",children:"Groups"}),(0,m.jsx)("span",{className:"tab-count",children:Ut.groups})]})]}),(0,m.jsxs)("div",{className:"pro-sidebar-content",children:[(0,m.jsx)("div",{className:"conversations-header",children:!R&&(0,m.jsx)("h4",{children:"Recent Conversations"})}),(0,m.jsx)("div",{className:"conversations-list",children:Xt.map(e=>(0,m.jsxs)("div",{className:"conversation-item enhanced ".concat(U===e.id?"active":""),onClick:()=>et(e.id),children:[(0,m.jsxs)("div",{className:"conversation-avatar","data-tooltip":e.name,children:[(0,m.jsx)("img",{src:e.avatar||"https://ui-avatars.com/api/?name=".concat(e.name,"&background=random&size=40"),alt:e.name}),e.isOnline&&(0,m.jsx)("div",{className:"online-dot"}),e.unreadCount>0&&(0,m.jsx)("div",{className:"unread-badge",children:e.unreadCount})]}),!R&&(0,m.jsxs)("div",{className:"conversation-details",children:[(0,m.jsxs)("div",{className:"conversation-header",children:[(0,m.jsx)("h5",{className:"conversation-name",children:e.name}),(0,m.jsx)("span",{className:"conversation-time",children:e.lastMessageTime||"2m"})]}),(0,m.jsxs)("div",{className:"conversation-preview",children:[(0,m.jsx)("p",{className:"last-message",children:e.lastMessage||"Hey there! How are you doing?"}),(0,m.jsxs)("div",{className:"conversation-meta",children:[e.isPinned&&(0,m.jsx)("span",{className:"pin-icon",children:"\ud83d\udccc"}),e.isMuted&&(0,m.jsx)("span",{className:"mute-icon",children:"\ud83d\udd07"}),e.messageStatus&&(0,m.jsx)("span",{className:"message-status ".concat(e.messageStatus),children:"\u2713"})]})]})]}),R&&e.unreadCount>0&&(0,m.jsx)("div",{className:"collapsed-unread-indicator"})]},e.id))}),!R&&(0,m.jsx)(O,{onStartCall:Nt,currentCall:wt})]}),(0,m.jsxs)("div",{className:"sidebar-footer",children:[!R&&(0,m.jsxs)("div",{className:"footer-stats",children:[(0,m.jsxs)("div",{className:"stat-item",children:[(0,m.jsx)("span",{className:"stat-label",children:"Active"}),(0,m.jsx)("span",{className:"stat-value",children:"12"})]}),(0,m.jsxs)("div",{className:"stat-item",children:[(0,m.jsx)("span",{className:"stat-label",children:"Total"}),(0,m.jsx)("span",{className:"stat-value",children:"156"})]})]}),(0,m.jsxs)("div",{className:"footer-actions",children:[(0,m.jsx)("button",{className:"footer-btn",title:"Profile",onClick:()=>mn(null===y||void 0===y?void 0:y.id,null===y||void 0===y?void 0:y.name),"data-mobile-action":"profile",children:"\ud83d\udc64"}),(0,m.jsx)("button",{className:"footer-btn",title:"Settings",onClick:ot,"data-mobile-action":"settings",children:"\u2699\ufe0f"}),(0,m.jsx)("button",{className:"footer-btn logout-btn",title:"Logout",onClick:w,"data-mobile-action":"logout",children:"\ud83d\udeaa"}),!R&&(0,m.jsx)("button",{className:"footer-btn",title:"Help",onClick:()=>Zt(!0),children:"\u2753"}),!R&&(0,m.jsx)("button",{className:"footer-btn",title:"Feedback",onClick:()=>Yt(!0),children:"\ud83d\udcac"})]})]})]}),!R&&(0,m.jsx)("div",{className:"pro-sidebar-overlay",onClick:Ze,"aria-hidden":"true"}),(0,m.jsxs)("div",{className:"pro-main ".concat(R?"collapsed":""),children:[(0,m.jsxs)("div",{className:"pro-header enhanced-chat-header",children:[(0,m.jsxs)("div",{className:"header-left",children:[(0,m.jsxs)("div",{className:"conversation-avatar",children:[(0,m.jsx)("img",{src:(null===Qe||void 0===Qe?void 0:Qe.avatar)||(null===x||void 0===x?void 0:x.avatar)||"https://images.unsplash.com/photo-1516726817505-f5ed825624d8?w=40&h=40&fit=crop&crop=face",alt:(null===Qe||void 0===Qe?void 0:Qe.name)||(null===x||void 0===x?void 0:x.name)||"Chat"}),(0,m.jsx)("div",{className:"online-indicator ".concat(D?"online":"offline")})]}),(0,m.jsxs)("div",{className:"conversation-info",children:[(0,m.jsx)("h3",{className:"conversation-title",children:(null===Qe||void 0===Qe?void 0:Qe.name)||(null===x||void 0===x?void 0:x.name)||(U?"Loading conversation...":"Select a conversation")}),(0,m.jsxs)("div",{className:"conversation-status",children:[(0,m.jsx)("span",{className:"connection-status ".concat(D?"connected":"disconnected"),children:D?"\u25cf Online":"\u25cf Disconnected"}),(0,m.jsxs)("span",{className:"participant-count",children:[(null===Qe||void 0===Qe?void 0:Qe.participants)||(null===x||void 0===x?void 0:x.participants)||(Qe?2:0)," participants"]})]})]})]}),(0,m.jsx)("div",{className:"header-center",children:(0,m.jsxs)("div",{className:"header-search",children:[(0,m.jsx)("input",{type:"text",placeholder:"Search messages...",className:"search-input"}),(0,m.jsx)("button",{className:"search-btn",children:"\ud83d\udd0d"})]})}),(0,m.jsxs)("div",{className:"header-actions",children:[(0,m.jsxs)("button",{className:"action-btn unified-call-btn",title:"\ud83d\udcde Make Calls - International phone calls & app-to-app voice calls",onClick:Dn,children:["\ud83d\udcde",sn&&(0,m.jsx)("span",{className:"connection-indicator",style:{color:sn.color},children:sn.icon})]}),(0,m.jsx)("button",{className:"action-btn donation-btn",title:"\ud83d\udc9d Support Our Free App - Help us keep it free for everyone!",onClick:()=>Ne(!0),children:"\ud83d\udc9d"}),(0,m.jsx)("button",{className:"action-btn video-call-btn",title:"Start video call",children:"\ud83d\udcf9"}),(0,m.jsx)("button",{className:"action-btn info-btn",title:"Chat info",children:"\u2139\ufe0f"}),(0,m.jsx)("button",{onClick:T,className:"action-btn theme-toggle",title:"Toggle theme",children:k?"\u2600\ufe0f":"\ud83c\udf19"}),(0,m.jsx)("button",{onClick:w,className:"action-btn logout-btn",title:"Logout / Disconnect",children:"\ud83d\udeaa"}),(0,m.jsxs)("div",{className:"header-menu",children:[(0,m.jsx)("button",{className:"action-btn menu-btn",title:"More options",onClick:St,children:"\u22ee"}),le&&(0,m.jsxs)("div",{className:"dropdown-menu active",children:[(0,m.jsxs)("div",{className:"dropdown-header",children:[(0,m.jsx)("span",{children:"More Options"}),(0,m.jsx)("button",{className:"close-dropdown",onClick:()=>ce(!1),children:"\xd7"})]}),(0,m.jsxs)("button",{className:"dropdown-item",onClick:Lt,children:[(0,m.jsx)("span",{className:"dropdown-icon",children:"\ud83d\udd0d"}),"Search in Chat"]}),(0,m.jsxs)("button",{className:"dropdown-item",onClick:At,children:[(0,m.jsx)("span",{className:"dropdown-icon",children:"\ud83d\udc65"}),"Contacts"]}),(0,m.jsxs)("button",{className:"dropdown-item",onClick:Ct,children:[(0,m.jsx)("span",{className:"dropdown-icon",children:"\ud83d\udce5"}),"Export Chat"]}),(0,m.jsxs)("button",{className:"dropdown-item",onClick:Mt,children:[(0,m.jsx)("span",{className:"dropdown-icon",children:"\ud83d\udda8\ufe0f"}),"Print Chat"]}),(0,m.jsxs)("button",{className:"dropdown-item",onClick:kt,children:[(0,m.jsx)("span",{className:"dropdown-icon",children:"true"===localStorage.getItem("notificationsMuted")?"\ud83d\udd14":"\ud83d\udd15"}),"true"===localStorage.getItem("notificationsMuted")?"Unmute":"Mute"," Notifications"]}),(0,m.jsxs)("button",{className:"dropdown-item",onClick:Et,children:[(0,m.jsx)("span",{className:"dropdown-icon",children:"\ud83d\uddd1\ufe0f"}),"Clear Chat"]}),(0,m.jsx)("hr",{className:"dropdown-divider"}),(0,m.jsxs)("button",{className:"dropdown-item",onClick:ot,children:[(0,m.jsx)("span",{className:"dropdown-icon",children:"\u2699\ufe0f"}),"Settings"]}),(0,m.jsxs)("button",{className:"dropdown-item",onClick:()=>Zt(!0),children:[(0,m.jsx)("span",{className:"dropdown-icon",children:"\u2753"}),"Help & Support"]}),(0,m.jsxs)("button",{className:"dropdown-item",onClick:()=>Yt(!0),children:[(0,m.jsx)("span",{className:"dropdown-icon",children:"\ud83d\udcac"}),"Send Feedback"]}),(0,m.jsx)("hr",{className:"dropdown-divider"}),(0,m.jsxs)("button",{onClick:w,className:"dropdown-item logout-item",children:[(0,m.jsx)("span",{className:"dropdown-icon",children:"\ud83d\udeaa"}),"Logout"]})]})]})]})]}),(0,m.jsxs)("div",{className:"pro-message-list mobile-optimized pull-to-refresh",ref:Fe,children:[ze&&(0,m.jsxs)("div",{className:"message-loading-indicator",children:[(0,m.jsx)("div",{className:"loading-spinner"}),(0,m.jsx)("span",{children:"Loading messages..."})]}),He&&!ze&&(0,m.jsxs)("div",{className:"message-error-indicator",children:[(0,m.jsxs)("span",{children:["\u26a0\ufe0f ",He]}),(0,m.jsx)("button",{className:"retry-button",onClick:()=>window.location.reload(),children:"Retry"})]}),!ze&&!He&&0===Xe.length&&(0,m.jsx)("div",{className:"no-messages-indicator",children:U?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("span",{children:"\ud83d\udcac No messages yet in this conversation"}),(0,m.jsx)("p",{children:"Be the first to send a message!"})]}):(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("span",{children:"\ud83d\udc48 Select a conversation to view messages"}),(0,m.jsx)("p",{children:"Choose a conversation from the sidebar to start chatting."})]})}),Xe.map(e=>{var t,n,a,s,i;return(0,m.jsxs)("div",{className:"pro-message-blurb","data-message-id":e.id,children:[(0,m.jsx)("div",{className:"message-avatar",children:(0,m.jsx)("img",{src:e.user.avatar||"https://images.unsplash.com/photo-1535713875002-d1d0cf377fde?w=32&h=32&fit=crop&crop=face",alt:e.user.name,onClick:()=>mn(e.user.id,e.user.name)})}),(0,m.jsxs)("div",{className:"message-content",onClick:()=>_t(e.id),children:[(0,m.jsxs)("div",{className:"message-header",children:[(0,m.jsx)("span",{className:"user-name",children:e.user.name}),e.isEncrypted&&(0,m.jsx)("span",{className:"encryption-indicator ".concat(e.encryptionStatus),title:"Message is encrypted (".concat(e.encryptionStatus,")"),children:"decrypted"===e.encryptionStatus?"\ud83d\udd13":"failed"===e.encryptionStatus?"\u26a0\ufe0f":"sent"===e.encryptionStatus?"\ud83d\udd12":"\ud83d\udd10"})]}),(0,m.jsx)("div",{className:"message-text","data-length":Hn(e.text),"data-content-type":Bn(e).type,"data-has-code":Bn(e).hasCode,"data-has-links":Bn(e).hasLinks,"data-has-mentions":Bn(e).hasMentions,"data-sentiment":Bn(e).sentiment,children:(0,m.jsx)(p,{text:e.text,maxLength:300,showWordCount:e.text.length>500,enableSmartBreaks:!0,className:"message-smart-text"})}),e.file&&(0,m.jsx)("div",{className:"message-attachment",children:e.file.type.startsWith("image/")?(0,m.jsxs)("div",{className:"image-attachment ".concat(e.file.isGif?"gif-attachment":""),children:[e.file.isGif&&(0,m.jsx)("div",{className:"gif-badge",children:(0,m.jsx)("span",{className:"gif-label",children:"GIF"})}),(0,m.jsx)("img",{src:e.file.url,alt:e.file.name,className:"attached-image ".concat(e.file.isGif?"gif-image":""),onClick:()=>{yn(e.file.url,e.file.name)},style:{maxWidth:e.file.isGif?"350px":"300px",maxHeight:e.file.isGif?"250px":"200px",borderRadius:"8px",cursor:"pointer",objectFit:"cover"}}),(0,m.jsxs)("div",{className:"image-caption ".concat(e.file.isGif?"gif-caption":""),children:[e.file.isGif&&"\ud83c\udfad ",e.file.name," (",(e.file.size/1024).toFixed(1)," KB)",e.file.isGif&&(0,m.jsx)("span",{className:"gif-info",children:" \u2022 Animated GIF"})]})]}):e.file.type.startsWith("video/")?(0,m.jsxs)("div",{className:"video-attachment",children:[(0,m.jsxs)("div",{className:"video-container",children:[(0,m.jsxs)("video",{src:e.file.url,poster:e.file.thumbnail,controls:!0,preload:"metadata",muted:!1,playsInline:!0,"webkit-playsinline":"true",onClick:()=>{bn(e.file.url,e.file.name,e.file.thumbnail,e.file.type)},onError:t=>{console.error("Video playback error:",t),console.log("Video details:",{src:e.file.url,type:e.file.type,poster:e.file.thumbnail?"Has thumbnail":"No thumbnail",error:t.target.error})},onLoadedMetadata:e=>{console.log("Video loaded for playback:",{duration:e.target.duration,videoWidth:e.target.videoWidth,videoHeight:e.target.videoHeight,readyState:e.target.readyState})},onLoadStart:()=>console.log("Video load started"),onCanPlay:()=>console.log("Video can play"),onCanPlayThrough:()=>console.log("Video can play through"),style:{maxWidth:"400px",maxHeight:"300px",borderRadius:"8px",width:"100%",height:"auto",cursor:"pointer"},children:[(0,m.jsx)("source",{src:e.file.url,type:e.file.type}),"Your browser does not support the video tag."]}),e.file.duration&&(0,m.jsx)("div",{className:"video-duration-badge",children:e.file.duration})]}),(0,m.jsxs)("div",{className:"video-caption",children:["\ud83c\udfa5 ",e.file.name,e.file.size&&" (".concat((e.file.size/1048576).toFixed(1)," MB)"),e.file.width&&e.file.height&&" \u2022 ".concat(e.file.width,"\xd7").concat(e.file.height)]})]}):(0,m.jsxs)("div",{className:"file-attachment",children:[(0,m.jsx)("div",{className:"file-icon",children:"\ud83d\udcc4"}),(0,m.jsxs)("div",{className:"file-info",children:[(0,m.jsx)("div",{className:"file-name",children:e.file.name}),(0,m.jsxs)("div",{className:"file-size",children:[(e.file.size/1024).toFixed(1)," KB"]})]}),(0,m.jsx)("button",{className:"download-btn",onClick:()=>{const t=document.createElement("a");t.href=e.file.url,t.download=e.file.name,t.click()},children:"Download"})]})}),"voice"===e.type&&(0,m.jsxs)("div",{className:"voice-message",children:[(0,m.jsx)("div",{className:"voice-icon",children:"\ud83c\udfa4"}),(0,m.jsx)("div",{className:"voice-duration",children:Dt(e.duration||0)}),(0,m.jsx)("button",{className:"play-voice-btn",children:"\u25b6\ufe0f"})]}),"voice_call"===e.type&&(0,m.jsxs)("div",{className:"voice-call-message",children:[(0,m.jsx)("div",{className:"voice-call-icon",children:"\ud83d\udcde"}),(0,m.jsxs)("div",{className:"voice-call-info",children:[(0,m.jsx)("div",{className:"voice-call-text",children:e.text}),(0,m.jsxs)("div",{className:"voice-call-status",children:["Status: ",e.callStatus]})]}),(0,m.jsx)("div",{className:"voice-call-controls",children:"connecting"===e.callStatus&&(0,m.jsx)("button",{className:"voice-call-btn-small end-call",onClick:()=>_n(),title:"End call",children:"End"})})]}),"voice_call_enhanced"===e.type&&(0,m.jsxs)("div",{className:"voice-call-enhanced-message",children:[(0,m.jsxs)("div",{className:"voice-call-enhanced-header",children:[(0,m.jsx)("div",{className:"voice-call-method-icon",children:(null===(t=e.callMethod)||void 0===t?void 0:t.icon)||"\ud83d\udcde"}),(0,m.jsxs)("div",{className:"voice-call-enhanced-info",children:[(0,m.jsx)("div",{className:"voice-call-enhanced-text",children:e.text}),(0,m.jsx)("div",{className:"voice-call-method-description",children:null===(n=e.callMethod)||void 0===n?void 0:n.description}),(0,m.jsxs)("div",{className:"voice-call-quality-info",children:[(0,m.jsxs)("span",{className:"connection-quality",style:{color:_.A.getConnectionStatus().color},children:[null===(a=e.callMethod)||void 0===a?void 0:a.estimated_quality," ",e.connectionQuality]}),(null===(s=e.callMethod)||void 0===s?void 0:s.latency)&&(0,m.jsxs)("span",{className:"latency-info",children:["\u2022 ",Math.round(e.callMethod.latency),"ms"]})]})]})]}),(0,m.jsxs)("div",{className:"voice-call-enhanced-controls",children:[(0,m.jsxs)("div",{className:"call-status-indicator",children:[(0,m.jsx)("div",{className:"status-dot ".concat(e.callStatus)}),(0,m.jsx)("span",{className:"status-text",children:e.callStatus})]}),("connecting"===e.callStatus||"connected"===e.callStatus)&&(0,m.jsx)("button",{className:"voice-call-btn-small end-call-enhanced",onClick:()=>_n(),title:"End call",children:"End Call"})]}),(null===(i=e.callMethod)||void 0===i?void 0:i.note)&&(0,m.jsxs)("div",{className:"call-method-note",children:["\u2139\ufe0f ",e.callMethod.note]})]})]}),(0,m.jsxs)("div",{className:"message-timestamp-with-reactions",children:[(0,m.jsx)("div",{className:"message-timestamp",children:new Date(e.timestamp).toLocaleTimeString()}),e.reactions&&e.reactions.length>0&&(0,m.jsx)("div",{className:"message-reactions-inline",children:e.reactions.map((t,n)=>(0,m.jsxs)("button",{className:"reaction-bubble-inline",onClick:n=>{n.stopPropagation(),It(e.id,t.emoji)},title:"".concat(t.emoji," ").concat(t.count),children:[(0,m.jsx)("span",{className:"reaction-emoji",children:t.emoji}),(0,m.jsx)("span",{className:"reaction-count",children:t.count})]},n))})]}),(0,m.jsx)(f.default,{message:e,currentUser:y,onReply:e=>console.log("Reply to:",e),onReact:It,onEdit:e=>console.log("Edit message:",e),onDelete:e=>console.log("Delete message:",e),onTranslate:e=>console.log("Translate message:",e)})]},e.id)}),(0,m.jsx)("div",{ref:Re})]}),(0,m.jsxs)("div",{className:"pro-chat-input-container enhanced mobile-input-bar keyboard-avoiding",children:[(0,m.jsxs)("div",{className:"input-wrapper enhanced touch-target",children:[J&&(0,m.jsxs)("div",{className:"recording-interface",children:[(0,m.jsxs)("div",{className:"recording-indicator",children:[(0,m.jsx)("div",{className:"recording-dot"}),(0,m.jsxs)("span",{children:["Recording... ",Dt($)]})]}),(0,m.jsxs)("div",{className:"recording-actions",children:[(0,m.jsx)("button",{className:"recording-btn cancel",onClick:()=>Ft(!1),type:"button",children:"Cancel"}),(0,m.jsx)("button",{className:"recording-btn send",onClick:()=>Ft(!0),type:"button",children:"Send"})]})]}),!J&&(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("input",{ref:Me,type:"file",accept:"image/*,image/gif,video/*,audio/*,.pdf,.doc,.docx,.txt",style:{display:"none"},multiple:!0,onChange:rt}),(0,m.jsx)("input",{ref:Ie,id:"mobile-camera-photo",type:"file",accept:"image/*",capture:"environment",style:{display:"none"},onChange:rt}),(0,m.jsx)("input",{ref:Oe,id:"mobile-camera-video",type:"file",accept:"video/*",capture:"environment",style:{display:"none"},onChange:rt}),(0,m.jsx)("input",{ref:_e,id:"mobile-gallery",type:"file",accept:"image/*,video/*,image/gif",style:{display:"none"},multiple:!0,onChange:rt}),(0,m.jsxs)("div",{className:"input-actions-row",children:[(0,m.jsx)("button",{className:"input-btn attachment-btn mobile-action-button touch-target touch-ripple haptic-light",onClick:lt()?mt:()=>{var e;return null===(e=Me.current)||void 0===e?void 0:e.click()},type:"button",title:lt()?"Upload menu":"Attach files",children:"\ud83d\udcce"}),(0,m.jsx)("button",{className:"input-btn gif-btn mobile-action-button touch-target touch-ripple haptic-light",onClick:ct,type:"button",title:"Choose GIF",children:"\ud83c\udfad"}),(0,m.jsx)("button",{className:"input-btn gif-upload-btn",onClick:dt,type:"button",title:"Upload your own GIF",children:"\ud83d\udce4"}),(0,m.jsx)("button",{className:"input-btn voice-btn mobile-action-button touch-target touch-ripple haptic-light",onClick:Rt,type:"button",title:"Voice message",children:"\ud83c\udfa4"}),R&&window.innerWidth<=768&&(0,m.jsx)("button",{className:"input-btn global-voice-btn mobile-action-button touch-target touch-ripple haptic-light",onClick:$e,type:"button",title:"Global Voice Calls",children:"\ud83c\udf0d"}),N.A.isSupported("camera")&&(0,m.jsx)("button",{className:"input-btn camera-btn mobile-action-button touch-target touch-ripple haptic-light",onClick:()=>pt("photo"),type:"button",title:"Take photo/video",children:"\ud83d\udcf7"}),N.A.isSupported("contacts")&&(0,m.jsx)("button",{className:"input-btn contact-btn mobile-action-button touch-target touch-ripple haptic-light",onClick:vt,type:"button",title:"Share contacts",children:"\ud83d\udc65"}),(0,m.jsx)("button",{className:"input-btn emoji-btn mobile-action-button touch-target touch-ripple haptic-light",onClick:()=>W(!G),type:"button",title:"Add emoji",children:"\ud83d\ude0a"}),Se&&(0,m.jsx)("button",{className:"input-btn encryption-btn mobile-action-button touch-target touch-ripple haptic-light ".concat(Ae?"active":""),onClick:()=>Pe(!Ae),type:"button",title:Ae?"Encryption enabled":"Encryption disabled",children:Ae?"\ud83d\udd12":"\ud83d\udd13"})]}),(0,m.jsxs)("div",{className:"message-input-row",children:[(0,m.jsx)("textarea",{value:Bt,onChange:e=>Ht(e.target.value),onKeyPress:hn,placeholder:"Type your message...",className:"message-input enhanced mobile-message-input touch-target",rows:"1",autoComplete:"off",autoCorrect:"on",autoCapitalize:"sentences",spellCheck:"true",inputMode:"text","aria-label":"Type your message","data-testid":"message-input"}),(0,m.jsx)("button",{onClick:un,disabled:!Bt.trim(),className:"send-button enhanced mobile-action-button touch-target touch-ripple haptic-light",type:"button","aria-label":"Send message",title:"Send message","data-testid":"send-button",children:(0,m.jsx)("span",{className:"send-icon","aria-hidden":"true",children:"\u27a4"})})]})]})]}),G&&(0,m.jsx)("div",{className:"emoji-picker-overlay",onClick:()=>W(!1),children:(0,m.jsxs)("div",{className:"emoji-picker",onClick:e=>e.stopPropagation(),children:[(0,m.jsxs)("div",{className:"emoji-picker-header",children:[(0,m.jsx)("span",{children:"Choose an emoji"}),(0,m.jsx)("button",{className:"emoji-close",onClick:()=>W(!1),children:"\u2715"})]}),(0,m.jsx)("div",{className:"emoji-grid",children:["\ud83d\ude0a","\ud83d\ude02","\ud83e\udd70","\ud83d\ude0d","\ud83e\udd14","\ud83d\ude2e","\ud83d\ude05","\ud83d\udc4d","\ud83d\udc4e","\u2764\ufe0f","\ud83d\udd25","\ud83c\udf89","\ud83d\udc4f","\ud83d\ude4c","\u2728","\ud83d\udcaf","\ud83d\ude80","\ud83d\udca1","\ud83c\udfaf","\u2705","\u274c","\u26a1","\ud83c\udf1f","\ud83e\udd1d","\ud83d\udcaa","\ud83c\udf08","\u2600\ufe0f","\ud83c\udf19","\u2b50","\ud83d\udc9d","\ud83c\udf88"].map(e=>(0,m.jsx)("button",{className:"emoji-item",onClick:()=>Ot(e),children:e},e))})]})}),We&&qe&&(0,m.jsx)("div",{className:"emoji-picker-overlay",onClick:()=>{Ke(!1),Ge(null)},children:(0,m.jsxs)("div",{className:"emoji-picker",onClick:e=>e.stopPropagation(),children:[(0,m.jsxs)("div",{className:"emoji-picker-header",children:[(0,m.jsx)("span",{children:"Add Reaction"}),(0,m.jsx)("button",{className:"emoji-close",onClick:()=>{Ke(!1),Ge(null)},children:"\u2715"})]}),(0,m.jsx)("div",{className:"emoji-grid",children:["\ud83d\ude0a","\ud83d\ude02","\ud83e\udd70","\ud83d\ude0d","\ud83e\udd14","\ud83d\ude2e","\ud83d\ude05","\ud83d\udc4d","\ud83d\udc4e","\u2764\ufe0f","\ud83d\udd25","\ud83c\udf89","\ud83d\udc4f","\ud83d\ude4c","\u2728","\ud83d\udcaf","\ud83d\ude80","\ud83d\udca1","\ud83c\udfaf","\u2705","\u274c","\u26a1","\ud83c\udf1f","\ud83e\udd1d","\ud83d\udcaa","\ud83c\udf08","\u2600\ufe0f","\ud83c\udf19","\u2b50","\ud83d\udc9d","\ud83c\udf88"].map(e=>(0,m.jsx)("button",{className:"emoji-item",onClick:()=>Ot(e),children:e},e))})]})})]})]}),Vt.open&&(0,m.jsx)(o.default,{userId:Vt.userId,username:Vt.username,onClose:pn}),Gt.open&&(0,m.jsx)(r.default,{isOpen:Gt.open,onClose:fn,initialSection:Gt.section,user:y,onSaveProfile:e=>{console.log("Profile updated:",e)},darkMode:k}),ne.open&&(0,m.jsx)("div",{className:"pro-lightbox-overlay",onClick:Sn,children:(0,m.jsxs)("div",{className:"pro-lightbox-content",onClick:e=>e.stopPropagation(),children:[(0,m.jsxs)("div",{className:"pro-lightbox-header",children:[(0,m.jsxs)("div",{className:"pro-lightbox-info",children:[(0,m.jsx)("div",{className:"pro-lightbox-title",children:ne.imageName}),(0,m.jsxs)("div",{className:"pro-lightbox-meta",children:[(0,m.jsxs)("span",{className:"pro-lightbox-zoom-info",children:[Math.round(100*ne.zoom),"%"]}),ne.images.length>1&&(0,m.jsxs)("span",{className:"pro-lightbox-counter",children:[ne.currentIndex+1," / ",ne.images.length]})]})]}),(0,m.jsxs)("div",{className:"pro-lightbox-controls",children:[(0,m.jsx)("button",{className:"pro-lightbox-btn",onClick:kn,title:"Zoom out (-)",children:"\ud83d\udd0d-"}),(0,m.jsx)("button",{className:"pro-lightbox-btn",onClick:En,title:"Reset zoom (0)",children:"\u22a1"}),(0,m.jsx)("button",{className:"pro-lightbox-btn",onClick:Cn,title:"Zoom in (+)",children:"\ud83d\udd0d+"}),(0,m.jsx)("button",{className:"pro-lightbox-btn pro-lightbox-download",onClick:()=>{const e=document.createElement("a");e.href=ne.imageUrl,e.download=ne.imageName,e.click()},title:"Download image",children:"\ud83d\udcbe"})]}),(0,m.jsx)("button",{className:"pro-lightbox-close",onClick:Sn,children:"\xd7"})]}),(0,m.jsxs)("div",{className:"pro-lightbox-image-container",onMouseDown:An,onMouseMove:Pn,onMouseUp:Tn,onMouseLeave:Tn,style:{cursor:ne.zoom>1?ne.isDragging?"grabbing":"grab":"zoom-in"},children:[ne.images.length>1&&(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("button",{className:"pro-lightbox-nav pro-lightbox-nav-prev",onClick:()=>wn("prev"),disabled:0===ne.currentIndex,title:"Previous image (\u2190)",children:"\u2190"}),(0,m.jsx)("button",{className:"pro-lightbox-nav pro-lightbox-nav-next",onClick:()=>wn("next"),disabled:ne.currentIndex===ne.images.length-1,title:"Next image (\u2192)",children:"\u2192"})]}),(0,m.jsx)("img",{src:ne.imageUrl,alt:ne.imageName,className:"pro-lightbox-image ".concat(ne.isLoading?"loading":"loaded"),style:{transform:"scale(".concat(ne.zoom,") translate(").concat(ne.pan.x,"px, ").concat(ne.pan.y,"px)"),transition:ne.isDragging?"none":"transform 0.3s ease",opacity:ne.isLoading?.3:1},onLoad:jn,onError:Nn,onDoubleClick:()=>{1===ne.zoom?Cn():En()},draggable:!1}),ne.isLoading&&(0,m.jsxs)("div",{className:"pro-lightbox-loading",children:[(0,m.jsx)("div",{className:"pro-lightbox-spinner"}),(0,m.jsx)("span",{children:"Loading..."})]})]}),(0,m.jsx)("div",{className:"pro-lightbox-help",children:(0,m.jsx)("span",{children:"ESC to close \u2022 Arrow keys to navigate \u2022 Mouse wheel to zoom \u2022 Drag to pan \u2022 Double-click to zoom"})})]})}),se.open&&(0,m.jsx)("div",{className:"pro-lightbox-overlay",onClick:xn,children:(0,m.jsxs)("div",{className:"pro-lightbox-content",onClick:e=>e.stopPropagation(),children:[(0,m.jsxs)("div",{className:"pro-lightbox-header",children:[(0,m.jsx)("div",{className:"pro-lightbox-info",children:(0,m.jsx)("div",{className:"pro-lightbox-title",children:(0,m.jsx)("h3",{children:se.videoName})})}),(0,m.jsx)("div",{className:"pro-lightbox-controls",children:(0,m.jsx)("button",{className:"pro-lightbox-btn pro-lightbox-download",onClick:()=>{const e=document.createElement("a");e.href=se.videoUrl,e.download=se.videoName,e.click()},title:"Download video",children:"\ud83d\udcbe"})}),(0,m.jsx)("button",{className:"pro-lightbox-close",onClick:xn,children:"\xd7"})]}),(0,m.jsx)("div",{className:"pro-lightbox-video-container",children:(0,m.jsxs)("video",{src:se.videoUrl,poster:se.poster,controls:!0,autoPlay:!0,playsInline:!0,className:"pro-lightbox-video",style:{maxWidth:"100%",maxHeight:"80vh",width:"auto",height:"auto"},children:[(0,m.jsx)("source",{src:se.videoUrl,type:se.type}),"Your browser does not support the video tag."]})}),(0,m.jsx)("div",{className:"pro-lightbox-help",children:(0,m.jsx)("span",{children:"ESC to close \u2022 Click outside to close \u2022 Download available"})})]})}),(0,m.jsx)(c.default,{isOpen:oe,onGifSelect:ut,onClose:ht}),(0,m.jsx)(d.default,{isOpen:Kt,onClose:()=>Qt(!1),onCreateChat:it,currentUser:y,darkMode:k}),(0,m.jsx)(u.default,{isOpen:Jt,onClose:()=>Yt(!1),onSubmit:gn}),(0,m.jsx)(h.default,{isOpen:$t,onClose:()=>Zt(!1)}),cn&&(0,m.jsx)("div",{className:"call-method-selector-overlay",children:(0,m.jsxs)("div",{className:"call-method-selector-modal",children:[(0,m.jsxs)("div",{className:"call-method-header",children:[(0,m.jsx)("h3",{children:"Choose Call Method"}),(0,m.jsx)("button",{className:"close-btn",onClick:()=>dn(!1),children:"\xd7"})]}),(0,m.jsx)("div",{className:"call-method-list",children:rn.map((e,t)=>(0,m.jsxs)("div",{className:"call-method-option ".concat(e.quality),onClick:()=>{On(Qe||x,e.type)},children:[(0,m.jsx)("div",{className:"method-icon",children:e.icon}),(0,m.jsxs)("div",{className:"method-info",children:[(0,m.jsx)("div",{className:"method-title",children:e.description}),(0,m.jsx)("div",{className:"method-quality",children:e.estimated_quality}),e.targetPhone&&(0,m.jsxs)("div",{className:"method-phone",children:["\ud83d\udcf1 ",e.targetPhone]}),e.note&&(0,m.jsx)("div",{className:"method-note",children:e.note}),e.estimatedLatency&&(0,m.jsxs)("div",{className:"method-latency",children:["\u26a1 ",Math.round(e.estimatedLatency),"ms"]})]}),(0,m.jsx)("div",{className:"method-quality-badge",children:e.quality})]},t))}),(0,m.jsx)("div",{className:"connection-info",children:(0,m.jsxs)("div",{className:"current-connection",children:["\ud83d\udcf6 Current: ",_.A.getConnectionStatus().quality,"(",_.A.getConnectionStatus().type,")"]})})]})}),de&&(0,m.jsx)(g.default,{mode:pe,onCapture:gt,onClose:ft}),he&&(0,m.jsx)(v.default,{onContactSelect:bt,onClose:yt}),ge&&(0,m.jsx)(S,{isOpen:ge,onClose:()=>ve(!1),onStartChat:Pt,onStartCall:Tt,currentUser:y,darkMode:k}),ee&&(0,m.jsx)("div",{className:"mobile-global-voice-modal-overlay",onClick:()=>te(!1),children:(0,m.jsxs)("div",{className:"mobile-global-voice-modal",onClick:e=>e.stopPropagation(),children:[(0,m.jsxs)("div",{className:"mobile-modal-header",children:[(0,m.jsx)("h3",{children:"\ud83c\udf0d Global Voice Calls"}),(0,m.jsx)("button",{className:"mobile-modal-close",onClick:()=>te(!1),title:"Close",children:"\u2715"})]}),(0,m.jsx)("div",{className:"mobile-modal-content",children:(0,m.jsx)(O,{onStartCall:e=>{Nt(e),te(!1)},currentCall:wt})})]})}),ye&&(0,m.jsx)("div",{className:"modal-overlay",onClick:()=>be(!1),children:(0,m.jsxs)("div",{className:"modal-content call-options-modal",onClick:e=>e.stopPropagation(),children:[(0,m.jsxs)("div",{className:"modal-header",children:[(0,m.jsx)("h3",{children:"Choose Call Type"}),(0,m.jsx)("button",{className:"close-btn",onClick:()=>be(!1),children:"\xd7"})]}),(0,m.jsxs)("div",{className:"call-options-content",children:[(0,m.jsxs)("button",{className:"call-option-btn international-option",onClick:Rn,children:[(0,m.jsx)("span",{className:"call-option-icon",children:"\ud83c\udf0d"}),(0,m.jsxs)("div",{className:"call-option-info",children:[(0,m.jsx)("h4",{children:"International Phone Call"}),(0,m.jsx)("p",{children:"Call any phone number worldwide - completely FREE!"})]})]}),(0,m.jsxs)("button",{className:"call-option-btn app-call-option",onClick:Fn,children:[(0,m.jsx)("span",{className:"call-option-icon",children:"\ud83d\udcac"}),(0,m.jsxs)("div",{className:"call-option-info",children:[(0,m.jsx)("h4",{children:"App-to-App Voice Call"}),(0,m.jsx)("p",{children:"High-quality voice call with other Quibish users"})]})]})]})]})}),xe&&(0,m.jsx)(C.A,{isOpen:xe,onClose:()=>we(!1),darkMode:k}),je&&(0,m.jsx)(E,{isOpen:je,onClose:()=>Ne(!1),darkMode:k,userStats:{callsMade:wt?1:0,messagesSent:(null===x||void 0===x||null===(n=x.messages)||void 0===n?void 0:n.length)||0,daysUsed:1}}),(0,m.jsx)(A,{userStats:{callsMade:wt?1:0,messagesSent:(null===x||void 0===x||null===(s=x.messages)||void 0===s?void 0:s.length)||0,daysUsed:1},darkMode:k,onOpenDonation:()=>Ne(!0),position:"bottom-right",autoShow:!0})]})};var U=n(589),z=n(532);const B=e=>{let{onVerify:t,onCancel:n,userId:s,username:i,loading:o=!1}=e;const[r,l]=(0,a.useState)(["","","","","",""]),[c,d]=(0,a.useState)(""),[u,h]=(0,a.useState)(!1),[p,f]=(0,a.useState)(""),g=(0,a.useRef)([]);(0,a.useEffect)(()=>{g.current[0]&&g.current[0].focus()},[]);const v=async e=>{let n;e.preventDefault(),d("");let a=u;if(u){if(!p.trim())return void d("Please enter a backup code");n=p.trim()}else{const e=r.join("");if(6!==e.length)return void d("Please enter a complete 6-digit code");n=e}try{await t(n,a)}catch(s){d(s.message||"Verification failed. Please try again.")}};return(0,m.jsx)("div",{className:"two-factor-verify",children:(0,m.jsxs)("div",{className:"two-factor-container",children:[(0,m.jsxs)("div",{className:"two-factor-header",children:[(0,m.jsx)("div",{className:"two-factor-icon",children:"\ud83d\udee1\ufe0f"}),(0,m.jsx)("h2",{children:"Two-Factor Authentication"}),(0,m.jsxs)("p",{children:["Enter the verification code for ",(0,m.jsx)("strong",{children:i})]})]}),(0,m.jsxs)("form",{onSubmit:v,className:"two-factor-form",children:[u?(0,m.jsxs)("div",{className:"backup-code-section",children:[(0,m.jsx)("p",{className:"instruction",children:"Enter one of your backup codes"}),(0,m.jsx)("input",{id:"backup-code-input",type:"text",value:p,onChange:e=>f(e.target.value.toUpperCase()),placeholder:"XXXXXXXX",className:"backup-code-input",disabled:o,maxLength:"8"})]}):(0,m.jsxs)("div",{className:"code-input-section",children:[(0,m.jsx)("p",{className:"instruction",children:"Enter the 6-digit code from your authenticator app"}),(0,m.jsx)("div",{className:"code-inputs",children:r.map((e,t)=>(0,m.jsx)("input",{ref:e=>g.current[t]=e,type:"text",inputMode:"numeric",pattern:"[0-9]*",maxLength:"1",value:e,onChange:e=>((e,t)=>{if(t.length>1)return;const n=[...r];var a;n[e]=t,l(n),d(""),t&&e<5&&(null===(a=g.current[e+1])||void 0===a||a.focus())})(t,e.target.value),onKeyDown:e=>((e,t)=>{var n;"Backspace"===t.key&&!r[e]&&e>0&&(null===(n=g.current[e-1])||void 0===n||n.focus()),"Enter"===t.key&&v(t)})(t,e),className:"code-input",disabled:o},t))})]}),c&&(0,m.jsxs)("div",{className:"error-message",children:[(0,m.jsx)("span",{className:"error-icon",children:"\u26a0\ufe0f"}),c]}),(0,m.jsxs)("div",{className:"form-actions",children:[(0,m.jsx)("button",{type:"submit",className:"verify-button",disabled:o||!u&&6!==r.join("").length||u&&!p.trim(),children:o?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("span",{className:"loading-spinner"}),"Verifying..."]}):"Verify Code"}),(0,m.jsx)("button",{type:"button",onClick:n,className:"cancel-button",disabled:o,children:"Cancel"})]}),(0,m.jsx)("div",{className:"alternative-options",children:(0,m.jsx)("button",{type:"button",onClick:()=>{h(!u),d(""),l(["","","","","",""]),f(""),setTimeout(()=>{var e,t;u?null===(e=g.current[0])||void 0===e||e.focus():null===(t=document.getElementById("backup-code-input"))||void 0===t||t.focus()},100)},className:"link-button",disabled:o,children:u?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("span",{className:"icon",children:"\ud83d\udcf1"}),"Use authenticator app instead"]}):(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("span",{className:"icon",children:"\ud83d\udd11"}),"Use backup code instead"]})})})]}),(0,m.jsx)("div",{className:"help-section",children:(0,m.jsxs)("details",{className:"help-details",children:[(0,m.jsx)("summary",{children:"Need help?"}),(0,m.jsx)("div",{className:"help-content",children:(0,m.jsxs)("ul",{children:[(0,m.jsxs)("li",{children:[(0,m.jsx)("strong",{children:"Authenticator App:"})," Open your authenticator app (Google Authenticator, Authy, etc.) and enter the 6-digit code."]}),(0,m.jsxs)("li",{children:[(0,m.jsx)("strong",{children:"Backup Codes:"})," Use one of the 8-character backup codes you saved when setting up 2FA."]}),(0,m.jsxs)("li",{children:[(0,m.jsx)("strong",{children:"Can't access codes?"})," Contact support for account recovery."]})]})})]})})]})})};var H=n(608);const V=e=>{let{onLogin:t,switchToRegister:n}=e;const{login:s}=(0,z.As)(),[i,o]=(0,a.useState)(""),[r,l]=(0,a.useState)(""),[c,d]=(0,a.useState)(!1),[u,h]=(0,a.useState)(null),[p,f]=(0,a.useState)(!1),[g,v]=(0,a.useState)(!1),[y,b]=(0,a.useState)(!1),[x,w]=(0,a.useState)("checking"),[j,N]=(0,a.useState)(!1),[S,C]=(0,a.useState)(null),[k,E]=(0,a.useState)(""),A=(0,a.useRef)(null);(0,a.useEffect)(()=>{A.current&&A.current.focus();(async()=>{await(0,U.$n)()?(console.log("API server is online"),w("online")):(console.log("API server appears to be offline"),h("\ud83c\udf10 Unable to connect to server. Please check your connection and try again."),w("offline"))})()},[]);return(0,m.jsxs)("div",{className:"login-container",children:[(0,m.jsxs)("div",{className:"auth-form",children:[(0,m.jsxs)("div",{className:"elegant-header",children:[(0,m.jsxs)("div",{className:"brand-section",children:[(0,m.jsx)("div",{className:"brand-icon",children:(0,m.jsx)("span",{className:"brand-emoji",children:"\ud83d\udcac"})}),(0,m.jsxs)("div",{className:"brand-content",children:[(0,m.jsx)("h2",{className:"brand-title",children:"Welcome Back"}),(0,m.jsx)("p",{className:"brand-subtitle",children:"Sign in to continue your conversation"})]})]}),(0,m.jsx)("div",{className:"decorative-line"})]}),"checking"!==x&&(0,m.jsxs)("div",{className:"server-status ".concat(x),children:[(0,m.jsx)("div",{className:"status-indicator"}),(0,m.jsx)("div",{className:"status-text",children:"online"===x?"Server Online":"Server Offline"})]}),(0,m.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),b(!0),i.trim()?r?!(r.length<6)||(h("Password must be at least 6 characters"),0):(h("Password is required"),0):(h("Username or email is required"),0)){f(!0),h(null);try{console.log("Login Component - Attempting login with:",{username:i});const e=await U.authService.login(i,r);if(console.log("Login Component - Login response:",e),!e)throw console.error("Login Component - Empty response received"),new Error("No response from server");if(e.requiresTwoFactor)return console.log("Login Component - 2FA required for user:",e.userId),C(e.userId),E(i),N(!0),void f(!1);if(!e.user)throw console.error("Login Component - Missing user data in response"),new Error("User data missing from response");if(!e.token)throw console.error("Login Component - Missing token in response"),new Error("Authentication token missing from response");console.log("Login Component - Login successful, saving session"),s(e.user,e.token,c),t(e.user,e.token),console.log("Login Component - Session saved and parent notified")}catch(n){if(console.error("Login Component - Login error:",n),n.response){const e=n.response.data;console.error("Login Component - Server error response:",e),e.error?h(e.error):e.message?h(e.message):401===n.response.status?h("Invalid username or password. Please try again."):404===n.response.status?h("Server endpoint not found. Is the server running?"):h("Server error (".concat(n.response.status,"). Please try again later."))}else n.request?(console.error("Login Component - Network error, no response received"),h("Unable to connect to server. Please check your internet connection and try again."),(0,U.$n)().then(e=>{e||h("Server appears to be offline. Please try again later.")})):(console.error("Login Component - Other error:",n.message),h(n.message||"Login failed. Please try again."))}finally{f(!1)}}},children:[(0,m.jsxs)("div",{className:"form-group",children:[(0,m.jsx)("label",{htmlFor:"username",children:"Username or Email"}),(0,m.jsxs)("div",{className:"input-wrapper",children:[(0,m.jsx)("input",{id:"username",type:"text",value:i,onChange:e=>o(e.target.value),onBlur:()=>b(!0),ref:A,required:!0,autoComplete:"username email",placeholder:"Enter your username or email",className:y&&!i.trim()?"error-input":""}),i&&(0,m.jsx)("button",{type:"button",className:"clear-input",onClick:()=>o(""),"aria-label":"Clear username",children:"\u2715"})]}),y&&!i.trim()&&(0,m.jsx)("div",{className:"field-error",children:"Username or email is required"})]}),(0,m.jsxs)("div",{className:"form-group",children:[(0,m.jsx)("label",{htmlFor:"password",children:"Password"}),(0,m.jsxs)("div",{className:"input-wrapper",children:[(0,m.jsx)("input",{id:"password",type:g?"text":"password",value:r,onChange:e=>l(e.target.value),onBlur:()=>b(!0),required:!0,autoComplete:"current-password",placeholder:"Enter your password",className:y&&!r?"error-input":""}),(0,m.jsx)("button",{type:"button",className:"toggle-password",onClick:()=>v(!g),"aria-label":g?"Hide password":"Show password",children:g?"\ud83d\udc41\ufe0f":"\ud83d\udc41\ufe0f\u200d\ud83d\udde8\ufe0f"})]}),y&&!r&&(0,m.jsx)("div",{className:"field-error",children:"Password is required"}),y&&r&&r.length<6&&(0,m.jsx)("div",{className:"field-error",children:"Password must be at least 6 characters"})]}),(0,m.jsxs)("div",{className:"form-options",children:[(0,m.jsxs)("label",{className:"checkbox-container",children:[(0,m.jsx)("input",{type:"checkbox",checked:c,onChange:e=>d(e.target.checked)}),(0,m.jsx)("span",{className:"checkmark"}),"Remember me"]}),(0,m.jsx)("button",{type:"button",className:"forgot-password",onClick:()=>console.log("Forgot password clicked"),children:"Forgot password?"})]}),(0,m.jsx)("button",{type:"submit",className:"auth-button",disabled:p,children:p?(0,m.jsxs)("span",{className:"button-with-loader",children:[(0,m.jsx)("span",{className:"loader"}),(0,m.jsx)("span",{children:"Signing in..."})]}):(0,m.jsx)("span",{children:"Sign In"})}),u&&(0,m.jsxs)("div",{className:"auth-error",children:[(0,m.jsx)("div",{className:"error-icon",children:"\u2757"}),(0,m.jsx)("div",{className:"error-message",children:u})]})]}),(0,m.jsxs)("div",{className:"auth-switch",children:["Don't have an account?"," ",(0,m.jsx)("button",{className:"text-button",onClick:n,children:"Sign Up"})]})]}),j&&(0,m.jsx)(B,{userId:S,username:k,onVerify:async(e,n)=>{try{f(!0);const a=await H.A.api.verifyTwoFactor(S,e,n);if(!a.success)throw new Error(a.error||"2FA verification failed");const i=await H.A.api.completeTwoFactorLogin(S);if(!i.success||!i.user||!i.token)throw new Error("Failed to complete login after 2FA verification");console.log("Login Component - 2FA successful, completing login"),s(i.user,i.token,c),t(i.user,i.token)}catch(u){throw console.error("2FA verification error:",u),u}finally{f(!1)}},onCancel:()=>{N(!1),C(null),E(""),h(null)},loading:p})]})};const q=new class{constructor(){this.pendingVerifications=new Map,this.verifiedEmails=new Set}async sendVerificationEmail(e,t,n){try{const a=this.generateVerificationCode(),s=this.generateVerificationId(),i=new Date(Date.now()+9e5);return this.pendingVerifications.set(s,{email:e,username:t,password:n,verificationCode:a,expiresAt:i,attempts:0,maxAttempts:3}),console.log("\ud83d\udce7 Verification email sent to ".concat(e)),console.log("\ud83d\udd10 Verification code: ".concat(a)),"undefined"!==typeof window&&"localhost"===window.location.hostname&&this.showDevelopmentNotification(e,a),{success:!0,verificationId:s,message:"Verification email sent successfully",expiresAt:i}}catch(a){throw console.error("Error sending verification email:",a),new Error("Failed to send verification email")}}async verifyEmailCode(e,t){try{const n=this.pendingVerifications.get(e);if(!n)throw new Error("Invalid verification ID");if(new Date>n.expiresAt)throw this.pendingVerifications.delete(e),new Error("Verification code has expired");if(n.attempts>=n.maxAttempts)throw this.pendingVerifications.delete(e),new Error("Maximum verification attempts exceeded");if(n.attempts++,n.verificationCode!==t)throw new Error("Invalid verification code. ".concat(n.maxAttempts-n.attempts," attempts remaining."));this.verifiedEmails.add(n.email);const a={email:n.email,username:n.username,password:n.password};return this.pendingVerifications.delete(e),{success:!0,message:"Email verified successfully",userData:a}}catch(n){throw console.error("Email verification error:",n),n}}async resendVerificationEmail(e){try{const t=this.pendingVerifications.get(e);if(!t)throw new Error("Invalid verification ID");return t.verificationCode=this.generateVerificationCode(),t.expiresAt=new Date(Date.now()+9e5),t.attempts=0,console.log("\ud83d\udce7 Verification email resent to ".concat(t.email)),console.log("\ud83d\udd10 New verification code: ".concat(t.verificationCode)),"undefined"!==typeof window&&"localhost"===window.location.hostname&&this.showDevelopmentNotification(t.email,t.verificationCode),{success:!0,message:"Verification email resent successfully",expiresAt:t.expiresAt}}catch(t){throw console.error("Error resending verification email:",t),t}}isEmailVerified(e){return this.verifiedEmails.has(e)}cleanup(){const e=new Date;for(const[t,n]of this.pendingVerifications.entries())e>n.expiresAt&&this.pendingVerifications.delete(t)}generateVerificationCode(){return Math.floor(1e5+9e5*Math.random()).toString()}generateVerificationId(){return"verify_"+Date.now()+"_"+Math.random().toString(36).substr(2,9)}showDevelopmentNotification(e,t){if("undefined"!==typeof window){const n=document.createElement("div");n.style.cssText="\n        position: fixed;\n        top: 20px;\n        right: 20px;\n        background: #4ade80;\n        color: white;\n        padding: 16px;\n        border-radius: 8px;\n        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\n        z-index: 10000;\n        max-width: 300px;\n        font-family: system-ui;\n      ",n.innerHTML='\n        <div style="font-weight: 600; margin-bottom: 8px;">\ud83d\udce7 Verification Email Sent</div>\n        <div style="font-size: 14px; margin-bottom: 8px;">To: '.concat(e,'</div>\n        <div style="font-size: 14px; margin-bottom: 8px;">Code: <strong>').concat(t,'</strong></div>\n        <div style="font-size: 12px; opacity: 0.9;">This notification only appears in development</div>\n      '),document.body.appendChild(n),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n)},1e4)}}};setInterval(()=>{q.cleanup()},3e5);const G=q,W=e=>{let{isOpen:t,onClose:n,verificationId:s,email:i,onVerificationSuccess:o}=e;const[r,l]=(0,a.useState)(""),[c,d]=(0,a.useState)(!1),[u,h]=(0,a.useState)(""),[p,f]=(0,a.useState)(900),[g,v]=(0,a.useState)(0);(0,a.useEffect)(()=>{if(!t||p<=0)return;const e=setInterval(()=>{f(t=>t<=1?(clearInterval(e),0):t-1)},1e3);return()=>clearInterval(e)},[t,p]),(0,a.useEffect)(()=>{if(g<=0)return;const e=setInterval(()=>{v(t=>t<=1?(clearInterval(e),0):t-1)},1e3);return()=>clearInterval(e)},[g]);return t?(0,m.jsx)("div",{className:"email-verification-overlay",children:(0,m.jsxs)("div",{className:"email-verification-modal",children:[(0,m.jsxs)("div",{className:"email-verification-header",children:[(0,m.jsx)("h3",{children:"\ud83d\udce7 Verify Your Email"}),(0,m.jsx)("button",{type:"button",className:"email-verification-close",onClick:n,disabled:c,children:"\xd7"})]}),(0,m.jsxs)("div",{className:"email-verification-content",children:[(0,m.jsx)("p",{className:"email-verification-message",children:"We've sent a 6-digit verification code to:"}),(0,m.jsx)("p",{className:"email-verification-email",children:i}),p>0?(0,m.jsxs)("p",{className:"email-verification-timer",children:["Code expires in: ",(0,m.jsx)("span",{className:"timer-highlight",children:(e=>{const t=Math.floor(e/60),n=e%60;return"".concat(t,":").concat(n.toString().padStart(2,"0"))})(p)})]}):(0,m.jsx)("p",{className:"email-verification-expired",children:"\u26a0\ufe0f Verification code has expired. Please resend to get a new code."}),(0,m.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),r.trim()){d(!0),h("");try{const e=await G.verifyEmailCode(s,r.trim());e.success&&(o(e.userData),n())}catch(u){console.error("Verification error:",u),h(u.message||"Invalid verification code")}finally{d(!1)}}else h("Please enter the verification code")},className:"email-verification-form",children:[(0,m.jsxs)("div",{className:"verification-code-input-container",children:[(0,m.jsx)("label",{htmlFor:"verificationCode",className:"verification-code-label",children:"Enter Verification Code"}),(0,m.jsx)("input",{type:"text",id:"verificationCode",value:r,onChange:e=>{const t=e.target.value.replace(/\D/g,"");t.length<=6&&(l(t),h(""))},placeholder:"000000",className:"verification-code-input",maxLength:"6",disabled:c||p<=0,autoFocus:!0,autoComplete:"off"})]}),u&&(0,m.jsxs)("div",{className:"email-verification-error",children:["\u26a0\ufe0f ",u]}),(0,m.jsxs)("div",{className:"email-verification-actions",children:[(0,m.jsx)("button",{type:"submit",className:"verify-button",disabled:c||!r||6!==r.length||p<=0,children:c?"Verifying...":"Verify Email"}),(0,m.jsx)("button",{type:"button",className:"resend-button",onClick:async()=>{if(!(g>0)){d(!0),h("");try{await G.resendVerificationEmail(s),v(60),f(900),l("")}catch(u){console.error("Resend error:",u),h(u.message||"Failed to resend verification email")}finally{d(!1)}}},disabled:c||g>0,children:g>0?"Resend in ".concat(g,"s"):"Resend Code"})]})]}),(0,m.jsxs)("div",{className:"email-verification-help",children:[(0,m.jsx)("p",{children:"\ud83d\udcf1 Check your email inbox and spam folder"}),(0,m.jsx)("p",{children:"\ud83d\udd04 The verification code is valid for 15 minutes"}),(0,m.jsx)("p",{children:"\ud83d\udca1 Didn't receive the email? Try resending or check your email address"})]})]})]})}):null},K=e=>{let{onRegisterSuccess:t,switchToLogin:n}=e;const[s,i]=(0,a.useState)(""),[o,r]=(0,a.useState)(""),[l,c]=(0,a.useState)(""),[d,u]=(0,a.useState)(""),[h,p]=(0,a.useState)(null),[f,g]=(0,a.useState)(!1),[v,y]=(0,a.useState)(!1),[b,x]=(0,a.useState)(!1),[w,j]=(0,a.useState)(!1),[N,S]=(0,a.useState)({}),[C,k]=(0,a.useState)("checking"),[E,A]=(0,a.useState)(!1),[P,T]=(0,a.useState)(null),[L,M]=(0,a.useState)(!1),[I,O]=(0,a.useState)({score:0,feedback:[]}),_=(0,a.useRef)(null);(0,a.useEffect)(()=>{_.current&&_.current.focus(),(0,U.$n)().then(e=>{e?(console.log("API server is online"),k("online")):(console.log("API server appears to be offline"),p("Server connection failed. Please try again later."),k("offline"))})},[]),(0,a.useEffect)(()=>{if(o){const e=D(o);O(e)}else O({score:0,feedback:[]})},[o]);const D=e=>{let t=0;const n=[];return e.length>=8?t+=1:n.push("Use at least 8 characters"),/[a-z]/.test(e)?t+=1:n.push("Include lowercase letters"),/[A-Z]/.test(e)?t+=1:n.push("Include uppercase letters"),/\d/.test(e)?t+=1:n.push("Include numbers"),/[^\w\s]/.test(e)?t+=1:n.push("Include special characters"),{score:t,feedback:n}};return(0,m.jsxs)("div",{className:"login-container",children:[(0,m.jsxs)("div",{className:"auth-form",children:[(0,m.jsxs)("div",{className:"elegant-header",children:[(0,m.jsxs)("div",{className:"brand-section",children:[(0,m.jsx)("div",{className:"brand-icon",children:(0,m.jsx)("span",{className:"brand-emoji",children:"\u2728"})}),(0,m.jsxs)("div",{className:"brand-content",children:[(0,m.jsx)("h2",{className:"brand-title",children:"Create Account"}),(0,m.jsx)("p",{className:"brand-subtitle",children:"Join the conversation and get started"})]})]}),(0,m.jsx)("div",{className:"decorative-line"})]}),"checking"!==C&&(0,m.jsxs)("div",{className:"server-status ".concat(C),children:[(0,m.jsx)("div",{className:"status-indicator"}),(0,m.jsx)("div",{className:"status-text",children:"online"===C?"Server Online":"Server Offline - Demo Mode"})]}),(0,m.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),(()=>{j(!0);const e={};return s.trim()?s.length<3?e.username="Username must be at least 3 characters":s.length>20?e.username="Username must be less than 20 characters":/^[a-zA-Z0-9_]+$/.test(s)?/^\d/.test(s)&&(e.username="Username cannot start with a number"):e.username="Username can only contain letters, numbers and underscore":e.username="Username is required",d.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(d)?d.length>254&&(e.email="Email address is too long"):e.email="Please enter a valid email address":e.email="Email is required",o?o.length<8?e.password="Password must be at least 8 characters":I.score<3&&(e.password="Password is too weak. Please strengthen it."):e.password="Password is required",l?o!==l&&(e.confirmPassword="Passwords do not match"):e.confirmPassword="Please confirm your password",S(e),0===Object.keys(e).length})())if(g(!0),p(null),E)setTimeout(()=>{console.log("Using demo mode registration");const e={id:Date.now(),username:s,email:d},n="offline-token-"+Date.now().toString().slice(-6);U.authService.saveUserSession(e,n,!0),t(e,n),g(!1)},1e3);else try{console.log("Register Component - Starting email verification for:",{username:s,email:d});const e=await G.sendVerificationEmail(d,s,o);e.success&&(T({verificationId:e.verificationId,email:d,expiresAt:e.expiresAt}),M(!0))}catch(n){console.error("Register Component - Email verification error:",n),p(n.message||"Failed to send verification email. Please try again.")}finally{g(!1)}},children:[(0,m.jsxs)("div",{className:"form-group",children:[(0,m.jsx)("label",{htmlFor:"username",children:"Username"}),(0,m.jsxs)("div",{className:"input-wrapper",children:[(0,m.jsx)("input",{id:"username",type:"text",value:s,onChange:e=>i(e.target.value),onBlur:()=>j(!0),ref:_,required:!0,placeholder:"Choose a username",className:w&&N.username?"error-input":""}),s&&(0,m.jsx)("button",{type:"button",className:"clear-input",onClick:()=>i(""),"aria-label":"Clear username",children:"\u2715"})]}),w&&N.username&&(0,m.jsx)("div",{className:"field-error",children:N.username})]}),(0,m.jsxs)("div",{className:"form-group",children:[(0,m.jsx)("label",{htmlFor:"email",children:"Email"}),(0,m.jsxs)("div",{className:"input-wrapper",children:[(0,m.jsx)("input",{id:"email",type:"email",value:d,onChange:e=>u(e.target.value),onBlur:()=>j(!0),required:!0,placeholder:"Your email address",className:w&&N.email?"error-input":""}),d&&(0,m.jsx)("button",{type:"button",className:"clear-input",onClick:()=>u(""),"aria-label":"Clear email",children:"\u2715"})]}),w&&N.email&&(0,m.jsx)("div",{className:"field-error",children:N.email})]}),(0,m.jsxs)("div",{className:"form-group",children:[(0,m.jsx)("label",{htmlFor:"password",children:"Password"}),(0,m.jsxs)("div",{className:"input-wrapper",children:[(0,m.jsx)("input",{id:"password",type:v?"text":"password",value:o,onChange:e=>r(e.target.value),onBlur:()=>j(!0),required:!0,placeholder:"Choose a password",className:w&&N.password?"error-input":""}),(0,m.jsx)("button",{type:"button",className:"toggle-password",onClick:()=>y(!v),"aria-label":v?"Hide password":"Show password",children:v?"\ud83d\udc41\ufe0f":"\ud83d\udc41\ufe0f\u200d\ud83d\udde8\ufe0f"})]}),w&&N.password&&(0,m.jsx)("div",{className:"field-error",children:N.password})]}),(0,m.jsxs)("div",{className:"form-group",children:[(0,m.jsx)("label",{htmlFor:"confirmPassword",children:"Confirm Password"}),(0,m.jsxs)("div",{className:"input-wrapper",children:[(0,m.jsx)("input",{id:"confirmPassword",type:b?"text":"password",value:l,onChange:e=>c(e.target.value),onBlur:()=>j(!0),required:!0,placeholder:"Confirm your password",className:w&&N.confirmPassword?"error-input":""}),(0,m.jsx)("button",{type:"button",className:"toggle-password",onClick:()=>x(!b),"aria-label":b?"Hide password":"Show password",children:b?"\ud83d\udc41\ufe0f":"\ud83d\udc41\ufe0f\u200d\ud83d\udde8\ufe0f"})]}),w&&N.confirmPassword&&(0,m.jsx)("div",{className:"field-error",children:N.confirmPassword})]}),(0,m.jsx)("button",{type:"submit",className:"auth-button",disabled:f,children:f?(0,m.jsxs)("span",{className:"button-with-loader",children:[(0,m.jsx)("span",{className:"loader"}),(0,m.jsx)("span",{children:"Creating account..."})]}):(0,m.jsx)("span",{children:"Sign Up"})}),h&&(0,m.jsxs)("div",{className:"auth-error",children:[(0,m.jsx)("div",{className:"error-icon",children:"\u2757"}),(0,m.jsx)("div",{className:"error-message",children:h})]})]}),(0,m.jsxs)("div",{className:"auth-switch",children:["Already have an account?"," ",(0,m.jsx)("button",{className:"text-button",onClick:n,children:"Log In"})]}),(0,m.jsx)("div",{className:"demo-mode-switch",children:(0,m.jsxs)("label",{className:"checkbox-container",children:[(0,m.jsx)("input",{type:"checkbox",checked:E,onChange:e=>A(e.target.checked)}),(0,m.jsx)("span",{className:"checkmark"}),"Use Demo Mode ",E&&"(Account will be stored locally)"]})})]}),P&&(0,m.jsx)(W,{isOpen:L,onClose:()=>{M(!1),T(null)},verificationId:P.verificationId,email:P.email,onVerificationSuccess:async e=>{try{g(!0);const n=await U.authService.register(e.username,e.email,e.password);if(!(n&&n.user&&n.token))throw new Error("Registration failed after email verification");M(!1),t(n.user,n.token)}catch(n){console.error("Register Component - Registration completion error:",n),p(n.message||"Failed to complete registration. Please try again."),M(!1)}finally{g(!1)}}})]})},Q=e=>{let{size:t="medium",dark:n=!1,message:a}=e;const s="loading-spinner ".concat(t," ").concat(n?"dark":"light");return(0,m.jsxs)("div",{className:"loading-container",children:[(0,m.jsxs)("div",{className:s,children:[(0,m.jsx)("div",{className:"spinner-ring"}),(0,m.jsx)("div",{className:"spinner-ring"}),(0,m.jsx)("div",{className:"spinner-ring"}),(0,m.jsx)("div",{className:"spinner-ring"})]}),a&&(0,m.jsx)("p",{className:"loading-message",children:a})]})},J=e=>{let{darkMode:t=!1,appVersion:n="1.0.0",onComplete:s}=e;const[o,r]=(0,a.useState)(0),[l,c]=(0,a.useState)("Initializing..."),[d,u]=(0,a.useState)(!1),[h,p]=(0,a.useState)(!1),[f,g]=(0,a.useState)(!1),[v,y]=(0,a.useState)([]),b=((0,a.useRef)(null),(0,a.useRef)(null)),x=(0,a.useMemo)(()=>[{progress:10,text:"Initializing QuibiChat..."},{progress:25,text:"Loading components..."},{progress:40,text:"Setting up connection..."},{progress:60,text:"Preparing interface..."},{progress:80,text:"Almost ready..."},{progress:95,text:"Finalizing setup..."},{progress:100,text:"Welcome to QuibiChat!"}],[]);(0,a.useEffect)(()=>{(()=>{const e=[];for(let t=0;t<50;t++)e.push({id:t,x:Math.random()*window.innerWidth,y:Math.random()*window.innerHeight,vx:2*(Math.random()-.5),vy:2*(Math.random()-.5),size:3*Math.random()+1,opacity:.5*Math.random()+.2,hue:60*Math.random()+200});y(e)})()},[]),(0,a.useEffect)(()=>{const e=()=>{y(e=>e.map(e=>{let t=e.x+e.vx,n=e.y+e.vy;return t<0&&(t=window.innerWidth),t>window.innerWidth&&(t=0),n<0&&(n=window.innerHeight),n>window.innerHeight&&(n=0),(0,i.A)((0,i.A)({},e),{},{x:t,y:n,opacity:Math.max(.1,Math.min(.8,e.opacity+.02*(Math.random()-.5)))})})),b.current=requestAnimationFrame(e)};return b.current=requestAnimationFrame(e),()=>{b.current&&cancelAnimationFrame(b.current)}},[]),(0,a.useEffect)(()=>{let e=0;const t=setInterval(()=>{if(e<x.length){const t=x[e];r(t.progress),c(t.text),e++}else clearInterval(t),s&&setTimeout(s,1e3)},600);return()=>clearInterval(t)},[s,x]),(0,a.useEffect)(()=>{const e=[setTimeout(()=>u(!0),300),setTimeout(()=>p(!0),900),setTimeout(()=>g(!0),1500)];return()=>e.forEach(clearTimeout)},[]);return(0,m.jsxs)("div",{className:"dynamic-splash-screen ".concat(t?"dark":"light"),children:[(0,m.jsx)("div",{className:"animated-background"}),(0,m.jsx)("div",{className:"background-shapes",children:(()=>{const e=[];for(let t=0;t<8;t++)e.push((0,m.jsx)("div",{className:"floating-shape shape-".concat(t+1),style:{"--delay":"".concat(.5*t,"s"),"--duration":"".concat(8+2*t,"s")}},t));return e})()}),(0,m.jsx)("div",{className:"particles-container",children:v.map(e=>(0,m.jsx)("div",{className:"particle",style:{left:"".concat(e.x,"px"),top:"".concat(e.y,"px"),width:"".concat(e.size,"px"),height:"".concat(e.size,"px"),opacity:e.opacity,background:"hsl(".concat(e.hue,", 70%, 60%)")}},e.id))}),(0,m.jsxs)("div",{className:"splash-content",children:[(0,m.jsx)("div",{className:"splash-logo ".concat(d?"show":""),children:(0,m.jsxs)("div",{className:"logo-container",children:[(0,m.jsxs)("svg",{width:"120",height:"120",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"splash-logo-svg",children:[(0,m.jsxs)("defs",{children:[(0,m.jsxs)("linearGradient",{id:"logoGradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[(0,m.jsx)("stop",{offset:"0%",stopColor:"#4f46e5"}),(0,m.jsx)("stop",{offset:"50%",stopColor:"#7c3aed"}),(0,m.jsx)("stop",{offset:"100%",stopColor:"#0ea5e9"})]}),(0,m.jsxs)("filter",{id:"glow",children:[(0,m.jsx)("feGaussianBlur",{stdDeviation:"3",result:"coloredBlur"}),(0,m.jsxs)("feMerge",{children:[(0,m.jsx)("feMergeNode",{in:"coloredBlur"}),(0,m.jsx)("feMergeNode",{in:"SourceGraphic"})]})]})]}),(0,m.jsx)("path",{d:"M20 2H4C2.9 2 2 2.9 2 4V22L6 18H20C21.1 18 22 17.1 22 16V4C22 2.9 21.1 2 20 2ZM20 16H5.17L4.58 16.59L4 17.17V4H20V16Z",fill:"url(#logoGradient)",filter:"url(#glow)",className:"logo-path-1"}),(0,m.jsx)("path",{d:"M12 15L16 11L12 7L10.59 8.41L13.17 11L10.59 13.59L12 15Z",fill:"url(#logoGradient)",filter:"url(#glow)",className:"logo-path-2"}),(0,m.jsx)("path",{d:"M6 11H9V13H6V11Z",fill:"url(#logoGradient)",filter:"url(#glow)",className:"logo-path-3"})]}),(0,m.jsx)("div",{className:"logo-ring ring-1"}),(0,m.jsx)("div",{className:"logo-ring ring-2"}),(0,m.jsx)("div",{className:"logo-ring ring-3"})]})}),(0,m.jsxs)("h1",{className:"splash-title ".concat(h?"show":""),children:[(0,m.jsx)("span",{className:"title-letter",style:{"--delay":"0.1s"},children:"Q"}),(0,m.jsx)("span",{className:"title-letter",style:{"--delay":"0.2s"},children:"u"}),(0,m.jsx)("span",{className:"title-letter",style:{"--delay":"0.3s"},children:"i"}),(0,m.jsx)("span",{className:"title-letter",style:{"--delay":"0.4s"},children:"b"}),(0,m.jsx)("span",{className:"title-letter",style:{"--delay":"0.5s"},children:"i"}),(0,m.jsx)("span",{className:"title-letter",style:{"--delay":"0.6s"},children:"C"}),(0,m.jsx)("span",{className:"title-letter",style:{"--delay":"0.7s"},children:"h"}),(0,m.jsx)("span",{className:"title-letter",style:{"--delay":"0.8s"},children:"a"}),(0,m.jsx)("span",{className:"title-letter",style:{"--delay":"0.9s"},children:"t"})]}),(0,m.jsxs)("div",{className:"splash-tagline ".concat(f?"show":""),children:[(0,m.jsx)("span",{className:"tagline-word",style:{"--delay":"0.1s"},children:"Professional"}),(0,m.jsx)("span",{className:"tagline-word",style:{"--delay":"0.3s"},children:"Communication"}),(0,m.jsx)("span",{className:"tagline-word",style:{"--delay":"0.5s"},children:"Platform"})]}),(0,m.jsxs)("div",{className:"loading-section",children:[(0,m.jsxs)("div",{className:"progress-container",children:[(0,m.jsxs)("div",{className:"progress-bar",children:[(0,m.jsx)("div",{className:"progress-fill",style:{width:"".concat(o,"%")}}),(0,m.jsx)("div",{className:"progress-glow",style:{left:"".concat(o,"%")}})]}),(0,m.jsxs)("div",{className:"progress-text",children:[o,"%"]})]}),(0,m.jsx)("div",{className:"loading-text",children:l}),(0,m.jsx)("div",{className:"pulse-indicator",children:(0,m.jsxs)("div",{className:"pulse-dot",children:[(0,m.jsx)("div",{className:"pulse-ring"}),(0,m.jsx)("div",{className:"pulse-ring"}),(0,m.jsx)("div",{className:"pulse-ring"})]})})]}),(0,m.jsxs)("div",{className:"splash-version",children:[(0,m.jsx)("span",{className:"version-label",children:"Version"}),(0,m.jsxs)("span",{className:"version-number",children:["v",n]})]})]}),(0,m.jsx)("div",{className:"corner-decoration top-left"}),(0,m.jsx)("div",{className:"corner-decoration top-right"}),(0,m.jsx)("div",{className:"corner-decoration bottom-left"}),(0,m.jsx)("div",{className:"corner-decoration bottom-right"}),(0,m.jsxs)("div",{className:"loading-dots-corner",children:[(0,m.jsx)("div",{className:"dot"}),(0,m.jsx)("div",{className:"dot"}),(0,m.jsx)("div",{className:"dot"})]})]})};class Y extends a.Component{constructor(e){super(e),this.handleRetry=()=>{this.setState({hasError:!1,error:null,errorInfo:null})},this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,t){console.error("Error caught by ErrorBoundary:",e,t),this.setState({error:e,errorInfo:t})}render(){var e;return this.state.hasError?(0,m.jsx)("div",{className:"error-boundary",children:(0,m.jsxs)("div",{className:"error-container",children:[(0,m.jsx)("div",{className:"error-icon",children:(0,m.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,m.jsx)("path",{d:"M12 22C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10-4.477 10-10 10zm-1-7v2h2v-2h-2zm0-8v6h2V7h-2z",fill:"currentColor"})})}),(0,m.jsx)("h2",{className:"error-title",children:"Something went wrong"}),(0,m.jsx)("p",{className:"error-message",children:"We're sorry, but there was a problem loading this part of the application."}),this.props.showDetails&&this.state.error&&(0,m.jsxs)("details",{className:"error-details",children:[(0,m.jsx)("summary",{children:"Error details"}),(0,m.jsx)("pre",{children:this.state.error.toString()}),(0,m.jsx)("pre",{children:null===(e=this.state.errorInfo)||void 0===e?void 0:e.componentStack})]}),(0,m.jsxs)("div",{className:"error-actions",children:[(0,m.jsx)("button",{className:"retry-button",onClick:this.handleRetry,children:"Try Again"}),(0,m.jsx)("button",{className:"report-button",onClick:()=>window.location.reload(),children:"Reload Page"})]})]})}):this.props.children}}const $=Y;const Z=new class{constructor(){this.registration=null,this.isUpdateAvailable=!1,this.callbacks={onUpdate:[],onInstall:[],onActivate:[],onOffline:[],onOnline:[],onCacheUpdate:[]},this.init()}async init(){if("serviceWorker"in navigator)return this.register("/sw.js");console.log("\ud83d\udcf1 Service Worker not supported")}async register(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/sw.js";if("serviceWorker"in navigator)try{return this.registration=await navigator.serviceWorker.register(e),console.log("\u2705 Service Worker registered:",this.registration),this.registration.addEventListener("updatefound",()=>{this.handleUpdate()}),navigator.serviceWorker.addEventListener("controllerchange",()=>{window.location.reload()}),navigator.serviceWorker.controller&&(console.log("\ud83d\udcf1 Service Worker already controlling the page"),this.triggerCallbacks("onActivate",this.registration)),navigator.serviceWorker.addEventListener("message",e=>{this.handleMessage(e.data)}),this.setupOnlineOfflineListeners(),this.triggerCallbacks("onInstall",this.registration),this.registration}catch(t){throw console.error("\u274c Service Worker registration failed:",t),t}else console.log("\ud83d\udcf1 Service Worker not supported")}setupOnlineOfflineListeners(){window.addEventListener("online",()=>{console.log("\ud83c\udf10 Back online"),this.triggerCallbacks("onOnline"),this.syncWhenOnline()}),window.addEventListener("offline",()=>{console.log("\ud83d\udcf1 Gone offline"),this.triggerCallbacks("onOffline")})}handleUpdate(){const e=this.registration.installing;e&&(this.isUpdateAvailable=!0,e.addEventListener("statechange",()=>{"installed"===e.state&&navigator.serviceWorker.controller&&(console.log("\ud83d\udd04 New version available"),this.triggerCallbacks("onUpdate",e))}))}handleMessage(e){switch(console.log("\ud83d\udce8 Message from SW:",e),e.type){case"CACHE_UPDATED":this.triggerCallbacks("onCacheUpdate",e.data);break;case"BACKGROUND_SYNC":console.log("\ud83d\udd04 Background sync completed:",e.data);break;default:console.log("\ud83d\udce8 Unknown message type:",e.type)}}async registerBackgroundSync(e){if(this.registration&&this.registration.sync)try{await this.registration.sync.register(e),console.log("\u2705 Background sync registered: ".concat(e))}catch(t){console.error("\u274c Background sync registration failed:",t)}else console.log("\ud83d\udcf1 Background Sync not supported")}async syncWhenOnline(){navigator.onLine&&this.registration&&(await this.registerBackgroundSync("profile-sync"),await this.registerBackgroundSync("message-sync"))}async updateServiceWorker(){this.registration&&this.registration.waiting&&this.registration.waiting.postMessage({type:"SKIP_WAITING"})}async clearCache(){if("caches"in window)try{const e=await caches.keys();await Promise.all(e.map(e=>caches.delete(e))),console.log("\ud83d\uddd1\ufe0f All caches cleared")}catch(e){console.error("\u274c Failed to clear caches:",e)}}async sendMessage(e){navigator.serviceWorker.controller?navigator.serviceWorker.controller.postMessage(e):console.log("\ud83d\udcf1 No service worker controller")}on(e,t){this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(t)}off(e,t){if(this.callbacks[e]){const n=this.callbacks[e].indexOf(t);n>-1&&this.callbacks[e].splice(n,1)}}triggerCallbacks(e,t){this.callbacks[e]&&this.callbacks[e].forEach(e=>e(t))}getStatus(){return{supported:"serviceWorker"in navigator,registered:!!this.registration,updateAvailable:this.isUpdateAvailable,online:navigator.onLine,controller:!!navigator.serviceWorker.controller}}},ee=()=>{const[e,t]=(0,a.useState)(navigator.onLine),[n,s]=(0,a.useState)("checking"),[i,o]=(0,a.useState)({}),[r,l]=(0,a.useState)(!1),[c,d]=(0,a.useState)(!1);(0,a.useEffect)(()=>{const e=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",e),window.addEventListener("offline",n),Z.on("onInstall",()=>{s("installed"),console.log("\u2705 PWA: Service Worker installed")}),Z.on("onActivate",()=>{s("active"),console.log("\u2705 PWA: Service Worker activated")}),Z.on("onUpdate",()=>{l(!0),console.log("\ud83d\udd04 PWA: Update available")}),Z.on("onCacheUpdate",e=>{o(e),console.log("\ud83d\udcbe PWA: Cache updated",e)}),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(()=>{s("ready")}),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",n)}},[]);return null};var te=n(465);class ne{constructor(){this.isOnline=navigator.onLine,this.backendConnected=!1,this.lastHealthCheck=null,this.healthCheckInterval=null,this.reconnectAttempts=0,this.maxReconnectAttempts=10,this.reconnectDelay=1e3,this.listeners=[],this.healthChecksEnabled=!1,this.init()}init(){window.addEventListener("online",this.handleOnline.bind(this)),window.addEventListener("offline",this.handleOffline.bind(this)),console.log("\u26a0\ufe0f Health checks temporarily disabled to fix rate limiting"),this.backendConnected=!0,this.notifyListeners()}addListener(e){return this.listeners.push(e),()=>{this.listeners=this.listeners.filter(t=>t!==e)}}notifyListeners(){this.listeners.forEach(e=>{try{e({isOnline:this.isOnline,backendConnected:this.backendConnected,reconnectAttempts:this.reconnectAttempts,lastHealthCheck:this.lastHealthCheck})}catch(t){console.error("Error notifying connection listener:",t)}})}handleOnline(){console.log("\ud83c\udf10 Network connection restored"),this.isOnline=!0,this.backendConnected=!0,this.notifyListeners()}handleOffline(){console.log("\ud83d\udd0c Network connection lost"),this.isOnline=!1,this.backendConnected=!1,this.stopHealthCheck(),this.notifyListeners()}async checkBackendHealth(){if(!this.healthChecksEnabled)return console.log("\u26a0\ufe0f Health checks are temporarily disabled"),this.backendConnected=!0,!0;if(!this.isOnline)return!1;try{const e=new AbortController,t=setTimeout(()=>e.abort(),5e3),n=await fetch("http://localhost:5001/api/ping",{method:"GET",signal:e.signal,headers:{"Cache-Control":"no-cache"}});if(clearTimeout(t),n.ok)return await n.json(),this.lastHealthCheck=new Date,this.backendConnected||(console.log("\u2705 Backend connection restored"),this.backendConnected=!0,this.reconnectAttempts=0,this.reconnectDelay=1e3),!0;throw new Error("HTTP ".concat(n.status))}catch(e){return(this.backendConnected||0===this.reconnectAttempts)&&console.log("\u274c Backend connection lost:",e.message),this.backendConnected=!1,this.scheduleReconnect(),!1}}scheduleReconnect(){if(this.reconnectAttempts>=this.maxReconnectAttempts)return void console.log("\ud83d\udd04 Max reconnection attempts reached (".concat(this.maxReconnectAttempts,"). Will retry when network status changes."));this.reconnectAttempts++;const e=1e3*Math.random(),t=Math.min(this.reconnectDelay*Math.pow(2,this.reconnectAttempts-1)+e,3e4);console.log("\ud83d\udd04 Scheduling reconnection attempt ".concat(this.reconnectAttempts,"/").concat(this.maxReconnectAttempts," in ").concat(Math.round(t),"ms")),setTimeout(()=>{this.isOnline&&this.checkBackendHealth().then(()=>this.notifyListeners())},t)}startHealthCheck(){this.healthCheckInterval&&clearInterval(this.healthCheckInterval),this.checkBackendHealth().then(()=>this.notifyListeners()),this.healthCheckInterval=setInterval(async()=>{await this.checkBackendHealth(),this.notifyListeners()},12e4)}stopHealthCheck(){this.healthCheckInterval&&(clearInterval(this.healthCheckInterval),this.healthCheckInterval=null)}getStatus(){return{isOnline:this.isOnline,backendConnected:this.backendConnected,reconnectAttempts:this.reconnectAttempts,maxReconnectAttempts:this.maxReconnectAttempts,lastHealthCheck:this.lastHealthCheck,isReconnecting:this.reconnectAttempts>0&&this.reconnectAttempts<this.maxReconnectAttempts}}async forceCheck(){console.log("\ud83d\udd0d Forcing connection check..."),await this.checkBackendHealth(),this.notifyListeners()}resetReconnectAttempts(){console.log("\ud83d\udd04 Resetting reconnection attempts"),this.reconnectAttempts=0,this.reconnectDelay=1e3}destroy(){window.removeEventListener("online",this.handleOnline.bind(this)),window.removeEventListener("offline",this.handleOffline.bind(this)),this.stopHealthCheck(),this.listeners=[]}}let ae=null;const se=()=>(ae||(ae=new ne),ae),ie=e=>{let{compact:t=!1}=e;const{isOnline:n,backendConnected:s,reconnectAttempts:o,maxReconnectAttempts:r,isReconnecting:l,lastHealthCheck:c,forceCheck:d,resetReconnect:u}=(()=>{const[e,t]=(0,a.useState)(()=>se().getStatus());(0,a.useEffect)(()=>{const e=se(),n=e.addListener(t);return t(e.getStatus()),n},[]);const n=(0,a.useCallback)(()=>{se().forceCheck()},[]),s=(0,a.useCallback)(()=>{se().resetReconnectAttempts(),se().forceCheck()},[]);return(0,i.A)((0,i.A)({},e),{},{forceCheck:n,resetReconnect:s})})(),h=()=>n?!s&&l?"#f59e0b":s?"#10b981":"#ef4444":"#ef4444",p=()=>n?!s&&l?"\ud83d\udd04":s?"\u2705":"\u274c":"\ud83d\udd0c";return t?(0,m.jsxs)("div",{className:"connection-status-compact",style:{color:h()},children:[(0,m.jsx)("span",{className:"status-icon",children:p()}),(0,m.jsx)("span",{className:"status-text",children:n?!s&&l?"Reconnecting... (".concat(o,"/").concat(r,")"):s?"Connected":"Server Offline":"No Internet"})]}):(0,m.jsxs)("div",{className:"connection-status-card",children:[(0,m.jsxs)("div",{className:"status-header",children:[(0,m.jsx)("span",{className:"status-icon",style:{color:h()},children:p()}),(0,m.jsx)("span",{className:"status-title",children:"Connection Status"})]}),(0,m.jsxs)("div",{className:"status-details",children:[(0,m.jsxs)("div",{className:"status-item",children:[(0,m.jsx)("span",{className:"status-label",children:"Internet:"}),(0,m.jsx)("span",{className:"status-value ".concat(n?"online":"offline"),children:n?"Connected":"Disconnected"})]}),(0,m.jsxs)("div",{className:"status-item",children:[(0,m.jsx)("span",{className:"status-label",children:"Backend:"}),(0,m.jsx)("span",{className:"status-value ".concat(s?"connected":"disconnected"),children:s?"Connected":"Disconnected"})]}),l&&(0,m.jsxs)("div",{className:"status-item",children:[(0,m.jsx)("span",{className:"status-label",children:"Reconnecting:"}),(0,m.jsxs)("span",{className:"status-value reconnecting",children:["Attempt ",o,"/",r]})]}),c&&(0,m.jsxs)("div",{className:"status-item",children:[(0,m.jsx)("span",{className:"status-label",children:"Last Check:"}),(0,m.jsx)("span",{className:"status-value",children:c.toLocaleTimeString()})]})]}),(0,m.jsxs)("div",{className:"status-actions",children:[(0,m.jsx)("button",{className:"status-button primary",onClick:d,disabled:l,children:"Check Now"}),o>0&&(0,m.jsx)("button",{className:"status-button secondary",onClick:u,children:"Reset & Retry"})]})]})};const oe=new class{constructor(){this.checks=new Map,this.initialized=!1,this.startupTime=null,this.initializationSteps=[]}async initialize(){this.startupTime=Date.now(),console.log("\ud83d\ude80 Starting frontend initialization...");try{await this.validateEnvironment(),await this.validateDependencies(),await this.validateLocalStorage(),await this.validateAPIConnectivity(),await this.validateAuthentication(),await this.validateEssentialServices(),this.initialized=!0;const e=Date.now()-this.startupTime;return console.log("\u2705 Frontend initialization completed in ".concat(e,"ms")),console.log("\ud83c\udfaf Application is ready to launch"),{success:!0,initializationTime:e,steps:this.initializationSteps}}catch(e){return console.error("\u274c Frontend initialization failed:",e.message),console.error("\ud83d\udccb Completed steps:",this.initializationSteps.map(e=>e.name).join(", ")),{success:!1,error:e.message,initializationTime:Date.now()-this.startupTime,steps:this.initializationSteps}}}async validateEnvironment(){const e="Environment Validation";console.log("\ud83c\udf10 ".concat(e,"..."));try{const t={localStorage:"undefined"!==typeof Storage,sessionStorage:"undefined"!==typeof sessionStorage,fetch:"undefined"!==typeof fetch,webRTC:!(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia),notifications:"Notification"in window,serviceWorker:"serviceWorker"in navigator,webSocket:"undefined"!==typeof WebSocket},n=Object.entries(t).filter(e=>{let[,t]=e;return!t}).map(e=>{let[t]=e;return t});n.length>0&&console.warn("\u26a0\ufe0f Some browser capabilities are missing:",n.join(", "));const a={width:window.innerWidth,height:window.innerHeight,pixelRatio:window.devicePixelRatio||1,isMobile:window.innerWidth<=768};this.addStep(e,"success","Browser ready, viewport: ".concat(a.width,"x").concat(a.height,", mobile: ").concat(a.isMobile))}catch(t){throw this.addStep(e,"failed",t.message),t}}async validateDependencies(){const e="Dependencies Check";console.log("\ud83d\udce6 ".concat(e,"..."));try{window.React,0;const t={JSON:"undefined"!==typeof JSON,Promise:"undefined"!==typeof Promise,Map:"undefined"!==typeof Map,Set:"undefined"!==typeof Set,"Array.from":"function"===typeof Array.from,"Object.assign":"function"===typeof Object.assign},n=Object.entries(t).filter(e=>{let[,t]=e;return!t}).map(e=>{let[t]=e;return t});if(n.length>0)throw new Error("Missing essential JavaScript features: ".concat(n.join(", ")));this.addStep(e,"success","All essential dependencies validated")}catch(t){throw this.addStep(e,"failed",t.message),t}}async validateLocalStorage(){const e="Local Storage Check";console.log("\ud83d\udcbe ".concat(e,"..."));try{const t="healthcheck_test",n="test_value_"+Date.now();localStorage.setItem(t,n);const a=localStorage.getItem(t);if(localStorage.removeItem(t),a!==n)throw new Error("localStorage read/write test failed");sessionStorage.setItem(t,n);const s=sessionStorage.getItem(t);if(sessionStorage.removeItem(t),s!==n)throw new Error("sessionStorage read/write test failed");const i=null!==localStorage.getItem("currentUser");this.addStep(e,"success","Storage validated, existing session: ".concat(i?"found":"none"))}catch(t){throw this.addStep(e,"failed",t.message),t}}async validateAPIConnectivity(){const e="API Connectivity";console.log("\ud83d\udd17 ".concat(e,"..."));try{const n={NODE_ENV:"production",PUBLIC_URL:"/quibish",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_ALLOWED_FILE_TYPES:"image/jpeg,image/png,image/gif,image/webp,video/mp4,video/webm,audio/mp3,audio/wav",REACT_APP_API_BASE_URL:"https://api.quibish.com/api",REACT_APP_API_TIMEOUT:"5000",REACT_APP_AVATAR_SERVICE:"https://ui-avatars.com/api",REACT_APP_CONNECTION_TIMEOUT:"8000",REACT_APP_DEFAULT_LANGUAGE:"en",REACT_APP_DEFAULT_THEME:"auto",REACT_APP_ENABLE_ANIMATIONS:"true",REACT_APP_ENABLE_DEMO_MODE:"false",REACT_APP_ENABLE_DEV_TOOLS:"false",REACT_APP_ENABLE_EXPERIMENTAL:"false",REACT_APP_ENABLE_LOGGING:"false",REACT_APP_ENABLE_PERFORMANCE_MONITORING:"true",REACT_APP_ENABLE_REACT_DEVTOOLS:"false",REACT_APP_ENABLE_SOUNDS:"false",REACT_APP_GRAPHQL_URL:"https://graphql.quibish.com/graphql",REACT_APP_MAX_FILE_SIZE:"10",REACT_APP_PLACEHOLDER_SERVICE:"https://images.unsplash.com",REACT_APP_SEARCH_DEBOUNCE:"300",REACT_APP_SEARCH_MAX_RESULTS:"50",REACT_APP_SESSION_TIMEOUT:"30",REACT_APP_TOKEN_STORAGE_KEY:"quibish_prod_token",REACT_APP_UPLOAD_ENDPOINT:"/api/upload",REACT_APP_WS_RECONNECT_ATTEMPTS:"3",REACT_APP_WS_RECONNECT_DELAY:"3000",REACT_APP_WS_URL:"wss://ws.quibish.com/ws"}.REACT_APP_BACKEND_URL||"http://localhost:5001",a=new AbortController,s=setTimeout(()=>a.abort(),3e3),i=await fetch("".concat(n,"/api/health"),{method:"GET",headers:{"Content-Type":"application/json"},signal:a.signal});if(clearTimeout(s),!i.ok)throw new Error("API health check failed with status: ".concat(i.status));const o=await i.json();try{const e=await fetch("".concat(n,"/api/startup"));if(e.ok){(await e.json()).initialized||console.warn("\u26a0\ufe0f Backend is still initializing, some features may be limited")}}catch(t){console.warn("\u26a0\ufe0f Could not check backend startup status:",t.message)}this.addStep(e,"success","API connected to ".concat(n,", health: ").concat(o.status||"ok"))}catch(n){"AbortError"===n.name||n.message.includes("Failed to fetch")||console.warn("\u26a0\ufe0f API connectivity issues detected:",n.message),this.addStep(e,"warning","Backend offline - running in standalone mode")}}async validateAuthentication(){const e="Authentication System";console.log("\ud83d\udd10 ".concat(e,"..."));try{const n=localStorage.getItem("authToken"),a=localStorage.getItem("currentUser");if(n&&a)try{const t={NODE_ENV:"production",PUBLIC_URL:"/quibish",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_ALLOWED_FILE_TYPES:"image/jpeg,image/png,image/gif,image/webp,video/mp4,video/webm,audio/mp3,audio/wav",REACT_APP_API_BASE_URL:"https://api.quibish.com/api",REACT_APP_API_TIMEOUT:"5000",REACT_APP_AVATAR_SERVICE:"https://ui-avatars.com/api",REACT_APP_CONNECTION_TIMEOUT:"8000",REACT_APP_DEFAULT_LANGUAGE:"en",REACT_APP_DEFAULT_THEME:"auto",REACT_APP_ENABLE_ANIMATIONS:"true",REACT_APP_ENABLE_DEMO_MODE:"false",REACT_APP_ENABLE_DEV_TOOLS:"false",REACT_APP_ENABLE_EXPERIMENTAL:"false",REACT_APP_ENABLE_LOGGING:"false",REACT_APP_ENABLE_PERFORMANCE_MONITORING:"true",REACT_APP_ENABLE_REACT_DEVTOOLS:"false",REACT_APP_ENABLE_SOUNDS:"false",REACT_APP_GRAPHQL_URL:"https://graphql.quibish.com/graphql",REACT_APP_MAX_FILE_SIZE:"10",REACT_APP_PLACEHOLDER_SERVICE:"https://images.unsplash.com",REACT_APP_SEARCH_DEBOUNCE:"300",REACT_APP_SEARCH_MAX_RESULTS:"50",REACT_APP_SESSION_TIMEOUT:"30",REACT_APP_TOKEN_STORAGE_KEY:"quibish_prod_token",REACT_APP_UPLOAD_ENDPOINT:"/api/upload",REACT_APP_WS_RECONNECT_ATTEMPTS:"3",REACT_APP_WS_RECONNECT_DELAY:"3000",REACT_APP_WS_URL:"wss://ws.quibish.com/ws"}.REACT_APP_BACKEND_URL||"http://localhost:5001";(await fetch("".concat(t,"/api/auth/verify"),{method:"GET",headers:{Authorization:"Bearer ".concat(n),"Content-Type":"application/json"},signal:AbortSignal.timeout?AbortSignal.timeout(3e3):void 0})).ok?this.addStep(e,"success","User authenticated with valid token"):(localStorage.removeItem("authToken"),localStorage.removeItem("currentUser"),this.addStep(e,"warning","Invalid token cleared, user needs to login"))}catch(t){this.addStep(e,"warning","Cannot verify token (offline), keeping for offline use")}else this.addStep(e,"success","No existing session, ready for login")}catch(n){throw this.addStep(e,"failed",n.message),n}}async validateEssentialServices(){const e="Essential Services";console.log("\ud83d\udee0\ufe0f ".concat(e,"..."));try{const n={voiceCalls:!1,fileUploads:!1,notifications:!1};if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia)try{n.voiceCalls=!0}catch(t){console.warn("\u26a0\ufe0f Voice call capabilities limited:",t.message)}window.File&&window.FileReader&&window.FileList&&window.Blob&&(n.fileUploads=!0),"Notification"in window&&(n.notifications=!0);const a=Object.entries(n).filter(e=>{let[,t]=e;return t}).map(e=>{let[t]=e;return t});this.addStep(e,"success","Services ready: ".concat(a.join(", ")||"basic functionality only"))}catch(t){throw this.addStep(e,"failed",t.message),t}}addStep(e,t,n){const a={name:e,status:t,message:n,timestamp:(new Date).toISOString(),duration:this.startupTime?Date.now()-this.startupTime:0};this.initializationSteps.push(a);const s="success"===t?"\u2705":"warning"===t?"\u26a0\ufe0f":"\u274c";console.log("  ".concat(s," ").concat(e,": ").concat(n))}isInitialized(){return this.initialized}getInitializationStatus(){return{initialized:this.initialized,steps:this.initializationSteps,startupTime:this.startupTime,totalDuration:this.startupTime?Date.now()-this.startupTime:0}}async runHealthCheck(){if(!this.initialized)throw new Error("Service not initialized. Call initialize() first.");const e={localStorage:!1,apiConnectivity:!1,authentication:!1};try{localStorage.setItem("healthcheck",Date.now().toString()),localStorage.removeItem("healthcheck"),e.localStorage=!0}catch(t){console.warn("localStorage health check failed:",t.message)}try{const t={NODE_ENV:"production",PUBLIC_URL:"/quibish",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_ALLOWED_FILE_TYPES:"image/jpeg,image/png,image/gif,image/webp,video/mp4,video/webm,audio/mp3,audio/wav",REACT_APP_API_BASE_URL:"https://api.quibish.com/api",REACT_APP_API_TIMEOUT:"5000",REACT_APP_AVATAR_SERVICE:"https://ui-avatars.com/api",REACT_APP_CONNECTION_TIMEOUT:"8000",REACT_APP_DEFAULT_LANGUAGE:"en",REACT_APP_DEFAULT_THEME:"auto",REACT_APP_ENABLE_ANIMATIONS:"true",REACT_APP_ENABLE_DEMO_MODE:"false",REACT_APP_ENABLE_DEV_TOOLS:"false",REACT_APP_ENABLE_EXPERIMENTAL:"false",REACT_APP_ENABLE_LOGGING:"false",REACT_APP_ENABLE_PERFORMANCE_MONITORING:"true",REACT_APP_ENABLE_REACT_DEVTOOLS:"false",REACT_APP_ENABLE_SOUNDS:"false",REACT_APP_GRAPHQL_URL:"https://graphql.quibish.com/graphql",REACT_APP_MAX_FILE_SIZE:"10",REACT_APP_PLACEHOLDER_SERVICE:"https://images.unsplash.com",REACT_APP_SEARCH_DEBOUNCE:"300",REACT_APP_SEARCH_MAX_RESULTS:"50",REACT_APP_SESSION_TIMEOUT:"30",REACT_APP_TOKEN_STORAGE_KEY:"quibish_prod_token",REACT_APP_UPLOAD_ENDPOINT:"/api/upload",REACT_APP_WS_RECONNECT_ATTEMPTS:"3",REACT_APP_WS_RECONNECT_DELAY:"3000",REACT_APP_WS_URL:"wss://ws.quibish.com/ws"}.REACT_APP_BACKEND_URL||"http://localhost:5001",n=await fetch("".concat(t,"/api/health"),{method:"GET",signal:AbortSignal.timeout?AbortSignal.timeout(2e3):void 0});e.apiConnectivity=n.ok}catch(t){console.warn("API health check failed:",t.message)}try{const t=localStorage.getItem("authToken");e.authentication=!!t}catch(t){console.warn("Authentication health check failed:",t.message)}return{timestamp:(new Date).toISOString(),overall:Object.values(e).every(e=>e)?"healthy":"degraded",checks:e}}};const re=new class{constructor(){this.shortcuts={"new-chat":this.handleNewChat.bind(this),"voice-call":this.handleVoiceCall.bind(this),"video-call":this.handleVideoCall.bind(this),"share-file":this.handleShareFile.bind(this),share:this.handleShareTarget.bind(this)},this.init()}init(){this.handleUrlParameters(),window.addEventListener("popstate",()=>{this.handleUrlParameters()}),this.setupFileHandling(),this.setupShareTarget(),console.log("\u2705 PWA Shortcut Service initialized")}handleUrlParameters(){const e=new URLSearchParams(window.location.search),t=e.get("action");t&&this.shortcuts[t]&&(console.log("\ud83d\ude80 Handling PWA shortcut: ".concat(t)),this.shortcuts[t](e))}handleNewChat(e){this.dispatchCustomEvent("pwa-new-chat",{source:"shortcut",timestamp:Date.now()})}handleVoiceCall(e){const t=e.get("contact");this.dispatchCustomEvent("pwa-voice-call",{source:"shortcut",contact:t,timestamp:Date.now()})}handleVideoCall(e){const t=e.get("contact");this.dispatchCustomEvent("pwa-video-call",{source:"shortcut",contact:t,timestamp:Date.now()})}handleShareFile(e){this.dispatchCustomEvent("pwa-share-file",{source:"shortcut",timestamp:Date.now()})}async handleShareTarget(e){try{const t=e.get("title")||"",n=e.get("text")||"",a=e.get("url")||"";if(e.get("file")){const t=e.get("file");return void this.handleSharedFiles([t])}const s={title:t,text:n,url:a,source:"share-target",timestamp:Date.now()};this.dispatchCustomEvent("pwa-share-received",s),console.log("\ud83d\udce4 Received shared content:",s)}catch(t){console.error("\u274c Failed to handle share target:",t)}}setupFileHandling(){window.addEventListener("DOMContentLoaded",()=>{"launchQueue"in window&&window.launchQueue.setConsumer(e=>{e.files&&e.files.length&&this.handleSharedFiles(e.files)})})}setupShareTarget(){"/"===window.location.pathname&&window.location.search.includes("action=share")&&this.handleShareTarget(new URLSearchParams(window.location.search))}async handleSharedFiles(e){try{const t=[];for(const n of e)if(n instanceof File)t.push({name:n.name,size:n.size,type:n.type,lastModified:n.lastModified,file:n});else if(window.FileSystemFileHandle&&n instanceof window.FileSystemFileHandle){const e=await n.getFile();t.push({name:e.name,size:e.size,type:e.type,lastModified:e.lastModified,file:e,handle:n})}this.dispatchCustomEvent("pwa-files-shared",{files:t,source:"file-handler",timestamp:Date.now()}),console.log("\ud83d\udcc1 Received shared files:",t)}catch(t){console.error("\u274c Failed to handle shared files:",t)}}dispatchCustomEvent(e,t){const n=new CustomEvent(e,{detail:t,bubbles:!0,cancelable:!0});window.dispatchEvent(n)}addDynamicShortcut(e,t,n,a){"shortcuts"in navigator&&navigator.shortcuts.add({id:e,name:t,shortName:t.substring(0,10),description:"Quick access to ".concat(t),url:n,icons:[{src:a||"/logo192.png",sizes:"192x192",type:"image/png"}]}).then(()=>{console.log("\u2705 Added dynamic shortcut: ".concat(t))}).catch(e=>{console.error("\u274c Failed to add dynamic shortcut:",e)})}updateShortcuts(e){if(Array.isArray(e)&&"shortcuts"in navigator)try{navigator.shortcuts.clear(),e.slice(0,4).forEach((e,t)=>{this.addDynamicShortcut("contact-".concat(e.id),"Chat with ".concat(e.name),"/?action=new-chat&contact=".concat(e.id),e.avatar)})}catch(t){console.error("\u274c Failed to update shortcuts:",t)}}handleProtocolUrl(e){try{const t=new URL(e),n=t.searchParams.get("action"),a=Object.fromEntries(t.searchParams);this.dispatchCustomEvent("pwa-protocol-handled",{action:n,data:a,source:"protocol",timestamp:Date.now()}),console.log("\ud83d\udd17 Handled protocol URL:",{action:n,data:a})}catch(t){console.error("\u274c Failed to handle protocol URL:",t)}}async promptInstall(){if(window.deferredPrompt)try{window.deferredPrompt.prompt();const{outcome:e}=await window.deferredPrompt.userChoice;return console.log("\ud83d\udcf1 PWA install prompt outcome: ".concat(e)),"accepted"===e&&this.dispatchCustomEvent("pwa-installed",{source:"prompt",timestamp:Date.now()}),window.deferredPrompt=null,"accepted"===e}catch(e){return console.error("\u274c Failed to prompt install:",e),!1}return!1}isInstallable(){return!!window.deferredPrompt}isInstalled(){return window.matchMedia("(display-mode: standalone)").matches||!0===window.navigator.standalone}getCapabilities(){return{serviceWorker:"serviceWorker"in navigator,pushNotifications:"PushManager"in window,fileSystemAccess:"showOpenFilePicker"in window,shareTarget:"share"in navigator,shortcuts:"shortcuts"in navigator,protocolHandlers:"registerProtocolHandler"in navigator,badging:"setAppBadge"in navigator,webShare:"share"in navigator,contactPicker:"contacts"in navigator,installed:this.isInstalled(),installable:this.isInstallable()}}},le=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=new URL(window.location.origin);n.searchParams.set("action",e),Object.entries(t).forEach(e=>{let[t,a]=e;n.searchParams.set(t,a)}),window.history.pushState({},"",n.toString()),re.handleUrlParameters()},ce=re;const de=new class{constructor(){this.memoryThresholds={critical:52428800,warning:104857600,optimal:209715200},this.memoryUsage={jsHeapSizeLimit:0,totalJSHeapSize:0,usedJSHeapSize:0},this.memoryObserver=null,this.monitoringInterval=null,this.lastCleanup=Date.now(),this.cleanupInterval=3e5,this.cacheManagers=new Map,this.eventListeners=new Map,this.init()}init(){this.setupMemoryMonitoring(),this.setupMemoryObserver(),this.setupLowMemoryHandling(),this.setupPeriodicCleanup(),console.log("\ud83e\udde0 Memory Management Service initialized"),this.logMemoryStatus()}setupMemoryMonitoring(){this.isPerformanceMemorySupported()?(this.monitoringInterval=setInterval(()=>{this.updateMemoryUsage(),this.checkMemoryThresholds()},3e4),this.updateMemoryUsage()):console.warn("Performance memory API not supported")}setupMemoryObserver(){if("memory"in performance&&"addEventListener"in performance.memory)try{this.memoryObserver=new PerformanceObserver(e=>{e.getEntries().forEach(e=>{"memory"===e.entryType&&this.handleMemoryPressure(e)})}),this.memoryObserver.observe({entryTypes:["memory"]})}catch(e){console.warn("Memory observer not supported:",e)}}setupLowMemoryHandling(){"onmemorywarning"in window&&window.addEventListener("memorywarning",()=>{this.handleLowMemory()}),document.addEventListener("visibilitychange",()=>{document.hidden&&this.performBackgroundCleanup()}),window.addEventListener("beforeunload",()=>{this.performFinalCleanup()})}setupPeriodicCleanup(){setInterval(()=>{const e=Date.now();e-this.lastCleanup>this.cleanupInterval&&(this.performPeriodicCleanup(),this.lastCleanup=e)},6e4)}updateMemoryUsage(){if(this.isPerformanceMemorySupported())try{const e=performance.memory;this.memoryUsage={jsHeapSizeLimit:e.jsHeapSizeLimit,totalJSHeapSize:e.totalJSHeapSize,usedJSHeapSize:e.usedJSHeapSize}}catch(e){console.warn("Failed to update memory usage:",e)}}checkMemoryThresholds(){const e=this.memoryUsage.usedJSHeapSize;e>this.memoryThresholds.critical?this.handleCriticalMemory():e>this.memoryThresholds.warning&&this.handleMemoryWarning()}handleMemoryPressure(e){console.log("\ud83d\udea8 Memory pressure detected:",e),this.performAggressiveCleanup(),this.notifyMemoryPressure(e.level||"high")}handleLowMemory(){console.log("\ud83d\udea8 Low memory warning"),this.clearAllCaches(),this.removeNonCriticalListeners(),this.forceGarbageCollection(),this.notifyLowMemory()}handleCriticalMemory(){console.log("\ud83d\udd34 Critical memory usage detected"),this.handleLowMemory(),this.reduceFunctionality(),this.clearLargeAssets()}handleMemoryWarning(){console.log("\ud83d\udfe1 Memory warning detected"),this.performGentleCleanup(),this.optimizeOperations()}performPeriodicCleanup(){console.log("\ud83e\uddf9 Performing periodic memory cleanup"),this.cleanupExpiredCaches(),this.cleanupEventListeners(),this.clearPerformanceEntries(),this.cleanupComponentReferences()}performBackgroundCleanup(){console.log("\ud83c\udf19 Performing background cleanup"),this.clearNonEssentialCaches(),this.pauseNonCriticalOperations(),this.cleanupDOMReferences()}performFinalCleanup(){console.log("\ud83d\udc4b Performing final cleanup"),this.clearAllTimers(),this.removeAllEventListeners(),this.clearAllCaches(),this.disconnectObservers()}performGentleCleanup(){this.cleanupLRUCaches(),this.clearTemporaryData(),this.optimizeImageCaches()}performAggressiveCleanup(){this.performGentleCleanup(),this.clearComponentCaches(),this.clearDOMReferences(),this.clearServiceWorkerCaches()}registerCacheManager(e,t){this.cacheManagers.set(e,t)}cleanupExpiredCaches(){this.cacheManagers.forEach((e,t)=>{try{e.cleanup&&e.cleanup()}catch(n){console.warn("Failed to cleanup cache ".concat(t,":"),n)}})}clearAllCaches(){this.cacheManagers.forEach((e,t)=>{try{e.clear&&e.clear()}catch(n){console.warn("Failed to clear cache ".concat(t,":"),n)}}),"caches"in window&&caches.keys().then(e=>{e.forEach(e=>{(e.includes("temp")||e.includes("dynamic"))&&caches.delete(e)})})}clearLargeAssets(){document.querySelectorAll("img").forEach(e=>{(e.naturalWidth>1920||e.naturalHeight>1080)&&(e.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMSIgaGVpZ2h0PSIxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjwvc3ZnPg==")});document.querySelectorAll("video").forEach(e=>{e.paused||e.pause(),e.removeAttribute("src"),e.load()})}reduceFunctionality(){document.documentElement.style.setProperty("--animation-duration","0s"),this.notifyComponents("disable-auto-refresh"),this.notifyComponents("reduce-update-frequency")}forceGarbageCollection(){if(window.gc)try{window.gc(),console.log("\u267b\ufe0f Forced garbage collection")}catch(e){console.warn("Failed to force garbage collection:",e)}}cleanupEventListeners(){this.eventListeners.forEach((e,t)=>{e.forEach(e=>{let{event:n,handler:a,options:s}=e;try{t.removeEventListener(n,a,s)}catch(i){console.warn("Failed to remove event listener:",i)}})}),this.eventListeners.clear()}removeNonCriticalListeners(){document.querySelectorAll("[data-hover]").forEach(e=>{e.removeAttribute("data-hover")}),this.notifyComponents("disable-tooltips")}clearPerformanceEntries(){"performance"in window&&"clearMarks"in performance&&(performance.clearMarks(),performance.clearMeasures())}optimizeOperations(){this.notifyComponents("reduce-animation-rate"),this.notifyComponents("increase-debounce"),this.notifyComponents("reduce-polling")}notifyComponents(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=new CustomEvent("memory-".concat(e),{detail:(0,i.A)((0,i.A)({},t),{},{memoryUsage:this.memoryUsage})});document.dispatchEvent(n)}notifyMemoryPressure(e){this.notifyComponents("pressure",{level:e})}notifyLowMemory(){this.notifyComponents("low",{usedMemory:this.memoryUsage.usedJSHeapSize,threshold:this.memoryThresholds.warning})}getMemoryUsagePercentage(){const{usedJSHeapSize:e,jsHeapSizeLimit:t}=this.memoryUsage;return t>0?e/t*100:0}getMemoryStatus(){const e=this.memoryUsage.usedJSHeapSize;return e>this.memoryThresholds.critical?"critical":e>this.memoryThresholds.warning?"warning":"optimal"}logMemoryStatus(){if(!this.isPerformanceMemorySupported())return;const{usedJSHeapSize:e,jsHeapSizeLimit:t}=this.memoryUsage,n=(e/1024/1024).toFixed(2),a=(t/1024/1024).toFixed(2),s=this.getMemoryUsagePercentage().toFixed(1);console.log("\ud83d\udcbe Memory: ".concat(n,"MB / ").concat(a,"MB (").concat(s,"%)"))}isPerformanceMemorySupported(){return"performance"in window&&"memory"in performance}getMemoryMetrics(){return(0,i.A)((0,i.A)({},this.memoryUsage),{},{usagePercentage:this.getMemoryUsagePercentage(),status:this.getMemoryStatus(),thresholds:this.memoryThresholds,isSupported:this.isPerformanceMemorySupported()})}setMemoryThresholds(e){this.memoryThresholds=(0,i.A)((0,i.A)({},this.memoryThresholds),e)}addMemoryPressureListener(e){return document.addEventListener("memory-pressure",e),()=>document.removeEventListener("memory-pressure",e)}addLowMemoryListener(e){return document.addEventListener("memory-low",e),()=>document.removeEventListener("memory-low",e)}destroy(){this.monitoringInterval&&(clearInterval(this.monitoringInterval),this.monitoringInterval=null),this.memoryObserver&&(this.memoryObserver.disconnect(),this.memoryObserver=null),this.performFinalCleanup()}cleanupLRUCaches(){}clearTemporaryData(){}optimizeImageCaches(){}clearComponentCaches(){}clearDOMReferences(){}clearServiceWorkerCaches(){}clearNonEssentialCaches(){}pauseNonCriticalOperations(){}cleanupDOMReferences(){}clearAllTimers(){}removeAllEventListeners(){}disconnectObservers(){}cleanupComponentReferences(){}};class ue extends a.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){console.error("Error in lazy component ".concat(this.props.componentName,":"),e,t)}render(){return this.state.hasError?this.props.fallback||(0,m.jsxs)("div",{className:"lazy-error-container",children:[(0,m.jsx)("div",{className:"lazy-error-icon",children:"\u26a0\ufe0f"}),(0,m.jsx)("div",{className:"lazy-error-text",children:"Component failed to load"}),(0,m.jsx)("button",{className:"lazy-retry-button",onClick:()=>this.setState({hasError:!1,error:null}),children:"Retry"})]}):this.props.children}}"undefined"!==typeof document&&function(){const e=document.createElement("style");e.textContent="\n/* Lazy Loading Styles */\n.lazy-loading-container {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: 40px 20px;\n  min-height: 200px;\n}\n\n.lazy-loading-spinner {\n  margin-bottom: 16px;\n}\n\n.spinner {\n  width: 32px;\n  height: 32px;\n  border: 3px solid #f3f4f6;\n  border-top-color: #3b82f6;\n  border-radius: 50%;\n  animation: spin 1s linear infinite;\n}\n\n.lazy-loading-text {\n  color: #6b7280;\n  font-size: 14px;\n  text-align: center;\n}\n\n.lazy-error-container {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: 40px 20px;\n  min-height: 200px;\n  text-align: center;\n}\n\n.lazy-error-icon {\n  font-size: 48px;\n  margin-bottom: 16px;\n}\n\n.lazy-error-text {\n  color: #dc2626;\n  font-size: 16px;\n  margin-bottom: 20px;\n  max-width: 300px;\n}\n\n.lazy-retry-button {\n  background: #3b82f6;\n  color: white;\n  border: none;\n  border-radius: 8px;\n  padding: 12px 24px;\n  font-size: 14px;\n  font-weight: 600;\n  cursor: pointer;\n  transition: background-color 0.2s ease;\n}\n\n.lazy-retry-button:hover {\n  background: #2563eb;\n}\n\n.lazy-component-target {\n  min-height: 1px;\n  display: block;\n}\n\n@keyframes spin {\n  from { transform: rotate(0deg); }\n  to { transform: rotate(360deg); }\n}\n\n/* Mobile optimizations */\n@media (max-width: 768px) {\n  .lazy-loading-container,\n  .lazy-error-container {\n    min-height: 150px;\n    padding: 30px 15px;\n  }\n  \n  .lazy-error-icon {\n    font-size: 36px;\n  }\n  \n  .lazy-error-text {\n    font-size: 14px;\n  }\n  \n  .lazy-retry-button {\n    padding: 10px 20px;\n    font-size: 13px;\n  }\n}\n\n/* Reduced motion */\n@media (prefers-reduced-motion: reduce) {\n  .spinner {\n    animation: none;\n    border-top-color: #6b7280;\n  }\n}\n\n/* Dark mode support */\n@media (prefers-color-scheme: dark) {\n  .lazy-loading-text {\n    color: #9ca3af;\n  }\n  \n  .spinner {\n    border-color: #374151;\n    border-top-color: #60a5fa;\n  }\n}\n",document.head.appendChild(e)}();const he=new class{constructor(){this.loadedComponents=new Map,this.loadingPromises=new Map,this.intersectionObserver=null,this.componentCache=new Map,this.preloadQueue=[],this.init()}init(){this.setupComponentObserver(),this.preloadCriticalComponents(),console.log("\u26a1 Lazy Loading Service initialized")}setupComponentObserver(){if(!("IntersectionObserver"in window))return void console.warn("IntersectionObserver not supported, falling back to immediate loading");this.intersectionObserver=new IntersectionObserver(e=>{e.forEach(e=>{if(e.isIntersecting){const t=e.target.dataset.lazyComponent;t&&(this.loadComponent(t),this.intersectionObserver.unobserve(e.target))}})},{root:null,rootMargin:"100px",threshold:.1})}createLazyComponent(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{fallback:s=this.createLoadingComponent(e),errorFallback:o=this.createErrorComponent(e),preload:r=!1,retryable:l=!0}=n;if(!this.componentCache.has(e)){const n=(0,a.lazy)(()=>this.withRetry(t,l));this.componentCache.set(e,n)}const c=this.componentCache.get(e);return r&&this.preloadComponent(e,t),t=>(0,m.jsx)(a.Suspense,{fallback:s,children:(0,m.jsx)(ue,{fallback:o,componentName:e,children:(0,m.jsx)(c,(0,i.A)({},t))})})}withRetry(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3;return async()=>{let a;for(let i=0;i<=n;i++)try{return await e()}catch(s){if(a=s,!t||i===n)throw s;const e=1e3*Math.pow(2,i)+1e3*Math.random();await new Promise(t=>setTimeout(t,e)),console.warn("Component load failed, retrying (".concat(i+1,"/").concat(n+1,")..."))}throw a}}async preloadComponent(e,t){if(this.loadedComponents.has(e))return this.loadedComponents.get(e);if(this.loadingPromises.has(e))return this.loadingPromises.get(e);const n=this.withRetry(t)().then(t=>(this.loadedComponents.set(e,t),this.loadingPromises.delete(e),t)).catch(t=>{throw this.loadingPromises.delete(e),console.error("Failed to preload component ".concat(e,":"),t),t});return this.loadingPromises.set(e,n),n}async loadComponent(e){const t=this.getComponentImportFunction(e);if(t)return this.preloadComponent(e,t)}getComponentImportFunction(e){return{VideoCall:()=>Promise.resolve().then(n.bind(n,629)),MessageActions:()=>Promise.resolve().then(n.bind(n,17)),GifPicker:()=>Promise.resolve().then(n.bind(n,261)),UserProfileModal:()=>Promise.resolve().then(n.bind(n,523)),EditProfileModal:()=>Promise.resolve().then(n.bind(n,630)),SettingsModal:()=>Promise.resolve().then(n.bind(n,52)),FeedbackModal:()=>Promise.resolve().then(n.bind(n,932)),HelpModal:()=>Promise.resolve().then(n.bind(n,831)),NewChatModal:()=>Promise.resolve().then(n.bind(n,69)),NativeCamera:()=>Promise.resolve().then(n.bind(n,503)),NativeContactPicker:()=>Promise.resolve().then(n.bind(n,446)),InstallPrompt:()=>Promise.resolve().then(n.bind(n,465)),EnhancedMediaViewer:()=>n.e(81).then(n.bind(n,81))}[e]}preloadCriticalComponents(){const e=["MessageActions","UserProfileModal","SettingsModal"];setTimeout(()=>{e.forEach(e=>{const t=this.getComponentImportFunction(e);t&&this.preloadComponent(e,t)})},2e3)}createLoadingComponent(e){return(0,m.jsxs)("div",{className:"lazy-loading-container",children:[(0,m.jsx)("div",{className:"lazy-loading-spinner",children:(0,m.jsx)("div",{className:"spinner"})}),(0,m.jsxs)("div",{className:"lazy-loading-text",children:["Loading ",e.replace(/([A-Z])/g," $1").trim(),"..."]})]})}createErrorComponent(e){return(0,m.jsxs)("div",{className:"lazy-error-container",children:[(0,m.jsx)("div",{className:"lazy-error-icon",children:"\u26a0\ufe0f"}),(0,m.jsxs)("div",{className:"lazy-error-text",children:["Failed to load ",e.replace(/([A-Z])/g," $1").trim()]}),(0,m.jsx)("button",{className:"lazy-retry-button",onClick:()=>window.location.reload(),children:"Retry"})]})}createLazyTarget(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=document.createElement("div");return n.className="lazy-component-target",n.dataset.lazyComponent=e,t&&n.appendChild(t),this.intersectionObserver&&this.intersectionObserver.observe(n),n}getPerformanceMetrics(){return{loadedComponents:Array.from(this.loadedComponents.keys()),loadingComponents:Array.from(this.loadingPromises.keys()),cachedComponents:Array.from(this.componentCache.keys()),preloadQueueSize:this.preloadQueue.length}}smartPrefetch(e){this.predictNextComponents(e).forEach(e=>{if(!this.loadedComponents.has(e)&&!this.loadingPromises.has(e)){const t=this.getComponentImportFunction(e);t&&this.preloadComponent(e,t)}})}predictNextComponents(e){const t=[],n=e[e.length-1];if(!n)return t;switch(n.type){case"message_hover":t.push("MessageActions");break;case"profile_click":t.push("UserProfileModal","EditProfileModal");break;case"attachment_hover":t.push("NativeCamera","FileManager");break;case"video_call_button_hover":t.push("VideoCall");break;case"settings_hover":t.push("SettingsModal");break;case"search_focus":t.push("AdvancedSearch")}return t}cleanupUnusedComponents(){const e=this.getComponentUsage(),t=Date.now()-18e5;Object.entries(e).forEach(e=>{let[n,a]=e;a<t&&(this.componentCache.delete(n),this.loadedComponents.delete(n))})}getComponentUsage(){return JSON.parse(localStorage.getItem("componentUsage")||"{}")}updateComponentUsage(e){const t=this.getComponentUsage();t[e]=Date.now(),localStorage.setItem("componentUsage",JSON.stringify(t))}destroy(){this.intersectionObserver&&(this.intersectionObserver.disconnect(),this.intersectionObserver=null),this.loadedComponents.clear(),this.loadingPromises.clear(),this.componentCache.clear(),this.preloadQueue=[]}},me=()=>{const{isAuthenticated:e,user:t,loading:n,logout:s,updateUser:i}=(0,z.As)(),[o,r]=(0,a.useState)("login"),[l,c]=(0,a.useState)(()=>!sessionStorage.getItem("quibish-splash-seen")),[d,u]=(0,a.useState)(()=>{const e=localStorage.getItem("quibish-dark-mode");return!!e&&JSON.parse(e)}),[h,p]=(0,a.useState)(!1),[f,g]=(0,a.useState)(null),[v]=(0,a.useState)([{id:1,name:"Sarah Johnson",avatar:"https://ui-avatars.com/api/?name=Sarah+Johnson&background=8b5cf6&color=fff&size=40",lastMessage:"Hey! Are we still on for lunch today?",lastMessageTime:"2m",unreadCount:2,isOnline:!0,isPinned:!0,isMuted:!1,messageStatus:"delivered",timestamp:new Date(Date.now()-12e4)},{id:2,name:"Team Alpha",avatar:"https://ui-avatars.com/api/?name=Team+Alpha&background=10b981&color=fff&size=40",lastMessage:"Mike: The deployment went smoothly \ud83d\ude80",lastMessageTime:"15m",unreadCount:5,isOnline:!1,isPinned:!1,isMuted:!1,messageStatus:"read",timestamp:new Date(Date.now()-9e5)},{id:3,name:"Alex Chen",avatar:"https://ui-avatars.com/api/?name=Alex+Chen&background=f59e0b&color=fff&size=40",lastMessage:"Thanks for the code review!",lastMessageTime:"1h",unreadCount:0,isOnline:!0,isPinned:!1,isMuted:!0,messageStatus:"sent",timestamp:new Date(Date.now()-36e5)},{id:4,name:"Design Team",avatar:"https://ui-avatars.com/api/?name=Design+Team&background=ef4444&color=fff&size=40",lastMessage:"Lisa: New mockups are ready for review",lastMessageTime:"3h",unreadCount:1,isOnline:!1,isPinned:!0,isMuted:!1,messageStatus:"delivered",timestamp:new Date(Date.now()-108e5)},{id:5,name:"Mom",avatar:"https://ui-avatars.com/api/?name=Mom&background=ec4899&color=fff&size=40",lastMessage:"Don't forget to call grandma today! \u2764\ufe0f",lastMessageTime:"5h",unreadCount:0,isOnline:!1,isPinned:!1,isMuted:!1,messageStatus:"read",timestamp:new Date(Date.now()-18e6)}]),[y]=(0,a.useState)(v[0]);(0,a.useEffect)(()=>{e&&t&&!n?(console.log("App - User authenticated, setting view to home"),r("home")):e||n||(console.log("App - User not authenticated, ensuring login view"),"home"===o&&r("login"))},[e,t,n,o]),(0,a.useEffect)(()=>{if(t&&t.theme){const e="dark"===t.theme;u(e),localStorage.setItem("quibish-dark-mode",JSON.stringify(e))}},[null===t||void 0===t?void 0:t.theme]),(0,a.useEffect)(()=>{(async()=>{try{var e,t;if(console.log("\ud83d\ude80 Initializing Quibish Frontend..."),await oe.initialize(),console.log("\u26a1 Initializing performance services..."),de.registerCacheManager("lazy-components",he),de.addMemoryPressureListener(e=>{console.log("\ud83e\udde0 Memory pressure detected, optimizing performance"),he.cleanupUnusedComponents()}),"serviceWorker"in navigator)try{const e=await navigator.serviceWorker.register("/sw-advanced.js");console.log("\ud83d\udd27 Advanced Service Worker registered:",e)}catch(n){console.warn("Failed to register advanced service worker, using basic SW:",n)}const a=["/static/css/main.css","/static/js/main.js","/manifest.json"];null===(e=navigator.serviceWorker)||void 0===e||null===(t=e.controller)||void 0===t||t.postMessage({type:"PREFETCH_RESOURCES",payload:{urls:a}}),p(!0),console.log("\u2705 Frontend initialization completed successfully"),console.log("\ud83d\udcca Performance optimizations active")}catch(n){console.error("\u274c Frontend initialization failed:",n),g(n.message),p(!0)}})()},[]),(0,a.useEffect)(()=>{if(window.addEventListener("pwa-new-chat",t=>{console.log("\ud83d\udcf1 PWA: New chat shortcut triggered"),e&&r("home")}),window.addEventListener("pwa-voice-call",t=>{console.log("\ud83d\udcf1 PWA: Voice call shortcut triggered",t.detail),e&&(r("home"),le("voice-call",{initiated:"shortcut"}))}),window.addEventListener("pwa-video-call",t=>{console.log("\ud83d\udcf1 PWA: Video call shortcut triggered",t.detail),e&&(r("home"),le("video-call",{initiated:"shortcut"}))}),window.addEventListener("pwa-files-shared",t=>{if(console.log("\ud83d\udcc1 PWA: Files shared",t.detail),e){r("home");const{files:e}=t.detail;console.log("Processing shared files:",e)}}),window.addEventListener("pwa-share-received",t=>{if(console.log("\ud83d\udce4 PWA: Content shared",t.detail),e){r("home");const{title:e,text:n,url:a}=t.detail;console.log("Processing shared content:",{title:e,text:n,url:a})}}),window.addEventListener("pwa-installed",e=>{console.log("\ud83d\udcf1 PWA: App installed",e.detail)}),e&&v.length>0){const e=v.filter(e=>e.lastMessageTime).sort((e,t)=>new Date(t.timestamp)-new Date(e.timestamp)).slice(0,4).map(e=>({id:e.id,name:e.name,avatar:e.avatar}));ce.updateShortcuts(e)}},[e,v]),(0,a.useEffect)(()=>{localStorage.setItem("quibish-dark-mode",JSON.stringify(d)),document.documentElement.setAttribute("data-theme",d?"dark":"light"),d?document.body.classList.add("dark-theme"):document.body.classList.remove("dark-theme")},[d]);const b=()=>{c(!1),sessionStorage.setItem("quibish-splash-seen","true")};return n?(0,m.jsx)(Q,{size:"large",message:"Loading..."}):h?l?(0,m.jsx)(J,{darkMode:d,appVersion:"1.0.0",onComplete:b}):(0,m.jsxs)($,{children:[(0,m.jsx)("div",{className:"app smartphone-optimized ".concat(d?"dark-mode":""),children:(0,m.jsx)("div",{className:"app-content",children:e&&t&&!n?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(ie,{compact:!0}),(0,m.jsx)(X,{user:t,conversations:v,currentConversation:y,onLogout:()=>{s(),r("login")},darkMode:d,onToggleDarkMode:async()=>{const n=!d;if(u(n),e&&t)try{const e=n?"dark":"light",t=await fetch("http://localhost:5001/api/users/preferences",{method:"PUT",headers:{Authorization:"Bearer ".concat(localStorage.getItem("authToken")||sessionStorage.getItem("authToken")),"Content-Type":"application/json"},body:JSON.stringify({theme:e})});if(t.ok){const n=await t.json();n.success&&n.user&&i({theme:e})}}catch(a){console.error("Failed to save theme preference:",a)}}})]}):n?(0,m.jsx)(Q,{size:"large",message:"Signing you in..."}):(0,m.jsxs)("div",{className:"auth-container",children:["login"===o&&(0,m.jsx)(V,{onLogin:()=>{console.log("App - handleLogin called, waiting for auth state update")},switchToRegister:()=>{console.log("App - switchToRegister called"),r("register")}}),"register"===o&&(0,m.jsx)(K,{onRegisterSuccess:()=>{console.log("App - handleRegister called, redirecting to login"),r("login")},switchToLogin:()=>r("login")})]})})}),(0,m.jsx)(ee,{}),(0,m.jsx)(te.default,{})]}):(0,m.jsx)(Q,{size:"large",message:f?"Initialization failed: ".concat(f):"Initializing application..."})},pe=()=>(0,m.jsx)(z.OJ,{children:(0,m.jsx)(me,{})}),fe=e=>{e&&e instanceof Function&&n.e(206).then(n.bind(n,206)).then(t=>{let{getCLS:n,getFID:a,getFCP:s,getLCP:i,getTTFB:o}=t;n(e),a(e),s(e),i(e),o(e)})},ge=()=>{const e=.01*window.innerHeight;document.documentElement.style.setProperty("--vh","".concat(e,"px"))};ge(),window.addEventListener("resize",ge);window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark-theme"),Z.on("onUpdate",e=>{console.log("\ud83d\udd04 New app version available!"),window.confirm("A new version of Quibish is available. Update now?")&&Z.updateServiceWorker()}),Z.on("onOffline",()=>{console.log("\ud83d\udcf1 App is now offline"),document.body.classList.add("offline")}),Z.on("onOnline",()=>{console.log("\ud83c\udf10 App is back online"),document.body.classList.remove("offline")});s.createRoot(document.getElementById("root")).render((0,m.jsx)(a.StrictMode,{children:(0,m.jsx)(pe,{})})),fe(e=>{0}),"serviceWorker"in navigator&&window.addEventListener("load",()=>{console.log("\u2705 Service Worker initialization complete")})})();