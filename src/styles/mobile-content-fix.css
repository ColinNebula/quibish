/**
 * Mobile Content Visibility Fix
 * Prevents content from being cut off behind fixed mobile input bars
 */

/* Root viewport fixes for mobile */
@media (max-width: 768px) {
  /* Ensure app takes full height but accounts for mobile UI */
  html, body {
    height: 100vh;
    height: 100dvh; /* Dynamic viewport height for modern browsers */
    overflow: hidden;
  }
  
  /* Main app container adjustments */
  #root {
    height: 100%;
    display: flex;
    flex-direction: column;
  }
  
  /* Fix for message containers with fixed input bars */
  .pro-message-list.mobile-optimized {
    /* Account for mobile input bar height + safe area + padding */
    padding-bottom: calc(
      var(--input-height-mobile, 80px) + 
      var(--safe-area-inset-bottom, 20px) + 
      40px
    ) !important;
    
    /* Smooth scrolling behavior */
    scroll-behavior: smooth;
    scroll-padding-bottom: calc(var(--input-height-mobile, 80px) + 20px);
    
    /* Ensure content is scrollable */
    overflow-y: auto;
    -webkit-overflow-scrolling: touch;
  }
  
  /* Fixed input bar positioning */
  .mobile-input-bar.pro-chat-input-container {
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    z-index: 1000;
    
    /* Ensure it stays above content */
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    
    /* Prevent content from showing through */
    background: rgba(255, 255, 255, 0.95);
    border-top: 1px solid rgba(0, 0, 0, 0.1);
    
    /* Safe area padding */
    padding-bottom: calc(12px + var(--safe-area-inset-bottom, 0px));
  }
  
  /* Keyboard avoiding behavior */
  .keyboard-avoiding.keyboard-open {
    transform: translateY(-50px);
    transition: transform 0.3s ease-out;
  }
  
  /* Pull-to-refresh container adjustments */
  .pull-to-refresh {
    height: calc(100vh - var(--input-height-mobile, 80px) - 20px);
    height: calc(100dvh - var(--input-height-mobile, 80px) - 20px);
  }
}

/* Dark theme adjustments */
@media (max-width: 768px) and (prefers-color-scheme: dark) {
  .mobile-input-bar.pro-chat-input-container {
    background: rgba(30, 30, 30, 0.95);
    border-top-color: rgba(255, 255, 255, 0.1);
  }
}

/* Landscape orientation fixes */
@media (max-width: 768px) and (orientation: landscape) {
  .pro-message-list.mobile-optimized {
    padding-bottom: calc(var(--input-height-mobile, 60px) + 20px) !important;
  }
}

/* High DPI displays */
@media (max-width: 768px) and (-webkit-min-device-pixel-ratio: 2) {
  .mobile-input-bar.pro-chat-input-container {
    border-top-width: 0.5px;
  }
}