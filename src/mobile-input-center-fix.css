/* Mobile Input Container Centering Fix */
/* Ensures perfect centering of input area on smaller devices */

/* =================================================================== */
/* MOBILE INPUT CENTERING OVERRIDES */
/* =================================================================== */

@media (max-width: 768px) {
  /* Force input container to be full width and centered */
  .pro-chat-input-container,
  .message-input-container {
    position: fixed !important;
    bottom: 0 !important;
    left: 0 !important;
    right: 0 !important;
    width: 100vw !important;
    max-width: 100vw !important;
    min-width: 100vw !important;
    margin: 0 auto !important;
    padding: 16px !important;
    padding-bottom: max(16px, env(safe-area-inset-bottom)) !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    box-sizing: border-box !important;
    z-index: 1001 !important;
    overflow: hidden !important;
  }
  
  /* Center the input wrapper */
  .input-wrapper {
    width: 100% !important;
    max-width: calc(100vw - 32px) !important;
    margin: 0 auto !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    gap: 8px !important;
    padding: 0 !important;
    box-sizing: border-box !important;
  }
  
  /* Ensure message input takes appropriate space */
  .message-input {
    flex: 1 !important;
    min-width: 0 !important;
    max-width: none !important;
    margin: 0 !important;
  }
  
  /* Ensure buttons are properly sized */
  .input-btn,
  .send-button {
    flex-shrink: 0 !important;
  }
}

@media (max-width: 480px) {
  .pro-chat-input-container,
  .message-input-container {
    padding: 12px !important;
    padding-bottom: max(12px, env(safe-area-inset-bottom)) !important;
  }
  
  .input-wrapper {
    max-width: calc(100vw - 24px) !important;
    gap: 6px !important;
  }
}

@media (max-width: 400px) {
  .pro-chat-input-container,
  .message-input-container {
    padding: 10px !important;
    padding-bottom: max(10px, env(safe-area-inset-bottom)) !important;
  }
  
  .input-wrapper {
    max-width: calc(100vw - 20px) !important;
    gap: 4px !important;
  }
}

@media (max-width: 360px) {
  .pro-chat-input-container,
  .message-input-container {
    padding: 8px !important;
    padding-bottom: max(8px, env(safe-area-inset-bottom)) !important;
  }
  
  .input-wrapper {
    max-width: calc(100vw - 16px) !important;
    gap: 4px !important;
  }
}

/* =================================================================== */
/* SIDEBAR INTERACTION FIX */
/* =================================================================== */

@media (max-width: 768px) {
  /* When sidebar is collapsed on mobile, input should span full width */
  .pro-layout.sidebar-collapsed .pro-chat-input-container,
  .pro-layout.sidebar-collapsed .message-input-container,
  .sidebar-collapsed .pro-chat-input-container,
  .sidebar-collapsed .message-input-container {
    left: 0 !important;
    right: 0 !important;
    width: 100vw !important;
    max-width: 100vw !important;
  }
  
  /* When sidebar is visible on mobile (if any), still center the input */
  .pro-layout:not(.sidebar-collapsed) .pro-chat-input-container,
  .pro-layout:not(.sidebar-collapsed) .message-input-container {
    left: 0 !important;
    right: 0 !important;
    width: 100vw !important;
    max-width: 100vw !important;
  }
}

/* =================================================================== */
/* DARK MODE COMPATIBILITY */
/* =================================================================== */

@media (max-width: 768px) {
  .dark-mode .pro-chat-input-container,
  .dark-mode .message-input-container,
  .dark-theme .pro-chat-input-container,
  .dark-theme .message-input-container {
    background: rgba(20, 20, 30, 0.98) !important;
    border-top: 1px solid rgba(255, 255, 255, 0.08) !important;
  }
}

/* =================================================================== */
/* LANDSCAPE ORIENTATION FIX */
/* =================================================================== */

@media (max-width: 768px) and (orientation: landscape) {
  .pro-chat-input-container,
  .message-input-container {
    padding: 8px 16px !important;
    padding-bottom: max(8px, env(safe-area-inset-bottom)) !important;
  }
  
  .input-wrapper {
    max-width: calc(100vw - 32px) !important;
  }
}

/* =================================================================== */
/* SAFE AREA HANDLING */
/* =================================================================== */

@media (max-width: 768px) {
  .pro-chat-input-container,
  .message-input-container {
    /* Enhanced safe area support */
    padding-left: max(16px, env(safe-area-inset-left)) !important;
    padding-right: max(16px, env(safe-area-inset-right)) !important;
    padding-bottom: max(16px, env(safe-area-inset-bottom)) !important;
  }
}

@media (max-width: 480px) {
  .pro-chat-input-container,
  .message-input-container {
    padding-left: max(12px, env(safe-area-inset-left)) !important;
    padding-right: max(12px, env(safe-area-inset-right)) !important;
    padding-bottom: max(12px, env(safe-area-inset-bottom)) !important;
  }
}